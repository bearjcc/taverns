"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_src_lib_game-engine_systems_AchievementSystem_js"],{

/***/ "(app-pages-browser)/./src/lib/game-engine/systems/AchievementSystem.js":
/*!**********************************************************!*\
  !*** ./src/lib/game-engine/systems/AchievementSystem.js ***!
  \**********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AchievementSystem: () => (/* binding */ AchievementSystem)\n/* harmony export */ });\n/**\r\n * Achievement System\r\n * \r\n * Manages achievements, tracks progress, and handles achievement unlocking.\r\n * Integrates with other systems to monitor game state and award achievements.\r\n */ class AchievementSystem {\n    /**\r\n     * Initialize the achievement system\r\n     */ async initialize() {\n        console.log('Initializing Achievement System');\n        // Load saved achievement state\n        this._loadAchievementState();\n        // Set up event listeners for achievement tracking\n        this._setupEventListeners();\n        // Check for any achievements that should already be unlocked\n        this._checkInitialAchievements();\n        console.log('Achievement System initialized');\n    }\n    /**\r\n     * Get all achievements data\r\n     * @returns {Object} All achievements configuration\r\n     */ getAllAchievements() {\n        return this.achievementsData;\n    }\n    /**\r\n     * Get unlocked achievements\r\n     * @returns {Set} Set of unlocked achievement IDs\r\n     */ getUnlockedAchievements() {\n        return this.unlockedAchievements;\n    }\n    /**\r\n     * Get achievement progress\r\n     * @returns {Object} Achievement progress data\r\n     */ getAchievementProgress() {\n        return this.achievementProgress;\n    }\n    /**\r\n     * Check if an achievement is unlocked\r\n     * @param {string} achievementId - The achievement ID to check\r\n     * @returns {boolean} True if achievement is unlocked\r\n     */ isAchievementUnlocked(achievementId) {\n        return this.unlockedAchievements.has(achievementId);\n    }\n    /**\r\n     * Get total achievement points earned\r\n     * @returns {number} Total points from unlocked achievements\r\n     */ getTotalPoints() {\n        let total = 0;\n        for (const achievementId of this.unlockedAchievements){\n            const achievement = this.achievementsData[achievementId];\n            if (achievement) {\n                total += achievement.points || 0;\n            }\n        }\n        return total;\n    }\n    /**\r\n     * Check and unlock achievements based on current game state\r\n     * This is the main method that will be called to evaluate achievements\r\n     */ checkAchievements() {\n        const gameState = this.stateManager.getState();\n        for (const [achievementId, achievement] of Object.entries(this.achievementsData)){\n            if (this.unlockedAchievements.has(achievementId)) {\n                continue; // Already unlocked\n            }\n            if (this._evaluateAchievement(achievement, gameState)) {\n                this._unlockAchievement(achievementId);\n            }\n        }\n    }\n    /**\r\n     * Force unlock an achievement (for testing or special cases)\r\n     * @param {string} achievementId - The achievement ID to unlock\r\n     */ forceUnlockAchievement(achievementId) {\n        if (!this.achievementsData[achievementId]) {\n            console.warn(\"Attempted to unlock non-existent achievement: \".concat(achievementId));\n            return;\n        }\n        this._unlockAchievement(achievementId);\n    }\n    /**\r\n     * Reset all achievements (for testing or new game)\r\n     */ resetAchievements() {\n        this.unlockedAchievements.clear();\n        this.achievementProgress = {};\n        this._initializeProgress();\n        this._saveAchievementState();\n        this.eventSystem.emit('achievements:reset');\n    }\n    /**\r\n     * Set the skill manager reference\r\n     * @param {SkillManager} skillManager - The skill manager instance\r\n     */ setSkillSystem(skillManager) {\n        this.skillManager = skillManager;\n    }\n    /**\r\n     * Set the inventory manager reference\r\n     * @param {InventoryManager} inventoryManager - The inventory manager instance\r\n     */ setInventorySystem(inventoryManager) {\n        this.inventoryManager = inventoryManager;\n    }\n    // Private methods\n    _initializeProgress() {\n        // Initialize progress tracking for each achievement\n        for (const achievementId of Object.keys(this.achievementsData)){\n            this.achievementProgress[achievementId] = {\n                current: 0,\n                required: this._getRequiredValue(this.achievementsData[achievementId]),\n                completed: false\n            };\n        }\n    }\n    _loadAchievementState() {\n        try {\n            const savedState = this.stateManager.getState().achievements;\n            if (savedState) {\n                this.unlockedAchievements = new Set(savedState.unlocked || []);\n                this.achievementProgress = savedState.progress || this.achievementProgress;\n            }\n        } catch (error) {\n            console.warn('Failed to load achievement state:', error);\n        }\n    }\n    _saveAchievementState() {\n        try {\n            const currentState = this.stateManager.getState();\n            currentState.achievements = {\n                unlocked: Array.from(this.unlockedAchievements),\n                progress: this.achievementProgress\n            };\n            this.stateManager.setState(currentState);\n        } catch (error) {\n            console.error('Failed to save achievement state:', error);\n        }\n    }\n    _setupEventListeners() {\n        // Listen for skill level ups\n        this.eventSystem.on('skill:levelUp', (data)=>{\n            this._updateSkillLevelProgress(data.skillName, data.newLevel);\n            this.checkAchievements();\n        });\n        // Listen for inventory changes\n        this.eventSystem.on('inventory:itemAdded', (data)=>{\n            this._updateInventoryProgress(data.itemId);\n            this.checkAchievements();\n        });\n        // Listen for trading events\n        this.eventSystem.on('trade:completed', (data)=>{\n            this._updateTradingProgress(data);\n            this.checkAchievements();\n        });\n        // Listen for consumption events\n        this.eventSystem.on('item:consumed', (data)=>{\n            this._updateConsumptionProgress(data);\n            this.checkAchievements();\n        });\n        // Listen for crafting events\n        this.eventSystem.on('craft:completed', (data)=>{\n            this._updateCraftingProgress(data);\n            this.checkAchievements();\n        });\n        // Listen for location visits\n        this.eventSystem.on('location:visited', (data)=>{\n            this._updateLocationProgress(data);\n            this.checkAchievements();\n        });\n        // Listen for pet capture events\n        this.eventSystem.on('pet:captured', (data)=>{\n            this._updatePetProgress(data);\n            this.checkAchievements();\n        });\n        // Listen for cooking events\n        this.eventSystem.on('cooking:completed', (data)=>{\n            this._updateCookingProgress(data);\n            this.checkAchievements();\n        });\n        // Listen for game state changes that might affect achievements\n        this.eventSystem.on('state:changed', ()=>{\n            this.checkAchievements();\n        });\n    }\n    _checkInitialAchievements() {\n        // Check for achievements that should be unlocked based on current state\n        this.checkAchievements();\n    }\n    _evaluateAchievement(achievement, gameState) {\n        const requirements = achievement.requirements;\n        if (!requirements) {\n            return false;\n        }\n        // Check skill level requirements\n        if (requirements.skillLevel) {\n            for (const [skillName, requiredLevel] of Object.entries(requirements.skillLevel)){\n                var _gameState_skills;\n                const skill = (_gameState_skills = gameState.skills) === null || _gameState_skills === void 0 ? void 0 : _gameState_skills[skillName];\n                if (!skill || skill.level < requiredLevel) {\n                    return false;\n                }\n            }\n        }\n        // Check any skill level requirement\n        if (requirements.anySkillLevel) {\n            const requiredLevel = requirements.anySkillLevel;\n            const hasAnySkillAtLevel = Object.values(gameState.skills || {}).some((skill)=>skill.level >= requiredLevel);\n            if (!hasAnySkillAtLevel) {\n                return false;\n            }\n        }\n        // Check multiple skill levels requirement\n        if (requirements.multipleSkillLevels) {\n            const { count, level } = requirements.multipleSkillLevels;\n            const skillsAtLevel = Object.values(gameState.skills || {}).filter((skill)=>skill.level >= level).length;\n            if (skillsAtLevel < count) {\n                return false;\n            }\n        }\n        // Check unique items requirement\n        if (requirements.uniqueItems) {\n            const requiredCount = requirements.uniqueItems;\n            const uniqueItemCount = Object.keys(gameState.inventory || {}).length;\n            if (uniqueItemCount < requiredCount) {\n                return false;\n            }\n        }\n        // Check custom requirements\n        if (requirements.custom) {\n            return this._evaluateCustomRequirement(requirements.custom, gameState);\n        }\n        return true;\n    }\n    _evaluateCustomRequirement(requirementType, gameState) {\n        switch(requirementType){\n            case 'secret_discovery':\n                // This is a placeholder for secret achievements\n                // In a real implementation, this would check for specific game events\n                return false;\n            case 'trade_syrup_maple_run':\n                var _gameState_tradingHistory;\n                // Check if player has traded syrup in Maple Run\n                // This would need to be tracked in game state\n                return ((_gameState_tradingHistory = gameState.tradingHistory) === null || _gameState_tradingHistory === void 0 ? void 0 : _gameState_tradingHistory.some((trade)=>trade.itemId === 'syrup' && trade.location === 'maple_run')) || false;\n            case 'consume_red_mushroom':\n                var _gameState_consumptionHistory;\n                // Check if player has consumed a red mushroom\n                return ((_gameState_consumptionHistory = gameState.consumptionHistory) === null || _gameState_consumptionHistory === void 0 ? void 0 : _gameState_consumptionHistory.some((consumption)=>consumption.itemId === 'red_mushroom')) || false;\n            case 'animate_mushroom_pet':\n                var _gameState_petHistory;\n                // Check if player has used Animation spell on mushroom and captured as pet\n                return ((_gameState_petHistory = gameState.petHistory) === null || _gameState_petHistory === void 0 ? void 0 : _gameState_petHistory.some((pet)=>pet.source === 'animated_mushroom')) || false;\n            case 'cook_moss_mossy_glade':\n                var _gameState_cookingHistory;\n                // Check if player has cooked with moss in Mossy Glade\n                return ((_gameState_cookingHistory = gameState.cookingHistory) === null || _gameState_cookingHistory === void 0 ? void 0 : _gameState_cookingHistory.some((cooking)=>{\n                    var _cooking_ingredients;\n                    return ((_cooking_ingredients = cooking.ingredients) === null || _cooking_ingredients === void 0 ? void 0 : _cooking_ingredients.includes('moss')) && cooking.location === 'mossy_glade';\n                })) || false;\n            case 'first_craft':\n                var _gameState_craftingHistory;\n                // Check if player has crafted any item\n                return ((_gameState_craftingHistory = gameState.craftingHistory) === null || _gameState_craftingHistory === void 0 ? void 0 : _gameState_craftingHistory.length) > 0 || false;\n            case 'visit_locations':\n                var _gameState_achievementRequirements;\n                // Check if player has visited enough locations\n                const visitedLocations = gameState.visitedLocations || [];\n                const requiredCount = ((_gameState_achievementRequirements = gameState.achievementRequirements) === null || _gameState_achievementRequirements === void 0 ? void 0 : _gameState_achievementRequirements.locationCount) || 5;\n                return visitedLocations.length >= requiredCount;\n            default:\n                return false;\n        }\n    }\n    _getRequiredValue(achievement) {\n        const requirements = achievement.requirements;\n        if (requirements.skillLevel) {\n            return Math.max(...Object.values(requirements.skillLevel));\n        }\n        if (requirements.anySkillLevel) {\n            return requirements.anySkillLevel;\n        }\n        if (requirements.multipleSkillLevels) {\n            return requirements.multipleSkillLevels.level;\n        }\n        if (requirements.uniqueItems) {\n            return requirements.uniqueItems;\n        }\n        return 1; // Default required value\n    }\n    _unlockAchievement(achievementId) {\n        const achievement = this.achievementsData[achievementId];\n        if (!achievement) {\n            console.warn(\"Attempted to unlock non-existent achievement: \".concat(achievementId));\n            return;\n        }\n        this.unlockedAchievements.add(achievementId);\n        if (!this.achievementProgress[achievementId]) {\n            this.achievementProgress[achievementId] = {\n                current: 0,\n                required: this._getRequiredValue(achievement),\n                completed: false\n            };\n        }\n        this.achievementProgress[achievementId].completed = true;\n        this.achievementProgress[achievementId].current = this.achievementProgress[achievementId].required;\n        // Save state\n        this._saveAchievementState();\n        // Emit achievement unlocked event\n        this.eventSystem.emit('achievement:unlocked', {\n            achievementId,\n            achievement,\n            points: achievement.points || 0,\n            totalPoints: this.getTotalPoints()\n        });\n        console.log(\"Achievement unlocked: \".concat(achievement.name, \" (\").concat(achievementId, \")\"));\n    }\n    _updateSkillLevelProgress(skillName, level) {\n        for (const [achievementId, achievement] of Object.entries(this.achievementsData)){\n            if (this.unlockedAchievements.has(achievementId)) {\n                continue;\n            }\n            const requirements = achievement.requirements;\n            if (requirements.skillLevel && requirements.skillLevel[skillName]) {\n                const requiredLevel = requirements.skillLevel[skillName];\n                if (!this.achievementProgress[achievementId]) {\n                    this.achievementProgress[achievementId] = {\n                        current: 0,\n                        required: this._getRequiredValue(achievement),\n                        completed: false\n                    };\n                }\n                this.achievementProgress[achievementId].current = Math.min(level, requiredLevel);\n            }\n            if (requirements.anySkillLevel) {\n                const requiredLevel = requirements.anySkillLevel;\n                if (!this.achievementProgress[achievementId]) {\n                    this.achievementProgress[achievementId] = {\n                        current: 0,\n                        required: this._getRequiredValue(achievement),\n                        completed: false\n                    };\n                }\n                this.achievementProgress[achievementId].current = Math.min(level, requiredLevel);\n            }\n        }\n    }\n    _updateInventoryProgress(itemId) {\n        for (const [achievementId, achievement] of Object.entries(this.achievementsData)){\n            if (this.unlockedAchievements.has(achievementId)) {\n                continue;\n            }\n            const requirements = achievement.requirements;\n            if (requirements.uniqueItems) {\n                const gameState = this.stateManager.getState();\n                const uniqueItemCount = Object.keys(gameState.inventory || {}).length;\n                if (!this.achievementProgress[achievementId]) {\n                    this.achievementProgress[achievementId] = {\n                        current: 0,\n                        required: this._getRequiredValue(achievement),\n                        completed: false\n                    };\n                }\n                this.achievementProgress[achievementId].current = Math.min(uniqueItemCount, requirements.uniqueItems);\n            }\n        }\n    }\n    _updateTradingProgress(data) {\n        // Update trading history in game state\n        const gameState = this.stateManager.getState();\n        if (!gameState.tradingHistory) {\n            gameState.tradingHistory = [];\n        }\n        gameState.tradingHistory.push({\n            itemId: data.itemId,\n            location: data.location,\n            type: data.type,\n            timestamp: Date.now()\n        });\n        this.stateManager.setState(gameState);\n    }\n    _updateConsumptionProgress(data) {\n        // Update consumption history in game state\n        const gameState = this.stateManager.getState();\n        if (!gameState.consumptionHistory) {\n            gameState.consumptionHistory = [];\n        }\n        gameState.consumptionHistory.push({\n            itemId: data.itemId,\n            timestamp: Date.now()\n        });\n        this.stateManager.setState(gameState);\n    }\n    _updateCraftingProgress(data) {\n        // Update crafting history in game state\n        const gameState = this.stateManager.getState();\n        if (!gameState.craftingHistory) {\n            gameState.craftingHistory = [];\n        }\n        gameState.craftingHistory.push({\n            itemId: data.itemId,\n            timestamp: Date.now()\n        });\n        this.stateManager.setState(gameState);\n    }\n    _updateLocationProgress(data) {\n        // Update visited locations in game state\n        const gameState = this.stateManager.getState();\n        if (!gameState.visitedLocations) {\n            gameState.visitedLocations = [];\n        }\n        if (!gameState.visitedLocations.includes(data.locationId)) {\n            gameState.visitedLocations.push(data.locationId);\n        }\n        this.stateManager.setState(gameState);\n    }\n    _updatePetProgress(data) {\n        // Update pet history in game state\n        const gameState = this.stateManager.getState();\n        if (!gameState.petHistory) {\n            gameState.petHistory = [];\n        }\n        gameState.petHistory.push({\n            source: data.source,\n            petType: data.petType,\n            timestamp: Date.now()\n        });\n        this.stateManager.setState(gameState);\n    }\n    _updateCookingProgress(data) {\n        // Update cooking history in game state\n        const gameState = this.stateManager.getState();\n        if (!gameState.cookingHistory) {\n            gameState.cookingHistory = [];\n        }\n        gameState.cookingHistory.push({\n            ingredients: data.ingredients,\n            location: data.location,\n            timestamp: Date.now()\n        });\n        this.stateManager.setState(gameState);\n    }\n    constructor(achievementsData, stateManager, eventSystem){\n        this.achievementsData = achievementsData || {};\n        this.stateManager = stateManager;\n        this.eventSystem = eventSystem;\n        // System references\n        this.skillManager = null;\n        this.inventoryManager = null;\n        // Achievement state\n        this.unlockedAchievements = new Set();\n        this.achievementProgress = {};\n        // Initialize achievement progress tracking\n        this._initializeProgress();\n    }\n}\nif (true) window.AchievementSystem = AchievementSystem;\n// ES Module exports\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvZ2FtZS1lbmdpbmUvc3lzdGVtcy9BY2hpZXZlbWVudFN5c3RlbS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7Ozs7O0NBS0MsR0FFRCxNQUFNQTtJQWtCRjs7S0FFQyxHQUNELE1BQU1DLGFBQWE7UUFDZkMsUUFBUUMsR0FBRyxDQUFDO1FBRVosK0JBQStCO1FBQy9CLElBQUksQ0FBQ0MscUJBQXFCO1FBRTFCLGtEQUFrRDtRQUNsRCxJQUFJLENBQUNDLG9CQUFvQjtRQUV6Qiw2REFBNkQ7UUFDN0QsSUFBSSxDQUFDQyx5QkFBeUI7UUFFOUJKLFFBQVFDLEdBQUcsQ0FBQztJQUNoQjtJQUVBOzs7S0FHQyxHQUNESSxxQkFBcUI7UUFDakIsT0FBTyxJQUFJLENBQUNDLGdCQUFnQjtJQUNoQztJQUVBOzs7S0FHQyxHQUNEQywwQkFBMEI7UUFDdEIsT0FBTyxJQUFJLENBQUNDLG9CQUFvQjtJQUNwQztJQUVBOzs7S0FHQyxHQUNEQyx5QkFBeUI7UUFDckIsT0FBTyxJQUFJLENBQUNDLG1CQUFtQjtJQUNuQztJQUVBOzs7O0tBSUMsR0FDREMsc0JBQXNCQyxhQUFhLEVBQUU7UUFDakMsT0FBTyxJQUFJLENBQUNKLG9CQUFvQixDQUFDSyxHQUFHLENBQUNEO0lBQ3pDO0lBRUE7OztLQUdDLEdBQ0RFLGlCQUFpQjtRQUNiLElBQUlDLFFBQVE7UUFDWixLQUFLLE1BQU1ILGlCQUFpQixJQUFJLENBQUNKLG9CQUFvQixDQUFFO1lBQ25ELE1BQU1RLGNBQWMsSUFBSSxDQUFDVixnQkFBZ0IsQ0FBQ00sY0FBYztZQUN4RCxJQUFJSSxhQUFhO2dCQUNiRCxTQUFTQyxZQUFZQyxNQUFNLElBQUk7WUFDbkM7UUFDSjtRQUNBLE9BQU9GO0lBQ1g7SUFFQTs7O0tBR0MsR0FDREcsb0JBQW9CO1FBQ2hCLE1BQU1DLFlBQVksSUFBSSxDQUFDQyxZQUFZLENBQUNDLFFBQVE7UUFFNUMsS0FBSyxNQUFNLENBQUNULGVBQWVJLFlBQVks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bUJBQW1CO0lBQzVCO0FBa2ZKO0FBRUEsSUFBSSxJQUE2QixFQUFFd0YsT0FBT3hILGlCQUFpQixHQUFHQTtBQUU5RCxvQkFBb0I7QUFDUyIsInNvdXJjZXMiOlsiQzpcXEdpdEh1YlxcU2VsZlxcdGF2ZXJuc1xcc3JjXFxsaWJcXGdhbWUtZW5naW5lXFxzeXN0ZW1zXFxBY2hpZXZlbWVudFN5c3RlbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQWNoaWV2ZW1lbnQgU3lzdGVtXHJcbiAqIFxyXG4gKiBNYW5hZ2VzIGFjaGlldmVtZW50cywgdHJhY2tzIHByb2dyZXNzLCBhbmQgaGFuZGxlcyBhY2hpZXZlbWVudCB1bmxvY2tpbmcuXHJcbiAqIEludGVncmF0ZXMgd2l0aCBvdGhlciBzeXN0ZW1zIHRvIG1vbml0b3IgZ2FtZSBzdGF0ZSBhbmQgYXdhcmQgYWNoaWV2ZW1lbnRzLlxyXG4gKi9cclxuXHJcbmNsYXNzIEFjaGlldmVtZW50U3lzdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKGFjaGlldmVtZW50c0RhdGEsIHN0YXRlTWFuYWdlciwgZXZlbnRTeXN0ZW0pIHtcclxuICAgICAgICB0aGlzLmFjaGlldmVtZW50c0RhdGEgPSBhY2hpZXZlbWVudHNEYXRhIHx8IHt9O1xyXG4gICAgICAgIHRoaXMuc3RhdGVNYW5hZ2VyID0gc3RhdGVNYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0gPSBldmVudFN5c3RlbTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBTeXN0ZW0gcmVmZXJlbmNlc1xyXG4gICAgICAgIHRoaXMuc2tpbGxNYW5hZ2VyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmludmVudG9yeU1hbmFnZXIgPSBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEFjaGlldmVtZW50IHN0YXRlXHJcbiAgICAgICAgdGhpcy51bmxvY2tlZEFjaGlldmVtZW50cyA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLmFjaGlldmVtZW50UHJvZ3Jlc3MgPSB7fTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBJbml0aWFsaXplIGFjaGlldmVtZW50IHByb2dyZXNzIHRyYWNraW5nXHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZVByb2dyZXNzKCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZSB0aGUgYWNoaWV2ZW1lbnQgc3lzdGVtXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0luaXRpYWxpemluZyBBY2hpZXZlbWVudCBTeXN0ZW0nKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBMb2FkIHNhdmVkIGFjaGlldmVtZW50IHN0YXRlXHJcbiAgICAgICAgdGhpcy5fbG9hZEFjaGlldmVtZW50U3RhdGUoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBTZXQgdXAgZXZlbnQgbGlzdGVuZXJzIGZvciBhY2hpZXZlbWVudCB0cmFja2luZ1xyXG4gICAgICAgIHRoaXMuX3NldHVwRXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDaGVjayBmb3IgYW55IGFjaGlldmVtZW50cyB0aGF0IHNob3VsZCBhbHJlYWR5IGJlIHVubG9ja2VkXHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbml0aWFsQWNoaWV2ZW1lbnRzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coJ0FjaGlldmVtZW50IFN5c3RlbSBpbml0aWFsaXplZCcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhbGwgYWNoaWV2ZW1lbnRzIGRhdGFcclxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IEFsbCBhY2hpZXZlbWVudHMgY29uZmlndXJhdGlvblxyXG4gICAgICovXHJcbiAgICBnZXRBbGxBY2hpZXZlbWVudHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNoaWV2ZW1lbnRzRGF0YTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdW5sb2NrZWQgYWNoaWV2ZW1lbnRzXHJcbiAgICAgKiBAcmV0dXJucyB7U2V0fSBTZXQgb2YgdW5sb2NrZWQgYWNoaWV2ZW1lbnQgSURzXHJcbiAgICAgKi9cclxuICAgIGdldFVubG9ja2VkQWNoaWV2ZW1lbnRzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVubG9ja2VkQWNoaWV2ZW1lbnRzO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhY2hpZXZlbWVudCBwcm9ncmVzc1xyXG4gICAgICogQHJldHVybnMge09iamVjdH0gQWNoaWV2ZW1lbnQgcHJvZ3Jlc3MgZGF0YVxyXG4gICAgICovXHJcbiAgICBnZXRBY2hpZXZlbWVudFByb2dyZXNzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFjaGlldmVtZW50UHJvZ3Jlc3M7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgYW4gYWNoaWV2ZW1lbnQgaXMgdW5sb2NrZWRcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhY2hpZXZlbWVudElkIC0gVGhlIGFjaGlldmVtZW50IElEIHRvIGNoZWNrXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBhY2hpZXZlbWVudCBpcyB1bmxvY2tlZFxyXG4gICAgICovXHJcbiAgICBpc0FjaGlldmVtZW50VW5sb2NrZWQoYWNoaWV2ZW1lbnRJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVubG9ja2VkQWNoaWV2ZW1lbnRzLmhhcyhhY2hpZXZlbWVudElkKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdG90YWwgYWNoaWV2ZW1lbnQgcG9pbnRzIGVhcm5lZFxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gVG90YWwgcG9pbnRzIGZyb20gdW5sb2NrZWQgYWNoaWV2ZW1lbnRzXHJcbiAgICAgKi9cclxuICAgIGdldFRvdGFsUG9pbnRzKCkge1xyXG4gICAgICAgIGxldCB0b3RhbCA9IDA7XHJcbiAgICAgICAgZm9yIChjb25zdCBhY2hpZXZlbWVudElkIG9mIHRoaXMudW5sb2NrZWRBY2hpZXZlbWVudHMpIHtcclxuICAgICAgICAgICAgY29uc3QgYWNoaWV2ZW1lbnQgPSB0aGlzLmFjaGlldmVtZW50c0RhdGFbYWNoaWV2ZW1lbnRJZF07XHJcbiAgICAgICAgICAgIGlmIChhY2hpZXZlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdG90YWwgKz0gYWNoaWV2ZW1lbnQucG9pbnRzIHx8IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRvdGFsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGFuZCB1bmxvY2sgYWNoaWV2ZW1lbnRzIGJhc2VkIG9uIGN1cnJlbnQgZ2FtZSBzdGF0ZVxyXG4gICAgICogVGhpcyBpcyB0aGUgbWFpbiBtZXRob2QgdGhhdCB3aWxsIGJlIGNhbGxlZCB0byBldmFsdWF0ZSBhY2hpZXZlbWVudHNcclxuICAgICAqL1xyXG4gICAgY2hlY2tBY2hpZXZlbWVudHMoKSB7XHJcbiAgICAgICAgY29uc3QgZ2FtZVN0YXRlID0gdGhpcy5zdGF0ZU1hbmFnZXIuZ2V0U3RhdGUoKTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGNvbnN0IFthY2hpZXZlbWVudElkLCBhY2hpZXZlbWVudF0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5hY2hpZXZlbWVudHNEYXRhKSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy51bmxvY2tlZEFjaGlldmVtZW50cy5oYXMoYWNoaWV2ZW1lbnRJZCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBBbHJlYWR5IHVubG9ja2VkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9ldmFsdWF0ZUFjaGlldmVtZW50KGFjaGlldmVtZW50LCBnYW1lU3RhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl91bmxvY2tBY2hpZXZlbWVudChhY2hpZXZlbWVudElkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBGb3JjZSB1bmxvY2sgYW4gYWNoaWV2ZW1lbnQgKGZvciB0ZXN0aW5nIG9yIHNwZWNpYWwgY2FzZXMpXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYWNoaWV2ZW1lbnRJZCAtIFRoZSBhY2hpZXZlbWVudCBJRCB0byB1bmxvY2tcclxuICAgICAqL1xyXG4gICAgZm9yY2VVbmxvY2tBY2hpZXZlbWVudChhY2hpZXZlbWVudElkKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmFjaGlldmVtZW50c0RhdGFbYWNoaWV2ZW1lbnRJZF0pIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBBdHRlbXB0ZWQgdG8gdW5sb2NrIG5vbi1leGlzdGVudCBhY2hpZXZlbWVudDogJHthY2hpZXZlbWVudElkfWApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX3VubG9ja0FjaGlldmVtZW50KGFjaGlldmVtZW50SWQpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0IGFsbCBhY2hpZXZlbWVudHMgKGZvciB0ZXN0aW5nIG9yIG5ldyBnYW1lKVxyXG4gICAgICovXHJcbiAgICByZXNldEFjaGlldmVtZW50cygpIHtcclxuICAgICAgICB0aGlzLnVubG9ja2VkQWNoaWV2ZW1lbnRzLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5hY2hpZXZlbWVudFByb2dyZXNzID0ge307XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZVByb2dyZXNzKCk7XHJcbiAgICAgICAgdGhpcy5fc2F2ZUFjaGlldmVtZW50U3RhdGUoKTtcclxuICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLmVtaXQoJ2FjaGlldmVtZW50czpyZXNldCcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgc2tpbGwgbWFuYWdlciByZWZlcmVuY2VcclxuICAgICAqIEBwYXJhbSB7U2tpbGxNYW5hZ2VyfSBza2lsbE1hbmFnZXIgLSBUaGUgc2tpbGwgbWFuYWdlciBpbnN0YW5jZVxyXG4gICAgICovXHJcbiAgICBzZXRTa2lsbFN5c3RlbShza2lsbE1hbmFnZXIpIHtcclxuICAgICAgICB0aGlzLnNraWxsTWFuYWdlciA9IHNraWxsTWFuYWdlcjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGludmVudG9yeSBtYW5hZ2VyIHJlZmVyZW5jZVxyXG4gICAgICogQHBhcmFtIHtJbnZlbnRvcnlNYW5hZ2VyfSBpbnZlbnRvcnlNYW5hZ2VyIC0gVGhlIGludmVudG9yeSBtYW5hZ2VyIGluc3RhbmNlXHJcbiAgICAgKi9cclxuICAgIHNldEludmVudG9yeVN5c3RlbShpbnZlbnRvcnlNYW5hZ2VyKSB7XHJcbiAgICAgICAgdGhpcy5pbnZlbnRvcnlNYW5hZ2VyID0gaW52ZW50b3J5TWFuYWdlcjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gUHJpdmF0ZSBtZXRob2RzXHJcbiAgICBcclxuICAgIF9pbml0aWFsaXplUHJvZ3Jlc3MoKSB7XHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBwcm9ncmVzcyB0cmFja2luZyBmb3IgZWFjaCBhY2hpZXZlbWVudFxyXG4gICAgICAgIGZvciAoY29uc3QgYWNoaWV2ZW1lbnRJZCBvZiBPYmplY3Qua2V5cyh0aGlzLmFjaGlldmVtZW50c0RhdGEpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWNoaWV2ZW1lbnRQcm9ncmVzc1thY2hpZXZlbWVudElkXSA9IHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnQ6IDAsXHJcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdGhpcy5fZ2V0UmVxdWlyZWRWYWx1ZSh0aGlzLmFjaGlldmVtZW50c0RhdGFbYWNoaWV2ZW1lbnRJZF0pLFxyXG4gICAgICAgICAgICAgICAgY29tcGxldGVkOiBmYWxzZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgX2xvYWRBY2hpZXZlbWVudFN0YXRlKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNhdmVkU3RhdGUgPSB0aGlzLnN0YXRlTWFuYWdlci5nZXRTdGF0ZSgpLmFjaGlldmVtZW50cztcclxuICAgICAgICAgICAgaWYgKHNhdmVkU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudW5sb2NrZWRBY2hpZXZlbWVudHMgPSBuZXcgU2V0KHNhdmVkU3RhdGUudW5sb2NrZWQgfHwgW10pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY2hpZXZlbWVudFByb2dyZXNzID0gc2F2ZWRTdGF0ZS5wcm9ncmVzcyB8fCB0aGlzLmFjaGlldmVtZW50UHJvZ3Jlc3M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBsb2FkIGFjaGlldmVtZW50IHN0YXRlOicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF9zYXZlQWNoaWV2ZW1lbnRTdGF0ZSgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50U3RhdGUgPSB0aGlzLnN0YXRlTWFuYWdlci5nZXRTdGF0ZSgpO1xyXG4gICAgICAgICAgICBjdXJyZW50U3RhdGUuYWNoaWV2ZW1lbnRzID0ge1xyXG4gICAgICAgICAgICAgICAgdW5sb2NrZWQ6IEFycmF5LmZyb20odGhpcy51bmxvY2tlZEFjaGlldmVtZW50cyksXHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzczogdGhpcy5hY2hpZXZlbWVudFByb2dyZXNzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGVNYW5hZ2VyLnNldFN0YXRlKGN1cnJlbnRTdGF0ZSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNhdmUgYWNoaWV2ZW1lbnQgc3RhdGU6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgX3NldHVwRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgLy8gTGlzdGVuIGZvciBza2lsbCBsZXZlbCB1cHNcclxuICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLm9uKCdza2lsbDpsZXZlbFVwJywgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlU2tpbGxMZXZlbFByb2dyZXNzKGRhdGEuc2tpbGxOYW1lLCBkYXRhLm5ld0xldmVsKTtcclxuICAgICAgICAgICAgdGhpcy5jaGVja0FjaGlldmVtZW50cygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIExpc3RlbiBmb3IgaW52ZW50b3J5IGNoYW5nZXNcclxuICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLm9uKCdpbnZlbnRvcnk6aXRlbUFkZGVkJywgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlSW52ZW50b3J5UHJvZ3Jlc3MoZGF0YS5pdGVtSWQpO1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrQWNoaWV2ZW1lbnRzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTGlzdGVuIGZvciB0cmFkaW5nIGV2ZW50c1xyXG4gICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0ub24oJ3RyYWRlOmNvbXBsZXRlZCcsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVRyYWRpbmdQcm9ncmVzcyhkYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5jaGVja0FjaGlldmVtZW50cygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIExpc3RlbiBmb3IgY29uc3VtcHRpb24gZXZlbnRzXHJcbiAgICAgICAgdGhpcy5ldmVudFN5c3RlbS5vbignaXRlbTpjb25zdW1lZCcsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUNvbnN1bXB0aW9uUHJvZ3Jlc3MoZGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tBY2hpZXZlbWVudHMoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBMaXN0ZW4gZm9yIGNyYWZ0aW5nIGV2ZW50c1xyXG4gICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0ub24oJ2NyYWZ0OmNvbXBsZXRlZCcsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUNyYWZ0aW5nUHJvZ3Jlc3MoZGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tBY2hpZXZlbWVudHMoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBMaXN0ZW4gZm9yIGxvY2F0aW9uIHZpc2l0c1xyXG4gICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0ub24oJ2xvY2F0aW9uOnZpc2l0ZWQnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVMb2NhdGlvblByb2dyZXNzKGRhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrQWNoaWV2ZW1lbnRzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTGlzdGVuIGZvciBwZXQgY2FwdHVyZSBldmVudHNcclxuICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLm9uKCdwZXQ6Y2FwdHVyZWQnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVQZXRQcm9ncmVzcyhkYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5jaGVja0FjaGlldmVtZW50cygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIExpc3RlbiBmb3IgY29va2luZyBldmVudHNcclxuICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLm9uKCdjb29raW5nOmNvbXBsZXRlZCcsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUNvb2tpbmdQcm9ncmVzcyhkYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5jaGVja0FjaGlldmVtZW50cygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIExpc3RlbiBmb3IgZ2FtZSBzdGF0ZSBjaGFuZ2VzIHRoYXQgbWlnaHQgYWZmZWN0IGFjaGlldmVtZW50c1xyXG4gICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0ub24oJ3N0YXRlOmNoYW5nZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tBY2hpZXZlbWVudHMoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgX2NoZWNrSW5pdGlhbEFjaGlldmVtZW50cygpIHtcclxuICAgICAgICAvLyBDaGVjayBmb3IgYWNoaWV2ZW1lbnRzIHRoYXQgc2hvdWxkIGJlIHVubG9ja2VkIGJhc2VkIG9uIGN1cnJlbnQgc3RhdGVcclxuICAgICAgICB0aGlzLmNoZWNrQWNoaWV2ZW1lbnRzKCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF9ldmFsdWF0ZUFjaGlldmVtZW50KGFjaGlldmVtZW50LCBnYW1lU3RhdGUpIHtcclxuICAgICAgICBjb25zdCByZXF1aXJlbWVudHMgPSBhY2hpZXZlbWVudC5yZXF1aXJlbWVudHM7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCFyZXF1aXJlbWVudHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBDaGVjayBza2lsbCBsZXZlbCByZXF1aXJlbWVudHNcclxuICAgICAgICBpZiAocmVxdWlyZW1lbnRzLnNraWxsTGV2ZWwpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBbc2tpbGxOYW1lLCByZXF1aXJlZExldmVsXSBvZiBPYmplY3QuZW50cmllcyhyZXF1aXJlbWVudHMuc2tpbGxMZXZlbCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNraWxsID0gZ2FtZVN0YXRlLnNraWxscz8uW3NraWxsTmFtZV07XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNraWxsIHx8IHNraWxsLmxldmVsIDwgcmVxdWlyZWRMZXZlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBDaGVjayBhbnkgc2tpbGwgbGV2ZWwgcmVxdWlyZW1lbnRcclxuICAgICAgICBpZiAocmVxdWlyZW1lbnRzLmFueVNraWxsTGV2ZWwpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVxdWlyZWRMZXZlbCA9IHJlcXVpcmVtZW50cy5hbnlTa2lsbExldmVsO1xyXG4gICAgICAgICAgICBjb25zdCBoYXNBbnlTa2lsbEF0TGV2ZWwgPSBPYmplY3QudmFsdWVzKGdhbWVTdGF0ZS5za2lsbHMgfHwge30pLnNvbWUoc2tpbGwgPT4gc2tpbGwubGV2ZWwgPj0gcmVxdWlyZWRMZXZlbCk7XHJcbiAgICAgICAgICAgIGlmICghaGFzQW55U2tpbGxBdExldmVsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ2hlY2sgbXVsdGlwbGUgc2tpbGwgbGV2ZWxzIHJlcXVpcmVtZW50XHJcbiAgICAgICAgaWYgKHJlcXVpcmVtZW50cy5tdWx0aXBsZVNraWxsTGV2ZWxzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgY291bnQsIGxldmVsIH0gPSByZXF1aXJlbWVudHMubXVsdGlwbGVTa2lsbExldmVscztcclxuICAgICAgICAgICAgY29uc3Qgc2tpbGxzQXRMZXZlbCA9IE9iamVjdC52YWx1ZXMoZ2FtZVN0YXRlLnNraWxscyB8fCB7fSkuZmlsdGVyKHNraWxsID0+IHNraWxsLmxldmVsID49IGxldmVsKS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGlmIChza2lsbHNBdExldmVsIDwgY291bnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBDaGVjayB1bmlxdWUgaXRlbXMgcmVxdWlyZW1lbnRcclxuICAgICAgICBpZiAocmVxdWlyZW1lbnRzLnVuaXF1ZUl0ZW1zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVpcmVkQ291bnQgPSByZXF1aXJlbWVudHMudW5pcXVlSXRlbXM7XHJcbiAgICAgICAgICAgIGNvbnN0IHVuaXF1ZUl0ZW1Db3VudCA9IE9iamVjdC5rZXlzKGdhbWVTdGF0ZS5pbnZlbnRvcnkgfHwge30pLmxlbmd0aDtcclxuICAgICAgICAgICAgaWYgKHVuaXF1ZUl0ZW1Db3VudCA8IHJlcXVpcmVkQ291bnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBDaGVjayBjdXN0b20gcmVxdWlyZW1lbnRzXHJcbiAgICAgICAgaWYgKHJlcXVpcmVtZW50cy5jdXN0b20pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2V2YWx1YXRlQ3VzdG9tUmVxdWlyZW1lbnQocmVxdWlyZW1lbnRzLmN1c3RvbSwgZ2FtZVN0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF9ldmFsdWF0ZUN1c3RvbVJlcXVpcmVtZW50KHJlcXVpcmVtZW50VHlwZSwgZ2FtZVN0YXRlKSB7XHJcbiAgICAgICAgc3dpdGNoIChyZXF1aXJlbWVudFR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnc2VjcmV0X2Rpc2NvdmVyeSc6XHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgcGxhY2Vob2xkZXIgZm9yIHNlY3JldCBhY2hpZXZlbWVudHNcclxuICAgICAgICAgICAgICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCBjaGVjayBmb3Igc3BlY2lmaWMgZ2FtZSBldmVudHNcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgY2FzZSAndHJhZGVfc3lydXBfbWFwbGVfcnVuJzpcclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHBsYXllciBoYXMgdHJhZGVkIHN5cnVwIGluIE1hcGxlIFJ1blxyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyB3b3VsZCBuZWVkIHRvIGJlIHRyYWNrZWQgaW4gZ2FtZSBzdGF0ZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdhbWVTdGF0ZS50cmFkaW5nSGlzdG9yeT8uc29tZSh0cmFkZSA9PiBcclxuICAgICAgICAgICAgICAgICAgICB0cmFkZS5pdGVtSWQgPT09ICdzeXJ1cCcgJiYgdHJhZGUubG9jYXRpb24gPT09ICdtYXBsZV9ydW4nXHJcbiAgICAgICAgICAgICAgICApIHx8IGZhbHNlO1xyXG4gICAgICAgICAgICBjYXNlICdjb25zdW1lX3JlZF9tdXNocm9vbSc6XHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBwbGF5ZXIgaGFzIGNvbnN1bWVkIGEgcmVkIG11c2hyb29tXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2FtZVN0YXRlLmNvbnN1bXB0aW9uSGlzdG9yeT8uc29tZShjb25zdW1wdGlvbiA9PiBcclxuICAgICAgICAgICAgICAgICAgICBjb25zdW1wdGlvbi5pdGVtSWQgPT09ICdyZWRfbXVzaHJvb20nXHJcbiAgICAgICAgICAgICAgICApIHx8IGZhbHNlO1xyXG4gICAgICAgICAgICBjYXNlICdhbmltYXRlX211c2hyb29tX3BldCc6XHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBwbGF5ZXIgaGFzIHVzZWQgQW5pbWF0aW9uIHNwZWxsIG9uIG11c2hyb29tIGFuZCBjYXB0dXJlZCBhcyBwZXRcclxuICAgICAgICAgICAgICAgIHJldHVybiBnYW1lU3RhdGUucGV0SGlzdG9yeT8uc29tZShwZXQgPT4gXHJcbiAgICAgICAgICAgICAgICAgICAgcGV0LnNvdXJjZSA9PT0gJ2FuaW1hdGVkX211c2hyb29tJ1xyXG4gICAgICAgICAgICAgICAgKSB8fCBmYWxzZTtcclxuICAgICAgICAgICAgY2FzZSAnY29va19tb3NzX21vc3N5X2dsYWRlJzpcclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHBsYXllciBoYXMgY29va2VkIHdpdGggbW9zcyBpbiBNb3NzeSBHbGFkZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdhbWVTdGF0ZS5jb29raW5nSGlzdG9yeT8uc29tZShjb29raW5nID0+IFxyXG4gICAgICAgICAgICAgICAgICAgIGNvb2tpbmcuaW5ncmVkaWVudHM/LmluY2x1ZGVzKCdtb3NzJykgJiYgY29va2luZy5sb2NhdGlvbiA9PT0gJ21vc3N5X2dsYWRlJ1xyXG4gICAgICAgICAgICAgICAgKSB8fCBmYWxzZTtcclxuICAgICAgICAgICAgY2FzZSAnZmlyc3RfY3JhZnQnOlxyXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgcGxheWVyIGhhcyBjcmFmdGVkIGFueSBpdGVtXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2FtZVN0YXRlLmNyYWZ0aW5nSGlzdG9yeT8ubGVuZ3RoID4gMCB8fCBmYWxzZTtcclxuICAgICAgICAgICAgY2FzZSAndmlzaXRfbG9jYXRpb25zJzpcclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHBsYXllciBoYXMgdmlzaXRlZCBlbm91Z2ggbG9jYXRpb25zXHJcbiAgICAgICAgICAgICAgICBjb25zdCB2aXNpdGVkTG9jYXRpb25zID0gZ2FtZVN0YXRlLnZpc2l0ZWRMb2NhdGlvbnMgfHwgW107XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1aXJlZENvdW50ID0gZ2FtZVN0YXRlLmFjaGlldmVtZW50UmVxdWlyZW1lbnRzPy5sb2NhdGlvbkNvdW50IHx8IDU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmlzaXRlZExvY2F0aW9ucy5sZW5ndGggPj0gcmVxdWlyZWRDb3VudDtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF9nZXRSZXF1aXJlZFZhbHVlKGFjaGlldmVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWlyZW1lbnRzID0gYWNoaWV2ZW1lbnQucmVxdWlyZW1lbnRzO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChyZXF1aXJlbWVudHMuc2tpbGxMZXZlbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgoLi4uT2JqZWN0LnZhbHVlcyhyZXF1aXJlbWVudHMuc2tpbGxMZXZlbCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAocmVxdWlyZW1lbnRzLmFueVNraWxsTGV2ZWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcXVpcmVtZW50cy5hbnlTa2lsbExldmVsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAocmVxdWlyZW1lbnRzLm11bHRpcGxlU2tpbGxMZXZlbHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcXVpcmVtZW50cy5tdWx0aXBsZVNraWxsTGV2ZWxzLmxldmVsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAocmVxdWlyZW1lbnRzLnVuaXF1ZUl0ZW1zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXF1aXJlbWVudHMudW5pcXVlSXRlbXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiAxOyAvLyBEZWZhdWx0IHJlcXVpcmVkIHZhbHVlXHJcbiAgICB9XHJcbiAgICBcclxuICAgIF91bmxvY2tBY2hpZXZlbWVudChhY2hpZXZlbWVudElkKSB7XHJcbiAgICAgICAgY29uc3QgYWNoaWV2ZW1lbnQgPSB0aGlzLmFjaGlldmVtZW50c0RhdGFbYWNoaWV2ZW1lbnRJZF07XHJcbiAgICAgICAgaWYgKCFhY2hpZXZlbWVudCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYEF0dGVtcHRlZCB0byB1bmxvY2sgbm9uLWV4aXN0ZW50IGFjaGlldmVtZW50OiAke2FjaGlldmVtZW50SWR9YCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51bmxvY2tlZEFjaGlldmVtZW50cy5hZGQoYWNoaWV2ZW1lbnRJZCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmFjaGlldmVtZW50UHJvZ3Jlc3NbYWNoaWV2ZW1lbnRJZF0pIHtcclxuICAgICAgICAgICAgdGhpcy5hY2hpZXZlbWVudFByb2dyZXNzW2FjaGlldmVtZW50SWRdID0ge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudDogMCxcclxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0aGlzLl9nZXRSZXF1aXJlZFZhbHVlKGFjaGlldmVtZW50KSxcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlZDogZmFsc2VcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hY2hpZXZlbWVudFByb2dyZXNzW2FjaGlldmVtZW50SWRdLmNvbXBsZXRlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5hY2hpZXZlbWVudFByb2dyZXNzW2FjaGlldmVtZW50SWRdLmN1cnJlbnQgPSB0aGlzLmFjaGlldmVtZW50UHJvZ3Jlc3NbYWNoaWV2ZW1lbnRJZF0ucmVxdWlyZWQ7XHJcbiAgICAgICAgLy8gU2F2ZSBzdGF0ZVxyXG4gICAgICAgIHRoaXMuX3NhdmVBY2hpZXZlbWVudFN0YXRlKCk7XHJcbiAgICAgICAgLy8gRW1pdCBhY2hpZXZlbWVudCB1bmxvY2tlZCBldmVudFxyXG4gICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0uZW1pdCgnYWNoaWV2ZW1lbnQ6dW5sb2NrZWQnLCB7XHJcbiAgICAgICAgICAgIGFjaGlldmVtZW50SWQsXHJcbiAgICAgICAgICAgIGFjaGlldmVtZW50LFxyXG4gICAgICAgICAgICBwb2ludHM6IGFjaGlldmVtZW50LnBvaW50cyB8fCAwLFxyXG4gICAgICAgICAgICB0b3RhbFBvaW50czogdGhpcy5nZXRUb3RhbFBvaW50cygpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coYEFjaGlldmVtZW50IHVubG9ja2VkOiAke2FjaGlldmVtZW50Lm5hbWV9ICgke2FjaGlldmVtZW50SWR9KWApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfdXBkYXRlU2tpbGxMZXZlbFByb2dyZXNzKHNraWxsTmFtZSwgbGV2ZWwpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IFthY2hpZXZlbWVudElkLCBhY2hpZXZlbWVudF0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5hY2hpZXZlbWVudHNEYXRhKSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy51bmxvY2tlZEFjaGlldmVtZW50cy5oYXMoYWNoaWV2ZW1lbnRJZCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVpcmVtZW50cyA9IGFjaGlldmVtZW50LnJlcXVpcmVtZW50cztcclxuICAgICAgICAgICAgaWYgKHJlcXVpcmVtZW50cy5za2lsbExldmVsICYmIHJlcXVpcmVtZW50cy5za2lsbExldmVsW3NraWxsTmFtZV0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVpcmVkTGV2ZWwgPSByZXF1aXJlbWVudHMuc2tpbGxMZXZlbFtza2lsbE5hbWVdO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmFjaGlldmVtZW50UHJvZ3Jlc3NbYWNoaWV2ZW1lbnRJZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjaGlldmVtZW50UHJvZ3Jlc3NbYWNoaWV2ZW1lbnRJZF0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0aGlzLl9nZXRSZXF1aXJlZFZhbHVlKGFjaGlldmVtZW50KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjaGlldmVtZW50UHJvZ3Jlc3NbYWNoaWV2ZW1lbnRJZF0uY3VycmVudCA9IE1hdGgubWluKGxldmVsLCByZXF1aXJlZExldmVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocmVxdWlyZW1lbnRzLmFueVNraWxsTGV2ZWwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVpcmVkTGV2ZWwgPSByZXF1aXJlbWVudHMuYW55U2tpbGxMZXZlbDtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5hY2hpZXZlbWVudFByb2dyZXNzW2FjaGlldmVtZW50SWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2hpZXZlbWVudFByb2dyZXNzW2FjaGlldmVtZW50SWRdID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdGhpcy5fZ2V0UmVxdWlyZWRWYWx1ZShhY2hpZXZlbWVudCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZDogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hY2hpZXZlbWVudFByb2dyZXNzW2FjaGlldmVtZW50SWRdLmN1cnJlbnQgPSBNYXRoLm1pbihsZXZlbCwgcmVxdWlyZWRMZXZlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF91cGRhdGVJbnZlbnRvcnlQcm9ncmVzcyhpdGVtSWQpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IFthY2hpZXZlbWVudElkLCBhY2hpZXZlbWVudF0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5hY2hpZXZlbWVudHNEYXRhKSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy51bmxvY2tlZEFjaGlldmVtZW50cy5oYXMoYWNoaWV2ZW1lbnRJZCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVpcmVtZW50cyA9IGFjaGlldmVtZW50LnJlcXVpcmVtZW50cztcclxuICAgICAgICAgICAgaWYgKHJlcXVpcmVtZW50cy51bmlxdWVJdGVtcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2FtZVN0YXRlID0gdGhpcy5zdGF0ZU1hbmFnZXIuZ2V0U3RhdGUoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVuaXF1ZUl0ZW1Db3VudCA9IE9iamVjdC5rZXlzKGdhbWVTdGF0ZS5pbnZlbnRvcnkgfHwge30pLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5hY2hpZXZlbWVudFByb2dyZXNzW2FjaGlldmVtZW50SWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2hpZXZlbWVudFByb2dyZXNzW2FjaGlldmVtZW50SWRdID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdGhpcy5fZ2V0UmVxdWlyZWRWYWx1ZShhY2hpZXZlbWVudCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZDogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hY2hpZXZlbWVudFByb2dyZXNzW2FjaGlldmVtZW50SWRdLmN1cnJlbnQgPSBNYXRoLm1pbih1bmlxdWVJdGVtQ291bnQsIHJlcXVpcmVtZW50cy51bmlxdWVJdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF91cGRhdGVUcmFkaW5nUHJvZ3Jlc3MoZGF0YSkge1xyXG4gICAgICAgIC8vIFVwZGF0ZSB0cmFkaW5nIGhpc3RvcnkgaW4gZ2FtZSBzdGF0ZVxyXG4gICAgICAgIGNvbnN0IGdhbWVTdGF0ZSA9IHRoaXMuc3RhdGVNYW5hZ2VyLmdldFN0YXRlKCk7XHJcbiAgICAgICAgaWYgKCFnYW1lU3RhdGUudHJhZGluZ0hpc3RvcnkpIHtcclxuICAgICAgICAgICAgZ2FtZVN0YXRlLnRyYWRpbmdIaXN0b3J5ID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdhbWVTdGF0ZS50cmFkaW5nSGlzdG9yeS5wdXNoKHtcclxuICAgICAgICAgICAgaXRlbUlkOiBkYXRhLml0ZW1JZCxcclxuICAgICAgICAgICAgbG9jYXRpb246IGRhdGEubG9jYXRpb24sXHJcbiAgICAgICAgICAgIHR5cGU6IGRhdGEudHlwZSwgLy8gYnV5L3NlbGxcclxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZU1hbmFnZXIuc2V0U3RhdGUoZ2FtZVN0YXRlKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgX3VwZGF0ZUNvbnN1bXB0aW9uUHJvZ3Jlc3MoZGF0YSkge1xyXG4gICAgICAgIC8vIFVwZGF0ZSBjb25zdW1wdGlvbiBoaXN0b3J5IGluIGdhbWUgc3RhdGVcclxuICAgICAgICBjb25zdCBnYW1lU3RhdGUgPSB0aGlzLnN0YXRlTWFuYWdlci5nZXRTdGF0ZSgpO1xyXG4gICAgICAgIGlmICghZ2FtZVN0YXRlLmNvbnN1bXB0aW9uSGlzdG9yeSkge1xyXG4gICAgICAgICAgICBnYW1lU3RhdGUuY29uc3VtcHRpb25IaXN0b3J5ID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdhbWVTdGF0ZS5jb25zdW1wdGlvbkhpc3RvcnkucHVzaCh7XHJcbiAgICAgICAgICAgIGl0ZW1JZDogZGF0YS5pdGVtSWQsXHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc3RhdGVNYW5hZ2VyLnNldFN0YXRlKGdhbWVTdGF0ZSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF91cGRhdGVDcmFmdGluZ1Byb2dyZXNzKGRhdGEpIHtcclxuICAgICAgICAvLyBVcGRhdGUgY3JhZnRpbmcgaGlzdG9yeSBpbiBnYW1lIHN0YXRlXHJcbiAgICAgICAgY29uc3QgZ2FtZVN0YXRlID0gdGhpcy5zdGF0ZU1hbmFnZXIuZ2V0U3RhdGUoKTtcclxuICAgICAgICBpZiAoIWdhbWVTdGF0ZS5jcmFmdGluZ0hpc3RvcnkpIHtcclxuICAgICAgICAgICAgZ2FtZVN0YXRlLmNyYWZ0aW5nSGlzdG9yeSA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnYW1lU3RhdGUuY3JhZnRpbmdIaXN0b3J5LnB1c2goe1xyXG4gICAgICAgICAgICBpdGVtSWQ6IGRhdGEuaXRlbUlkLFxyXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnN0YXRlTWFuYWdlci5zZXRTdGF0ZShnYW1lU3RhdGUpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfdXBkYXRlTG9jYXRpb25Qcm9ncmVzcyhkYXRhKSB7XHJcbiAgICAgICAgLy8gVXBkYXRlIHZpc2l0ZWQgbG9jYXRpb25zIGluIGdhbWUgc3RhdGVcclxuICAgICAgICBjb25zdCBnYW1lU3RhdGUgPSB0aGlzLnN0YXRlTWFuYWdlci5nZXRTdGF0ZSgpO1xyXG4gICAgICAgIGlmICghZ2FtZVN0YXRlLnZpc2l0ZWRMb2NhdGlvbnMpIHtcclxuICAgICAgICAgICAgZ2FtZVN0YXRlLnZpc2l0ZWRMb2NhdGlvbnMgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFnYW1lU3RhdGUudmlzaXRlZExvY2F0aW9ucy5pbmNsdWRlcyhkYXRhLmxvY2F0aW9uSWQpKSB7XHJcbiAgICAgICAgICAgIGdhbWVTdGF0ZS52aXNpdGVkTG9jYXRpb25zLnB1c2goZGF0YS5sb2NhdGlvbklkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zdGF0ZU1hbmFnZXIuc2V0U3RhdGUoZ2FtZVN0YXRlKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgX3VwZGF0ZVBldFByb2dyZXNzKGRhdGEpIHtcclxuICAgICAgICAvLyBVcGRhdGUgcGV0IGhpc3RvcnkgaW4gZ2FtZSBzdGF0ZVxyXG4gICAgICAgIGNvbnN0IGdhbWVTdGF0ZSA9IHRoaXMuc3RhdGVNYW5hZ2VyLmdldFN0YXRlKCk7XHJcbiAgICAgICAgaWYgKCFnYW1lU3RhdGUucGV0SGlzdG9yeSkge1xyXG4gICAgICAgICAgICBnYW1lU3RhdGUucGV0SGlzdG9yeSA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnYW1lU3RhdGUucGV0SGlzdG9yeS5wdXNoKHtcclxuICAgICAgICAgICAgc291cmNlOiBkYXRhLnNvdXJjZSxcclxuICAgICAgICAgICAgcGV0VHlwZTogZGF0YS5wZXRUeXBlLFxyXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnN0YXRlTWFuYWdlci5zZXRTdGF0ZShnYW1lU3RhdGUpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfdXBkYXRlQ29va2luZ1Byb2dyZXNzKGRhdGEpIHtcclxuICAgICAgICAvLyBVcGRhdGUgY29va2luZyBoaXN0b3J5IGluIGdhbWUgc3RhdGVcclxuICAgICAgICBjb25zdCBnYW1lU3RhdGUgPSB0aGlzLnN0YXRlTWFuYWdlci5nZXRTdGF0ZSgpO1xyXG4gICAgICAgIGlmICghZ2FtZVN0YXRlLmNvb2tpbmdIaXN0b3J5KSB7XHJcbiAgICAgICAgICAgIGdhbWVTdGF0ZS5jb29raW5nSGlzdG9yeSA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnYW1lU3RhdGUuY29va2luZ0hpc3RvcnkucHVzaCh7XHJcbiAgICAgICAgICAgIGluZ3JlZGllbnRzOiBkYXRhLmluZ3JlZGllbnRzLFxyXG4gICAgICAgICAgICBsb2NhdGlvbjogZGF0YS5sb2NhdGlvbixcclxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZU1hbmFnZXIuc2V0U3RhdGUoZ2FtZVN0YXRlKTtcclxuICAgIH1cclxufVxyXG5cclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB3aW5kb3cuQWNoaWV2ZW1lbnRTeXN0ZW0gPSBBY2hpZXZlbWVudFN5c3RlbTtcclxuXHJcbi8vIEVTIE1vZHVsZSBleHBvcnRzXHJcbmV4cG9ydCB7IEFjaGlldmVtZW50U3lzdGVtIH07ICJdLCJuYW1lcyI6WyJBY2hpZXZlbWVudFN5c3RlbSIsImluaXRpYWxpemUiLCJjb25zb2xlIiwibG9nIiwiX2xvYWRBY2hpZXZlbWVudFN0YXRlIiwiX3NldHVwRXZlbnRMaXN0ZW5lcnMiLCJfY2hlY2tJbml0aWFsQWNoaWV2ZW1lbnRzIiwiZ2V0QWxsQWNoaWV2ZW1lbnRzIiwiYWNoaWV2ZW1lbnRzRGF0YSIsImdldFVubG9ja2VkQWNoaWV2ZW1lbnRzIiwidW5sb2NrZWRBY2hpZXZlbWVudHMiLCJnZXRBY2hpZXZlbWVudFByb2dyZXNzIiwiYWNoaWV2ZW1lbnRQcm9ncmVzcyIsImlzQWNoaWV2ZW1lbnRVbmxvY2tlZCIsImFjaGlldmVtZW50SWQiLCJoYXMiLCJnZXRUb3RhbFBvaW50cyIsInRvdGFsIiwiYWNoaWV2ZW1lbnQiLCJwb2ludHMiLCJjaGVja0FjaGlldmVtZW50cyIsImdhbWVTdGF0ZSIsInN0YXRlTWFuYWdlciIsImdldFN0YXRlIiwiT2JqZWN0IiwiZW50cmllcyIsIl9ldmFsdWF0ZUFjaGlldmVtZW50IiwiX3VubG9ja0FjaGlldmVtZW50IiwiZm9yY2VVbmxvY2tBY2hpZXZlbWVudCIsIndhcm4iLCJyZXNldEFjaGlldmVtZW50cyIsImNsZWFyIiwiX2luaXRpYWxpemVQcm9ncmVzcyIsIl9zYXZlQWNoaWV2ZW1lbnRTdGF0ZSIsImV2ZW50U3lzdGVtIiwiZW1pdCIsInNldFNraWxsU3lzdGVtIiwic2tpbGxNYW5hZ2VyIiwic2V0SW52ZW50b3J5U3lzdGVtIiwiaW52ZW50b3J5TWFuYWdlciIsImtleXMiLCJjdXJyZW50IiwicmVxdWlyZWQiLCJfZ2V0UmVxdWlyZWRWYWx1ZSIsImNvbXBsZXRlZCIsInNhdmVkU3RhdGUiLCJhY2hpZXZlbWVudHMiLCJTZXQiLCJ1bmxvY2tlZCIsInByb2dyZXNzIiwiZXJyb3IiLCJjdXJyZW50U3RhdGUiLCJBcnJheSIsImZyb20iLCJzZXRTdGF0ZSIsIm9uIiwiZGF0YSIsIl91cGRhdGVTa2lsbExldmVsUHJvZ3Jlc3MiLCJza2lsbE5hbWUiLCJuZXdMZXZlbCIsIl91cGRhdGVJbnZlbnRvcnlQcm9ncmVzcyIsIml0ZW1JZCIsIl91cGRhdGVUcmFkaW5nUHJvZ3Jlc3MiLCJfdXBkYXRlQ29uc3VtcHRpb25Qcm9ncmVzcyIsIl91cGRhdGVDcmFmdGluZ1Byb2dyZXNzIiwiX3VwZGF0ZUxvY2F0aW9uUHJvZ3Jlc3MiLCJfdXBkYXRlUGV0UHJvZ3Jlc3MiLCJfdXBkYXRlQ29va2luZ1Byb2dyZXNzIiwicmVxdWlyZW1lbnRzIiwic2tpbGxMZXZlbCIsInJlcXVpcmVkTGV2ZWwiLCJza2lsbCIsInNraWxscyIsImxldmVsIiwiYW55U2tpbGxMZXZlbCIsImhhc0FueVNraWxsQXRMZXZlbCIsInZhbHVlcyIsInNvbWUiLCJtdWx0aXBsZVNraWxsTGV2ZWxzIiwiY291bnQiLCJza2lsbHNBdExldmVsIiwiZmlsdGVyIiwibGVuZ3RoIiwidW5pcXVlSXRlbXMiLCJyZXF1aXJlZENvdW50IiwidW5pcXVlSXRlbUNvdW50IiwiaW52ZW50b3J5IiwiY3VzdG9tIiwiX2V2YWx1YXRlQ3VzdG9tUmVxdWlyZW1lbnQiLCJyZXF1aXJlbWVudFR5cGUiLCJ0cmFkaW5nSGlzdG9yeSIsInRyYWRlIiwibG9jYXRpb24iLCJjb25zdW1wdGlvbkhpc3RvcnkiLCJjb25zdW1wdGlvbiIsInBldEhpc3RvcnkiLCJwZXQiLCJzb3VyY2UiLCJjb29raW5nSGlzdG9yeSIsImNvb2tpbmciLCJpbmdyZWRpZW50cyIsImluY2x1ZGVzIiwiY3JhZnRpbmdIaXN0b3J5IiwidmlzaXRlZExvY2F0aW9ucyIsImFjaGlldmVtZW50UmVxdWlyZW1lbnRzIiwibG9jYXRpb25Db3VudCIsIk1hdGgiLCJtYXgiLCJhZGQiLCJ0b3RhbFBvaW50cyIsIm5hbWUiLCJtaW4iLCJwdXNoIiwidHlwZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJsb2NhdGlvbklkIiwicGV0VHlwZSIsImNvbnN0cnVjdG9yIiwid2luZG93Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/game-engine/systems/AchievementSystem.js\n"));

/***/ })

}]);