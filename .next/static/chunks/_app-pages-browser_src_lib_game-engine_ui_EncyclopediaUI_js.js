"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_src_lib_game-engine_ui_EncyclopediaUI_js"],{

/***/ "(app-pages-browser)/./src/lib/game-engine/ui/EncyclopediaUI.js":
/*!**************************************************!*\
  !*** ./src/lib/game-engine/ui/EncyclopediaUI.js ***!
  \**************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EncyclopediaUI: () => (/* binding */ EncyclopediaUI)\n/* harmony export */ });\n/**\r\n * Encyclopedia UI - Handles all encyclopedia user interface components\r\n * Provides search, browsing, and detailed entry viewing functionality\r\n */ class EncyclopediaUI {\n    /**\r\n   * Initialize the encyclopedia UI\r\n   */ initialize() {\n        this.createEncyclopediaContainer();\n        this.bindEvents();\n        this.showMainView();\n    }\n    /**\r\n   * Create the main encyclopedia container\r\n   */ createEncyclopediaContainer() {\n        // Create main container\n        const container = document.createElement('div');\n        container.id = 'encyclopedia-container';\n        container.className = 'encyclopedia-container';\n        container.style.display = 'none';\n        // Create header\n        const header = document.createElement('div');\n        header.className = 'encyclopedia-header';\n        header.innerHTML = '\\n      <div class=\"encyclopedia-title\">\\n        <span class=\"encyclopedia-icon\">\\uD83D\\uDCDA</span>\\n        <h2>Encyclopedia</h2>\\n      </div>\\n      <div class=\"encyclopedia-controls\">\\n        <button class=\"encyclopedia-back-btn\" id=\"encyclopedia-back-btn\" title=\"Back\">‚Üê</button>\\n        <button class=\"encyclopedia-home-btn\" id=\"encyclopedia-home-btn\" title=\"Home\">\\uD83C\\uDFE0</button>\\n      </div>\\n    ';\n        // Create search bar\n        const searchContainer = document.createElement('div');\n        searchContainer.className = 'encyclopedia-search';\n        searchContainer.innerHTML = '\\n      <input type=\"text\" id=\"encyclopedia-search-input\" placeholder=\"Search encyclopedia...\" class=\"encyclopedia-search-input\">\\n      <button id=\"encyclopedia-search-btn\" class=\"encyclopedia-search-btn\">\\uD83D\\uDD0D</button>\\n    ';\n        // Create content area\n        const content = document.createElement('div');\n        content.id = 'encyclopedia-content';\n        content.className = 'encyclopedia-content';\n        // Create navigation\n        const navigation = document.createElement('div');\n        navigation.id = 'encyclopedia-navigation';\n        navigation.className = 'encyclopedia-navigation';\n        // Create breadcrumb\n        const breadcrumb = document.createElement('div');\n        breadcrumb.id = 'encyclopedia-breadcrumb';\n        breadcrumb.className = 'encyclopedia-breadcrumb';\n        // Assemble container\n        container.appendChild(header);\n        container.appendChild(searchContainer);\n        container.appendChild(breadcrumb);\n        container.appendChild(navigation);\n        container.appendChild(content);\n        // Add to page\n        document.body.appendChild(container);\n    }\n    /**\r\n   * Bind event listeners\r\n   */ bindEvents() {\n        // Search functionality\n        const searchInput = document.getElementById('encyclopedia-search-input');\n        const searchBtn = document.getElementById('encyclopedia-search-btn');\n        searchInput.addEventListener('input', (e)=>{\n            this.searchQuery = e.target.value;\n            clearTimeout(this.searchTimeout);\n            this.searchTimeout = setTimeout(()=>{\n                this.performSearch();\n            }, 300);\n        });\n        searchBtn.addEventListener('click', ()=>{\n            this.performSearch();\n        });\n        // Navigation buttons\n        document.getElementById('encyclopedia-back-btn').addEventListener('click', ()=>{\n            this.goBack();\n        });\n        document.getElementById('encyclopedia-home-btn').addEventListener('click', ()=>{\n            this.showMainView();\n        });\n        // Keyboard shortcuts\n        document.addEventListener('keydown', (e)=>{\n            if (e.key === 'Escape' && this.isVisible()) {\n                this.hide();\n            }\n        });\n    }\n    /**\r\n   * Show the encyclopedia\r\n   */ show() {\n        const container = document.getElementById('encyclopedia-container');\n        container.style.display = 'block';\n        container.classList.add('encyclopedia-visible');\n    }\n    /**\r\n   * Hide the encyclopedia\r\n   */ hide() {\n        const container = document.getElementById('encyclopedia-container');\n        container.style.display = 'none';\n        container.classList.remove('encyclopedia-visible');\n    }\n    /**\r\n   * Check if encyclopedia is visible\r\n   * @returns {boolean} True if visible\r\n   */ isVisible() {\n        const container = document.getElementById('encyclopedia-container');\n        return container.style.display === 'block';\n    }\n    /**\r\n   * Show main encyclopedia view\r\n   */ showMainView() {\n        this.currentEntry = null;\n        this.currentCategory = null;\n        this.updateBreadcrumb([\n            'Encyclopedia'\n        ]);\n        this.showCategories();\n    }\n    /**\r\n   * Show categories view\r\n   */ showCategories() {\n        const navigation = document.getElementById('encyclopedia-navigation');\n        const content = document.getElementById('encyclopedia-content');\n        const categories = this.encyclopedia.getCategories();\n        // Create categories grid\n        const categoriesHTML = categories.map((category)=>'\\n      <div class=\"encyclopedia-category-card\" data-category=\"'.concat(category.name, '\">\\n        <div class=\"encyclopedia-category-icon\">').concat(category.icon, '</div>\\n        <div class=\"encyclopedia-category-info\">\\n          <h3 class=\"encyclopedia-category-name\">').concat(category.name, '</h3>\\n          <p class=\"encyclopedia-category-description\">').concat(category.description, '</p>\\n          <span class=\"encyclopedia-category-count\">').concat(category.entries.length, \" entries</span>\\n        </div>\\n      </div>\\n    \")).join('');\n        navigation.innerHTML = '\\n      <div class=\"encyclopedia-categories-grid\">\\n        '.concat(categoriesHTML, \"\\n      </div>\\n    \");\n        content.innerHTML = '\\n      <div class=\"encyclopedia-welcome\">\\n        <h2>Welcome to the Encyclopedia</h2>\\n        <p>Explore the vast knowledge of Taverns and Treasures. Use the search bar above or browse by category to discover skills, items, species, and more.</p>\\n        <div class=\"encyclopedia-stats\">\\n          <div class=\"encyclopedia-stat\">\\n            <span class=\"encyclopedia-stat-number\">'.concat(this.encyclopedia.getStatistics().totalEntries, '</span>\\n            <span class=\"encyclopedia-stat-label\">Total Entries</span>\\n          </div>\\n          <div class=\"encyclopedia-stat\">\\n            <span class=\"encyclopedia-stat-number\">').concat(this.encyclopedia.getStatistics().categories, '</span>\\n            <span class=\"encyclopedia-stat-label\">Categories</span>\\n          </div>\\n        </div>\\n      </div>\\n    ');\n        // Bind category click events\n        const categoryCards = navigation.querySelectorAll('.encyclopedia-category-card');\n        categoryCards.forEach((card)=>{\n            card.addEventListener('click', ()=>{\n                const categoryName = card.dataset.category;\n                this.showCategory(categoryName);\n            });\n        });\n    }\n    /**\r\n   * Show entries for a specific category\r\n   * @param {string} categoryName - Category name\r\n   */ showCategory(categoryName) {\n        var _this_encyclopedia_categories_get;\n        this.currentCategory = categoryName;\n        this.updateBreadcrumb([\n            'Encyclopedia',\n            categoryName\n        ]);\n        const entries = this.encyclopedia.getEntriesByCategory(categoryName);\n        const navigation = document.getElementById('encyclopedia-navigation');\n        const content = document.getElementById('encyclopedia-content');\n        // Group entries by subcategory if available\n        const groupedEntries = this.groupEntriesBySubcategory(entries);\n        let entriesHTML = '';\n        for (const [subcategory, subcategoryEntries] of Object.entries(groupedEntries)){\n            if (subcategory !== 'default') {\n                entriesHTML += '<h3 class=\"encyclopedia-subcategory\">'.concat(subcategory, \"</h3>\");\n            }\n            const subcategoryHTML = subcategoryEntries.map((entry)=>'\\n        <div class=\"encyclopedia-entry-card\" data-entry-id=\"'.concat(entry.id, '\">\\n          <div class=\"encyclopedia-entry-icon\">').concat(entry.icon || 'üìÑ', '</div>\\n          <div class=\"encyclopedia-entry-info\">\\n            <h4 class=\"encyclopedia-entry-name\">').concat(entry.name, '</h4>\\n            <p class=\"encyclopedia-entry-description\">').concat(entry.description, '</p>\\n            <div class=\"encyclopedia-entry-tags\">\\n              ').concat(entry.tags.map((tag)=>'<span class=\"encyclopedia-tag\">'.concat(tag, \"</span>\")).join(''), \"\\n            </div>\\n          </div>\\n        </div>\\n      \")).join('');\n            entriesHTML += '<div class=\"encyclopedia-entries-grid\">'.concat(subcategoryHTML, \"</div>\");\n        }\n        navigation.innerHTML = '\\n      <div class=\"encyclopedia-category-header\">\\n        <button class=\"encyclopedia-back-to-categories\">‚Üê Back to Categories</button>\\n        <h2>'.concat(categoryName, '</h2>\\n        <span class=\"encyclopedia-entry-count\">').concat(entries.length, ' entries</span>\\n      </div>\\n      <div class=\"encyclopedia-entries-container\">\\n        ').concat(entriesHTML, \"\\n      </div>\\n    \");\n        content.innerHTML = '\\n      <div class=\"encyclopedia-category-info\">\\n        <h3>About '.concat(categoryName, \"</h3>\\n        <p>\").concat(((_this_encyclopedia_categories_get = this.encyclopedia.categories.get(categoryName)) === null || _this_encyclopedia_categories_get === void 0 ? void 0 : _this_encyclopedia_categories_get.description) || 'No description available.', \"</p>\\n      </div>\\n    \");\n        // Bind events\n        navigation.querySelector('.encyclopedia-back-to-categories').addEventListener('click', ()=>{\n            this.showCategories();\n        });\n        const entryCards = navigation.querySelectorAll('.encyclopedia-entry-card');\n        entryCards.forEach((card)=>{\n            card.addEventListener('click', ()=>{\n                const entryId = card.dataset.entryId;\n                this.showEntry(entryId);\n            });\n        });\n    }\n    /**\r\n   * Show detailed entry view\r\n   * @param {string} entryId - Entry ID\r\n   */ showEntry(entryId) {\n        const entry = this.encyclopedia.getEntry(entryId);\n        if (!entry) return;\n        this.addToHistory(entryId);\n        this.currentEntry = entry;\n        this.updateBreadcrumb([\n            'Encyclopedia',\n            entry.category,\n            entry.name\n        ]);\n        const navigation = document.getElementById('encyclopedia-navigation');\n        const content = document.getElementById('encyclopedia-content');\n        // Create entry details\n        const entryHTML = this.createEntryHTML(entry);\n        navigation.innerHTML = '\\n      <div class=\"encyclopedia-entry-header\">\\n        <button class=\"encyclopedia-back-to-category\">‚Üê Back to '.concat(entry.category, '</button>\\n        <div class=\"encyclopedia-entry-title\">\\n          <span class=\"encyclopedia-entry-icon\">').concat(entry.icon || 'üìÑ', \"</span>\\n          <h2>\").concat(entry.name, \"</h2>\\n        </div>\\n      </div>\\n    \");\n        content.innerHTML = entryHTML;\n        // Bind events\n        navigation.querySelector('.encyclopedia-back-to-category').addEventListener('click', ()=>{\n            this.showCategory(entry.category);\n        });\n        // Bind cross-reference clicks\n        const crossRefLinks = content.querySelectorAll('.encyclopedia-crossref-link');\n        crossRefLinks.forEach((link)=>{\n            link.addEventListener('click', (e)=>{\n                e.preventDefault();\n                const targetId = link.dataset.target;\n                this.showEntry(targetId);\n            });\n        });\n    }\n    /**\r\n   * Create HTML for entry details\r\n   * @param {Object} entry - Entry data\r\n   * @returns {string} HTML string\r\n   */ createEntryHTML(entry) {\n        let html = '\\n      <div class=\"encyclopedia-entry-details\">\\n        <div class=\"encyclopedia-entry-main\">\\n          <div class=\"encyclopedia-entry-description-full\">\\n            <h3>Description</h3>\\n            <p>'.concat(entry.description, \"</p>\\n          </div>\\n    \");\n        // Add examine text for items\n        if (entry.examineText && entry.examineText !== entry.description) {\n            html += '\\n        <div class=\"encyclopedia-entry-examine\">\\n          <h3>Examine</h3>\\n          <p>'.concat(entry.examineText, \"</p>\\n        </div>\\n      \");\n        }\n        // Add requirements for skills\n        if (entry.requirements) {\n            html += '\\n        <div class=\"encyclopedia-entry-requirements\">\\n          <h3>Requirements</h3>\\n          <p>Requires '.concat(entry.requirements.skill, \" level \").concat(entry.requirements.level, \"</p>\\n        </div>\\n      \");\n        }\n        // Add detailed data based on type\n        if (entry.type === 'item') {\n            html += this.createItemDetailsHTML(entry);\n        } else if (entry.type === 'species') {\n            html += this.createSpeciesDetailsHTML(entry);\n        } else if (entry.type === 'skill') {\n            html += this.createSkillDetailsHTML(entry);\n        }\n        // Add cross-references\n        const crossRefs = this.encyclopedia.getCrossReferences(entry.id);\n        if (crossRefs.length > 0) {\n            html += '\\n        <div class=\"encyclopedia-entry-crossrefs\">\\n          <h3>Related Entries</h3>\\n          <div class=\"encyclopedia-crossrefs-list\">\\n            '.concat(crossRefs.map((crossRef)=>'\\n              <a href=\"#\" class=\"encyclopedia-crossref-link\" data-target=\"'.concat(crossRef.target, '\">\\n                <span class=\"encyclopedia-crossref-icon\">').concat(crossRef.targetEntry.icon || 'üìÑ', '</span>\\n                <span class=\"encyclopedia-crossref-name\">').concat(crossRef.targetEntry.name, '</span>\\n                <span class=\"encyclopedia-crossref-type\">').concat(crossRef.type, \"</span>\\n              </a>\\n            \")).join(''), \"\\n          </div>\\n        </div>\\n      \");\n        }\n        html += '\\n        </div>\\n        <div class=\"encyclopedia-entry-sidebar\">\\n          <div class=\"encyclopedia-entry-meta\">\\n            <h3>Entry Information</h3>\\n            <div class=\"encyclopedia-meta-item\">\\n              <span class=\"encyclopedia-meta-label\">Type:</span>\\n              <span class=\"encyclopedia-meta-value\">'.concat(entry.type, '</span>\\n            </div>\\n            <div class=\"encyclopedia-meta-item\">\\n              <span class=\"encyclopedia-meta-label\">Category:</span>\\n              <span class=\"encyclopedia-meta-value\">').concat(entry.category, \"</span>\\n            </div>\\n            \").concat(entry.subcategory ? '\\n              <div class=\"encyclopedia-meta-item\">\\n                <span class=\"encyclopedia-meta-label\">Subcategory:</span>\\n                <span class=\"encyclopedia-meta-value\">'.concat(entry.subcategory, \"</span>\\n              </div>\\n            \") : '', '\\n            <div class=\"encyclopedia-meta-item\">\\n              <span class=\"encyclopedia-meta-label\">Tags:</span>\\n              <div class=\"encyclopedia-tags\">\\n                ').concat(entry.tags.map((tag)=>'<span class=\"encyclopedia-tag\">'.concat(tag, \"</span>\")).join(''), \"\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    \");\n        return html;\n    }\n    /**\r\n   * Create item-specific details HTML\r\n   * @param {Object} entry - Item entry\r\n   * @returns {string} HTML string\r\n   */ createItemDetailsHTML(entry) {\n        const item = entry.data;\n        let html = '<div class=\"encyclopedia-entry-item-details\">';\n        if (item.stackable !== undefined) {\n            html += '\\n        <div class=\"encyclopedia-item-property\">\\n          <span class=\"encyclopedia-property-label\">Stackable:</span>\\n          <span class=\"encyclopedia-property-value\">'.concat(item.stackable ? 'Yes' : 'No', \"</span>\\n        </div>\\n      \");\n        }\n        if (item.maxStack) {\n            html += '\\n        <div class=\"encyclopedia-item-property\">\\n          <span class=\"encyclopedia-property-label\">Max Stack:</span>\\n          <span class=\"encyclopedia-property-value\">'.concat(item.maxStack, \"</span>\\n        </div>\\n      \");\n        }\n        if (item.equipmentType) {\n            html += '\\n        <div class=\"encyclopedia-item-property\">\\n          <span class=\"encyclopedia-property-label\">Equipment Type:</span>\\n          <span class=\"encyclopedia-property-value\">'.concat(item.equipmentType, \"</span>\\n        </div>\\n      \");\n        }\n        html += '</div>';\n        return html;\n    }\n    /**\r\n   * Create species-specific details HTML\r\n   * @param {Object} entry - Species entry\r\n   * @returns {string} HTML string\r\n   */ createSpeciesDetailsHTML(entry) {\n        const species = entry.data;\n        let html = '<div class=\"encyclopedia-entry-species-details\">';\n        if (species.attributes) {\n            html += '\\n        <div class=\"encyclopedia-species-attributes\">\\n          <h3>Attributes</h3>\\n          <div class=\"encyclopedia-attributes-grid\">\\n            '.concat(Object.entries(species.attributes).map((param)=>{\n                let [attr, range] = param;\n                return '\\n              <div class=\"encyclopedia-attribute\">\\n                <span class=\"encyclopedia-attribute-name\">'.concat(attr, '</span>\\n                <span class=\"encyclopedia-attribute-range\">').concat(range.min, \"-\").concat(range.max, \"</span>\\n              </div>\\n            \");\n            }).join(''), \"\\n          </div>\\n        </div>\\n      \");\n        }\n        if (species.bonuses) {\n            html += '\\n        <div class=\"encyclopedia-species-bonuses\">\\n          <h3>Bonuses</h3>\\n          <div class=\"encyclopedia-bonuses-list\">\\n            '.concat(Object.entries(species.bonuses).map((param)=>{\n                let [bonus, value] = param;\n                return '\\n              <div class=\"encyclopedia-bonus\">\\n                <span class=\"encyclopedia-bonus-name\">'.concat(bonus, '</span>\\n                <span class=\"encyclopedia-bonus-value\">+').concat(value, \"</span>\\n              </div>\\n            \");\n            }).join(''), \"\\n          </div>\\n        </div>\\n      \");\n        }\n        if (species.professions) {\n            html += '\\n        <div class=\"encyclopedia-species-professions\">\\n          <h3>Professions</h3>\\n          <div class=\"encyclopedia-professions-list\">\\n            '.concat(species.professions.map((profession)=>'\\n              <span class=\"encyclopedia-profession\">'.concat(profession, \"</span>\\n            \")).join(''), \"\\n          </div>\\n        </div>\\n      \");\n        }\n        html += '</div>';\n        return html;\n    }\n    /**\r\n   * Create skill-specific details HTML\r\n   * @param {Object} entry - Skill entry\r\n   * @returns {string} HTML string\r\n   */ createSkillDetailsHTML(entry) {\n        const skill = entry.data;\n        let html = '<div class=\"encyclopedia-entry-skill-details\">';\n        if (skill.sub_skills) {\n            html += '\\n        <div class=\"encyclopedia-skill-subskills\">\\n          <h3>Sub-skills</h3>\\n          <div class=\"encyclopedia-subskills-list\">\\n            '.concat(Object.entries(skill.sub_skills).map((param)=>{\n                let [subSkillName, subSkillData] = param;\n                return '\\n              <div class=\"encyclopedia-subskill\">\\n                <span class=\"encyclopedia-subskill-name\">'.concat(subSkillName, '</span>\\n                <span class=\"encyclopedia-subskill-description\">').concat(subSkillData.description, \"</span>\\n              </div>\\n            \");\n            }).join(''), \"\\n          </div>\\n        </div>\\n      \");\n        }\n        html += '</div>';\n        return html;\n    }\n    /**\r\n   * Perform search\r\n   */ performSearch() {\n        if (!this.searchQuery || this.searchQuery.length < 2) {\n            this.showMainView();\n            return;\n        }\n        const results = this.encyclopedia.search(this.searchQuery);\n        this.showSearchResults(results);\n    }\n    /**\r\n   * Show search results\r\n   * @param {Array} results - Search results\r\n   */ showSearchResults(results) {\n        this.updateBreadcrumb([\n            'Encyclopedia',\n            'Search Results'\n        ]);\n        const navigation = document.getElementById('encyclopedia-navigation');\n        const content = document.getElementById('encyclopedia-content');\n        if (results.length === 0) {\n            navigation.innerHTML = '\\n        <div class=\"encyclopedia-search-header\">\\n          <button class=\"encyclopedia-back-to-main\">‚Üê Back to Encyclopedia</button>\\n          <h2>Search Results</h2>\\n        </div>\\n      ';\n            content.innerHTML = '\\n        <div class=\"encyclopedia-no-results\">\\n          <h3>No results found</h3>\\n          <p>No entries match your search for \"'.concat(this.searchQuery, '\". Try different keywords or browse by category.</p>\\n        </div>\\n      ');\n        } else {\n            const resultsHTML = results.map((entry)=>'\\n        <div class=\"encyclopedia-search-result\" data-entry-id=\"'.concat(entry.id, '\">\\n          <div class=\"encyclopedia-result-icon\">').concat(entry.icon || 'üìÑ', '</div>\\n          <div class=\"encyclopedia-result-info\">\\n            <h4 class=\"encyclopedia-result-name\">').concat(entry.name, '</h4>\\n            <p class=\"encyclopedia-result-description\">').concat(entry.description, '</p>\\n            <div class=\"encyclopedia-result-meta\">\\n              <span class=\"encyclopedia-result-category\">').concat(entry.category, \"</span>\\n              \").concat(entry.subcategory ? '<span class=\"encyclopedia-result-subcategory\">'.concat(entry.subcategory, \"</span>\") : '', \"\\n            </div>\\n          </div>\\n        </div>\\n      \")).join('');\n            navigation.innerHTML = '\\n        <div class=\"encyclopedia-search-header\">\\n          <button class=\"encyclopedia-back-to-main\">‚Üê Back to Encyclopedia</button>\\n          <h2>Search Results</h2>\\n          <span class=\"encyclopedia-result-count\">'.concat(results.length, ' results for \"').concat(this.searchQuery, '\"</span>\\n        </div>\\n        <div class=\"encyclopedia-search-results\">\\n          ').concat(resultsHTML, \"\\n        </div>\\n      \");\n        }\n        // Bind events\n        navigation.querySelector('.encyclopedia-back-to-main').addEventListener('click', ()=>{\n            this.showMainView();\n        });\n        const resultItems = navigation.querySelectorAll('.encyclopedia-search-result');\n        resultItems.forEach((item)=>{\n            item.addEventListener('click', ()=>{\n                const entryId = item.dataset.entryId;\n                this.showEntry(entryId);\n            });\n        });\n    }\n    /**\r\n   * Group entries by subcategory\r\n   * @param {Array} entries - Array of entries\r\n   * @returns {Object} Grouped entries\r\n   */ groupEntriesBySubcategory(entries) {\n        const grouped = {};\n        entries.forEach((entry)=>{\n            const subcategory = entry.subcategory || 'default';\n            if (!grouped[subcategory]) {\n                grouped[subcategory] = [];\n            }\n            grouped[subcategory].push(entry);\n        });\n        // Sort entries within each subcategory\n        Object.values(grouped).forEach((entries)=>{\n            entries.sort((a, b)=>a.name.localeCompare(b.name));\n        });\n        return grouped;\n    }\n    /**\r\n   * Update breadcrumb navigation\r\n   * @param {Array} breadcrumbs - Array of breadcrumb items\r\n   */ updateBreadcrumb(breadcrumbs) {\n        const breadcrumb = document.getElementById('encyclopedia-breadcrumb');\n        breadcrumb.innerHTML = breadcrumbs.map((crumb, index)=>{\n            if (index === breadcrumbs.length - 1) {\n                return '<span class=\"encyclopedia-breadcrumb-current\">'.concat(crumb, \"</span>\");\n            } else {\n                return '<span class=\"encyclopedia-breadcrumb-item\">'.concat(crumb, \"</span>\");\n            }\n        }).join(' <span class=\"encyclopedia-breadcrumb-separator\">/</span> ');\n    }\n    /**\r\n   * Add entry to navigation history\r\n   * @param {string} entryId - Entry ID\r\n   */ addToHistory(entryId) {\n        // Remove any entries after current index\n        this.history = this.history.slice(0, this.historyIndex + 1);\n        // Add new entry\n        this.history.push(entryId);\n        this.historyIndex = this.history.length - 1;\n    }\n    /**\r\n   * Go back in history\r\n   */ goBack() {\n        if (this.historyIndex > 0) {\n            this.historyIndex--;\n            const entryId = this.history[this.historyIndex];\n            this.showEntry(entryId);\n        } else {\n            this.showMainView();\n        }\n    }\n    constructor(encyclopediaSystem){\n        this.encyclopedia = encyclopediaSystem;\n        this.currentEntry = null;\n        this.searchQuery = '';\n        this.currentCategory = null;\n        this.searchTimeout = null;\n        this.history = [];\n        this.historyIndex = -1;\n    }\n}\nif (true) window.EncyclopediaUI = EncyclopediaUI;\n// ES Module exports\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvZ2FtZS1lbmdpbmUvdWkvRW5jeWNsb3BlZGlhVUkuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7Q0FHQyxHQUNELE1BQU1BO0lBV0o7O0dBRUMsR0FDREMsYUFBYTtRQUNYLElBQUksQ0FBQ0MsMkJBQTJCO1FBQ2hDLElBQUksQ0FBQ0MsVUFBVTtRQUNmLElBQUksQ0FBQ0MsWUFBWTtJQUNuQjtJQUVBOztHQUVDLEdBQ0RGLDhCQUE4QjtRQUM1Qix3QkFBd0I7UUFDeEIsTUFBTUcsWUFBWUMsU0FBU0MsYUFBYSxDQUFDO1FBQ3pDRixVQUFVRyxFQUFFLEdBQUc7UUFDZkgsVUFBVUksU0FBUyxHQUFHO1FBQ3RCSixVQUFVSyxLQUFLLENBQUNDLE9BQU8sR0FBRztRQUUxQixnQkFBZ0I7UUFDaEIsTUFBTUMsU0FBU04sU0FBU0MsYUFBYSxDQUFDO1FBQ3RDSyxPQUFPSCxTQUFTLEdBQUc7UUFDbkJHLE9BQU9DLFNBQVMsR0FBSTtRQVdwQixvQkFBb0I7UUFDcEIsTUFBTUMsa0JBQWtCUixTQUFTQyxhQUFhLENBQUM7UUFDL0NPLGdCQUFnQkwsU0FBUyxHQUFHO1FBQzVCSyxnQkFBZ0JELFNBQVMsR0FBSTtRQUs3QixzQkFBc0I7UUFDdEIsTUFBTUUsVUFBVVQsU0FBU0MsYUFBYSxDQUFDO1FBQ3ZDUSxRQUFRUCxFQUFFLEdBQUc7UUFDYk8sUUFBUU4sU0FBUyxHQUFHO1FBRXBCLG9CQUFvQjtRQUNwQixNQUFNTyxhQUFhVixTQUFTQyxhQUFhLENBQUM7UUFDMUNTLFdBQVdSLEVBQUUsR0FBRztRQUNoQlEsV0FBV1AsU0FBUyxHQUFHO1FBRXZCLG9CQUFvQjtRQUNwQixNQUFNUSxhQUFhWCxTQUFTQyxhQUFhLENBQUM7UUFDMUNVLFdBQVdULEVBQUUsR0FBRztRQUNoQlMsV0FBV1IsU0FBUyxHQUFHO1FBRXZCLHFCQUFxQjtRQUNyQkosVUFBVWEsV0FBVyxDQUFDTjtRQUN0QlAsVUFBVWEsV0FBVyxDQUFDSjtR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SUFBSSxDQUFDQSxZQUFZO1lBQ2pCLE1BQU0zRCxVQUFVLElBQUksQ0FBQ3lELE9BQU8sQ0FBQyxJQUFJLENBQUNFLFlBQVksQ0FBQztZQUMvQyxJQUFJLENBQUMxRCxTQUFTLENBQUNEO1FBQ2pCLE9BQU87WUFDTCxJQUFJLENBQUMzRSxZQUFZO1FBQ25CO0lBQ0Y7SUEzcUJBdUksWUFBWUMsa0JBQWtCLENBQUU7UUFDOUIsSUFBSSxDQUFDL0YsWUFBWSxHQUFHK0Y7UUFDcEIsSUFBSSxDQUFDcEcsWUFBWSxHQUFHO1FBQ3BCLElBQUksQ0FBQ2YsV0FBVyxHQUFHO1FBQ25CLElBQUksQ0FBQ2dCLGVBQWUsR0FBRztRQUN2QixJQUFJLENBQUNaLGFBQWEsR0FBRztRQUNyQixJQUFJLENBQUMyRyxPQUFPLEdBQUcsRUFBRTtRQUNqQixJQUFJLENBQUNFLFlBQVksR0FBRyxDQUFDO0lBQ3ZCO0FBb3FCRjtBQUVBLElBQUksSUFBNkIsRUFBRUcsT0FBTzdJLGNBQWMsR0FBR0E7QUFFM0Qsb0JBQW9CO0FBQ00iLCJzb3VyY2VzIjpbIkM6XFxHaXRIdWJcXFNlbGZcXHRhdmVybnNcXHNyY1xcbGliXFxnYW1lLWVuZ2luZVxcdWlcXEVuY3ljbG9wZWRpYVVJLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBFbmN5Y2xvcGVkaWEgVUkgLSBIYW5kbGVzIGFsbCBlbmN5Y2xvcGVkaWEgdXNlciBpbnRlcmZhY2UgY29tcG9uZW50c1xyXG4gKiBQcm92aWRlcyBzZWFyY2gsIGJyb3dzaW5nLCBhbmQgZGV0YWlsZWQgZW50cnkgdmlld2luZyBmdW5jdGlvbmFsaXR5XHJcbiAqL1xyXG5jbGFzcyBFbmN5Y2xvcGVkaWFVSSB7XHJcbiAgY29uc3RydWN0b3IoZW5jeWNsb3BlZGlhU3lzdGVtKSB7XHJcbiAgICB0aGlzLmVuY3ljbG9wZWRpYSA9IGVuY3ljbG9wZWRpYVN5c3RlbTtcclxuICAgIHRoaXMuY3VycmVudEVudHJ5ID0gbnVsbDtcclxuICAgIHRoaXMuc2VhcmNoUXVlcnkgPSAnJztcclxuICAgIHRoaXMuY3VycmVudENhdGVnb3J5ID0gbnVsbDtcclxuICAgIHRoaXMuc2VhcmNoVGltZW91dCA9IG51bGw7XHJcbiAgICB0aGlzLmhpc3RvcnkgPSBbXTtcclxuICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gLTE7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbml0aWFsaXplIHRoZSBlbmN5Y2xvcGVkaWEgVUlcclxuICAgKi9cclxuICBpbml0aWFsaXplKCkge1xyXG4gICAgdGhpcy5jcmVhdGVFbmN5Y2xvcGVkaWFDb250YWluZXIoKTtcclxuICAgIHRoaXMuYmluZEV2ZW50cygpO1xyXG4gICAgdGhpcy5zaG93TWFpblZpZXcoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSB0aGUgbWFpbiBlbmN5Y2xvcGVkaWEgY29udGFpbmVyXHJcbiAgICovXHJcbiAgY3JlYXRlRW5jeWNsb3BlZGlhQ29udGFpbmVyKCkge1xyXG4gICAgLy8gQ3JlYXRlIG1haW4gY29udGFpbmVyXHJcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnRhaW5lci5pZCA9ICdlbmN5Y2xvcGVkaWEtY29udGFpbmVyJztcclxuICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSAnZW5jeWNsb3BlZGlhLWNvbnRhaW5lcic7XHJcbiAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHJcbiAgICAvLyBDcmVhdGUgaGVhZGVyXHJcbiAgICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGhlYWRlci5jbGFzc05hbWUgPSAnZW5jeWNsb3BlZGlhLWhlYWRlcic7XHJcbiAgICBoZWFkZXIuaW5uZXJIVE1MID0gYFxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLXRpdGxlXCI+XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJlbmN5Y2xvcGVkaWEtaWNvblwiPvCfk5o8L3NwYW4+XHJcbiAgICAgICAgPGgyPkVuY3ljbG9wZWRpYTwvaDI+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLWNvbnRyb2xzXCI+XHJcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVuY3ljbG9wZWRpYS1iYWNrLWJ0blwiIGlkPVwiZW5jeWNsb3BlZGlhLWJhY2stYnRuXCIgdGl0bGU9XCJCYWNrXCI+4oaQPC9idXR0b24+XHJcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVuY3ljbG9wZWRpYS1ob21lLWJ0blwiIGlkPVwiZW5jeWNsb3BlZGlhLWhvbWUtYnRuXCIgdGl0bGU9XCJIb21lXCI+8J+PoDwvYnV0dG9uPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIGA7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHNlYXJjaCBiYXJcclxuICAgIGNvbnN0IHNlYXJjaENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgc2VhcmNoQ29udGFpbmVyLmNsYXNzTmFtZSA9ICdlbmN5Y2xvcGVkaWEtc2VhcmNoJztcclxuICAgIHNlYXJjaENvbnRhaW5lci5pbm5lckhUTUwgPSBgXHJcbiAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwiZW5jeWNsb3BlZGlhLXNlYXJjaC1pbnB1dFwiIHBsYWNlaG9sZGVyPVwiU2VhcmNoIGVuY3ljbG9wZWRpYS4uLlwiIGNsYXNzPVwiZW5jeWNsb3BlZGlhLXNlYXJjaC1pbnB1dFwiPlxyXG4gICAgICA8YnV0dG9uIGlkPVwiZW5jeWNsb3BlZGlhLXNlYXJjaC1idG5cIiBjbGFzcz1cImVuY3ljbG9wZWRpYS1zZWFyY2gtYnRuXCI+8J+UjTwvYnV0dG9uPlxyXG4gICAgYDtcclxuXHJcbiAgICAvLyBDcmVhdGUgY29udGVudCBhcmVhXHJcbiAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb250ZW50LmlkID0gJ2VuY3ljbG9wZWRpYS1jb250ZW50JztcclxuICAgIGNvbnRlbnQuY2xhc3NOYW1lID0gJ2VuY3ljbG9wZWRpYS1jb250ZW50JztcclxuXHJcbiAgICAvLyBDcmVhdGUgbmF2aWdhdGlvblxyXG4gICAgY29uc3QgbmF2aWdhdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgbmF2aWdhdGlvbi5pZCA9ICdlbmN5Y2xvcGVkaWEtbmF2aWdhdGlvbic7XHJcbiAgICBuYXZpZ2F0aW9uLmNsYXNzTmFtZSA9ICdlbmN5Y2xvcGVkaWEtbmF2aWdhdGlvbic7XHJcblxyXG4gICAgLy8gQ3JlYXRlIGJyZWFkY3J1bWJcclxuICAgIGNvbnN0IGJyZWFkY3J1bWIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGJyZWFkY3J1bWIuaWQgPSAnZW5jeWNsb3BlZGlhLWJyZWFkY3J1bWInO1xyXG4gICAgYnJlYWRjcnVtYi5jbGFzc05hbWUgPSAnZW5jeWNsb3BlZGlhLWJyZWFkY3J1bWInO1xyXG5cclxuICAgIC8vIEFzc2VtYmxlIGNvbnRhaW5lclxyXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGhlYWRlcik7XHJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc2VhcmNoQ29udGFpbmVyKTtcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChicmVhZGNydW1iKTtcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChuYXZpZ2F0aW9uKTtcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjb250ZW50KTtcclxuXHJcbiAgICAvLyBBZGQgdG8gcGFnZVxyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQmluZCBldmVudCBsaXN0ZW5lcnNcclxuICAgKi9cclxuICBiaW5kRXZlbnRzKCkge1xyXG4gICAgLy8gU2VhcmNoIGZ1bmN0aW9uYWxpdHlcclxuICAgIGNvbnN0IHNlYXJjaElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VuY3ljbG9wZWRpYS1zZWFyY2gtaW5wdXQnKTtcclxuICAgIGNvbnN0IHNlYXJjaEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbmN5Y2xvcGVkaWEtc2VhcmNoLWJ0bicpO1xyXG5cclxuICAgIHNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcclxuICAgICAgdGhpcy5zZWFyY2hRdWVyeSA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5zZWFyY2hUaW1lb3V0KTtcclxuICAgICAgdGhpcy5zZWFyY2hUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5wZXJmb3JtU2VhcmNoKCk7XHJcbiAgICAgIH0sIDMwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzZWFyY2hCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMucGVyZm9ybVNlYXJjaCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gTmF2aWdhdGlvbiBidXR0b25zXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW5jeWNsb3BlZGlhLWJhY2stYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuZ29CYWNrKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW5jeWNsb3BlZGlhLWhvbWUtYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuc2hvd01haW5WaWV3KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBLZXlib2FyZCBzaG9ydGN1dHNcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnICYmIHRoaXMuaXNWaXNpYmxlKCkpIHtcclxuICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTaG93IHRoZSBlbmN5Y2xvcGVkaWFcclxuICAgKi9cclxuICBzaG93KCkge1xyXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VuY3ljbG9wZWRpYS1jb250YWluZXInKTtcclxuICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdlbmN5Y2xvcGVkaWEtdmlzaWJsZScpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGlkZSB0aGUgZW5jeWNsb3BlZGlhXHJcbiAgICovXHJcbiAgaGlkZSgpIHtcclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbmN5Y2xvcGVkaWEtY29udGFpbmVyJyk7XHJcbiAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIGNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdlbmN5Y2xvcGVkaWEtdmlzaWJsZScpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2sgaWYgZW5jeWNsb3BlZGlhIGlzIHZpc2libGVcclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2aXNpYmxlXHJcbiAgICovXHJcbiAgaXNWaXNpYmxlKCkge1xyXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VuY3ljbG9wZWRpYS1jb250YWluZXInKTtcclxuICAgIHJldHVybiBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9PT0gJ2Jsb2NrJztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNob3cgbWFpbiBlbmN5Y2xvcGVkaWEgdmlld1xyXG4gICAqL1xyXG4gIHNob3dNYWluVmlldygpIHtcclxuICAgIHRoaXMuY3VycmVudEVudHJ5ID0gbnVsbDtcclxuICAgIHRoaXMuY3VycmVudENhdGVnb3J5ID0gbnVsbDtcclxuICAgIHRoaXMudXBkYXRlQnJlYWRjcnVtYihbJ0VuY3ljbG9wZWRpYSddKTtcclxuICAgIHRoaXMuc2hvd0NhdGVnb3JpZXMoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNob3cgY2F0ZWdvcmllcyB2aWV3XHJcbiAgICovXHJcbiAgc2hvd0NhdGVnb3JpZXMoKSB7XHJcbiAgICBjb25zdCBuYXZpZ2F0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VuY3ljbG9wZWRpYS1uYXZpZ2F0aW9uJyk7XHJcbiAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VuY3ljbG9wZWRpYS1jb250ZW50Jyk7XHJcblxyXG4gICAgY29uc3QgY2F0ZWdvcmllcyA9IHRoaXMuZW5jeWNsb3BlZGlhLmdldENhdGVnb3JpZXMoKTtcclxuICAgIFxyXG4gICAgLy8gQ3JlYXRlIGNhdGVnb3JpZXMgZ3JpZFxyXG4gICAgY29uc3QgY2F0ZWdvcmllc0hUTUwgPSBjYXRlZ29yaWVzLm1hcChjYXRlZ29yeSA9PiBgXHJcbiAgICAgIDxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtY2F0ZWdvcnktY2FyZFwiIGRhdGEtY2F0ZWdvcnk9XCIke2NhdGVnb3J5Lm5hbWV9XCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImVuY3ljbG9wZWRpYS1jYXRlZ29yeS1pY29uXCI+JHtjYXRlZ29yeS5pY29ufTwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtY2F0ZWdvcnktaW5mb1wiPlxyXG4gICAgICAgICAgPGgzIGNsYXNzPVwiZW5jeWNsb3BlZGlhLWNhdGVnb3J5LW5hbWVcIj4ke2NhdGVnb3J5Lm5hbWV9PC9oMz5cclxuICAgICAgICAgIDxwIGNsYXNzPVwiZW5jeWNsb3BlZGlhLWNhdGVnb3J5LWRlc2NyaXB0aW9uXCI+JHtjYXRlZ29yeS5kZXNjcmlwdGlvbn08L3A+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImVuY3ljbG9wZWRpYS1jYXRlZ29yeS1jb3VudFwiPiR7Y2F0ZWdvcnkuZW50cmllcy5sZW5ndGh9IGVudHJpZXM8L3NwYW4+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgYCkuam9pbignJyk7XHJcblxyXG4gICAgbmF2aWdhdGlvbi5pbm5lckhUTUwgPSBgXHJcbiAgICAgIDxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtY2F0ZWdvcmllcy1ncmlkXCI+XHJcbiAgICAgICAgJHtjYXRlZ29yaWVzSFRNTH1cclxuICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG5cclxuICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gYFxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLXdlbGNvbWVcIj5cclxuICAgICAgICA8aDI+V2VsY29tZSB0byB0aGUgRW5jeWNsb3BlZGlhPC9oMj5cclxuICAgICAgICA8cD5FeHBsb3JlIHRoZSB2YXN0IGtub3dsZWRnZSBvZiBUYXZlcm5zIGFuZCBUcmVhc3VyZXMuIFVzZSB0aGUgc2VhcmNoIGJhciBhYm92ZSBvciBicm93c2UgYnkgY2F0ZWdvcnkgdG8gZGlzY292ZXIgc2tpbGxzLCBpdGVtcywgc3BlY2llcywgYW5kIG1vcmUuPC9wPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtc3RhdHNcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtc3RhdFwiPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVuY3ljbG9wZWRpYS1zdGF0LW51bWJlclwiPiR7dGhpcy5lbmN5Y2xvcGVkaWEuZ2V0U3RhdGlzdGljcygpLnRvdGFsRW50cmllc308L3NwYW4+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZW5jeWNsb3BlZGlhLXN0YXQtbGFiZWxcIj5Ub3RhbCBFbnRyaWVzPC9zcGFuPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLXN0YXRcIj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlbmN5Y2xvcGVkaWEtc3RhdC1udW1iZXJcIj4ke3RoaXMuZW5jeWNsb3BlZGlhLmdldFN0YXRpc3RpY3MoKS5jYXRlZ29yaWVzfTwvc3Bhbj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlbmN5Y2xvcGVkaWEtc3RhdC1sYWJlbFwiPkNhdGVnb3JpZXM8L3NwYW4+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG5cclxuICAgIC8vIEJpbmQgY2F0ZWdvcnkgY2xpY2sgZXZlbnRzXHJcbiAgICBjb25zdCBjYXRlZ29yeUNhcmRzID0gbmF2aWdhdGlvbi5xdWVyeVNlbGVjdG9yQWxsKCcuZW5jeWNsb3BlZGlhLWNhdGVnb3J5LWNhcmQnKTtcclxuICAgIGNhdGVnb3J5Q2FyZHMuZm9yRWFjaChjYXJkID0+IHtcclxuICAgICAgY2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBjb25zdCBjYXRlZ29yeU5hbWUgPSBjYXJkLmRhdGFzZXQuY2F0ZWdvcnk7XHJcbiAgICAgICAgdGhpcy5zaG93Q2F0ZWdvcnkoY2F0ZWdvcnlOYW1lKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNob3cgZW50cmllcyBmb3IgYSBzcGVjaWZpYyBjYXRlZ29yeVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjYXRlZ29yeU5hbWUgLSBDYXRlZ29yeSBuYW1lXHJcbiAgICovXHJcbiAgc2hvd0NhdGVnb3J5KGNhdGVnb3J5TmFtZSkge1xyXG4gICAgdGhpcy5jdXJyZW50Q2F0ZWdvcnkgPSBjYXRlZ29yeU5hbWU7XHJcbiAgICB0aGlzLnVwZGF0ZUJyZWFkY3J1bWIoWydFbmN5Y2xvcGVkaWEnLCBjYXRlZ29yeU5hbWVdKTtcclxuXHJcbiAgICBjb25zdCBlbnRyaWVzID0gdGhpcy5lbmN5Y2xvcGVkaWEuZ2V0RW50cmllc0J5Q2F0ZWdvcnkoY2F0ZWdvcnlOYW1lKTtcclxuICAgIGNvbnN0IG5hdmlnYXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW5jeWNsb3BlZGlhLW5hdmlnYXRpb24nKTtcclxuICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW5jeWNsb3BlZGlhLWNvbnRlbnQnKTtcclxuXHJcbiAgICAvLyBHcm91cCBlbnRyaWVzIGJ5IHN1YmNhdGVnb3J5IGlmIGF2YWlsYWJsZVxyXG4gICAgY29uc3QgZ3JvdXBlZEVudHJpZXMgPSB0aGlzLmdyb3VwRW50cmllc0J5U3ViY2F0ZWdvcnkoZW50cmllcyk7XHJcblxyXG4gICAgbGV0IGVudHJpZXNIVE1MID0gJyc7XHJcbiAgICBmb3IgKGNvbnN0IFtzdWJjYXRlZ29yeSwgc3ViY2F0ZWdvcnlFbnRyaWVzXSBvZiBPYmplY3QuZW50cmllcyhncm91cGVkRW50cmllcykpIHtcclxuICAgICAgaWYgKHN1YmNhdGVnb3J5ICE9PSAnZGVmYXVsdCcpIHtcclxuICAgICAgICBlbnRyaWVzSFRNTCArPSBgPGgzIGNsYXNzPVwiZW5jeWNsb3BlZGlhLXN1YmNhdGVnb3J5XCI+JHtzdWJjYXRlZ29yeX08L2gzPmA7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHN1YmNhdGVnb3J5SFRNTCA9IHN1YmNhdGVnb3J5RW50cmllcy5tYXAoZW50cnkgPT4gYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtZW50cnktY2FyZFwiIGRhdGEtZW50cnktaWQ9XCIke2VudHJ5LmlkfVwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImVuY3ljbG9wZWRpYS1lbnRyeS1pY29uXCI+JHtlbnRyeS5pY29uIHx8ICfwn5OEJ308L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtZW50cnktaW5mb1wiPlxyXG4gICAgICAgICAgICA8aDQgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtZW50cnktbmFtZVwiPiR7ZW50cnkubmFtZX08L2g0PlxyXG4gICAgICAgICAgICA8cCBjbGFzcz1cImVuY3ljbG9wZWRpYS1lbnRyeS1kZXNjcmlwdGlvblwiPiR7ZW50cnkuZGVzY3JpcHRpb259PC9wPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLWVudHJ5LXRhZ3NcIj5cclxuICAgICAgICAgICAgICAke2VudHJ5LnRhZ3MubWFwKHRhZyA9PiBgPHNwYW4gY2xhc3M9XCJlbmN5Y2xvcGVkaWEtdGFnXCI+JHt0YWd9PC9zcGFuPmApLmpvaW4oJycpfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICBgKS5qb2luKCcnKTtcclxuICAgICAgXHJcbiAgICAgIGVudHJpZXNIVE1MICs9IGA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLWVudHJpZXMtZ3JpZFwiPiR7c3ViY2F0ZWdvcnlIVE1MfTwvZGl2PmA7XHJcbiAgICB9XHJcblxyXG4gICAgbmF2aWdhdGlvbi5pbm5lckhUTUwgPSBgXHJcbiAgICAgIDxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtY2F0ZWdvcnktaGVhZGVyXCI+XHJcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVuY3ljbG9wZWRpYS1iYWNrLXRvLWNhdGVnb3JpZXNcIj7ihpAgQmFjayB0byBDYXRlZ29yaWVzPC9idXR0b24+XHJcbiAgICAgICAgPGgyPiR7Y2F0ZWdvcnlOYW1lfTwvaDI+XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJlbmN5Y2xvcGVkaWEtZW50cnktY291bnRcIj4ke2VudHJpZXMubGVuZ3RofSBlbnRyaWVzPC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cImVuY3ljbG9wZWRpYS1lbnRyaWVzLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICR7ZW50cmllc0hUTUx9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuXHJcbiAgICBjb250ZW50LmlubmVySFRNTCA9IGBcclxuICAgICAgPGRpdiBjbGFzcz1cImVuY3ljbG9wZWRpYS1jYXRlZ29yeS1pbmZvXCI+XHJcbiAgICAgICAgPGgzPkFib3V0ICR7Y2F0ZWdvcnlOYW1lfTwvaDM+XHJcbiAgICAgICAgPHA+JHt0aGlzLmVuY3ljbG9wZWRpYS5jYXRlZ29yaWVzLmdldChjYXRlZ29yeU5hbWUpPy5kZXNjcmlwdGlvbiB8fCAnTm8gZGVzY3JpcHRpb24gYXZhaWxhYmxlLid9PC9wPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIGA7XHJcblxyXG4gICAgLy8gQmluZCBldmVudHNcclxuICAgIG5hdmlnYXRpb24ucXVlcnlTZWxlY3RvcignLmVuY3ljbG9wZWRpYS1iYWNrLXRvLWNhdGVnb3JpZXMnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5zaG93Q2F0ZWdvcmllcygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgZW50cnlDYXJkcyA9IG5hdmlnYXRpb24ucXVlcnlTZWxlY3RvckFsbCgnLmVuY3ljbG9wZWRpYS1lbnRyeS1jYXJkJyk7XHJcbiAgICBlbnRyeUNhcmRzLmZvckVhY2goY2FyZCA9PiB7XHJcbiAgICAgIGNhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZW50cnlJZCA9IGNhcmQuZGF0YXNldC5lbnRyeUlkO1xyXG4gICAgICAgIHRoaXMuc2hvd0VudHJ5KGVudHJ5SWQpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2hvdyBkZXRhaWxlZCBlbnRyeSB2aWV3XHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGVudHJ5SWQgLSBFbnRyeSBJRFxyXG4gICAqL1xyXG4gIHNob3dFbnRyeShlbnRyeUlkKSB7XHJcbiAgICBjb25zdCBlbnRyeSA9IHRoaXMuZW5jeWNsb3BlZGlhLmdldEVudHJ5KGVudHJ5SWQpO1xyXG4gICAgaWYgKCFlbnRyeSkgcmV0dXJuO1xyXG5cclxuICAgIHRoaXMuYWRkVG9IaXN0b3J5KGVudHJ5SWQpO1xyXG4gICAgdGhpcy5jdXJyZW50RW50cnkgPSBlbnRyeTtcclxuICAgIHRoaXMudXBkYXRlQnJlYWRjcnVtYihbJ0VuY3ljbG9wZWRpYScsIGVudHJ5LmNhdGVnb3J5LCBlbnRyeS5uYW1lXSk7XHJcblxyXG4gICAgY29uc3QgbmF2aWdhdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbmN5Y2xvcGVkaWEtbmF2aWdhdGlvbicpO1xyXG4gICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbmN5Y2xvcGVkaWEtY29udGVudCcpO1xyXG5cclxuICAgIC8vIENyZWF0ZSBlbnRyeSBkZXRhaWxzXHJcbiAgICBjb25zdCBlbnRyeUhUTUwgPSB0aGlzLmNyZWF0ZUVudHJ5SFRNTChlbnRyeSk7XHJcbiAgICBcclxuICAgIG5hdmlnYXRpb24uaW5uZXJIVE1MID0gYFxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLWVudHJ5LWhlYWRlclwiPlxyXG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJlbmN5Y2xvcGVkaWEtYmFjay10by1jYXRlZ29yeVwiPuKGkCBCYWNrIHRvICR7ZW50cnkuY2F0ZWdvcnl9PC9idXR0b24+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImVuY3ljbG9wZWRpYS1lbnRyeS10aXRsZVwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJlbmN5Y2xvcGVkaWEtZW50cnktaWNvblwiPiR7ZW50cnkuaWNvbiB8fCAn8J+ThCd9PC9zcGFuPlxyXG4gICAgICAgICAgPGgyPiR7ZW50cnkubmFtZX08L2gyPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIGA7XHJcblxyXG4gICAgY29udGVudC5pbm5lckhUTUwgPSBlbnRyeUhUTUw7XHJcblxyXG4gICAgLy8gQmluZCBldmVudHNcclxuICAgIG5hdmlnYXRpb24ucXVlcnlTZWxlY3RvcignLmVuY3ljbG9wZWRpYS1iYWNrLXRvLWNhdGVnb3J5JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuc2hvd0NhdGVnb3J5KGVudHJ5LmNhdGVnb3J5KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEJpbmQgY3Jvc3MtcmVmZXJlbmNlIGNsaWNrc1xyXG4gICAgY29uc3QgY3Jvc3NSZWZMaW5rcyA9IGNvbnRlbnQucXVlcnlTZWxlY3RvckFsbCgnLmVuY3ljbG9wZWRpYS1jcm9zc3JlZi1saW5rJyk7XHJcbiAgICBjcm9zc1JlZkxpbmtzLmZvckVhY2gobGluayA9PiB7XHJcbiAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zdCB0YXJnZXRJZCA9IGxpbmsuZGF0YXNldC50YXJnZXQ7XHJcbiAgICAgICAgdGhpcy5zaG93RW50cnkodGFyZ2V0SWQpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIEhUTUwgZm9yIGVudHJ5IGRldGFpbHNcclxuICAgKiBAcGFyYW0ge09iamVjdH0gZW50cnkgLSBFbnRyeSBkYXRhXHJcbiAgICogQHJldHVybnMge3N0cmluZ30gSFRNTCBzdHJpbmdcclxuICAgKi9cclxuICBjcmVhdGVFbnRyeUhUTUwoZW50cnkpIHtcclxuICAgIGxldCBodG1sID0gYFxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLWVudHJ5LWRldGFpbHNcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLWVudHJ5LW1haW5cIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtZW50cnktZGVzY3JpcHRpb24tZnVsbFwiPlxyXG4gICAgICAgICAgICA8aDM+RGVzY3JpcHRpb248L2gzPlxyXG4gICAgICAgICAgICA8cD4ke2VudHJ5LmRlc2NyaXB0aW9ufTwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuXHJcbiAgICAvLyBBZGQgZXhhbWluZSB0ZXh0IGZvciBpdGVtc1xyXG4gICAgaWYgKGVudHJ5LmV4YW1pbmVUZXh0ICYmIGVudHJ5LmV4YW1pbmVUZXh0ICE9PSBlbnRyeS5kZXNjcmlwdGlvbikge1xyXG4gICAgICBodG1sICs9IGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLWVudHJ5LWV4YW1pbmVcIj5cclxuICAgICAgICAgIDxoMz5FeGFtaW5lPC9oMz5cclxuICAgICAgICAgIDxwPiR7ZW50cnkuZXhhbWluZVRleHR9PC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICBgO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFkZCByZXF1aXJlbWVudHMgZm9yIHNraWxsc1xyXG4gICAgaWYgKGVudHJ5LnJlcXVpcmVtZW50cykge1xyXG4gICAgICBodG1sICs9IGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLWVudHJ5LXJlcXVpcmVtZW50c1wiPlxyXG4gICAgICAgICAgPGgzPlJlcXVpcmVtZW50czwvaDM+XHJcbiAgICAgICAgICA8cD5SZXF1aXJlcyAke2VudHJ5LnJlcXVpcmVtZW50cy5za2lsbH0gbGV2ZWwgJHtlbnRyeS5yZXF1aXJlbWVudHMubGV2ZWx9PC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICBgO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFkZCBkZXRhaWxlZCBkYXRhIGJhc2VkIG9uIHR5cGVcclxuICAgIGlmIChlbnRyeS50eXBlID09PSAnaXRlbScpIHtcclxuICAgICAgaHRtbCArPSB0aGlzLmNyZWF0ZUl0ZW1EZXRhaWxzSFRNTChlbnRyeSk7XHJcbiAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09ICdzcGVjaWVzJykge1xyXG4gICAgICBodG1sICs9IHRoaXMuY3JlYXRlU3BlY2llc0RldGFpbHNIVE1MKGVudHJ5KTtcclxuICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gJ3NraWxsJykge1xyXG4gICAgICBodG1sICs9IHRoaXMuY3JlYXRlU2tpbGxEZXRhaWxzSFRNTChlbnRyeSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWRkIGNyb3NzLXJlZmVyZW5jZXNcclxuICAgIGNvbnN0IGNyb3NzUmVmcyA9IHRoaXMuZW5jeWNsb3BlZGlhLmdldENyb3NzUmVmZXJlbmNlcyhlbnRyeS5pZCk7XHJcbiAgICBpZiAoY3Jvc3NSZWZzLmxlbmd0aCA+IDApIHtcclxuICAgICAgaHRtbCArPSBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImVuY3ljbG9wZWRpYS1lbnRyeS1jcm9zc3JlZnNcIj5cclxuICAgICAgICAgIDxoMz5SZWxhdGVkIEVudHJpZXM8L2gzPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImVuY3ljbG9wZWRpYS1jcm9zc3JlZnMtbGlzdFwiPlxyXG4gICAgICAgICAgICAke2Nyb3NzUmVmcy5tYXAoY3Jvc3NSZWYgPT4gYFxyXG4gICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtY3Jvc3NyZWYtbGlua1wiIGRhdGEtdGFyZ2V0PVwiJHtjcm9zc1JlZi50YXJnZXR9XCI+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVuY3ljbG9wZWRpYS1jcm9zc3JlZi1pY29uXCI+JHtjcm9zc1JlZi50YXJnZXRFbnRyeS5pY29uIHx8ICfwn5OEJ308L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVuY3ljbG9wZWRpYS1jcm9zc3JlZi1uYW1lXCI+JHtjcm9zc1JlZi50YXJnZXRFbnRyeS5uYW1lfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZW5jeWNsb3BlZGlhLWNyb3NzcmVmLXR5cGVcIj4ke2Nyb3NzUmVmLnR5cGV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgYCkuam9pbignJyl9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICBodG1sICs9IGBcclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLWVudHJ5LXNpZGViYXJcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtZW50cnktbWV0YVwiPlxyXG4gICAgICAgICAgICA8aDM+RW50cnkgSW5mb3JtYXRpb248L2gzPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLW1ldGEtaXRlbVwiPlxyXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZW5jeWNsb3BlZGlhLW1ldGEtbGFiZWxcIj5UeXBlOjwvc3Bhbj5cclxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVuY3ljbG9wZWRpYS1tZXRhLXZhbHVlXCI+JHtlbnRyeS50eXBlfTwvc3Bhbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtbWV0YS1pdGVtXCI+XHJcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlbmN5Y2xvcGVkaWEtbWV0YS1sYWJlbFwiPkNhdGVnb3J5Ojwvc3Bhbj5cclxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVuY3ljbG9wZWRpYS1tZXRhLXZhbHVlXCI+JHtlbnRyeS5jYXRlZ29yeX08L3NwYW4+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAke2VudHJ5LnN1YmNhdGVnb3J5ID8gYFxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtbWV0YS1pdGVtXCI+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVuY3ljbG9wZWRpYS1tZXRhLWxhYmVsXCI+U3ViY2F0ZWdvcnk6PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlbmN5Y2xvcGVkaWEtbWV0YS12YWx1ZVwiPiR7ZW50cnkuc3ViY2F0ZWdvcnl9PC9zcGFuPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBgIDogJyd9XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtbWV0YS1pdGVtXCI+XHJcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlbmN5Y2xvcGVkaWEtbWV0YS1sYWJlbFwiPlRhZ3M6PC9zcGFuPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtdGFnc1wiPlxyXG4gICAgICAgICAgICAgICAgJHtlbnRyeS50YWdzLm1hcCh0YWcgPT4gYDxzcGFuIGNsYXNzPVwiZW5jeWNsb3BlZGlhLXRhZ1wiPiR7dGFnfTwvc3Bhbj5gKS5qb2luKCcnKX1cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG5cclxuICAgIHJldHVybiBodG1sO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGl0ZW0tc3BlY2lmaWMgZGV0YWlscyBIVE1MXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGVudHJ5IC0gSXRlbSBlbnRyeVxyXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IEhUTUwgc3RyaW5nXHJcbiAgICovXHJcbiAgY3JlYXRlSXRlbURldGFpbHNIVE1MKGVudHJ5KSB7XHJcbiAgICBjb25zdCBpdGVtID0gZW50cnkuZGF0YTtcclxuICAgIGxldCBodG1sID0gJzxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtZW50cnktaXRlbS1kZXRhaWxzXCI+JztcclxuXHJcbiAgICBpZiAoaXRlbS5zdGFja2FibGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBodG1sICs9IGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLWl0ZW0tcHJvcGVydHlcIj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZW5jeWNsb3BlZGlhLXByb3BlcnR5LWxhYmVsXCI+U3RhY2thYmxlOjwvc3Bhbj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZW5jeWNsb3BlZGlhLXByb3BlcnR5LXZhbHVlXCI+JHtpdGVtLnN0YWNrYWJsZSA/ICdZZXMnIDogJ05vJ308L3NwYW4+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIGA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGl0ZW0ubWF4U3RhY2spIHtcclxuICAgICAgaHRtbCArPSBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImVuY3ljbG9wZWRpYS1pdGVtLXByb3BlcnR5XCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImVuY3ljbG9wZWRpYS1wcm9wZXJ0eS1sYWJlbFwiPk1heCBTdGFjazo8L3NwYW4+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImVuY3ljbG9wZWRpYS1wcm9wZXJ0eS12YWx1ZVwiPiR7aXRlbS5tYXhTdGFja308L3NwYW4+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIGA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGl0ZW0uZXF1aXBtZW50VHlwZSkge1xyXG4gICAgICBodG1sICs9IGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLWl0ZW0tcHJvcGVydHlcIj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZW5jeWNsb3BlZGlhLXByb3BlcnR5LWxhYmVsXCI+RXF1aXBtZW50IFR5cGU6PC9zcGFuPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJlbmN5Y2xvcGVkaWEtcHJvcGVydHktdmFsdWVcIj4ke2l0ZW0uZXF1aXBtZW50VHlwZX08L3NwYW4+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIGA7XHJcbiAgICB9XHJcblxyXG4gICAgaHRtbCArPSAnPC9kaXY+JztcclxuICAgIHJldHVybiBodG1sO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIHNwZWNpZXMtc3BlY2lmaWMgZGV0YWlscyBIVE1MXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGVudHJ5IC0gU3BlY2llcyBlbnRyeVxyXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IEhUTUwgc3RyaW5nXHJcbiAgICovXHJcbiAgY3JlYXRlU3BlY2llc0RldGFpbHNIVE1MKGVudHJ5KSB7XHJcbiAgICBjb25zdCBzcGVjaWVzID0gZW50cnkuZGF0YTtcclxuICAgIGxldCBodG1sID0gJzxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtZW50cnktc3BlY2llcy1kZXRhaWxzXCI+JztcclxuXHJcbiAgICBpZiAoc3BlY2llcy5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgIGh0bWwgKz0gYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtc3BlY2llcy1hdHRyaWJ1dGVzXCI+XHJcbiAgICAgICAgICA8aDM+QXR0cmlidXRlczwvaDM+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLWF0dHJpYnV0ZXMtZ3JpZFwiPlxyXG4gICAgICAgICAgICAke09iamVjdC5lbnRyaWVzKHNwZWNpZXMuYXR0cmlidXRlcykubWFwKChbYXR0ciwgcmFuZ2VdKSA9PiBgXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImVuY3ljbG9wZWRpYS1hdHRyaWJ1dGVcIj5cclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZW5jeWNsb3BlZGlhLWF0dHJpYnV0ZS1uYW1lXCI+JHthdHRyfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZW5jeWNsb3BlZGlhLWF0dHJpYnV0ZS1yYW5nZVwiPiR7cmFuZ2UubWlufS0ke3JhbmdlLm1heH08L3NwYW4+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIGApLmpvaW4oJycpfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIGA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHNwZWNpZXMuYm9udXNlcykge1xyXG4gICAgICBodG1sICs9IGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLXNwZWNpZXMtYm9udXNlc1wiPlxyXG4gICAgICAgICAgPGgzPkJvbnVzZXM8L2gzPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImVuY3ljbG9wZWRpYS1ib251c2VzLWxpc3RcIj5cclxuICAgICAgICAgICAgJHtPYmplY3QuZW50cmllcyhzcGVjaWVzLmJvbnVzZXMpLm1hcCgoW2JvbnVzLCB2YWx1ZV0pID0+IGBcclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLWJvbnVzXCI+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVuY3ljbG9wZWRpYS1ib251cy1uYW1lXCI+JHtib251c308L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVuY3ljbG9wZWRpYS1ib251cy12YWx1ZVwiPiske3ZhbHVlfTwvc3Bhbj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgYCkuam9pbignJyl9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoc3BlY2llcy5wcm9mZXNzaW9ucykge1xyXG4gICAgICBodG1sICs9IGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLXNwZWNpZXMtcHJvZmVzc2lvbnNcIj5cclxuICAgICAgICAgIDxoMz5Qcm9mZXNzaW9uczwvaDM+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLXByb2Zlc3Npb25zLWxpc3RcIj5cclxuICAgICAgICAgICAgJHtzcGVjaWVzLnByb2Zlc3Npb25zLm1hcChwcm9mZXNzaW9uID0+IGBcclxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVuY3ljbG9wZWRpYS1wcm9mZXNzaW9uXCI+JHtwcm9mZXNzaW9ufTwvc3Bhbj5cclxuICAgICAgICAgICAgYCkuam9pbignJyl9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICBodG1sICs9ICc8L2Rpdj4nO1xyXG4gICAgcmV0dXJuIGh0bWw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGUgc2tpbGwtc3BlY2lmaWMgZGV0YWlscyBIVE1MXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGVudHJ5IC0gU2tpbGwgZW50cnlcclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBIVE1MIHN0cmluZ1xyXG4gICAqL1xyXG4gIGNyZWF0ZVNraWxsRGV0YWlsc0hUTUwoZW50cnkpIHtcclxuICAgIGNvbnN0IHNraWxsID0gZW50cnkuZGF0YTtcclxuICAgIGxldCBodG1sID0gJzxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtZW50cnktc2tpbGwtZGV0YWlsc1wiPic7XHJcblxyXG4gICAgaWYgKHNraWxsLnN1Yl9za2lsbHMpIHtcclxuICAgICAgaHRtbCArPSBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImVuY3ljbG9wZWRpYS1za2lsbC1zdWJza2lsbHNcIj5cclxuICAgICAgICAgIDxoMz5TdWItc2tpbGxzPC9oMz5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtc3Vic2tpbGxzLWxpc3RcIj5cclxuICAgICAgICAgICAgJHtPYmplY3QuZW50cmllcyhza2lsbC5zdWJfc2tpbGxzKS5tYXAoKFtzdWJTa2lsbE5hbWUsIHN1YlNraWxsRGF0YV0pID0+IGBcclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLXN1YnNraWxsXCI+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVuY3ljbG9wZWRpYS1zdWJza2lsbC1uYW1lXCI+JHtzdWJTa2lsbE5hbWV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlbmN5Y2xvcGVkaWEtc3Vic2tpbGwtZGVzY3JpcHRpb25cIj4ke3N1YlNraWxsRGF0YS5kZXNjcmlwdGlvbn08L3NwYW4+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIGApLmpvaW4oJycpfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIGA7XHJcbiAgICB9XHJcblxyXG4gICAgaHRtbCArPSAnPC9kaXY+JztcclxuICAgIHJldHVybiBodG1sO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUGVyZm9ybSBzZWFyY2hcclxuICAgKi9cclxuICBwZXJmb3JtU2VhcmNoKCkge1xyXG4gICAgaWYgKCF0aGlzLnNlYXJjaFF1ZXJ5IHx8IHRoaXMuc2VhcmNoUXVlcnkubGVuZ3RoIDwgMikge1xyXG4gICAgICB0aGlzLnNob3dNYWluVmlldygpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzdWx0cyA9IHRoaXMuZW5jeWNsb3BlZGlhLnNlYXJjaCh0aGlzLnNlYXJjaFF1ZXJ5KTtcclxuICAgIHRoaXMuc2hvd1NlYXJjaFJlc3VsdHMocmVzdWx0cyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTaG93IHNlYXJjaCByZXN1bHRzXHJcbiAgICogQHBhcmFtIHtBcnJheX0gcmVzdWx0cyAtIFNlYXJjaCByZXN1bHRzXHJcbiAgICovXHJcbiAgc2hvd1NlYXJjaFJlc3VsdHMocmVzdWx0cykge1xyXG4gICAgdGhpcy51cGRhdGVCcmVhZGNydW1iKFsnRW5jeWNsb3BlZGlhJywgJ1NlYXJjaCBSZXN1bHRzJ10pO1xyXG5cclxuICAgIGNvbnN0IG5hdmlnYXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW5jeWNsb3BlZGlhLW5hdmlnYXRpb24nKTtcclxuICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW5jeWNsb3BlZGlhLWNvbnRlbnQnKTtcclxuXHJcbiAgICBpZiAocmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgbmF2aWdhdGlvbi5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImVuY3ljbG9wZWRpYS1zZWFyY2gtaGVhZGVyXCI+XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZW5jeWNsb3BlZGlhLWJhY2stdG8tbWFpblwiPuKGkCBCYWNrIHRvIEVuY3ljbG9wZWRpYTwvYnV0dG9uPlxyXG4gICAgICAgICAgPGgyPlNlYXJjaCBSZXN1bHRzPC9oMj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgYDtcclxuICAgICAgY29udGVudC5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImVuY3ljbG9wZWRpYS1uby1yZXN1bHRzXCI+XHJcbiAgICAgICAgICA8aDM+Tm8gcmVzdWx0cyBmb3VuZDwvaDM+XHJcbiAgICAgICAgICA8cD5ObyBlbnRyaWVzIG1hdGNoIHlvdXIgc2VhcmNoIGZvciBcIiR7dGhpcy5zZWFyY2hRdWVyeX1cIi4gVHJ5IGRpZmZlcmVudCBrZXl3b3JkcyBvciBicm93c2UgYnkgY2F0ZWdvcnkuPC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICBgO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgcmVzdWx0c0hUTUwgPSByZXN1bHRzLm1hcChlbnRyeSA9PiBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImVuY3ljbG9wZWRpYS1zZWFyY2gtcmVzdWx0XCIgZGF0YS1lbnRyeS1pZD1cIiR7ZW50cnkuaWR9XCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLXJlc3VsdC1pY29uXCI+JHtlbnRyeS5pY29uIHx8ICfwn5OEJ308L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtcmVzdWx0LWluZm9cIj5cclxuICAgICAgICAgICAgPGg0IGNsYXNzPVwiZW5jeWNsb3BlZGlhLXJlc3VsdC1uYW1lXCI+JHtlbnRyeS5uYW1lfTwvaDQ+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzPVwiZW5jeWNsb3BlZGlhLXJlc3VsdC1kZXNjcmlwdGlvblwiPiR7ZW50cnkuZGVzY3JpcHRpb259PC9wPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW5jeWNsb3BlZGlhLXJlc3VsdC1tZXRhXCI+XHJcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlbmN5Y2xvcGVkaWEtcmVzdWx0LWNhdGVnb3J5XCI+JHtlbnRyeS5jYXRlZ29yeX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgJHtlbnRyeS5zdWJjYXRlZ29yeSA/IGA8c3BhbiBjbGFzcz1cImVuY3ljbG9wZWRpYS1yZXN1bHQtc3ViY2F0ZWdvcnlcIj4ke2VudHJ5LnN1YmNhdGVnb3J5fTwvc3Bhbj5gIDogJyd9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIGApLmpvaW4oJycpO1xyXG5cclxuICAgICAgbmF2aWdhdGlvbi5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImVuY3ljbG9wZWRpYS1zZWFyY2gtaGVhZGVyXCI+XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZW5jeWNsb3BlZGlhLWJhY2stdG8tbWFpblwiPuKGkCBCYWNrIHRvIEVuY3ljbG9wZWRpYTwvYnV0dG9uPlxyXG4gICAgICAgICAgPGgyPlNlYXJjaCBSZXN1bHRzPC9oMj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZW5jeWNsb3BlZGlhLXJlc3VsdC1jb3VudFwiPiR7cmVzdWx0cy5sZW5ndGh9IHJlc3VsdHMgZm9yIFwiJHt0aGlzLnNlYXJjaFF1ZXJ5fVwiPC9zcGFuPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJlbmN5Y2xvcGVkaWEtc2VhcmNoLXJlc3VsdHNcIj5cclxuICAgICAgICAgICR7cmVzdWx0c0hUTUx9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIGA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQmluZCBldmVudHNcclxuICAgIG5hdmlnYXRpb24ucXVlcnlTZWxlY3RvcignLmVuY3ljbG9wZWRpYS1iYWNrLXRvLW1haW4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5zaG93TWFpblZpZXcoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdEl0ZW1zID0gbmF2aWdhdGlvbi5xdWVyeVNlbGVjdG9yQWxsKCcuZW5jeWNsb3BlZGlhLXNlYXJjaC1yZXN1bHQnKTtcclxuICAgIHJlc3VsdEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZW50cnlJZCA9IGl0ZW0uZGF0YXNldC5lbnRyeUlkO1xyXG4gICAgICAgIHRoaXMuc2hvd0VudHJ5KGVudHJ5SWQpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR3JvdXAgZW50cmllcyBieSBzdWJjYXRlZ29yeVxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IGVudHJpZXMgLSBBcnJheSBvZiBlbnRyaWVzXHJcbiAgICogQHJldHVybnMge09iamVjdH0gR3JvdXBlZCBlbnRyaWVzXHJcbiAgICovXHJcbiAgZ3JvdXBFbnRyaWVzQnlTdWJjYXRlZ29yeShlbnRyaWVzKSB7XHJcbiAgICBjb25zdCBncm91cGVkID0ge307XHJcbiAgICBcclxuICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XHJcbiAgICAgIGNvbnN0IHN1YmNhdGVnb3J5ID0gZW50cnkuc3ViY2F0ZWdvcnkgfHwgJ2RlZmF1bHQnO1xyXG4gICAgICBpZiAoIWdyb3VwZWRbc3ViY2F0ZWdvcnldKSB7XHJcbiAgICAgICAgZ3JvdXBlZFtzdWJjYXRlZ29yeV0gPSBbXTtcclxuICAgICAgfVxyXG4gICAgICBncm91cGVkW3N1YmNhdGVnb3J5XS5wdXNoKGVudHJ5KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFNvcnQgZW50cmllcyB3aXRoaW4gZWFjaCBzdWJjYXRlZ29yeVxyXG4gICAgT2JqZWN0LnZhbHVlcyhncm91cGVkKS5mb3JFYWNoKGVudHJpZXMgPT4ge1xyXG4gICAgICBlbnRyaWVzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGdyb3VwZWQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGUgYnJlYWRjcnVtYiBuYXZpZ2F0aW9uXHJcbiAgICogQHBhcmFtIHtBcnJheX0gYnJlYWRjcnVtYnMgLSBBcnJheSBvZiBicmVhZGNydW1iIGl0ZW1zXHJcbiAgICovXHJcbiAgdXBkYXRlQnJlYWRjcnVtYihicmVhZGNydW1icykge1xyXG4gICAgY29uc3QgYnJlYWRjcnVtYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbmN5Y2xvcGVkaWEtYnJlYWRjcnVtYicpO1xyXG4gICAgYnJlYWRjcnVtYi5pbm5lckhUTUwgPSBicmVhZGNydW1icy5tYXAoKGNydW1iLCBpbmRleCkgPT4ge1xyXG4gICAgICBpZiAoaW5kZXggPT09IGJyZWFkY3J1bWJzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICByZXR1cm4gYDxzcGFuIGNsYXNzPVwiZW5jeWNsb3BlZGlhLWJyZWFkY3J1bWItY3VycmVudFwiPiR7Y3J1bWJ9PC9zcGFuPmA7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGA8c3BhbiBjbGFzcz1cImVuY3ljbG9wZWRpYS1icmVhZGNydW1iLWl0ZW1cIj4ke2NydW1ifTwvc3Bhbj5gO1xyXG4gICAgICB9XHJcbiAgICB9KS5qb2luKCcgPHNwYW4gY2xhc3M9XCJlbmN5Y2xvcGVkaWEtYnJlYWRjcnVtYi1zZXBhcmF0b3JcIj4vPC9zcGFuPiAnKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBlbnRyeSB0byBuYXZpZ2F0aW9uIGhpc3RvcnlcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZW50cnlJZCAtIEVudHJ5IElEXHJcbiAgICovXHJcbiAgYWRkVG9IaXN0b3J5KGVudHJ5SWQpIHtcclxuICAgIC8vIFJlbW92ZSBhbnkgZW50cmllcyBhZnRlciBjdXJyZW50IGluZGV4XHJcbiAgICB0aGlzLmhpc3RvcnkgPSB0aGlzLmhpc3Rvcnkuc2xpY2UoMCwgdGhpcy5oaXN0b3J5SW5kZXggKyAxKTtcclxuICAgIFxyXG4gICAgLy8gQWRkIG5ldyBlbnRyeVxyXG4gICAgdGhpcy5oaXN0b3J5LnB1c2goZW50cnlJZCk7XHJcbiAgICB0aGlzLmhpc3RvcnlJbmRleCA9IHRoaXMuaGlzdG9yeS5sZW5ndGggLSAxO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR28gYmFjayBpbiBoaXN0b3J5XHJcbiAgICovXHJcbiAgZ29CYWNrKCkge1xyXG4gICAgaWYgKHRoaXMuaGlzdG9yeUluZGV4ID4gMCkge1xyXG4gICAgICB0aGlzLmhpc3RvcnlJbmRleC0tO1xyXG4gICAgICBjb25zdCBlbnRyeUlkID0gdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeUluZGV4XTtcclxuICAgICAgdGhpcy5zaG93RW50cnkoZW50cnlJZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNob3dNYWluVmlldygpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB3aW5kb3cuRW5jeWNsb3BlZGlhVUkgPSBFbmN5Y2xvcGVkaWFVSTtcclxuXHJcbi8vIEVTIE1vZHVsZSBleHBvcnRzXHJcbmV4cG9ydCB7IEVuY3ljbG9wZWRpYVVJIH07ICJdLCJuYW1lcyI6WyJFbmN5Y2xvcGVkaWFVSSIsImluaXRpYWxpemUiLCJjcmVhdGVFbmN5Y2xvcGVkaWFDb250YWluZXIiLCJiaW5kRXZlbnRzIiwic2hvd01haW5WaWV3IiwiY29udGFpbmVyIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJjbGFzc05hbWUiLCJzdHlsZSIsImRpc3BsYXkiLCJoZWFkZXIiLCJpbm5lckhUTUwiLCJzZWFyY2hDb250YWluZXIiLCJjb250ZW50IiwibmF2aWdhdGlvbiIsImJyZWFkY3J1bWIiLCJhcHBlbmRDaGlsZCIsImJvZHkiLCJzZWFyY2hJbnB1dCIsImdldEVsZW1lbnRCeUlkIiwic2VhcmNoQnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJzZWFyY2hRdWVyeSIsInRhcmdldCIsInZhbHVlIiwiY2xlYXJUaW1lb3V0Iiwic2VhcmNoVGltZW91dCIsInNldFRpbWVvdXQiLCJwZXJmb3JtU2VhcmNoIiwiZ29CYWNrIiwia2V5IiwiaXNWaXNpYmxlIiwiaGlkZSIsInNob3ciLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJjdXJyZW50RW50cnkiLCJjdXJyZW50Q2F0ZWdvcnkiLCJ1cGRhdGVCcmVhZGNydW1iIiwic2hvd0NhdGVnb3JpZXMiLCJjYXRlZ29yaWVzIiwiZW5jeWNsb3BlZGlhIiwiZ2V0Q2F0ZWdvcmllcyIsImNhdGVnb3JpZXNIVE1MIiwibWFwIiwiY2F0ZWdvcnkiLCJuYW1lIiwiaWNvbiIsImRlc2NyaXB0aW9uIiwiZW50cmllcyIsImxlbmd0aCIsImpvaW4iLCJnZXRTdGF0aXN0aWNzIiwidG90YWxFbnRyaWVzIiwiY2F0ZWdvcnlDYXJkcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiY2FyZCIsImNhdGVnb3J5TmFtZSIsImRhdGFzZXQiLCJzaG93Q2F0ZWdvcnkiLCJnZXRFbnRyaWVzQnlDYXRlZ29yeSIsImdyb3VwZWRFbnRyaWVzIiwiZ3JvdXBFbnRyaWVzQnlTdWJjYXRlZ29yeSIsImVudHJpZXNIVE1MIiwic3ViY2F0ZWdvcnkiLCJzdWJjYXRlZ29yeUVudHJpZXMiLCJPYmplY3QiLCJzdWJjYXRlZ29yeUhUTUwiLCJlbnRyeSIsInRhZ3MiLCJ0YWciLCJnZXQiLCJxdWVyeVNlbGVjdG9yIiwiZW50cnlDYXJkcyIsImVudHJ5SWQiLCJzaG93RW50cnkiLCJnZXRFbnRyeSIsImFkZFRvSGlzdG9yeSIsImVudHJ5SFRNTCIsImNyZWF0ZUVudHJ5SFRNTCIsImNyb3NzUmVmTGlua3MiLCJsaW5rIiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXRJZCIsImh0bWwiLCJleGFtaW5lVGV4dCIsInJlcXVpcmVtZW50cyIsInNraWxsIiwibGV2ZWwiLCJ0eXBlIiwiY3JlYXRlSXRlbURldGFpbHNIVE1MIiwiY3JlYXRlU3BlY2llc0RldGFpbHNIVE1MIiwiY3JlYXRlU2tpbGxEZXRhaWxzSFRNTCIsImNyb3NzUmVmcyIsImdldENyb3NzUmVmZXJlbmNlcyIsImNyb3NzUmVmIiwidGFyZ2V0RW50cnkiLCJpdGVtIiwiZGF0YSIsInN0YWNrYWJsZSIsInVuZGVmaW5lZCIsIm1heFN0YWNrIiwiZXF1aXBtZW50VHlwZSIsInNwZWNpZXMiLCJhdHRyaWJ1dGVzIiwiYXR0ciIsInJhbmdlIiwibWluIiwibWF4IiwiYm9udXNlcyIsImJvbnVzIiwicHJvZmVzc2lvbnMiLCJwcm9mZXNzaW9uIiwic3ViX3NraWxscyIsInN1YlNraWxsTmFtZSIsInN1YlNraWxsRGF0YSIsInJlc3VsdHMiLCJzZWFyY2giLCJzaG93U2VhcmNoUmVzdWx0cyIsInJlc3VsdHNIVE1MIiwicmVzdWx0SXRlbXMiLCJncm91cGVkIiwicHVzaCIsInZhbHVlcyIsInNvcnQiLCJhIiwiYiIsImxvY2FsZUNvbXBhcmUiLCJicmVhZGNydW1icyIsImNydW1iIiwiaW5kZXgiLCJoaXN0b3J5Iiwic2xpY2UiLCJoaXN0b3J5SW5kZXgiLCJjb25zdHJ1Y3RvciIsImVuY3ljbG9wZWRpYVN5c3RlbSIsIndpbmRvdyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/game-engine/ui/EncyclopediaUI.js\n"));

/***/ })

}]);