"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_src_lib_game-engine_systems_LocationSystem_js"],{

/***/ "(app-pages-browser)/./src/lib/game-engine/systems/LocationSystem.js":
/*!*******************************************************!*\
  !*** ./src/lib/game-engine/systems/LocationSystem.js ***!
  \*******************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LocationSystem: () => (/* binding */ LocationSystem)\n/* harmony export */ });\n/**\r\n * Location System\r\n * \r\n * Manages the hierarchical location structure:\r\n * Globe → Continents → Countries → Regions → Spots\r\n * \r\n * Handles player location tracking and spot-based action availability.\r\n */ class LocationSystem {\n    /**\r\n     * Initialize the location system\r\n     */ async initialize() {\n        try {\n            console.log('Initializing LocationSystem...');\n            // Load saved location state\n            this._loadLocationState();\n            // Set default location if none exists\n            if (!this.currentLocation.spot) {\n                this._setDefaultLocation();\n            }\n            // Build spot actions cache\n            this._buildSpotActionsCache();\n            console.log('LocationSystem initialized successfully');\n            this.eventSystem.emit('location:initialized', this.currentLocation);\n        } catch (error) {\n            console.error('Error initializing LocationSystem:', error);\n            throw error;\n        }\n    }\n    /**\r\n     * Get current player location\r\n     * @returns {Object} Current location object\r\n     */ getCurrentLocation() {\n        return {\n            ...this.currentLocation\n        };\n    }\n    /**\r\n     * Get current spot\r\n     * @returns {Object|null} Current spot data\r\n     */ getCurrentSpot() {\n        if (!this.currentLocation.spot) return null;\n        const spotPath = this._buildSpotPath();\n        return this._getSpotByPath(spotPath);\n    }\n    /**\r\n     * Get available actions for current spot\r\n     * @returns {Array} Array of available action names\r\n     */ getAvailableActions() {\n        const currentSpot = this.getCurrentSpot();\n        if (!currentSpot || !currentSpot.actions) {\n            return [];\n        }\n        return [\n            ...currentSpot.actions\n        ];\n    }\n    /**\r\n     * Move player to a new spot\r\n     * @param {string} spotId - The spot ID to move to\r\n     * @returns {boolean} Success status\r\n     */ moveToSpot(spotId) {\n        try {\n            const newSpot = this._findSpotById(spotId);\n            if (!newSpot) {\n                console.error(\"Spot not found: \".concat(spotId));\n                return false;\n            }\n            // Update current location\n            const oldLocation = {\n                ...this.currentLocation\n            };\n            this._updateLocationFromSpot(newSpot);\n            // Save state\n            this._saveLocationState();\n            // Emit location change event\n            this.eventSystem.emit('location:changed', {\n                from: oldLocation,\n                to: this.currentLocation,\n                spot: newSpot\n            });\n            // Emit location visited event for achievement tracking\n            this.eventSystem.emit('location:visited', {\n                locationId: spotId,\n                locationName: newSpot.name,\n                locationPath: this._buildSpotPath()\n            });\n            console.log(\"Moved to spot: \".concat(spotId));\n            return true;\n        } catch (error) {\n            console.error('Error moving to spot:', error);\n            return false;\n        }\n    }\n    /**\r\n     * Get all available spots from current location\r\n     * @returns {Array} Array of available spots\r\n     */ getAvailableSpots() {\n        const currentSpot = this.getCurrentSpot();\n        if (!currentSpot || !currentSpot.connections) {\n            return [];\n        }\n        return currentSpot.connections.map((connection)=>{\n            const connectedSpot = this._findSpotById(connection.spotId);\n            return {\n                id: connection.spotId,\n                name: (connectedSpot === null || connectedSpot === void 0 ? void 0 : connectedSpot.name) || connection.spotId,\n                description: (connectedSpot === null || connectedSpot === void 0 ? void 0 : connectedSpot.description) || '',\n                travelTime: connection.travelTime || 0,\n                travelCost: connection.travelCost || {},\n                requirements: connection.requirements || {}\n            };\n        });\n    }\n    /**\r\n     * Get location hierarchy for a specific path\r\n     * @param {string} path - Location path (e.g., \"globe.continent.country\")\r\n     * @returns {Object} Location hierarchy data\r\n     */ getLocationHierarchy() {\n        let path = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : null;\n        if (!path) {\n            return this._getFullHierarchy();\n        }\n        const pathParts = path.split('.');\n        let current = this.locationData;\n        for (const part of pathParts){\n            if (current && current[part]) {\n                current = current[part];\n            } else {\n                return null;\n            }\n        }\n        return current;\n    }\n    /**\r\n     * Get spot by full path\r\n     * @param {string} spotPath - Full spot path\r\n     * @returns {Object|null} Spot data\r\n     */ getSpotByPath(spotPath) {\n        return this._getSpotByPath(spotPath);\n    }\n    /**\r\n     * Check if player can travel to a spot\r\n     * @param {string} spotId - Target spot ID\r\n     * @param {Object} playerState - Current player state (skills, inventory, etc.)\r\n     * @returns {Object} Travel check result\r\n     */ canTravelToSpot(spotId, playerState) {\n        const currentSpot = this.getCurrentSpot();\n        if (!currentSpot || !currentSpot.connections) {\n            return {\n                canTravel: false,\n                reason: 'No connections available'\n            };\n        }\n        const connection = currentSpot.connections.find((conn)=>conn.spotId === spotId);\n        if (!connection) {\n            return {\n                canTravel: false,\n                reason: 'Spot not connected'\n            };\n        }\n        // Check requirements\n        if (connection.requirements) {\n            const requirementCheck = this._checkRequirements(connection.requirements, playerState);\n            if (!requirementCheck.met) {\n                return {\n                    canTravel: false,\n                    reason: requirementCheck.reason\n                };\n            }\n        }\n        // Check travel costs\n        if (connection.travelCost) {\n            const costCheck = this._checkTravelCost(connection.travelCost, playerState);\n            if (!costCheck.canAfford) {\n                return {\n                    canTravel: false,\n                    reason: costCheck.reason\n                };\n            }\n        }\n        return {\n            canTravel: true\n        };\n    }\n    // Private methods\n    _buildLocationHierarchy() {\n        this.locationHierarchy.clear();\n        for (const [globeId, globeData] of Object.entries(this.locationData)){\n            this.locationHierarchy.set(globeId, {\n                type: 'globe',\n                data: globeData,\n                children: new Map()\n            });\n            if (globeData.continents) {\n                for (const [continentId, continentData] of Object.entries(globeData.continents)){\n                    this.locationHierarchy.get(globeId).children.set(continentId, {\n                        type: 'continent',\n                        data: continentData,\n                        children: new Map()\n                    });\n                    if (continentData.countries) {\n                        for (const [countryId, countryData] of Object.entries(continentData.countries)){\n                            this.locationHierarchy.get(globeId).children.get(continentId).children.set(countryId, {\n                                type: 'country',\n                                data: countryData,\n                                children: new Map()\n                            });\n                            if (countryData.regions) {\n                                for (const [regionId, regionData] of Object.entries(countryData.regions)){\n                                    this.locationHierarchy.get(globeId).children.get(continentId).children.get(countryId).children.set(regionId, {\n                                        type: 'region',\n                                        data: regionData,\n                                        children: new Map()\n                                    });\n                                    if (regionData.spots) {\n                                        for (const [spotId, spotData] of Object.entries(regionData.spots)){\n                                            this.locationHierarchy.get(globeId).children.get(continentId).children.get(countryId).children.get(regionId).children.set(spotId, {\n                                                type: 'spot',\n                                                data: spotData\n                                            });\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    _buildSpotActionsCache() {\n        this.spotActions.clear();\n        // Traverse all spots and cache their actions\n        for (const [globeId, globeData] of Object.entries(this.locationData)){\n            if (globeData.continents) {\n                for (const [continentId, continentData] of Object.entries(globeData.continents)){\n                    if (continentData.countries) {\n                        for (const [countryId, countryData] of Object.entries(continentData.countries)){\n                            if (countryData.regions) {\n                                for (const [regionId, regionData] of Object.entries(countryData.regions)){\n                                    if (regionData.spots) {\n                                        for (const [spotId, spotData] of Object.entries(regionData.spots)){\n                                            const spotPath = \"\".concat(globeId, \".\").concat(continentId, \".\").concat(countryId, \".\").concat(regionId, \".\").concat(spotId);\n                                            this.spotActions.set(spotPath, spotData.actions || []);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    _loadLocationState() {\n        const savedLocation = this.stateManager.getState('location');\n        if (savedLocation) {\n            this.currentLocation = {\n                ...savedLocation\n            };\n        }\n    }\n    _saveLocationState() {\n        this.stateManager.setState('location', this.currentLocation);\n    }\n    _setDefaultLocation() {\n        // Find the first available spot as default\n        for (const [globeId, globeData] of Object.entries(this.locationData)){\n            if (globeData.continents) {\n                for (const [continentId, continentData] of Object.entries(globeData.continents)){\n                    if (continentData.countries) {\n                        for (const [countryId, countryData] of Object.entries(continentData.countries)){\n                            if (countryData.regions) {\n                                for (const [regionId, regionData] of Object.entries(countryData.regions)){\n                                    if (regionData.spots) {\n                                        for (const [spotId, spotData] of Object.entries(regionData.spots)){\n                                            this.currentLocation = {\n                                                globe: globeId,\n                                                continent: continentId,\n                                                country: countryId,\n                                                region: regionId,\n                                                spot: spotId\n                                            };\n                                            return;\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    _updateLocationFromSpot(spotData) {\n        var _spotData_path;\n        // Extract location hierarchy from spot data\n        const pathParts = ((_spotData_path = spotData.path) === null || _spotData_path === void 0 ? void 0 : _spotData_path.split('.')) || [];\n        if (pathParts.length >= 5) {\n            this.currentLocation = {\n                globe: pathParts[0],\n                continent: pathParts[1],\n                country: pathParts[2],\n                region: pathParts[3],\n                spot: pathParts[4]\n            };\n        }\n    }\n    _buildSpotPath() {\n        const { globe, continent, country, region, spot } = this.currentLocation;\n        return \"\".concat(globe, \".\").concat(continent, \".\").concat(country, \".\").concat(region, \".\").concat(spot);\n    }\n    _getSpotByPath(spotPath) {\n        const pathParts = spotPath.split('.');\n        if (pathParts.length !== 5) return null;\n        const [globeId, continentId, countryId, regionId, spotId] = pathParts;\n        try {\n            var _this_locationData_globeId_continents_continentId_countries_countryId_regions_regionId, _this_locationData_globeId_continents_continentId_countries_countryId, _this_locationData_globeId_continents_continentId, _this_locationData_globeId;\n            return ((_this_locationData_globeId = this.locationData[globeId]) === null || _this_locationData_globeId === void 0 ? void 0 : (_this_locationData_globeId_continents_continentId = _this_locationData_globeId.continents[continentId]) === null || _this_locationData_globeId_continents_continentId === void 0 ? void 0 : (_this_locationData_globeId_continents_continentId_countries_countryId = _this_locationData_globeId_continents_continentId.countries[countryId]) === null || _this_locationData_globeId_continents_continentId_countries_countryId === void 0 ? void 0 : (_this_locationData_globeId_continents_continentId_countries_countryId_regions_regionId = _this_locationData_globeId_continents_continentId_countries_countryId.regions[regionId]) === null || _this_locationData_globeId_continents_continentId_countries_countryId_regions_regionId === void 0 ? void 0 : _this_locationData_globeId_continents_continentId_countries_countryId_regions_regionId.spots[spotId]) || null;\n        } catch (error) {\n            return null;\n        }\n    }\n    _findSpotById(spotId) {\n        // Search through all spots to find by ID\n        for (const [globeId, globeData] of Object.entries(this.locationData)){\n            if (globeData.continents) {\n                for (const [continentId, continentData] of Object.entries(globeData.continents)){\n                    if (continentData.countries) {\n                        for (const [countryId, countryData] of Object.entries(continentData.countries)){\n                            if (countryData.regions) {\n                                for (const [regionId, regionData] of Object.entries(countryData.regions)){\n                                    if (regionData.spots) {\n                                        for (const [id, spotData] of Object.entries(regionData.spots)){\n                                            if (id === spotId) {\n                                                return {\n                                                    ...spotData,\n                                                    path: \"\".concat(globeId, \".\").concat(continentId, \".\").concat(countryId, \".\").concat(regionId, \".\").concat(id)\n                                                };\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return null;\n    }\n    _getFullHierarchy() {\n        return this.locationData;\n    }\n    _checkRequirements(requirements, playerState) {\n        // Check skill requirements\n        if (requirements.skills) {\n            for (const [skillName, requiredLevel] of Object.entries(requirements.skills)){\n                var _playerState_skills;\n                const playerSkill = (_playerState_skills = playerState.skills) === null || _playerState_skills === void 0 ? void 0 : _playerState_skills[skillName];\n                if (!playerSkill || playerSkill.level < requiredLevel) {\n                    return {\n                        met: false,\n                        reason: \"Requires \".concat(skillName, \" level \").concat(requiredLevel)\n                    };\n                }\n            }\n        }\n        // Check item requirements\n        if (requirements.items) {\n            for (const [itemId, requiredQuantity] of Object.entries(requirements.items)){\n                var _playerState_inventory;\n                const playerItem = (_playerState_inventory = playerState.inventory) === null || _playerState_inventory === void 0 ? void 0 : _playerState_inventory[itemId];\n                if (!playerItem || playerItem.quantity < requiredQuantity) {\n                    return {\n                        met: false,\n                        reason: \"Requires \".concat(itemId, \" x\").concat(requiredQuantity)\n                    };\n                }\n            }\n        }\n        return {\n            met: true\n        };\n    }\n    _checkTravelCost(travelCost, playerState) {\n        // Check item costs\n        if (travelCost.items) {\n            for (const [itemId, requiredQuantity] of Object.entries(travelCost.items)){\n                var _playerState_inventory;\n                const playerItem = (_playerState_inventory = playerState.inventory) === null || _playerState_inventory === void 0 ? void 0 : _playerState_inventory[itemId];\n                if (!playerItem || playerItem.quantity < requiredQuantity) {\n                    return {\n                        canAfford: false,\n                        reason: \"Need \".concat(itemId, \" x\").concat(requiredQuantity)\n                    };\n                }\n            }\n        }\n        return {\n            canAfford: true\n        };\n    }\n    constructor(locationData, stateManager, eventSystem){\n        this.locationData = locationData || {};\n        this.stateManager = stateManager;\n        this.eventSystem = eventSystem;\n        // Current player location\n        this.currentLocation = {\n            globe: null,\n            continent: null,\n            country: null,\n            region: null,\n            spot: null\n        };\n        // Location hierarchy cache\n        this.locationHierarchy = new Map();\n        // Spot actions cache\n        this.spotActions = new Map();\n        this._buildLocationHierarchy();\n    }\n}\nif (true) window.LocationSystem = LocationSystem;\n// ES Module exports\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvZ2FtZS1lbmdpbmUvc3lzdGVtcy9Mb2NhdGlvblN5c3RlbS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7Ozs7Ozs7Q0FPQyxHQUVELE1BQU1BO0lBd0JGOztLQUVDLEdBQ0QsTUFBTUMsYUFBYTtRQUNmLElBQUk7WUFDQUMsUUFBUUMsR0FBRyxDQUFDO1lBRVosNEJBQTRCO1lBQzVCLElBQUksQ0FBQ0Msa0JBQWtCO1lBRXZCLHNDQUFzQztZQUN0QyxJQUFJLENBQUMsSUFBSSxDQUFDQyxlQUFlLENBQUNDLElBQUksRUFBRTtnQkFDNUIsSUFBSSxDQUFDQyxtQkFBbUI7WUFDNUI7WUFFQSwyQkFBMkI7WUFDM0IsSUFBSSxDQUFDQyxzQkFBc0I7WUFFM0JOLFFBQVFDLEdBQUcsQ0FBQztZQUNaLElBQUksQ0FBQ00sV0FBVyxDQUFDQyxJQUFJLENBQUMsd0JBQXdCLElBQUksQ0FBQ0wsZUFBZTtRQUV0RSxFQUFFLE9BQU9NLE9BQU87WUFDWlQsUUFBUVMsS0FBSyxDQUFDLHNDQUFzQ0E7WUFDcEQsTUFBTUE7UUFDVjtJQUNKO0lBRUE7OztLQUdDLEdBQ0RDLHFCQUFxQjtRQUNqQixPQUFPO1lBQUUsR0FBRyxJQUFJLENBQUNQLGVBQWU7UUFBQztJQUNyQztJQUVBOzs7S0FHQyxHQUNEUSxpQkFBaUI7UUFDYixJQUFJLENBQUMsSUFBSSxDQUFDUixlQUFlLENBQUNDLElBQUksRUFBRSxPQUFPO1FBRXZDLE1BQU1RLFdBQVcsSUFBSSxDQUFDQyxjQUFjO1FBQ3BDLE9BQU8sSUFBSSxDQUFDQyxjQUFjLENBQUNGO0lBQy9CO0lBRUE7OztLQUdDLEdBQ0RHLHNCQUFzQjtRQUNsQixNQUFNQyxjQUFjLElBQUksQ0FBQ0wsY0FBYztRQUN2QyxJQUFJLENBQUNLLGVBQWUsQ0FBQ0EsWUFBWUMsT0FBTyxFQUFFO1lBQ3RDLE9BQU8sRUFBRTtRQUNiO1FBRUEsT0FBTztlQUFJRCxZQUFZQyxPQUFPO1NBQUM7SUFDbkM7SUFF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Q0UsY0FBY0EsV0FBV0UsUUFBUSxHQUFHSCxrQkFBa0I7b0JBQ3ZELE9BQU87d0JBQ0gxQyxXQUFXO3dCQUNYUixRQUFRLFFBQW1Ca0QsT0FBWEQsUUFBTyxNQUFxQixPQUFqQkM7b0JBQy9CO2dCQUNKO1lBQ0o7UUFDSjtRQUVBLE9BQU87WUFBRTFDLFdBQVc7UUFBSztJQUM3QjtJQS9iQThDLFlBQVk1RCxZQUFZLEVBQUV5QyxZQUFZLEVBQUVqRixXQUFXLENBQUU7UUFDakQsSUFBSSxDQUFDd0MsWUFBWSxHQUFHQSxnQkFBZ0IsQ0FBQztRQUNyQyxJQUFJLENBQUN5QyxZQUFZLEdBQUdBO1FBQ3BCLElBQUksQ0FBQ2pGLFdBQVcsR0FBR0E7UUFFbkIsMEJBQTBCO1FBQzFCLElBQUksQ0FBQ0osZUFBZSxHQUFHO1lBQ25Cd0YsT0FBTztZQUNQQyxXQUFXO1lBQ1hDLFNBQVM7WUFDVEMsUUFBUTtZQUNSMUYsTUFBTTtRQUNWO1FBRUEsMkJBQTJCO1FBQzNCLElBQUksQ0FBQzJELGlCQUFpQixHQUFHLElBQUlVO1FBRTdCLHFCQUFxQjtRQUNyQixJQUFJLENBQUNhLFdBQVcsR0FBRyxJQUFJYjtRQUV2QixJQUFJLENBQUNYLHVCQUF1QjtJQUNoQztBQTJhSjtBQUVBLElBQUksSUFBNkIsRUFBRThDLE9BQU85RyxjQUFjLEdBQUdBO0FBRTNELG9CQUFvQjtBQUNNIiwic291cmNlcyI6WyJDOlxcR2l0SHViXFxTZWxmXFx0YXZlcm5zXFxzcmNcXGxpYlxcZ2FtZS1lbmdpbmVcXHN5c3RlbXNcXExvY2F0aW9uU3lzdGVtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBMb2NhdGlvbiBTeXN0ZW1cclxuICogXHJcbiAqIE1hbmFnZXMgdGhlIGhpZXJhcmNoaWNhbCBsb2NhdGlvbiBzdHJ1Y3R1cmU6XHJcbiAqIEdsb2JlIOKGkiBDb250aW5lbnRzIOKGkiBDb3VudHJpZXMg4oaSIFJlZ2lvbnMg4oaSIFNwb3RzXHJcbiAqIFxyXG4gKiBIYW5kbGVzIHBsYXllciBsb2NhdGlvbiB0cmFja2luZyBhbmQgc3BvdC1iYXNlZCBhY3Rpb24gYXZhaWxhYmlsaXR5LlxyXG4gKi9cclxuXHJcbmNsYXNzIExvY2F0aW9uU3lzdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKGxvY2F0aW9uRGF0YSwgc3RhdGVNYW5hZ2VyLCBldmVudFN5c3RlbSkge1xyXG4gICAgICAgIHRoaXMubG9jYXRpb25EYXRhID0gbG9jYXRpb25EYXRhIHx8IHt9O1xyXG4gICAgICAgIHRoaXMuc3RhdGVNYW5hZ2VyID0gc3RhdGVNYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0gPSBldmVudFN5c3RlbTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDdXJyZW50IHBsYXllciBsb2NhdGlvblxyXG4gICAgICAgIHRoaXMuY3VycmVudExvY2F0aW9uID0ge1xyXG4gICAgICAgICAgICBnbG9iZTogbnVsbCxcclxuICAgICAgICAgICAgY29udGluZW50OiBudWxsLFxyXG4gICAgICAgICAgICBjb3VudHJ5OiBudWxsLFxyXG4gICAgICAgICAgICByZWdpb246IG51bGwsXHJcbiAgICAgICAgICAgIHNwb3Q6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIExvY2F0aW9uIGhpZXJhcmNoeSBjYWNoZVxyXG4gICAgICAgIHRoaXMubG9jYXRpb25IaWVyYXJjaHkgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU3BvdCBhY3Rpb25zIGNhY2hlXHJcbiAgICAgICAgdGhpcy5zcG90QWN0aW9ucyA9IG5ldyBNYXAoKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9idWlsZExvY2F0aW9uSGllcmFyY2h5KCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZSB0aGUgbG9jYXRpb24gc3lzdGVtXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0luaXRpYWxpemluZyBMb2NhdGlvblN5c3RlbS4uLicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gTG9hZCBzYXZlZCBsb2NhdGlvbiBzdGF0ZVxyXG4gICAgICAgICAgICB0aGlzLl9sb2FkTG9jYXRpb25TdGF0ZSgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gU2V0IGRlZmF1bHQgbG9jYXRpb24gaWYgbm9uZSBleGlzdHNcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRMb2NhdGlvbi5zcG90KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXREZWZhdWx0TG9jYXRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQnVpbGQgc3BvdCBhY3Rpb25zIGNhY2hlXHJcbiAgICAgICAgICAgIHRoaXMuX2J1aWxkU3BvdEFjdGlvbnNDYWNoZSgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0xvY2F0aW9uU3lzdGVtIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLmVtaXQoJ2xvY2F0aW9uOmluaXRpYWxpemVkJywgdGhpcy5jdXJyZW50TG9jYXRpb24pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgTG9jYXRpb25TeXN0ZW06JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2V0IGN1cnJlbnQgcGxheWVyIGxvY2F0aW9uXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBDdXJyZW50IGxvY2F0aW9uIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBnZXRDdXJyZW50TG9jYXRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgLi4udGhpcy5jdXJyZW50TG9jYXRpb24gfTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgY3VycmVudCBzcG90XHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fG51bGx9IEN1cnJlbnQgc3BvdCBkYXRhXHJcbiAgICAgKi9cclxuICAgIGdldEN1cnJlbnRTcG90KCkge1xyXG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50TG9jYXRpb24uc3BvdCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgc3BvdFBhdGggPSB0aGlzLl9idWlsZFNwb3RQYXRoKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldFNwb3RCeVBhdGgoc3BvdFBhdGgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhdmFpbGFibGUgYWN0aW9ucyBmb3IgY3VycmVudCBzcG90XHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IEFycmF5IG9mIGF2YWlsYWJsZSBhY3Rpb24gbmFtZXNcclxuICAgICAqL1xyXG4gICAgZ2V0QXZhaWxhYmxlQWN0aW9ucygpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50U3BvdCA9IHRoaXMuZ2V0Q3VycmVudFNwb3QoKTtcclxuICAgICAgICBpZiAoIWN1cnJlbnRTcG90IHx8ICFjdXJyZW50U3BvdC5hY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIFsuLi5jdXJyZW50U3BvdC5hY3Rpb25zXTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBNb3ZlIHBsYXllciB0byBhIG5ldyBzcG90XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3BvdElkIC0gVGhlIHNwb3QgSUQgdG8gbW92ZSB0b1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFN1Y2Nlc3Mgc3RhdHVzXHJcbiAgICAgKi9cclxuICAgIG1vdmVUb1Nwb3Qoc3BvdElkKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgbmV3U3BvdCA9IHRoaXMuX2ZpbmRTcG90QnlJZChzcG90SWQpO1xyXG4gICAgICAgICAgICBpZiAoIW5ld1Nwb3QpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFNwb3Qgbm90IGZvdW5kOiAke3Nwb3RJZH1gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVXBkYXRlIGN1cnJlbnQgbG9jYXRpb25cclxuICAgICAgICAgICAgY29uc3Qgb2xkTG9jYXRpb24gPSB7IC4uLnRoaXMuY3VycmVudExvY2F0aW9uIH07XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUxvY2F0aW9uRnJvbVNwb3QobmV3U3BvdCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTYXZlIHN0YXRlXHJcbiAgICAgICAgICAgIHRoaXMuX3NhdmVMb2NhdGlvblN0YXRlKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBFbWl0IGxvY2F0aW9uIGNoYW5nZSBldmVudFxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLmVtaXQoJ2xvY2F0aW9uOmNoYW5nZWQnLCB7XHJcbiAgICAgICAgICAgICAgICBmcm9tOiBvbGRMb2NhdGlvbixcclxuICAgICAgICAgICAgICAgIHRvOiB0aGlzLmN1cnJlbnRMb2NhdGlvbixcclxuICAgICAgICAgICAgICAgIHNwb3Q6IG5ld1Nwb3RcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBFbWl0IGxvY2F0aW9uIHZpc2l0ZWQgZXZlbnQgZm9yIGFjaGlldmVtZW50IHRyYWNraW5nXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0uZW1pdCgnbG9jYXRpb246dmlzaXRlZCcsIHtcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IHNwb3RJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uTmFtZTogbmV3U3BvdC5uYW1lLFxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb25QYXRoOiB0aGlzLl9idWlsZFNwb3RQYXRoKClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgTW92ZWQgdG8gc3BvdDogJHtzcG90SWR9YCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBtb3ZpbmcgdG8gc3BvdDonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2V0IGFsbCBhdmFpbGFibGUgc3BvdHMgZnJvbSBjdXJyZW50IGxvY2F0aW9uXHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IEFycmF5IG9mIGF2YWlsYWJsZSBzcG90c1xyXG4gICAgICovXHJcbiAgICBnZXRBdmFpbGFibGVTcG90cygpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50U3BvdCA9IHRoaXMuZ2V0Q3VycmVudFNwb3QoKTtcclxuICAgICAgICBpZiAoIWN1cnJlbnRTcG90IHx8ICFjdXJyZW50U3BvdC5jb25uZWN0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBjdXJyZW50U3BvdC5jb25uZWN0aW9ucy5tYXAoY29ubmVjdGlvbiA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3RlZFNwb3QgPSB0aGlzLl9maW5kU3BvdEJ5SWQoY29ubmVjdGlvbi5zcG90SWQpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IGNvbm5lY3Rpb24uc3BvdElkLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogY29ubmVjdGVkU3BvdD8ubmFtZSB8fCBjb25uZWN0aW9uLnNwb3RJZCxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBjb25uZWN0ZWRTcG90Py5kZXNjcmlwdGlvbiB8fCAnJyxcclxuICAgICAgICAgICAgICAgIHRyYXZlbFRpbWU6IGNvbm5lY3Rpb24udHJhdmVsVGltZSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgdHJhdmVsQ29zdDogY29ubmVjdGlvbi50cmF2ZWxDb3N0IHx8IHt9LFxyXG4gICAgICAgICAgICAgICAgcmVxdWlyZW1lbnRzOiBjb25uZWN0aW9uLnJlcXVpcmVtZW50cyB8fCB7fVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCBsb2NhdGlvbiBoaWVyYXJjaHkgZm9yIGEgc3BlY2lmaWMgcGF0aFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBMb2NhdGlvbiBwYXRoIChlLmcuLCBcImdsb2JlLmNvbnRpbmVudC5jb3VudHJ5XCIpXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBMb2NhdGlvbiBoaWVyYXJjaHkgZGF0YVxyXG4gICAgICovXHJcbiAgICBnZXRMb2NhdGlvbkhpZXJhcmNoeShwYXRoID0gbnVsbCkge1xyXG4gICAgICAgIGlmICghcGF0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0RnVsbEhpZXJhcmNoeSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBwYXRoUGFydHMgPSBwYXRoLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLmxvY2F0aW9uRGF0YTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGF0aFBhcnRzKSB7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50ICYmIGN1cnJlbnRbcGFydF0pIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50W3BhcnRdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2V0IHNwb3QgYnkgZnVsbCBwYXRoXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3BvdFBhdGggLSBGdWxsIHNwb3QgcGF0aFxyXG4gICAgICogQHJldHVybnMge09iamVjdHxudWxsfSBTcG90IGRhdGFcclxuICAgICAqL1xyXG4gICAgZ2V0U3BvdEJ5UGF0aChzcG90UGF0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRTcG90QnlQYXRoKHNwb3RQYXRoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBwbGF5ZXIgY2FuIHRyYXZlbCB0byBhIHNwb3RcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzcG90SWQgLSBUYXJnZXQgc3BvdCBJRFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBsYXllclN0YXRlIC0gQ3VycmVudCBwbGF5ZXIgc3RhdGUgKHNraWxscywgaW52ZW50b3J5LCBldGMuKVxyXG4gICAgICogQHJldHVybnMge09iamVjdH0gVHJhdmVsIGNoZWNrIHJlc3VsdFxyXG4gICAgICovXHJcbiAgICBjYW5UcmF2ZWxUb1Nwb3Qoc3BvdElkLCBwbGF5ZXJTdGF0ZSkge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRTcG90ID0gdGhpcy5nZXRDdXJyZW50U3BvdCgpO1xyXG4gICAgICAgIGlmICghY3VycmVudFNwb3QgfHwgIWN1cnJlbnRTcG90LmNvbm5lY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGNhblRyYXZlbDogZmFsc2UsIHJlYXNvbjogJ05vIGNvbm5lY3Rpb25zIGF2YWlsYWJsZScgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGN1cnJlbnRTcG90LmNvbm5lY3Rpb25zLmZpbmQoY29ubiA9PiBjb25uLnNwb3RJZCA9PT0gc3BvdElkKTtcclxuICAgICAgICBpZiAoIWNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgY2FuVHJhdmVsOiBmYWxzZSwgcmVhc29uOiAnU3BvdCBub3QgY29ubmVjdGVkJyB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBDaGVjayByZXF1aXJlbWVudHNcclxuICAgICAgICBpZiAoY29ubmVjdGlvbi5yZXF1aXJlbWVudHMpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVxdWlyZW1lbnRDaGVjayA9IHRoaXMuX2NoZWNrUmVxdWlyZW1lbnRzKGNvbm5lY3Rpb24ucmVxdWlyZW1lbnRzLCBwbGF5ZXJTdGF0ZSk7XHJcbiAgICAgICAgICAgIGlmICghcmVxdWlyZW1lbnRDaGVjay5tZXQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IGNhblRyYXZlbDogZmFsc2UsIHJlYXNvbjogcmVxdWlyZW1lbnRDaGVjay5yZWFzb24gfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBDaGVjayB0cmF2ZWwgY29zdHNcclxuICAgICAgICBpZiAoY29ubmVjdGlvbi50cmF2ZWxDb3N0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvc3RDaGVjayA9IHRoaXMuX2NoZWNrVHJhdmVsQ29zdChjb25uZWN0aW9uLnRyYXZlbENvc3QsIHBsYXllclN0YXRlKTtcclxuICAgICAgICAgICAgaWYgKCFjb3N0Q2hlY2suY2FuQWZmb3JkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBjYW5UcmF2ZWw6IGZhbHNlLCByZWFzb246IGNvc3RDaGVjay5yZWFzb24gfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4geyBjYW5UcmF2ZWw6IHRydWUgfTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gUHJpdmF0ZSBtZXRob2RzXHJcbiAgICBcclxuICAgIF9idWlsZExvY2F0aW9uSGllcmFyY2h5KCkge1xyXG4gICAgICAgIHRoaXMubG9jYXRpb25IaWVyYXJjaHkuY2xlYXIoKTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGNvbnN0IFtnbG9iZUlkLCBnbG9iZURhdGFdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMubG9jYXRpb25EYXRhKSkge1xyXG4gICAgICAgICAgICB0aGlzLmxvY2F0aW9uSGllcmFyY2h5LnNldChnbG9iZUlkLCB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnZ2xvYmUnLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogZ2xvYmVEYXRhLFxyXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IG5ldyBNYXAoKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChnbG9iZURhdGEuY29udGluZW50cykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBbY29udGluZW50SWQsIGNvbnRpbmVudERhdGFdIG9mIE9iamVjdC5lbnRyaWVzKGdsb2JlRGF0YS5jb250aW5lbnRzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYXRpb25IaWVyYXJjaHkuZ2V0KGdsb2JlSWQpLmNoaWxkcmVuLnNldChjb250aW5lbnRJZCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY29udGluZW50JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogY29udGluZW50RGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IG5ldyBNYXAoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250aW5lbnREYXRhLmNvdW50cmllcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtjb3VudHJ5SWQsIGNvdW50cnlEYXRhXSBvZiBPYmplY3QuZW50cmllcyhjb250aW5lbnREYXRhLmNvdW50cmllcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYXRpb25IaWVyYXJjaHkuZ2V0KGdsb2JlSWQpLmNoaWxkcmVuLmdldChjb250aW5lbnRJZCkuY2hpbGRyZW4uc2V0KGNvdW50cnlJZCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjb3VudHJ5JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBjb3VudHJ5RGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogbmV3IE1hcCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50cnlEYXRhLnJlZ2lvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtyZWdpb25JZCwgcmVnaW9uRGF0YV0gb2YgT2JqZWN0LmVudHJpZXMoY291bnRyeURhdGEucmVnaW9ucykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhdGlvbkhpZXJhcmNoeS5nZXQoZ2xvYmVJZCkuY2hpbGRyZW4uZ2V0KGNvbnRpbmVudElkKS5jaGlsZHJlbi5nZXQoY291bnRyeUlkKS5jaGlsZHJlbi5zZXQocmVnaW9uSWQsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyZWdpb24nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcmVnaW9uRGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBuZXcgTWFwKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVnaW9uRGF0YS5zcG90cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBbc3BvdElkLCBzcG90RGF0YV0gb2YgT2JqZWN0LmVudHJpZXMocmVnaW9uRGF0YS5zcG90cykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2F0aW9uSGllcmFyY2h5LmdldChnbG9iZUlkKS5jaGlsZHJlbi5nZXQoY29udGluZW50SWQpLmNoaWxkcmVuLmdldChjb3VudHJ5SWQpLmNoaWxkcmVuLmdldChyZWdpb25JZCkuY2hpbGRyZW4uc2V0KHNwb3RJZCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3BvdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHNwb3REYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF9idWlsZFNwb3RBY3Rpb25zQ2FjaGUoKSB7XHJcbiAgICAgICAgdGhpcy5zcG90QWN0aW9ucy5jbGVhcigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRyYXZlcnNlIGFsbCBzcG90cyBhbmQgY2FjaGUgdGhlaXIgYWN0aW9uc1xyXG4gICAgICAgIGZvciAoY29uc3QgW2dsb2JlSWQsIGdsb2JlRGF0YV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5sb2NhdGlvbkRhdGEpKSB7XHJcbiAgICAgICAgICAgIGlmIChnbG9iZURhdGEuY29udGluZW50cykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBbY29udGluZW50SWQsIGNvbnRpbmVudERhdGFdIG9mIE9iamVjdC5lbnRyaWVzKGdsb2JlRGF0YS5jb250aW5lbnRzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250aW5lbnREYXRhLmNvdW50cmllcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtjb3VudHJ5SWQsIGNvdW50cnlEYXRhXSBvZiBPYmplY3QuZW50cmllcyhjb250aW5lbnREYXRhLmNvdW50cmllcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb3VudHJ5RGF0YS5yZWdpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBbcmVnaW9uSWQsIHJlZ2lvbkRhdGFdIG9mIE9iamVjdC5lbnRyaWVzKGNvdW50cnlEYXRhLnJlZ2lvbnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWdpb25EYXRhLnNwb3RzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtzcG90SWQsIHNwb3REYXRhXSBvZiBPYmplY3QuZW50cmllcyhyZWdpb25EYXRhLnNwb3RzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwb3RQYXRoID0gYCR7Z2xvYmVJZH0uJHtjb250aW5lbnRJZH0uJHtjb3VudHJ5SWR9LiR7cmVnaW9uSWR9LiR7c3BvdElkfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcG90QWN0aW9ucy5zZXQoc3BvdFBhdGgsIHNwb3REYXRhLmFjdGlvbnMgfHwgW10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfbG9hZExvY2F0aW9uU3RhdGUoKSB7XHJcbiAgICAgICAgY29uc3Qgc2F2ZWRMb2NhdGlvbiA9IHRoaXMuc3RhdGVNYW5hZ2VyLmdldFN0YXRlKCdsb2NhdGlvbicpO1xyXG4gICAgICAgIGlmIChzYXZlZExvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudExvY2F0aW9uID0geyAuLi5zYXZlZExvY2F0aW9uIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfc2F2ZUxvY2F0aW9uU3RhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZU1hbmFnZXIuc2V0U3RhdGUoJ2xvY2F0aW9uJywgdGhpcy5jdXJyZW50TG9jYXRpb24pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfc2V0RGVmYXVsdExvY2F0aW9uKCkge1xyXG4gICAgICAgIC8vIEZpbmQgdGhlIGZpcnN0IGF2YWlsYWJsZSBzcG90IGFzIGRlZmF1bHRcclxuICAgICAgICBmb3IgKGNvbnN0IFtnbG9iZUlkLCBnbG9iZURhdGFdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMubG9jYXRpb25EYXRhKSkge1xyXG4gICAgICAgICAgICBpZiAoZ2xvYmVEYXRhLmNvbnRpbmVudHMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2NvbnRpbmVudElkLCBjb250aW5lbnREYXRhXSBvZiBPYmplY3QuZW50cmllcyhnbG9iZURhdGEuY29udGluZW50cykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGluZW50RGF0YS5jb3VudHJpZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBbY291bnRyeUlkLCBjb3VudHJ5RGF0YV0gb2YgT2JqZWN0LmVudHJpZXMoY29udGluZW50RGF0YS5jb3VudHJpZXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY291bnRyeURhdGEucmVnaW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW3JlZ2lvbklkLCByZWdpb25EYXRhXSBvZiBPYmplY3QuZW50cmllcyhjb3VudHJ5RGF0YS5yZWdpb25zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVnaW9uRGF0YS5zcG90cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBbc3BvdElkLCBzcG90RGF0YV0gb2YgT2JqZWN0LmVudHJpZXMocmVnaW9uRGF0YS5zcG90cykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRMb2NhdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmU6IGdsb2JlSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbmVudDogY29udGluZW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cnk6IGNvdW50cnlJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiByZWdpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BvdDogc3BvdElkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF91cGRhdGVMb2NhdGlvbkZyb21TcG90KHNwb3REYXRhKSB7XHJcbiAgICAgICAgLy8gRXh0cmFjdCBsb2NhdGlvbiBoaWVyYXJjaHkgZnJvbSBzcG90IGRhdGFcclxuICAgICAgICBjb25zdCBwYXRoUGFydHMgPSBzcG90RGF0YS5wYXRoPy5zcGxpdCgnLicpIHx8IFtdO1xyXG4gICAgICAgIGlmIChwYXRoUGFydHMubGVuZ3RoID49IDUpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50TG9jYXRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICBnbG9iZTogcGF0aFBhcnRzWzBdLFxyXG4gICAgICAgICAgICAgICAgY29udGluZW50OiBwYXRoUGFydHNbMV0sXHJcbiAgICAgICAgICAgICAgICBjb3VudHJ5OiBwYXRoUGFydHNbMl0sXHJcbiAgICAgICAgICAgICAgICByZWdpb246IHBhdGhQYXJ0c1szXSxcclxuICAgICAgICAgICAgICAgIHNwb3Q6IHBhdGhQYXJ0c1s0XVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgX2J1aWxkU3BvdFBhdGgoKSB7XHJcbiAgICAgICAgY29uc3QgeyBnbG9iZSwgY29udGluZW50LCBjb3VudHJ5LCByZWdpb24sIHNwb3QgfSA9IHRoaXMuY3VycmVudExvY2F0aW9uO1xyXG4gICAgICAgIHJldHVybiBgJHtnbG9iZX0uJHtjb250aW5lbnR9LiR7Y291bnRyeX0uJHtyZWdpb259LiR7c3BvdH1gO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfZ2V0U3BvdEJ5UGF0aChzcG90UGF0aCkge1xyXG4gICAgICAgIGNvbnN0IHBhdGhQYXJ0cyA9IHNwb3RQYXRoLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgaWYgKHBhdGhQYXJ0cy5sZW5ndGggIT09IDUpIHJldHVybiBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IFtnbG9iZUlkLCBjb250aW5lbnRJZCwgY291bnRyeUlkLCByZWdpb25JZCwgc3BvdElkXSA9IHBhdGhQYXJ0cztcclxuICAgICAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhdGlvbkRhdGFbZ2xvYmVJZF0/LmNvbnRpbmVudHNbY29udGluZW50SWRdPy5jb3VudHJpZXNbY291bnRyeUlkXT8ucmVnaW9uc1tyZWdpb25JZF0/LnNwb3RzW3Nwb3RJZF0gfHwgbnVsbDtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF9maW5kU3BvdEJ5SWQoc3BvdElkKSB7XHJcbiAgICAgICAgLy8gU2VhcmNoIHRocm91Z2ggYWxsIHNwb3RzIHRvIGZpbmQgYnkgSURcclxuICAgICAgICBmb3IgKGNvbnN0IFtnbG9iZUlkLCBnbG9iZURhdGFdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMubG9jYXRpb25EYXRhKSkge1xyXG4gICAgICAgICAgICBpZiAoZ2xvYmVEYXRhLmNvbnRpbmVudHMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2NvbnRpbmVudElkLCBjb250aW5lbnREYXRhXSBvZiBPYmplY3QuZW50cmllcyhnbG9iZURhdGEuY29udGluZW50cykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGluZW50RGF0YS5jb3VudHJpZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBbY291bnRyeUlkLCBjb3VudHJ5RGF0YV0gb2YgT2JqZWN0LmVudHJpZXMoY29udGluZW50RGF0YS5jb3VudHJpZXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY291bnRyeURhdGEucmVnaW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW3JlZ2lvbklkLCByZWdpb25EYXRhXSBvZiBPYmplY3QuZW50cmllcyhjb3VudHJ5RGF0YS5yZWdpb25zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVnaW9uRGF0YS5zcG90cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBbaWQsIHNwb3REYXRhXSBvZiBPYmplY3QuZW50cmllcyhyZWdpb25EYXRhLnNwb3RzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZCA9PT0gc3BvdElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5zcG90RGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGAke2dsb2JlSWR9LiR7Y29udGluZW50SWR9LiR7Y291bnRyeUlkfS4ke3JlZ2lvbklkfS4ke2lkfWBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF9nZXRGdWxsSGllcmFyY2h5KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxvY2F0aW9uRGF0YTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgX2NoZWNrUmVxdWlyZW1lbnRzKHJlcXVpcmVtZW50cywgcGxheWVyU3RhdGUpIHtcclxuICAgICAgICAvLyBDaGVjayBza2lsbCByZXF1aXJlbWVudHNcclxuICAgICAgICBpZiAocmVxdWlyZW1lbnRzLnNraWxscykge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtza2lsbE5hbWUsIHJlcXVpcmVkTGV2ZWxdIG9mIE9iamVjdC5lbnRyaWVzKHJlcXVpcmVtZW50cy5za2lsbHMpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwbGF5ZXJTa2lsbCA9IHBsYXllclN0YXRlLnNraWxscz8uW3NraWxsTmFtZV07XHJcbiAgICAgICAgICAgICAgICBpZiAoIXBsYXllclNraWxsIHx8IHBsYXllclNraWxsLmxldmVsIDwgcmVxdWlyZWRMZXZlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogYFJlcXVpcmVzICR7c2tpbGxOYW1lfSBsZXZlbCAke3JlcXVpcmVkTGV2ZWx9YFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ2hlY2sgaXRlbSByZXF1aXJlbWVudHNcclxuICAgICAgICBpZiAocmVxdWlyZW1lbnRzLml0ZW1zKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2l0ZW1JZCwgcmVxdWlyZWRRdWFudGl0eV0gb2YgT2JqZWN0LmVudHJpZXMocmVxdWlyZW1lbnRzLml0ZW1zKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGxheWVySXRlbSA9IHBsYXllclN0YXRlLmludmVudG9yeT8uW2l0ZW1JZF07XHJcbiAgICAgICAgICAgICAgICBpZiAoIXBsYXllckl0ZW0gfHwgcGxheWVySXRlbS5xdWFudGl0eSA8IHJlcXVpcmVkUXVhbnRpdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFzb246IGBSZXF1aXJlcyAke2l0ZW1JZH0geCR7cmVxdWlyZWRRdWFudGl0eX1gXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4geyBtZXQ6IHRydWUgfTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgX2NoZWNrVHJhdmVsQ29zdCh0cmF2ZWxDb3N0LCBwbGF5ZXJTdGF0ZSkge1xyXG4gICAgICAgIC8vIENoZWNrIGl0ZW0gY29zdHNcclxuICAgICAgICBpZiAodHJhdmVsQ29zdC5pdGVtcykge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtpdGVtSWQsIHJlcXVpcmVkUXVhbnRpdHldIG9mIE9iamVjdC5lbnRyaWVzKHRyYXZlbENvc3QuaXRlbXMpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwbGF5ZXJJdGVtID0gcGxheWVyU3RhdGUuaW52ZW50b3J5Py5baXRlbUlkXTtcclxuICAgICAgICAgICAgICAgIGlmICghcGxheWVySXRlbSB8fCBwbGF5ZXJJdGVtLnF1YW50aXR5IDwgcmVxdWlyZWRRdWFudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbkFmZm9yZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogYE5lZWQgJHtpdGVtSWR9IHgke3JlcXVpcmVkUXVhbnRpdHl9YFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHsgY2FuQWZmb3JkOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgd2luZG93LkxvY2F0aW9uU3lzdGVtID0gTG9jYXRpb25TeXN0ZW07XHJcblxyXG4vLyBFUyBNb2R1bGUgZXhwb3J0c1xyXG5leHBvcnQgeyBMb2NhdGlvblN5c3RlbSB9OyAiXSwibmFtZXMiOlsiTG9jYXRpb25TeXN0ZW0iLCJpbml0aWFsaXplIiwiY29uc29sZSIsImxvZyIsIl9sb2FkTG9jYXRpb25TdGF0ZSIsImN1cnJlbnRMb2NhdGlvbiIsInNwb3QiLCJfc2V0RGVmYXVsdExvY2F0aW9uIiwiX2J1aWxkU3BvdEFjdGlvbnNDYWNoZSIsImV2ZW50U3lzdGVtIiwiZW1pdCIsImVycm9yIiwiZ2V0Q3VycmVudExvY2F0aW9uIiwiZ2V0Q3VycmVudFNwb3QiLCJzcG90UGF0aCIsIl9idWlsZFNwb3RQYXRoIiwiX2dldFNwb3RCeVBhdGgiLCJnZXRBdmFpbGFibGVBY3Rpb25zIiwiY3VycmVudFNwb3QiLCJhY3Rpb25zIiwibW92ZVRvU3BvdCIsInNwb3RJZCIsIm5ld1Nwb3QiLCJfZmluZFNwb3RCeUlkIiwib2xkTG9jYXRpb24iLCJfdXBkYXRlTG9jYXRpb25Gcm9tU3BvdCIsIl9zYXZlTG9jYXRpb25TdGF0ZSIsImZyb20iLCJ0byIsImxvY2F0aW9uSWQiLCJsb2NhdGlvbk5hbWUiLCJuYW1lIiwibG9jYXRpb25QYXRoIiwiZ2V0QXZhaWxhYmxlU3BvdHMiLCJjb25uZWN0aW9ucyIsIm1hcCIsImNvbm5lY3Rpb24iLCJjb25uZWN0ZWRTcG90IiwiaWQiLCJkZXNjcmlwdGlvbiIsInRyYXZlbFRpbWUiLCJ0cmF2ZWxDb3N0IiwicmVxdWlyZW1lbnRzIiwiZ2V0TG9jYXRpb25IaWVyYXJjaHkiLCJwYXRoIiwiX2dldEZ1bGxIaWVyYXJjaHkiLCJwYXRoUGFydHMiLCJzcGxpdCIsImN1cnJlbnQiLCJsb2NhdGlvbkRhdGEiLCJwYXJ0IiwiZ2V0U3BvdEJ5UGF0aCIsImNhblRyYXZlbFRvU3BvdCIsInBsYXllclN0YXRlIiwiY2FuVHJhdmVsIiwicmVhc29uIiwiZmluZCIsImNvbm4iLCJyZXF1aXJlbWVudENoZWNrIiwiX2NoZWNrUmVxdWlyZW1lbnRzIiwibWV0IiwiY29zdENoZWNrIiwiX2NoZWNrVHJhdmVsQ29zdCIsImNhbkFmZm9yZCIsIl9idWlsZExvY2F0aW9uSGllcmFyY2h5IiwibG9jYXRpb25IaWVyYXJjaHkiLCJjbGVhciIsImdsb2JlSWQiLCJnbG9iZURhdGEiLCJPYmplY3QiLCJlbnRyaWVzIiwic2V0IiwidHlwZSIsImRhdGEiLCJjaGlsZHJlbiIsIk1hcCIsImNvbnRpbmVudHMiLCJjb250aW5lbnRJZCIsImNvbnRpbmVudERhdGEiLCJnZXQiLCJjb3VudHJpZXMiLCJjb3VudHJ5SWQiLCJjb3VudHJ5RGF0YSIsInJlZ2lvbnMiLCJyZWdpb25JZCIsInJlZ2lvbkRhdGEiLCJzcG90cyIsInNwb3REYXRhIiwic3BvdEFjdGlvbnMiLCJzYXZlZExvY2F0aW9uIiwic3RhdGVNYW5hZ2VyIiwiZ2V0U3RhdGUiLCJzZXRTdGF0ZSIsImdsb2JlIiwiY29udGluZW50IiwiY291bnRyeSIsInJlZ2lvbiIsImxlbmd0aCIsInNraWxscyIsInNraWxsTmFtZSIsInJlcXVpcmVkTGV2ZWwiLCJwbGF5ZXJTa2lsbCIsImxldmVsIiwiaXRlbXMiLCJpdGVtSWQiLCJyZXF1aXJlZFF1YW50aXR5IiwicGxheWVySXRlbSIsImludmVudG9yeSIsInF1YW50aXR5IiwiY29uc3RydWN0b3IiLCJ3aW5kb3ciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/game-engine/systems/LocationSystem.js\n"));

/***/ })

}]);