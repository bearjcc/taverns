"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_src_lib_game-engine_systems_ActionAvailabilityEngine_js"],{

/***/ "(app-pages-browser)/./src/lib/game-engine/systems/ActionAvailabilityEngine.js":
/*!*****************************************************************!*\
  !*** ./src/lib/game-engine/systems/ActionAvailabilityEngine.js ***!
  \*****************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ActionAvailabilityEngine: () => (/* binding */ ActionAvailabilityEngine)\n/* harmony export */ });\n/**\r\n * Action Availability Engine\r\n * \r\n * Handles dynamic action availability based on various conditions:\r\n * - Location-based availability\r\n * - Time-of-day restrictions\r\n * - Weather/environmental modifiers\r\n * - Quest-based unlocks\r\n * - NPC interaction requirements\r\n * - Action cooldowns\r\n * - Prerequisites and dependencies\r\n * - Player status (health, energy, etc.)\r\n * - Equipment and tool requirements\r\n */ class ActionAvailabilityEngine {\n    /**\r\n     * Initialize default availability rules\r\n     */ _initializeDefaultRules() {\n        // Location-based rules\n        this.addRule('location', (action, context)=>{\n            const { currentLocation, locationSystem } = context;\n            if (!action.locationRestrictions) return true;\n            return action.locationRestrictions.some((restriction)=>{\n                return this._checkLocationRestriction(restriction, currentLocation, locationSystem);\n            });\n        });\n        // Time-based rules\n        this.addRule('time', (action, context)=>{\n            if (!action.timeRestrictions) return true;\n            return action.timeRestrictions.every((restriction)=>{\n                return this._checkTimeRestriction(restriction, this.gameTime);\n            });\n        });\n        // Weather-based rules\n        this.addRule('weather', (action, context)=>{\n            if (!action.weatherRestrictions) return true;\n            return action.weatherRestrictions.every((restriction)=>{\n                return this._checkWeatherRestriction(restriction, this.weather);\n            });\n        });\n        // Player status rules\n        this.addRule('playerStatus', (action, context)=>{\n            if (!action.playerStatusRequirements) return true;\n            return this._checkPlayerStatusRequirements(action.playerStatusRequirements, this.playerStatus);\n        });\n        // Equipment rules\n        this.addRule('equipment', (action, context)=>{\n            if (!action.equipmentRequirements) return true;\n            const { inventoryManager } = context;\n            return this._checkEquipmentRequirements(action.equipmentRequirements, inventoryManager);\n        });\n        // Cooldown rules\n        this.addRule('cooldown', (action, context)=>{\n            if (!action.cooldown) return true;\n            return this._checkCooldown(action.name, action.cooldown);\n        });\n        // Quest rules\n        this.addRule('quest', (action, context)=>{\n            if (!action.questRequirements) return true;\n            const { questSystem } = context;\n            return this._checkQuestRequirements(action.questRequirements, questSystem);\n        });\n        // NPC interaction rules\n        this.addRule('npc', (action, context)=>{\n            if (!action.npcRequirements) return true;\n            const { npcSystem } = context;\n            return this._checkNPCRequirements(action.npcRequirements, npcSystem);\n        });\n    }\n    /**\r\n     * Setup event listeners for dynamic updates\r\n     */ _setupEventListeners() {\n        if (this.eventSystem) {\n            this.eventSystem.on('time:update', (data)=>{\n                this.gameTime = {\n                    ...this.gameTime,\n                    ...data\n                };\n                this._notifyAvailabilityChange();\n            });\n            this.eventSystem.on('weather:change', (data)=>{\n                this.weather = {\n                    ...this.weather,\n                    ...data\n                };\n                this._notifyAvailabilityChange();\n            });\n            this.eventSystem.on('player:status:update', (data)=>{\n                this.playerStatus = {\n                    ...this.playerStatus,\n                    ...data\n                };\n                this._notifyAvailabilityChange();\n            });\n            this.eventSystem.on('location:change', (data)=>{\n                this._notifyAvailabilityChange();\n            });\n            this.eventSystem.on('quest:update', (data)=>{\n                this._notifyAvailabilityChange();\n            });\n            this.eventSystem.on('npc:interaction', (data)=>{\n                this._notifyAvailabilityChange();\n            });\n        }\n    }\n    /**\r\n     * Add a custom availability rule\r\n     * @param {string} ruleName - Name of the rule\r\n     * @param {Function} ruleFunction - Function that returns boolean\r\n     */ addRule(ruleName, ruleFunction) {\n        this.availabilityRules.set(ruleName, ruleFunction);\n    }\n    /**\r\n     * Check if an action is available given the current context\r\n     * @param {Object} action - The action to check\r\n     * @param {Object} context - Current game context\r\n     * @returns {Object} Availability result with details\r\n     */ checkActionAvailability(action, context) {\n        const result = {\n            available: true,\n            reasons: [],\n            missingRequirements: []\n        };\n        // Check each rule\n        for (const [ruleName, ruleFunction] of this.availabilityRules){\n            try {\n                const ruleResult = ruleFunction(action, context);\n                if (typeof ruleResult === 'boolean') {\n                    if (!ruleResult) {\n                        result.available = false;\n                        result.reasons.push(\"Failed \".concat(ruleName, \" check\"));\n                    }\n                } else if (ruleResult && typeof ruleResult === 'object') {\n                    if (!ruleResult.available) {\n                        result.available = false;\n                        result.reasons.push(ruleResult.reason || \"Failed \".concat(ruleName, \" check\"));\n                        if (ruleResult.missingRequirements) {\n                            result.missingRequirements.push(...ruleResult.missingRequirements);\n                        }\n                    }\n                }\n            } catch (error) {\n                console.error(\"Error checking \".concat(ruleName, \" rule for action \").concat(action.name, \":\"), error);\n                result.available = false;\n                result.reasons.push(\"Error in \".concat(ruleName, \" check\"));\n            }\n        }\n        return result;\n    }\n    /**\r\n     * Check location restriction\r\n     * @param {Object} restriction - Location restriction object\r\n     * @param {Object} currentLocation - Current player location\r\n     * @param {Object} locationSystem - Location system instance\r\n     * @returns {boolean} Whether location requirement is met\r\n     */ _checkLocationRestriction(restriction, currentLocation, locationSystem) {\n        if (!currentLocation || !locationSystem) return false;\n        switch(restriction.type){\n            case 'spot':\n                return currentLocation.spot === restriction.spotId;\n            case 'region':\n                return currentLocation.region === restriction.regionId;\n            case 'country':\n                return currentLocation.country === restriction.countryId;\n            case 'continent':\n                return currentLocation.continent === restriction.continentId;\n            case 'globe':\n                return currentLocation.globe === restriction.globeId;\n            case 'biome':\n                const currentSpot = locationSystem.getCurrentSpot();\n                return currentSpot && currentSpot.biome === restriction.biomeType;\n            default:\n                return false;\n        }\n    }\n    /**\r\n     * Check time restriction\r\n     * @param {Object} restriction - Time restriction object\r\n     * @param {Object} gameTime - Current game time\r\n     * @returns {boolean} Whether time requirement is met\r\n     */ _checkTimeRestriction(restriction, gameTime) {\n        switch(restriction.type){\n            case 'hour':\n                return gameTime.hour >= restriction.min && gameTime.hour <= restriction.max;\n            case 'day':\n                return gameTime.day >= restriction.min && gameTime.day <= restriction.max;\n            case 'season':\n                return restriction.seasons.includes(gameTime.season);\n            case 'timeOfDay':\n                const hour = gameTime.hour;\n                switch(restriction.timeOfDay){\n                    case 'dawn':\n                        return hour >= 5 && hour < 8;\n                    case 'morning':\n                        return hour >= 8 && hour < 12;\n                    case 'afternoon':\n                        return hour >= 12 && hour < 17;\n                    case 'evening':\n                        return hour >= 17 && hour < 20;\n                    case 'night':\n                        return hour >= 20 || hour < 5;\n                    default:\n                        return false;\n                }\n            default:\n                return false;\n        }\n    }\n    /**\r\n     * Check weather restriction\r\n     * @param {Object} restriction - Weather restriction object\r\n     * @param {Object} weather - Current weather\r\n     * @returns {boolean} Whether weather requirement is met\r\n     */ _checkWeatherRestriction(restriction, weather) {\n        switch(restriction.type){\n            case 'weatherType':\n                return restriction.allowedTypes.includes(weather.type);\n            case 'temperature':\n                return weather.temperature >= restriction.min && weather.temperature <= restriction.max;\n            case 'intensity':\n                return weather.intensity >= restriction.min && weather.intensity <= restriction.max;\n            default:\n                return false;\n        }\n    }\n    /**\r\n     * Check player status requirements\r\n     * @param {Object} requirements - Player status requirements\r\n     * @param {Object} playerStatus - Current player status\r\n     * @returns {Object} Check result with details\r\n     */ _checkPlayerStatusRequirements(requirements, playerStatus) {\n        const result = {\n            available: true,\n            missingRequirements: []\n        };\n        for (const [stat, requirement] of Object.entries(requirements)){\n            const currentValue = playerStatus[stat];\n            if (currentValue === undefined) continue;\n            if (requirement.min !== undefined && currentValue < requirement.min) {\n                result.available = false;\n                result.missingRequirements.push(\"\".concat(stat, \" >= \").concat(requirement.min, \" (current: \").concat(currentValue, \")\"));\n            }\n            if (requirement.max !== undefined && currentValue > requirement.max) {\n                result.available = false;\n                result.missingRequirements.push(\"\".concat(stat, \" <= \").concat(requirement.max, \" (current: \").concat(currentValue, \")\"));\n            }\n        }\n        return result;\n    }\n    /**\r\n     * Check equipment requirements\r\n     * @param {Object} requirements - Equipment requirements\r\n     * @param {Object} inventoryManager - Inventory manager instance\r\n     * @returns {Object} Check result with details\r\n     */ _checkEquipmentRequirements(requirements, inventoryManager) {\n        const result = {\n            available: true,\n            missingRequirements: []\n        };\n        for (const [itemId, requirement] of Object.entries(requirements)){\n            const hasItem = inventoryManager && inventoryManager.hasItem(itemId, requirement.quantity || 1);\n            if (!hasItem) {\n                var _inventoryManager_getGameObject;\n                result.available = false;\n                const itemName = inventoryManager ? ((_inventoryManager_getGameObject = inventoryManager.getGameObject(itemId)) === null || _inventoryManager_getGameObject === void 0 ? void 0 : _inventoryManager_getGameObject.displayName) || itemId : itemId;\n                result.missingRequirements.push(\"\".concat(itemName, \" (\").concat(requirement.quantity || 1, \")\"));\n            }\n        }\n        return result;\n    }\n    /**\r\n     * Check cooldown for an action\r\n     * @param {string} actionName - Name of the action\r\n     * @param {number} cooldownTime - Cooldown time in milliseconds\r\n     * @returns {boolean} Whether cooldown has expired\r\n     */ _checkCooldown(actionName, cooldownTime) {\n        const lastUsed = this.actionCooldowns.get(actionName);\n        if (!lastUsed) return true;\n        const timeSinceLastUse = Date.now() - lastUsed;\n        return timeSinceLastUse >= cooldownTime;\n    }\n    /**\r\n     * Check quest requirements\r\n     * @param {Object} requirements - Quest requirements\r\n     * @param {Object} questSystem - Quest system instance\r\n     * @returns {boolean} Whether quest requirements are met\r\n     */ _checkQuestRequirements(requirements, questSystem) {\n        if (!questSystem) return true;\n        for (const requirement of requirements){\n            switch(requirement.type){\n                case 'questCompleted':\n                    if (!questSystem.isQuestCompleted(requirement.questId)) {\n                        return false;\n                    }\n                    break;\n                case 'questActive':\n                    if (!questSystem.isQuestActive(requirement.questId)) {\n                        return false;\n                    }\n                    break;\n                case 'questStage':\n                    if (!questSystem.isQuestAtStage(requirement.questId, requirement.stage)) {\n                        return false;\n                    }\n                    break;\n                default:\n                    return false;\n            }\n        }\n        return true;\n    }\n    /**\r\n     * Check NPC requirements\r\n     * @param {Object} requirements - NPC requirements\r\n     * @param {Object} npcSystem - NPC system instance\r\n     * @returns {boolean} Whether NPC requirements are met\r\n     */ _checkNPCRequirements(requirements, npcSystem) {\n        if (!npcSystem) return true;\n        for (const requirement of requirements){\n            switch(requirement.type){\n                case 'npcPresent':\n                    if (!npcSystem.isNPCPresent(requirement.npcId)) {\n                        return false;\n                    }\n                    break;\n                case 'npcRelationship':\n                    const relationship = npcSystem.getNPCRelationship(requirement.npcId);\n                    if (relationship < requirement.minRelationship) {\n                        return false;\n                    }\n                    break;\n                case 'npcQuest':\n                    if (!npcSystem.hasNPCQuest(requirement.npcId, requirement.questId)) {\n                        return false;\n                    }\n                    break;\n                default:\n                    return false;\n            }\n        }\n        return true;\n    }\n    /**\r\n     * Record action usage for cooldown tracking\r\n     * @param {string} actionName - Name of the action used\r\n     */ recordActionUsage(actionName) {\n        this.actionCooldowns.set(actionName, Date.now());\n    }\n    /**\r\n     * Get remaining cooldown time for an action\r\n     * @param {string} actionName - Name of the action\r\n     * @param {number} cooldownTime - Cooldown time in milliseconds\r\n     * @returns {number} Remaining cooldown time in milliseconds\r\n     */ getRemainingCooldown(actionName, cooldownTime) {\n        const lastUsed = this.actionCooldowns.get(actionName);\n        if (!lastUsed) return 0;\n        const timeSinceLastUse = Date.now() - lastUsed;\n        const remaining = cooldownTime - timeSinceLastUse;\n        return Math.max(0, remaining);\n    }\n    /**\r\n     * Update game time\r\n     * @param {Object} timeData - New time data\r\n     */ updateGameTime(timeData) {\n        this.gameTime = {\n            ...this.gameTime,\n            ...timeData\n        };\n        if (this.eventSystem) {\n            this.eventSystem.emit('time:update', timeData);\n        }\n    }\n    /**\r\n     * Update weather\r\n     * @param {Object} weatherData - New weather data\r\n     */ updateWeather(weatherData) {\n        this.weather = {\n            ...this.weather,\n            ...weatherData\n        };\n        if (this.eventSystem) {\n            this.eventSystem.emit('weather:change', weatherData);\n        }\n    }\n    /**\r\n     * Update player status\r\n     * @param {Object} statusData - New status data\r\n     */ updatePlayerStatus(statusData) {\n        this.playerStatus = {\n            ...this.playerStatus,\n            ...statusData\n        };\n        if (this.eventSystem) {\n            this.eventSystem.emit('player:status:update', statusData);\n        }\n    }\n    /**\r\n     * Notify systems of availability changes\r\n     */ _notifyAvailabilityChange() {\n        if (this.eventSystem) {\n            this.eventSystem.emit('action:availability:changed', {\n                gameTime: this.gameTime,\n                weather: this.weather,\n                playerStatus: this.playerStatus\n            });\n        }\n    }\n    /**\r\n     * Get current game state for debugging\r\n     * @returns {Object} Current state information\r\n     */ getDebugInfo() {\n        return {\n            gameTime: this.gameTime,\n            weather: this.weather,\n            playerStatus: this.playerStatus,\n            activeCooldowns: Array.from(this.actionCooldowns.entries()).map((param)=>{\n                let [action, timestamp] = param;\n                return {\n                    action,\n                    lastUsed: new Date(timestamp).toISOString(),\n                    timeSince: Date.now() - timestamp\n                };\n            }),\n            ruleCount: this.availabilityRules.size\n        };\n    }\n    constructor(eventSystem, stateManager){\n        this.eventSystem = eventSystem;\n        this.stateManager = stateManager;\n        // Rules registry\n        this.availabilityRules = new Map();\n        // Cooldown tracking\n        this.actionCooldowns = new Map();\n        // Time tracking\n        this.gameTime = {\n            hour: 12,\n            minute: 0,\n            day: 1,\n            season: 'spring'\n        };\n        // Weather system\n        this.weather = {\n            type: 'clear',\n            intensity: 0,\n            temperature: 20\n        };\n        // Player status\n        this.playerStatus = {\n            health: 100,\n            energy: 100,\n            hunger: 0,\n            thirst: 0,\n            temperature: 20\n        };\n        this._initializeDefaultRules();\n        this._setupEventListeners();\n    }\n}\nif (true) window.ActionAvailabilityEngine = ActionAvailabilityEngine;\n// ES Module exports\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvZ2FtZS1lbmdpbmUvc3lzdGVtcy9BY3Rpb25BdmFpbGFiaWxpdHlFbmdpbmUuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7Ozs7Ozs7Ozs7O0NBYUMsR0FFRCxNQUFNQTtJQXVDRjs7S0FFQyxHQUNEQywwQkFBMEI7UUFDdEIsdUJBQXVCO1FBQ3ZCLElBQUksQ0FBQ0MsT0FBTyxDQUFDLFlBQVksQ0FBQ0MsUUFBUUM7WUFDOUIsTUFBTSxFQUFFQyxlQUFlLEVBQUVDLGNBQWMsRUFBRSxHQUFHRjtZQUM1QyxJQUFJLENBQUNELE9BQU9JLG9CQUFvQixFQUFFLE9BQU87WUFFekMsT0FBT0osT0FBT0ksb0JBQW9CLENBQUNDLElBQUksQ0FBQ0MsQ0FBQUE7Z0JBQ3BDLE9BQU8sSUFBSSxDQUFDQyx5QkFBeUIsQ0FBQ0QsYUFBYUosaUJBQWlCQztZQUN4RTtRQUNKO1FBRUEsbUJBQW1CO1FBQ25CLElBQUksQ0FBQ0osT0FBTyxDQUFDLFFBQVEsQ0FBQ0MsUUFBUUM7WUFDMUIsSUFBSSxDQUFDRCxPQUFPUSxnQkFBZ0IsRUFBRSxPQUFPO1lBRXJDLE9BQU9SLE9BQU9RLGdCQUFnQixDQUFDQyxLQUFLLENBQUNILENBQUFBO2dCQUNqQyxPQUFPLElBQUksQ0FBQ0kscUJBQXFCLENBQUNKLGFBQWEsSUFBSSxDQUFDSyxRQUFRO1lBQ2hFO1FBQ0o7UUFFQSxzQkFBc0I7UUFDdEIsSUFBSSxDQUFDWixPQUFPLENBQUMsV0FBVyxDQUFDQyxRQUFRQztZQUM3QixJQUFJLENBQUNELE9BQU9ZLG1CQUFtQixFQUFFLE9BQU87WUFFeEMsT0FBT1osT0FBT1ksbUJBQW1CLENBQUNILEtBQUssQ0FBQ0gsQ0FBQUE7Z0JBQ3BDLE9BQU8sSUFBSSxDQUFDTyx3QkFBd0IsQ0FBQ1AsYUFBYSxJQUFJLENBQUNRLE9BQU87WUFDbEU7UUFDSjtRQUVBLHNCQUFzQjtRQUN0QixJQUFJLENBQUNmLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQ0Ms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QUFJLENBQUN2QyxlQUFlLEdBQUcsSUFBSXVDO1FBRTNCLGdCQUFnQjtRQUNoQixJQUFJLENBQUN2SCxRQUFRLEdBQUc7WUFDWnFELE1BQU07WUFDTm1FLFFBQVE7WUFDUmhFLEtBQUs7WUFDTEcsUUFBUTtRQUNaO1FBRUEsaUJBQWlCO1FBQ2pCLElBQUksQ0FBQ3hELE9BQU8sR0FBRztZQUNYbUMsTUFBTTtZQUNOeUIsV0FBVztZQUNYRCxhQUFhO1FBQ2pCO1FBRUEsZ0JBQWdCO1FBQ2hCLElBQUksQ0FBQ3hELFlBQVksR0FBRztZQUNoQm1ILFFBQVE7WUFDUkMsUUFBUTtZQUNSQyxRQUFRO1lBQ1JDLFFBQVE7WUFDUjlELGFBQWE7UUFDakI7UUFFQSxJQUFJLENBQUMzRSx1QkFBdUI7UUFDNUIsSUFBSSxDQUFDZ0Msb0JBQW9CO0lBQzdCO0FBdWNKO0FBRUEsSUFBSSxJQUE2QixFQUFFMEcsT0FBTzNJLHdCQUF3QixHQUFHQTtBQUVyRSxvQkFBb0I7QUFDZ0IiLCJzb3VyY2VzIjpbIkM6XFxHaXRIdWJcXFNlbGZcXHRhdmVybnNcXHNyY1xcbGliXFxnYW1lLWVuZ2luZVxcc3lzdGVtc1xcQWN0aW9uQXZhaWxhYmlsaXR5RW5naW5lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBBY3Rpb24gQXZhaWxhYmlsaXR5IEVuZ2luZVxyXG4gKiBcclxuICogSGFuZGxlcyBkeW5hbWljIGFjdGlvbiBhdmFpbGFiaWxpdHkgYmFzZWQgb24gdmFyaW91cyBjb25kaXRpb25zOlxyXG4gKiAtIExvY2F0aW9uLWJhc2VkIGF2YWlsYWJpbGl0eVxyXG4gKiAtIFRpbWUtb2YtZGF5IHJlc3RyaWN0aW9uc1xyXG4gKiAtIFdlYXRoZXIvZW52aXJvbm1lbnRhbCBtb2RpZmllcnNcclxuICogLSBRdWVzdC1iYXNlZCB1bmxvY2tzXHJcbiAqIC0gTlBDIGludGVyYWN0aW9uIHJlcXVpcmVtZW50c1xyXG4gKiAtIEFjdGlvbiBjb29sZG93bnNcclxuICogLSBQcmVyZXF1aXNpdGVzIGFuZCBkZXBlbmRlbmNpZXNcclxuICogLSBQbGF5ZXIgc3RhdHVzIChoZWFsdGgsIGVuZXJneSwgZXRjLilcclxuICogLSBFcXVpcG1lbnQgYW5kIHRvb2wgcmVxdWlyZW1lbnRzXHJcbiAqL1xyXG5cclxuY2xhc3MgQWN0aW9uQXZhaWxhYmlsaXR5RW5naW5lIHtcclxuICAgIGNvbnN0cnVjdG9yKGV2ZW50U3lzdGVtLCBzdGF0ZU1hbmFnZXIpIHtcclxuICAgICAgICB0aGlzLmV2ZW50U3lzdGVtID0gZXZlbnRTeXN0ZW07XHJcbiAgICAgICAgdGhpcy5zdGF0ZU1hbmFnZXIgPSBzdGF0ZU1hbmFnZXI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gUnVsZXMgcmVnaXN0cnlcclxuICAgICAgICB0aGlzLmF2YWlsYWJpbGl0eVJ1bGVzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENvb2xkb3duIHRyYWNraW5nXHJcbiAgICAgICAgdGhpcy5hY3Rpb25Db29sZG93bnMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gVGltZSB0cmFja2luZ1xyXG4gICAgICAgIHRoaXMuZ2FtZVRpbWUgPSB7XHJcbiAgICAgICAgICAgIGhvdXI6IDEyLFxyXG4gICAgICAgICAgICBtaW51dGU6IDAsXHJcbiAgICAgICAgICAgIGRheTogMSxcclxuICAgICAgICAgICAgc2Vhc29uOiAnc3ByaW5nJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gV2VhdGhlciBzeXN0ZW1cclxuICAgICAgICB0aGlzLndlYXRoZXIgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdjbGVhcicsXHJcbiAgICAgICAgICAgIGludGVuc2l0eTogMCxcclxuICAgICAgICAgICAgdGVtcGVyYXR1cmU6IDIwXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBQbGF5ZXIgc3RhdHVzXHJcbiAgICAgICAgdGhpcy5wbGF5ZXJTdGF0dXMgPSB7XHJcbiAgICAgICAgICAgIGhlYWx0aDogMTAwLFxyXG4gICAgICAgICAgICBlbmVyZ3k6IDEwMCxcclxuICAgICAgICAgICAgaHVuZ2VyOiAwLFxyXG4gICAgICAgICAgICB0aGlyc3Q6IDAsXHJcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlOiAyMFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZURlZmF1bHRSdWxlcygpO1xyXG4gICAgICAgIHRoaXMuX3NldHVwRXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgZGVmYXVsdCBhdmFpbGFiaWxpdHkgcnVsZXNcclxuICAgICAqL1xyXG4gICAgX2luaXRpYWxpemVEZWZhdWx0UnVsZXMoKSB7XHJcbiAgICAgICAgLy8gTG9jYXRpb24tYmFzZWQgcnVsZXNcclxuICAgICAgICB0aGlzLmFkZFJ1bGUoJ2xvY2F0aW9uJywgKGFjdGlvbiwgY29udGV4dCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB7IGN1cnJlbnRMb2NhdGlvbiwgbG9jYXRpb25TeXN0ZW0gfSA9IGNvbnRleHQ7XHJcbiAgICAgICAgICAgIGlmICghYWN0aW9uLmxvY2F0aW9uUmVzdHJpY3Rpb25zKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBhY3Rpb24ubG9jYXRpb25SZXN0cmljdGlvbnMuc29tZShyZXN0cmljdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tMb2NhdGlvblJlc3RyaWN0aW9uKHJlc3RyaWN0aW9uLCBjdXJyZW50TG9jYXRpb24sIGxvY2F0aW9uU3lzdGVtKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFRpbWUtYmFzZWQgcnVsZXNcclxuICAgICAgICB0aGlzLmFkZFJ1bGUoJ3RpbWUnLCAoYWN0aW9uLCBjb250ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghYWN0aW9uLnRpbWVSZXN0cmljdGlvbnMpIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGFjdGlvbi50aW1lUmVzdHJpY3Rpb25zLmV2ZXJ5KHJlc3RyaWN0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja1RpbWVSZXN0cmljdGlvbihyZXN0cmljdGlvbiwgdGhpcy5nYW1lVGltZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBXZWF0aGVyLWJhc2VkIHJ1bGVzXHJcbiAgICAgICAgdGhpcy5hZGRSdWxlKCd3ZWF0aGVyJywgKGFjdGlvbiwgY29udGV4dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWFjdGlvbi53ZWF0aGVyUmVzdHJpY3Rpb25zKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBhY3Rpb24ud2VhdGhlclJlc3RyaWN0aW9ucy5ldmVyeShyZXN0cmljdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tXZWF0aGVyUmVzdHJpY3Rpb24ocmVzdHJpY3Rpb24sIHRoaXMud2VhdGhlcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBQbGF5ZXIgc3RhdHVzIHJ1bGVzXHJcbiAgICAgICAgdGhpcy5hZGRSdWxlKCdwbGF5ZXJTdGF0dXMnLCAoYWN0aW9uLCBjb250ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghYWN0aW9uLnBsYXllclN0YXR1c1JlcXVpcmVtZW50cykgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tQbGF5ZXJTdGF0dXNSZXF1aXJlbWVudHMoYWN0aW9uLnBsYXllclN0YXR1c1JlcXVpcmVtZW50cywgdGhpcy5wbGF5ZXJTdGF0dXMpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBFcXVpcG1lbnQgcnVsZXNcclxuICAgICAgICB0aGlzLmFkZFJ1bGUoJ2VxdWlwbWVudCcsIChhY3Rpb24sIGNvbnRleHQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFhY3Rpb24uZXF1aXBtZW50UmVxdWlyZW1lbnRzKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHsgaW52ZW50b3J5TWFuYWdlciB9ID0gY29udGV4dDtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrRXF1aXBtZW50UmVxdWlyZW1lbnRzKGFjdGlvbi5lcXVpcG1lbnRSZXF1aXJlbWVudHMsIGludmVudG9yeU1hbmFnZXIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBDb29sZG93biBydWxlc1xyXG4gICAgICAgIHRoaXMuYWRkUnVsZSgnY29vbGRvd24nLCAoYWN0aW9uLCBjb250ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghYWN0aW9uLmNvb2xkb3duKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja0Nvb2xkb3duKGFjdGlvbi5uYW1lLCBhY3Rpb24uY29vbGRvd24pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBRdWVzdCBydWxlc1xyXG4gICAgICAgIHRoaXMuYWRkUnVsZSgncXVlc3QnLCAoYWN0aW9uLCBjb250ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghYWN0aW9uLnF1ZXN0UmVxdWlyZW1lbnRzKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHsgcXVlc3RTeXN0ZW0gfSA9IGNvbnRleHQ7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja1F1ZXN0UmVxdWlyZW1lbnRzKGFjdGlvbi5xdWVzdFJlcXVpcmVtZW50cywgcXVlc3RTeXN0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBOUEMgaW50ZXJhY3Rpb24gcnVsZXNcclxuICAgICAgICB0aGlzLmFkZFJ1bGUoJ25wYycsIChhY3Rpb24sIGNvbnRleHQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFhY3Rpb24ubnBjUmVxdWlyZW1lbnRzKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHsgbnBjU3lzdGVtIH0gPSBjb250ZXh0O1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tOUENSZXF1aXJlbWVudHMoYWN0aW9uLm5wY1JlcXVpcmVtZW50cywgbnBjU3lzdGVtKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgZHluYW1pYyB1cGRhdGVzXHJcbiAgICAgKi9cclxuICAgIF9zZXR1cEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmV2ZW50U3lzdGVtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0ub24oJ3RpbWU6dXBkYXRlJywgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVRpbWUgPSB7IC4uLnRoaXMuZ2FtZVRpbWUsIC4uLmRhdGEgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX25vdGlmeUF2YWlsYWJpbGl0eUNoYW5nZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0ub24oJ3dlYXRoZXI6Y2hhbmdlJywgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMud2VhdGhlciA9IHsgLi4udGhpcy53ZWF0aGVyLCAuLi5kYXRhIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9ub3RpZnlBdmFpbGFiaWxpdHlDaGFuZ2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLm9uKCdwbGF5ZXI6c3RhdHVzOnVwZGF0ZScsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllclN0YXR1cyA9IHsgLi4udGhpcy5wbGF5ZXJTdGF0dXMsIC4uLmRhdGEgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX25vdGlmeUF2YWlsYWJpbGl0eUNoYW5nZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0ub24oJ2xvY2F0aW9uOmNoYW5nZScsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9ub3RpZnlBdmFpbGFiaWxpdHlDaGFuZ2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLm9uKCdxdWVzdDp1cGRhdGUnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbm90aWZ5QXZhaWxhYmlsaXR5Q2hhbmdlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudFN5c3RlbS5vbignbnBjOmludGVyYWN0aW9uJywgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX25vdGlmeUF2YWlsYWJpbGl0eUNoYW5nZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYSBjdXN0b20gYXZhaWxhYmlsaXR5IHJ1bGVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBydWxlTmFtZSAtIE5hbWUgb2YgdGhlIHJ1bGVcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHJ1bGVGdW5jdGlvbiAtIEZ1bmN0aW9uIHRoYXQgcmV0dXJucyBib29sZWFuXHJcbiAgICAgKi9cclxuICAgIGFkZFJ1bGUocnVsZU5hbWUsIHJ1bGVGdW5jdGlvbikge1xyXG4gICAgICAgIHRoaXMuYXZhaWxhYmlsaXR5UnVsZXMuc2V0KHJ1bGVOYW1lLCBydWxlRnVuY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgYW4gYWN0aW9uIGlzIGF2YWlsYWJsZSBnaXZlbiB0aGUgY3VycmVudCBjb250ZXh0XHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gYWN0aW9uIC0gVGhlIGFjdGlvbiB0byBjaGVja1xyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQgLSBDdXJyZW50IGdhbWUgY29udGV4dFxyXG4gICAgICogQHJldHVybnMge09iamVjdH0gQXZhaWxhYmlsaXR5IHJlc3VsdCB3aXRoIGRldGFpbHNcclxuICAgICAqL1xyXG4gICAgY2hlY2tBY3Rpb25BdmFpbGFiaWxpdHkoYWN0aW9uLCBjb250ZXh0KSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICBhdmFpbGFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHJlYXNvbnM6IFtdLFxyXG4gICAgICAgICAgICBtaXNzaW5nUmVxdWlyZW1lbnRzOiBbXVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGVhY2ggcnVsZVxyXG4gICAgICAgIGZvciAoY29uc3QgW3J1bGVOYW1lLCBydWxlRnVuY3Rpb25dIG9mIHRoaXMuYXZhaWxhYmlsaXR5UnVsZXMpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJ1bGVSZXN1bHQgPSBydWxlRnVuY3Rpb24oYWN0aW9uLCBjb250ZXh0KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBydWxlUmVzdWx0ID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJ1bGVSZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmF2YWlsYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVhc29ucy5wdXNoKGBGYWlsZWQgJHtydWxlTmFtZX0gY2hlY2tgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJ1bGVSZXN1bHQgJiYgdHlwZW9mIHJ1bGVSZXN1bHQgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFydWxlUmVzdWx0LmF2YWlsYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXZhaWxhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWFzb25zLnB1c2gocnVsZVJlc3VsdC5yZWFzb24gfHwgYEZhaWxlZCAke3J1bGVOYW1lfSBjaGVja2ApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVsZVJlc3VsdC5taXNzaW5nUmVxdWlyZW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQubWlzc2luZ1JlcXVpcmVtZW50cy5wdXNoKC4uLnJ1bGVSZXN1bHQubWlzc2luZ1JlcXVpcmVtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjaGVja2luZyAke3J1bGVOYW1lfSBydWxlIGZvciBhY3Rpb24gJHthY3Rpb24ubmFtZX06YCwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LmF2YWlsYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnJlYXNvbnMucHVzaChgRXJyb3IgaW4gJHtydWxlTmFtZX0gY2hlY2tgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGxvY2F0aW9uIHJlc3RyaWN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVzdHJpY3Rpb24gLSBMb2NhdGlvbiByZXN0cmljdGlvbiBvYmplY3RcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjdXJyZW50TG9jYXRpb24gLSBDdXJyZW50IHBsYXllciBsb2NhdGlvblxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGxvY2F0aW9uU3lzdGVtIC0gTG9jYXRpb24gc3lzdGVtIGluc3RhbmNlXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciBsb2NhdGlvbiByZXF1aXJlbWVudCBpcyBtZXRcclxuICAgICAqL1xyXG4gICAgX2NoZWNrTG9jYXRpb25SZXN0cmljdGlvbihyZXN0cmljdGlvbiwgY3VycmVudExvY2F0aW9uLCBsb2NhdGlvblN5c3RlbSkge1xyXG4gICAgICAgIGlmICghY3VycmVudExvY2F0aW9uIHx8ICFsb2NhdGlvblN5c3RlbSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHJlc3RyaWN0aW9uLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnc3BvdCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudExvY2F0aW9uLnNwb3QgPT09IHJlc3RyaWN0aW9uLnNwb3RJZDtcclxuICAgICAgICAgICAgY2FzZSAncmVnaW9uJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50TG9jYXRpb24ucmVnaW9uID09PSByZXN0cmljdGlvbi5yZWdpb25JZDtcclxuICAgICAgICAgICAgY2FzZSAnY291bnRyeSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudExvY2F0aW9uLmNvdW50cnkgPT09IHJlc3RyaWN0aW9uLmNvdW50cnlJZDtcclxuICAgICAgICAgICAgY2FzZSAnY29udGluZW50JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50TG9jYXRpb24uY29udGluZW50ID09PSByZXN0cmljdGlvbi5jb250aW5lbnRJZDtcclxuICAgICAgICAgICAgY2FzZSAnZ2xvYmUnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRMb2NhdGlvbi5nbG9iZSA9PT0gcmVzdHJpY3Rpb24uZ2xvYmVJZDtcclxuICAgICAgICAgICAgY2FzZSAnYmlvbWUnOlxyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFNwb3QgPSBsb2NhdGlvblN5c3RlbS5nZXRDdXJyZW50U3BvdCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRTcG90ICYmIGN1cnJlbnRTcG90LmJpb21lID09PSByZXN0cmljdGlvbi5iaW9tZVR5cGU7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgdGltZSByZXN0cmljdGlvblxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlc3RyaWN0aW9uIC0gVGltZSByZXN0cmljdGlvbiBvYmplY3RcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBnYW1lVGltZSAtIEN1cnJlbnQgZ2FtZSB0aW1lXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciB0aW1lIHJlcXVpcmVtZW50IGlzIG1ldFxyXG4gICAgICovXHJcbiAgICBfY2hlY2tUaW1lUmVzdHJpY3Rpb24ocmVzdHJpY3Rpb24sIGdhbWVUaW1lKSB7XHJcbiAgICAgICAgc3dpdGNoIChyZXN0cmljdGlvbi50eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2hvdXInOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdhbWVUaW1lLmhvdXIgPj0gcmVzdHJpY3Rpb24ubWluICYmIGdhbWVUaW1lLmhvdXIgPD0gcmVzdHJpY3Rpb24ubWF4O1xyXG4gICAgICAgICAgICBjYXNlICdkYXknOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdhbWVUaW1lLmRheSA+PSByZXN0cmljdGlvbi5taW4gJiYgZ2FtZVRpbWUuZGF5IDw9IHJlc3RyaWN0aW9uLm1heDtcclxuICAgICAgICAgICAgY2FzZSAnc2Vhc29uJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN0cmljdGlvbi5zZWFzb25zLmluY2x1ZGVzKGdhbWVUaW1lLnNlYXNvbik7XHJcbiAgICAgICAgICAgIGNhc2UgJ3RpbWVPZkRheSc6XHJcbiAgICAgICAgICAgICAgICBjb25zdCBob3VyID0gZ2FtZVRpbWUuaG91cjtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAocmVzdHJpY3Rpb24udGltZU9mRGF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGF3bic6IHJldHVybiBob3VyID49IDUgJiYgaG91ciA8IDg7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbW9ybmluZyc6IHJldHVybiBob3VyID49IDggJiYgaG91ciA8IDEyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FmdGVybm9vbic6IHJldHVybiBob3VyID49IDEyICYmIGhvdXIgPCAxNztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdldmVuaW5nJzogcmV0dXJuIGhvdXIgPj0gMTcgJiYgaG91ciA8IDIwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ25pZ2h0JzogcmV0dXJuIGhvdXIgPj0gMjAgfHwgaG91ciA8IDU7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIHdlYXRoZXIgcmVzdHJpY3Rpb25cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXN0cmljdGlvbiAtIFdlYXRoZXIgcmVzdHJpY3Rpb24gb2JqZWN0XHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gd2VhdGhlciAtIEN1cnJlbnQgd2VhdGhlclxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgd2VhdGhlciByZXF1aXJlbWVudCBpcyBtZXRcclxuICAgICAqL1xyXG4gICAgX2NoZWNrV2VhdGhlclJlc3RyaWN0aW9uKHJlc3RyaWN0aW9uLCB3ZWF0aGVyKSB7XHJcbiAgICAgICAgc3dpdGNoIChyZXN0cmljdGlvbi50eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3dlYXRoZXJUeXBlJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN0cmljdGlvbi5hbGxvd2VkVHlwZXMuaW5jbHVkZXMod2VhdGhlci50eXBlKTtcclxuICAgICAgICAgICAgY2FzZSAndGVtcGVyYXR1cmUnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdlYXRoZXIudGVtcGVyYXR1cmUgPj0gcmVzdHJpY3Rpb24ubWluICYmIHdlYXRoZXIudGVtcGVyYXR1cmUgPD0gcmVzdHJpY3Rpb24ubWF4O1xyXG4gICAgICAgICAgICBjYXNlICdpbnRlbnNpdHknOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdlYXRoZXIuaW50ZW5zaXR5ID49IHJlc3RyaWN0aW9uLm1pbiAmJiB3ZWF0aGVyLmludGVuc2l0eSA8PSByZXN0cmljdGlvbi5tYXg7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgcGxheWVyIHN0YXR1cyByZXF1aXJlbWVudHNcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXF1aXJlbWVudHMgLSBQbGF5ZXIgc3RhdHVzIHJlcXVpcmVtZW50c1xyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBsYXllclN0YXR1cyAtIEN1cnJlbnQgcGxheWVyIHN0YXR1c1xyXG4gICAgICogQHJldHVybnMge09iamVjdH0gQ2hlY2sgcmVzdWx0IHdpdGggZGV0YWlsc1xyXG4gICAgICovXHJcbiAgICBfY2hlY2tQbGF5ZXJTdGF0dXNSZXF1aXJlbWVudHMocmVxdWlyZW1lbnRzLCBwbGF5ZXJTdGF0dXMpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSB7IGF2YWlsYWJsZTogdHJ1ZSwgbWlzc2luZ1JlcXVpcmVtZW50czogW10gfTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBbc3RhdCwgcmVxdWlyZW1lbnRdIG9mIE9iamVjdC5lbnRyaWVzKHJlcXVpcmVtZW50cykpIHtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gcGxheWVyU3RhdHVzW3N0YXRdO1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudFZhbHVlID09PSB1bmRlZmluZWQpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlcXVpcmVtZW50Lm1pbiAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnRWYWx1ZSA8IHJlcXVpcmVtZW50Lm1pbikge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LmF2YWlsYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0Lm1pc3NpbmdSZXF1aXJlbWVudHMucHVzaChgJHtzdGF0fSA+PSAke3JlcXVpcmVtZW50Lm1pbn0gKGN1cnJlbnQ6ICR7Y3VycmVudFZhbHVlfSlgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHJlcXVpcmVtZW50Lm1heCAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnRWYWx1ZSA+IHJlcXVpcmVtZW50Lm1heCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LmF2YWlsYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0Lm1pc3NpbmdSZXF1aXJlbWVudHMucHVzaChgJHtzdGF0fSA8PSAke3JlcXVpcmVtZW50Lm1heH0gKGN1cnJlbnQ6ICR7Y3VycmVudFZhbHVlfSlgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGVxdWlwbWVudCByZXF1aXJlbWVudHNcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXF1aXJlbWVudHMgLSBFcXVpcG1lbnQgcmVxdWlyZW1lbnRzXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW52ZW50b3J5TWFuYWdlciAtIEludmVudG9yeSBtYW5hZ2VyIGluc3RhbmNlXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBDaGVjayByZXN1bHQgd2l0aCBkZXRhaWxzXHJcbiAgICAgKi9cclxuICAgIF9jaGVja0VxdWlwbWVudFJlcXVpcmVtZW50cyhyZXF1aXJlbWVudHMsIGludmVudG9yeU1hbmFnZXIpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSB7IGF2YWlsYWJsZTogdHJ1ZSwgbWlzc2luZ1JlcXVpcmVtZW50czogW10gfTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBbaXRlbUlkLCByZXF1aXJlbWVudF0gb2YgT2JqZWN0LmVudHJpZXMocmVxdWlyZW1lbnRzKSkge1xyXG4gICAgICAgICAgICBjb25zdCBoYXNJdGVtID0gaW52ZW50b3J5TWFuYWdlciAmJiBpbnZlbnRvcnlNYW5hZ2VyLmhhc0l0ZW0oaXRlbUlkLCByZXF1aXJlbWVudC5xdWFudGl0eSB8fCAxKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghaGFzSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LmF2YWlsYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbU5hbWUgPSBpbnZlbnRvcnlNYW5hZ2VyID8gXHJcbiAgICAgICAgICAgICAgICAgICAgaW52ZW50b3J5TWFuYWdlci5nZXRHYW1lT2JqZWN0KGl0ZW1JZCk/LmRpc3BsYXlOYW1lIHx8IGl0ZW1JZCA6IFxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5taXNzaW5nUmVxdWlyZW1lbnRzLnB1c2goYCR7aXRlbU5hbWV9ICgke3JlcXVpcmVtZW50LnF1YW50aXR5IHx8IDF9KWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgY29vbGRvd24gZm9yIGFuIGFjdGlvblxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFjdGlvbk5hbWUgLSBOYW1lIG9mIHRoZSBhY3Rpb25cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjb29sZG93blRpbWUgLSBDb29sZG93biB0aW1lIGluIG1pbGxpc2Vjb25kc1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgY29vbGRvd24gaGFzIGV4cGlyZWRcclxuICAgICAqL1xyXG4gICAgX2NoZWNrQ29vbGRvd24oYWN0aW9uTmFtZSwgY29vbGRvd25UaW1lKSB7XHJcbiAgICAgICAgY29uc3QgbGFzdFVzZWQgPSB0aGlzLmFjdGlvbkNvb2xkb3ducy5nZXQoYWN0aW9uTmFtZSk7XHJcbiAgICAgICAgaWYgKCFsYXN0VXNlZCkgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RVc2UgPSBEYXRlLm5vdygpIC0gbGFzdFVzZWQ7XHJcbiAgICAgICAgcmV0dXJuIHRpbWVTaW5jZUxhc3RVc2UgPj0gY29vbGRvd25UaW1lO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgcXVlc3QgcmVxdWlyZW1lbnRzXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVxdWlyZW1lbnRzIC0gUXVlc3QgcmVxdWlyZW1lbnRzXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcXVlc3RTeXN0ZW0gLSBRdWVzdCBzeXN0ZW0gaW5zdGFuY2VcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIHF1ZXN0IHJlcXVpcmVtZW50cyBhcmUgbWV0XHJcbiAgICAgKi9cclxuICAgIF9jaGVja1F1ZXN0UmVxdWlyZW1lbnRzKHJlcXVpcmVtZW50cywgcXVlc3RTeXN0ZW0pIHtcclxuICAgICAgICBpZiAoIXF1ZXN0U3lzdGVtKSByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCByZXF1aXJlbWVudCBvZiByZXF1aXJlbWVudHMpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChyZXF1aXJlbWVudC50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdxdWVzdENvbXBsZXRlZCc6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFxdWVzdFN5c3RlbS5pc1F1ZXN0Q29tcGxldGVkKHJlcXVpcmVtZW50LnF1ZXN0SWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdxdWVzdEFjdGl2ZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFxdWVzdFN5c3RlbS5pc1F1ZXN0QWN0aXZlKHJlcXVpcmVtZW50LnF1ZXN0SWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdxdWVzdFN0YWdlJzpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXF1ZXN0U3lzdGVtLmlzUXVlc3RBdFN0YWdlKHJlcXVpcmVtZW50LnF1ZXN0SWQsIHJlcXVpcmVtZW50LnN0YWdlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgTlBDIHJlcXVpcmVtZW50c1xyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlcXVpcmVtZW50cyAtIE5QQyByZXF1aXJlbWVudHNcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBucGNTeXN0ZW0gLSBOUEMgc3lzdGVtIGluc3RhbmNlXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciBOUEMgcmVxdWlyZW1lbnRzIGFyZSBtZXRcclxuICAgICAqL1xyXG4gICAgX2NoZWNrTlBDUmVxdWlyZW1lbnRzKHJlcXVpcmVtZW50cywgbnBjU3lzdGVtKSB7XHJcbiAgICAgICAgaWYgKCFucGNTeXN0ZW0pIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IHJlcXVpcmVtZW50IG9mIHJlcXVpcmVtZW50cykge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHJlcXVpcmVtZW50LnR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ25wY1ByZXNlbnQnOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbnBjU3lzdGVtLmlzTlBDUHJlc2VudChyZXF1aXJlbWVudC5ucGNJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ25wY1JlbGF0aW9uc2hpcCc6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVsYXRpb25zaGlwID0gbnBjU3lzdGVtLmdldE5QQ1JlbGF0aW9uc2hpcChyZXF1aXJlbWVudC5ucGNJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbGF0aW9uc2hpcCA8IHJlcXVpcmVtZW50Lm1pblJlbGF0aW9uc2hpcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbnBjUXVlc3QnOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbnBjU3lzdGVtLmhhc05QQ1F1ZXN0KHJlcXVpcmVtZW50Lm5wY0lkLCByZXF1aXJlbWVudC5xdWVzdElkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVjb3JkIGFjdGlvbiB1c2FnZSBmb3IgY29vbGRvd24gdHJhY2tpbmdcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhY3Rpb25OYW1lIC0gTmFtZSBvZiB0aGUgYWN0aW9uIHVzZWRcclxuICAgICAqL1xyXG4gICAgcmVjb3JkQWN0aW9uVXNhZ2UoYWN0aW9uTmFtZSkge1xyXG4gICAgICAgIHRoaXMuYWN0aW9uQ29vbGRvd25zLnNldChhY3Rpb25OYW1lLCBEYXRlLm5vdygpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCByZW1haW5pbmcgY29vbGRvd24gdGltZSBmb3IgYW4gYWN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYWN0aW9uTmFtZSAtIE5hbWUgb2YgdGhlIGFjdGlvblxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNvb2xkb3duVGltZSAtIENvb2xkb3duIHRpbWUgaW4gbWlsbGlzZWNvbmRzXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZW1haW5pbmcgY29vbGRvd24gdGltZSBpbiBtaWxsaXNlY29uZHNcclxuICAgICAqL1xyXG4gICAgZ2V0UmVtYWluaW5nQ29vbGRvd24oYWN0aW9uTmFtZSwgY29vbGRvd25UaW1lKSB7XHJcbiAgICAgICAgY29uc3QgbGFzdFVzZWQgPSB0aGlzLmFjdGlvbkNvb2xkb3ducy5nZXQoYWN0aW9uTmFtZSk7XHJcbiAgICAgICAgaWYgKCFsYXN0VXNlZCkgcmV0dXJuIDA7XHJcblxyXG4gICAgICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RVc2UgPSBEYXRlLm5vdygpIC0gbGFzdFVzZWQ7XHJcbiAgICAgICAgY29uc3QgcmVtYWluaW5nID0gY29vbGRvd25UaW1lIC0gdGltZVNpbmNlTGFzdFVzZTtcclxuICAgICAgICByZXR1cm4gTWF0aC5tYXgoMCwgcmVtYWluaW5nKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSBnYW1lIHRpbWVcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSB0aW1lRGF0YSAtIE5ldyB0aW1lIGRhdGFcclxuICAgICAqL1xyXG4gICAgdXBkYXRlR2FtZVRpbWUodGltZURhdGEpIHtcclxuICAgICAgICB0aGlzLmdhbWVUaW1lID0geyAuLi50aGlzLmdhbWVUaW1lLCAuLi50aW1lRGF0YSB9O1xyXG4gICAgICAgIGlmICh0aGlzLmV2ZW50U3lzdGVtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0uZW1pdCgndGltZTp1cGRhdGUnLCB0aW1lRGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIHdlYXRoZXJcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSB3ZWF0aGVyRGF0YSAtIE5ldyB3ZWF0aGVyIGRhdGFcclxuICAgICAqL1xyXG4gICAgdXBkYXRlV2VhdGhlcih3ZWF0aGVyRGF0YSkge1xyXG4gICAgICAgIHRoaXMud2VhdGhlciA9IHsgLi4udGhpcy53ZWF0aGVyLCAuLi53ZWF0aGVyRGF0YSB9O1xyXG4gICAgICAgIGlmICh0aGlzLmV2ZW50U3lzdGVtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0uZW1pdCgnd2VhdGhlcjpjaGFuZ2UnLCB3ZWF0aGVyRGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIHBsYXllciBzdGF0dXNcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzdGF0dXNEYXRhIC0gTmV3IHN0YXR1cyBkYXRhXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZVBsYXllclN0YXR1cyhzdGF0dXNEYXRhKSB7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJTdGF0dXMgPSB7IC4uLnRoaXMucGxheWVyU3RhdHVzLCAuLi5zdGF0dXNEYXRhIH07XHJcbiAgICAgICAgaWYgKHRoaXMuZXZlbnRTeXN0ZW0pIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudFN5c3RlbS5lbWl0KCdwbGF5ZXI6c3RhdHVzOnVwZGF0ZScsIHN0YXR1c0RhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE5vdGlmeSBzeXN0ZW1zIG9mIGF2YWlsYWJpbGl0eSBjaGFuZ2VzXHJcbiAgICAgKi9cclxuICAgIF9ub3RpZnlBdmFpbGFiaWxpdHlDaGFuZ2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZXZlbnRTeXN0ZW0pIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudFN5c3RlbS5lbWl0KCdhY3Rpb246YXZhaWxhYmlsaXR5OmNoYW5nZWQnLCB7XHJcbiAgICAgICAgICAgICAgICBnYW1lVGltZTogdGhpcy5nYW1lVGltZSxcclxuICAgICAgICAgICAgICAgIHdlYXRoZXI6IHRoaXMud2VhdGhlcixcclxuICAgICAgICAgICAgICAgIHBsYXllclN0YXR1czogdGhpcy5wbGF5ZXJTdGF0dXNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGN1cnJlbnQgZ2FtZSBzdGF0ZSBmb3IgZGVidWdnaW5nXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBDdXJyZW50IHN0YXRlIGluZm9ybWF0aW9uXHJcbiAgICAgKi9cclxuICAgIGdldERlYnVnSW5mbygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBnYW1lVGltZTogdGhpcy5nYW1lVGltZSxcclxuICAgICAgICAgICAgd2VhdGhlcjogdGhpcy53ZWF0aGVyLFxyXG4gICAgICAgICAgICBwbGF5ZXJTdGF0dXM6IHRoaXMucGxheWVyU3RhdHVzLFxyXG4gICAgICAgICAgICBhY3RpdmVDb29sZG93bnM6IEFycmF5LmZyb20odGhpcy5hY3Rpb25Db29sZG93bnMuZW50cmllcygpKS5tYXAoKFthY3Rpb24sIHRpbWVzdGFtcF0pID0+ICh7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb24sXHJcbiAgICAgICAgICAgICAgICBsYXN0VXNlZDogbmV3IERhdGUodGltZXN0YW1wKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdGltZVNpbmNlOiBEYXRlLm5vdygpIC0gdGltZXN0YW1wXHJcbiAgICAgICAgICAgIH0pKSxcclxuICAgICAgICAgICAgcnVsZUNvdW50OiB0aGlzLmF2YWlsYWJpbGl0eVJ1bGVzLnNpemVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHdpbmRvdy5BY3Rpb25BdmFpbGFiaWxpdHlFbmdpbmUgPSBBY3Rpb25BdmFpbGFiaWxpdHlFbmdpbmU7XHJcblxyXG4vLyBFUyBNb2R1bGUgZXhwb3J0c1xyXG5leHBvcnQgeyBBY3Rpb25BdmFpbGFiaWxpdHlFbmdpbmUgfTsgIl0sIm5hbWVzIjpbIkFjdGlvbkF2YWlsYWJpbGl0eUVuZ2luZSIsIl9pbml0aWFsaXplRGVmYXVsdFJ1bGVzIiwiYWRkUnVsZSIsImFjdGlvbiIsImNvbnRleHQiLCJjdXJyZW50TG9jYXRpb24iLCJsb2NhdGlvblN5c3RlbSIsImxvY2F0aW9uUmVzdHJpY3Rpb25zIiwic29tZSIsInJlc3RyaWN0aW9uIiwiX2NoZWNrTG9jYXRpb25SZXN0cmljdGlvbiIsInRpbWVSZXN0cmljdGlvbnMiLCJldmVyeSIsIl9jaGVja1RpbWVSZXN0cmljdGlvbiIsImdhbWVUaW1lIiwid2VhdGhlclJlc3RyaWN0aW9ucyIsIl9jaGVja1dlYXRoZXJSZXN0cmljdGlvbiIsIndlYXRoZXIiLCJwbGF5ZXJTdGF0dXNSZXF1aXJlbWVudHMiLCJfY2hlY2tQbGF5ZXJTdGF0dXNSZXF1aXJlbWVudHMiLCJwbGF5ZXJTdGF0dXMiLCJlcXVpcG1lbnRSZXF1aXJlbWVudHMiLCJpbnZlbnRvcnlNYW5hZ2VyIiwiX2NoZWNrRXF1aXBtZW50UmVxdWlyZW1lbnRzIiwiY29vbGRvd24iLCJfY2hlY2tDb29sZG93biIsIm5hbWUiLCJxdWVzdFJlcXVpcmVtZW50cyIsInF1ZXN0U3lzdGVtIiwiX2NoZWNrUXVlc3RSZXF1aXJlbWVudHMiLCJucGNSZXF1aXJlbWVudHMiLCJucGNTeXN0ZW0iLCJfY2hlY2tOUENSZXF1aXJlbWVudHMiLCJfc2V0dXBFdmVudExpc3RlbmVycyIsImV2ZW50U3lzdGVtIiwib24iLCJkYXRhIiwiX25vdGlmeUF2YWlsYWJpbGl0eUNoYW5nZSIsInJ1bGVOYW1lIiwicnVsZUZ1bmN0aW9uIiwiYXZhaWxhYmlsaXR5UnVsZXMiLCJzZXQiLCJjaGVja0FjdGlvbkF2YWlsYWJpbGl0eSIsInJlc3VsdCIsImF2YWlsYWJsZSIsInJlYXNvbnMiLCJtaXNzaW5nUmVxdWlyZW1lbnRzIiwicnVsZVJlc3VsdCIsInB1c2giLCJyZWFzb24iLCJlcnJvciIsImNvbnNvbGUiLCJ0eXBlIiwic3BvdCIsInNwb3RJZCIsInJlZ2lvbiIsInJlZ2lvbklkIiwiY291bnRyeSIsImNvdW50cnlJZCIsImNvbnRpbmVudCIsImNvbnRpbmVudElkIiwiZ2xvYmUiLCJnbG9iZUlkIiwiY3VycmVudFNwb3QiLCJnZXRDdXJyZW50U3BvdCIsImJpb21lIiwiYmlvbWVUeXBlIiwiaG91ciIsIm1pbiIsIm1heCIsImRheSIsInNlYXNvbnMiLCJpbmNsdWRlcyIsInNlYXNvbiIsInRpbWVPZkRheSIsImFsbG93ZWRUeXBlcyIsInRlbXBlcmF0dXJlIiwiaW50ZW5zaXR5IiwicmVxdWlyZW1lbnRzIiwic3RhdCIsInJlcXVpcmVtZW50IiwiT2JqZWN0IiwiZW50cmllcyIsImN1cnJlbnRWYWx1ZSIsInVuZGVmaW5lZCIsIml0ZW1JZCIsImhhc0l0ZW0iLCJxdWFudGl0eSIsIml0ZW1OYW1lIiwiZ2V0R2FtZU9iamVjdCIsImRpc3BsYXlOYW1lIiwiYWN0aW9uTmFtZSIsImNvb2xkb3duVGltZSIsImxhc3RVc2VkIiwiYWN0aW9uQ29vbGRvd25zIiwiZ2V0IiwidGltZVNpbmNlTGFzdFVzZSIsIkRhdGUiLCJub3ciLCJpc1F1ZXN0Q29tcGxldGVkIiwicXVlc3RJZCIsImlzUXVlc3RBY3RpdmUiLCJpc1F1ZXN0QXRTdGFnZSIsInN0YWdlIiwiaXNOUENQcmVzZW50IiwibnBjSWQiLCJyZWxhdGlvbnNoaXAiLCJnZXROUENSZWxhdGlvbnNoaXAiLCJtaW5SZWxhdGlvbnNoaXAiLCJoYXNOUENRdWVzdCIsInJlY29yZEFjdGlvblVzYWdlIiwiZ2V0UmVtYWluaW5nQ29vbGRvd24iLCJyZW1haW5pbmciLCJNYXRoIiwidXBkYXRlR2FtZVRpbWUiLCJ0aW1lRGF0YSIsImVtaXQiLCJ1cGRhdGVXZWF0aGVyIiwid2VhdGhlckRhdGEiLCJ1cGRhdGVQbGF5ZXJTdGF0dXMiLCJzdGF0dXNEYXRhIiwiZ2V0RGVidWdJbmZvIiwiYWN0aXZlQ29vbGRvd25zIiwiQXJyYXkiLCJmcm9tIiwibWFwIiwidGltZXN0YW1wIiwidG9JU09TdHJpbmciLCJ0aW1lU2luY2UiLCJydWxlQ291bnQiLCJzaXplIiwiY29uc3RydWN0b3IiLCJzdGF0ZU1hbmFnZXIiLCJNYXAiLCJtaW51dGUiLCJoZWFsdGgiLCJlbmVyZ3kiLCJodW5nZXIiLCJ0aGlyc3QiLCJ3aW5kb3ciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/game-engine/systems/ActionAvailabilityEngine.js\n"));

/***/ })

}]);