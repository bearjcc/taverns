"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./src/lib/game-engine/core/GameEngine.js":
/*!************************************************!*\
  !*** ./src/lib/game-engine/core/GameEngine.js ***!
  \************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GameEngine: () => (/* binding */ GameEngine)\n/* harmony export */ });\n/* harmony import */ var _GameStateManager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GameStateManager.js */ \"(app-pages-browser)/./src/lib/game-engine/core/GameStateManager.js\");\n/* harmony import */ var _EventSystem_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EventSystem.js */ \"(app-pages-browser)/./src/lib/game-engine/core/EventSystem.js\");\n/* harmony import */ var _AssetLoader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AssetLoader.js */ \"(app-pages-browser)/./src/lib/game-engine/core/AssetLoader.js\");\n/* harmony import */ var _ConfigManager_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ConfigManager.js */ \"(app-pages-browser)/./src/lib/game-engine/core/ConfigManager.js\");\n/* harmony import */ var _utils_Localization_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/Localization.js */ \"(app-pages-browser)/./src/lib/game-engine/utils/Localization.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n/**\r\n * Core Game Engine\r\n * \r\n * This is the main engine class that orchestrates all game systems.\r\n * It maintains clean separation between engine logic and game data,\r\n * allowing the same engine to run different games with different data sets.\r\n */ // Import core systems\n\n\n\n\n\nclass GameEngine {\n    /**\r\n     * Initialize the game with a specific mod/data set\r\n     * @param {string} modId - The mod to load (e.g., 'base-game', 'fantasy-mod')\r\n     * @param {Object} options - Additional initialization options\r\n     */ async initialize(modId) {\n        let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n        try {\n            console.log(\"Initializing game engine with mod: \".concat(modId));\n            // Load mod data\n            this.currentMod = await this._loadMod(modId);\n            this.gameData = this.currentMod.data;\n            // Initialize game systems with mod data\n            await this._initializeGameSystems();\n            // Set up cross-system references\n            this._setupSystemReferences();\n            // Set up event listeners\n            this._setupEventListeners();\n            // Load saved state if requested\n            if (options.loadSavedState !== false) {\n                this.stateManager.loadGameState(this.skillManager, this.inventoryManager, this.traitManager);\n            }\n            // Start auto-save\n            this._startAutoSave();\n            this.isRunning = true;\n            console.log('Game engine initialized successfully');\n            // Emit initialization complete event\n            this.eventSystem.emit('engine:initialized', {\n                modId,\n                gameData: this.gameData\n            });\n        } catch (error) {\n            console.error('Failed to initialize game engine:', error);\n            throw error;\n        }\n    }\n    /**\r\n     * Start the game\r\n     */ start() {\n        if (!this.isRunning) {\n            throw new Error('Game engine must be initialized before starting');\n        }\n        console.log('Starting game engine');\n        this.eventSystem.emit('engine:started');\n    }\n    /**\r\n     * Pause the game\r\n     */ pause() {\n        console.log('Pausing game engine');\n        this.eventSystem.emit('engine:paused');\n    }\n    /**\r\n     * Resume the game\r\n     */ resume() {\n        console.log('Resuming game engine');\n        this.eventSystem.emit('engine:resumed');\n    }\n    /**\r\n     * Stop the game and clean up\r\n     */ stop() {\n        console.log('Stopping game engine');\n        // Stop auto-save\n        this._stopAutoSave();\n        // Save final state\n        this.stateManager.save();\n        // Clean up event listeners\n        this._cleanupEventListeners();\n        this.isRunning = false;\n        this.eventSystem.emit('engine:stopped');\n    }\n    /**\r\n     * Switch to a different mod/game\r\n     * @param {string} modId - The new mod to load\r\n     */ async switchMod(modId) {\n        console.log(\"Switching to mod: \".concat(modId));\n        // Stop current game\n        this.stop();\n        // Initialize with new mod\n        await this.initialize(modId);\n        // Start new game\n        this.start();\n    }\n    /**\r\n     * Get a system by name\r\n     * @param {string} systemName - The name of the system to get\r\n     * @returns {Object} The system instance\r\n     */ getSystem(systemName) {\n        const systems = {\n            events: this.eventSystem,\n            state: this.stateManager,\n            config: this.configManager,\n            assets: this.assetLoader,\n            mods: this.modManager,\n            skills: this.skillManager,\n            inventory: this.inventoryManager,\n            traits: this.traitManager,\n            actions: this.actionManager,\n            species: this.speciesSystem,\n            locations: this.locationSystem,\n            achievements: this.achievementSystem,\n            encyclopedia: this.encyclopediaSystem,\n            ui: this.uiManager\n        };\n        return systems[systemName] || null;\n    }\n    /**\r\n     * Get current game data\r\n     * @returns {Object} Current game data\r\n     */ getGameData() {\n        return this.gameData;\n    }\n    /**\r\n     * Get current mod information\r\n     * @returns {Object} Current mod data\r\n     */ getCurrentMod() {\n        return this.currentMod;\n    }\n    // Private methods\n    _initializeCoreSystems() {\n        // Initialize core systems\n        this.stateManager = new _GameStateManager_js__WEBPACK_IMPORTED_MODULE_0__.GameStateManager();\n        this.eventSystem = new _EventSystem_js__WEBPACK_IMPORTED_MODULE_1__.EventSystem();\n        this.assetLoader = new _AssetLoader_js__WEBPACK_IMPORTED_MODULE_2__.AssetLoader(this.config.assetCacheSize);\n        this.localization = new _utils_Localization_js__WEBPACK_IMPORTED_MODULE_4__.Localization(this.config.defaultLanguage);\n        this.configManager = new _ConfigManager_js__WEBPACK_IMPORTED_MODULE_3__.ConfigManager();\n        // Set up event listeners\n        this._setupEventListeners();\n    }\n    /**\r\n     * Initialize game systems\r\n     */ async _initializeGameSystems() {\n        console.log('Initializing game systems...');\n        // Load system modules first\n        await this._loadSystemModules();\n        // Initialize mod manager after modules are loaded\n        this.modManager = new ModManager(this.eventSystem, this.assetLoader);\n        await this.modManager.initialize();\n        // Get mod data\n        const modData = this.modManager.getAllModData();\n        // Initialize systems with mod data (only create the ones that need special initialization)\n        this.locationSystem = new LocationSystem(modData.locations || {}, this.stateManager, this.eventSystem);\n        this.achievementSystem = new AchievementSystem(modData.achievements || {}, this.stateManager, this.eventSystem);\n        this.encyclopediaSystem = new EncyclopediaSystem(modData, this.eventSystem);\n        // Initialize systems (only call initialize if the method exists)\n        if (this.skillManager.initialize) await this.skillManager.initialize();\n        if (this.inventoryManager.initialize) await this.inventoryManager.initialize();\n        if (this.traitManager.initialize) await this.traitManager.initialize();\n        if (this.actionManager.initialize) await this.actionManager.initialize();\n        if (this.locationSystem.initialize) await this.locationSystem.initialize();\n        if (this.achievementSystem.initialize) await this.achievementSystem.initialize();\n        if (this.encyclopediaSystem.initialize) await this.encyclopediaSystem.initialize();\n        if (this.uiManager.initialize) await this.uiManager.initialize();\n        // Load configurations from mod data\n        this.skillManager.loadFromConfig(modData.skills || {}, modData.config || {});\n        this.inventoryManager.loadFromConfig(modData.items || {});\n        this.traitManager.loadFromConfig(modData.traits || {});\n        this.actionManager.loadFromConfig(modData.actions || {});\n        // Set up cross-system references\n        this._setupSystemReferences();\n        console.log('Game systems initialized');\n    }\n    /**\r\n     * Load all required system modules dynamically\r\n     */ async _loadSystemModules() {\n        // In Next.js environment, modules are imported directly\n        // No need for dynamic loading since we're using ES modules\n        console.log('System modules loaded via ES imports');\n        try {\n            // Import all system modules\n            const { SkillManager } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_src_lib_game-engine_systems_SkillManager_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../systems/SkillManager.js */ \"(app-pages-browser)/./src/lib/game-engine/systems/SkillManager.js\"));\n            const { InventoryManager } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_src_lib_game-engine_systems_InventoryManager_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../systems/InventoryManager.js */ \"(app-pages-browser)/./src/lib/game-engine/systems/InventoryManager.js\"));\n            const { TraitManager } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_src_lib_game-engine_systems_TraitManager_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../systems/TraitManager.js */ \"(app-pages-browser)/./src/lib/game-engine/systems/TraitManager.js\"));\n            const { ActionAvailabilityEngine } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_src_lib_game-engine_systems_ActionAvailabilityEngine_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../systems/ActionAvailabilityEngine.js */ \"(app-pages-browser)/./src/lib/game-engine/systems/ActionAvailabilityEngine.js\"));\n            const { ActionManager } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_src_lib_game-engine_systems_ActionManager_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../systems/ActionManager.js */ \"(app-pages-browser)/./src/lib/game-engine/systems/ActionManager.js\"));\n            const { SpeciesSystem } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_src_lib_game-engine_systems_SpeciesSystem_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../systems/SpeciesSystem.js */ \"(app-pages-browser)/./src/lib/game-engine/systems/SpeciesSystem.js\"));\n            const { LocationSystem: LocationSystem1 } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_src_lib_game-engine_systems_LocationSystem_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../systems/LocationSystem.js */ \"(app-pages-browser)/./src/lib/game-engine/systems/LocationSystem.js\"));\n            const { AchievementSystem: AchievementSystem1 } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_src_lib_game-engine_systems_AchievementSystem_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../systems/AchievementSystem.js */ \"(app-pages-browser)/./src/lib/game-engine/systems/AchievementSystem.js\"));\n            const { EncyclopediaSystem: EncyclopediaSystem1 } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_src_lib_game-engine_systems_EncyclopediaSystem_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../systems/EncyclopediaSystem.js */ \"(app-pages-browser)/./src/lib/game-engine/systems/EncyclopediaSystem.js\"));\n            const { UIManager } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_src_lib_game-engine_ui_UIManager_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../ui/UIManager.js */ \"(app-pages-browser)/./src/lib/game-engine/ui/UIManager.js\"));\n            const { EncyclopediaUI } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_src_lib_game-engine_ui_EncyclopediaUI_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../ui/EncyclopediaUI.js */ \"(app-pages-browser)/./src/lib/game-engine/ui/EncyclopediaUI.js\"));\n            const { FoodCategoryUI } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_src_lib_game-engine_ui_FoodCategoryUI_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../ui/FoodCategoryUI.js */ \"(app-pages-browser)/./src/lib/game-engine/ui/FoodCategoryUI.js\"));\n            const { ModManager: ModManager1 } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_src_lib_game-engine_core_ModManager_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./ModManager.js */ \"(app-pages-browser)/./src/lib/game-engine/core/ModManager.js\"));\n            // Initialize managers with imported classes\n            this.skillManager = new SkillManager();\n            this.inventoryManager = new InventoryManager();\n            this.traitManager = new TraitManager();\n            this.actionAvailabilityEngine = new ActionAvailabilityEngine();\n            this.actionManager = new ActionManager();\n            this.speciesSystem = new SpeciesSystem();\n            this.locationSystem = new LocationSystem1();\n            this.achievementSystem = new AchievementSystem1();\n            this.encyclopediaSystem = new EncyclopediaSystem1();\n            this.uiManager = new UIManager();\n            this.encyclopediaUI = new EncyclopediaUI();\n            this.foodCategoryUI = new FoodCategoryUI();\n            this.modManager = new ModManager1();\n            console.log('Successfully loaded all system modules');\n        } catch (error) {\n            console.error('Failed to load system modules:', error);\n            throw error;\n        }\n    }\n    /**\r\n     * Set up cross-system references\r\n     */ _setupSystemReferences() {\n        // Set up cross-system references\n        if (this.actionManager && this.locationSystem) {\n            this.actionManager.setLocationSystem(this.locationSystem);\n        }\n        if (this.skillManager && this.inventoryManager) {\n            this.skillManager.setInventorySystem(this.inventoryManager);\n        }\n        if (this.actionManager && this.skillManager) {\n            this.actionManager.setSkillSystem(this.skillManager);\n        }\n        if (this.actionManager && this.inventoryManager) {\n            this.actionManager.setInventorySystem(this.inventoryManager);\n        }\n        // Set up quest and NPC system references (placeholder for future systems)\n        if (this.actionManager) {\n        // TODO: Add actual quest and NPC systems when implemented\n        // this.actionManager.setQuestSystem(this.questSystem);\n        // this.actionManager.setNPCSystem(this.npcSystem);\n        }\n        if (this.achievementSystem && this.skillManager) {\n            this.achievementSystem.setSkillSystem(this.skillManager);\n        }\n        if (this.achievementSystem && this.inventoryManager) {\n            this.achievementSystem.setInventorySystem(this.inventoryManager);\n        }\n        // Set up manager references\n        if (this.skillManager && this.configManager) {\n            this.skillManager.setConfigManager(this.configManager);\n        }\n        if (this.skillManager && this.uiManager) {\n            this.skillManager.setUIManager(this.uiManager);\n        }\n        if (this.skillManager && this.eventSystem) {\n            this.skillManager.setEventSystem(this.eventSystem);\n        }\n        if (this.actionManager && this.configManager) {\n            this.actionManager.setConfigManager(this.configManager);\n        }\n        if (this.actionManager && this.uiManager) {\n            this.actionManager.setUIManager(this.uiManager);\n        }\n        if (this.inventoryManager && this.configManager) {\n            this.inventoryManager.setConfigManager(this.configManager);\n        }\n        if (this.inventoryManager && this.uiManager) {\n            this.inventoryManager.setUIManager(this.uiManager);\n        }\n        if (this.inventoryManager && this.eventSystem) {\n            this.inventoryManager.setEventSystem(this.eventSystem);\n        }\n        if (this.traitManager && this.configManager) {\n            this.traitManager.setConfigManager(this.configManager);\n        }\n        if (this.traitManager && this.uiManager) {\n            this.traitManager.setUIManager(this.uiManager);\n        }\n    }\n    async _loadMod(modId) {\n        // For now, just return the base game data\n        // In the future, this could load different mods\n        return {\n            id: modId,\n            manifest: {\n                name: 'Base Game',\n                version: '1.0.0'\n            },\n            data: {}\n        };\n    }\n    async _loadItemsData() {\n        try {\n            const response = await fetch('data/items.json');\n            if (!response.ok) {\n                throw new Error(\"HTTP error! status: \".concat(response.status));\n            }\n            return await response.json();\n        } catch (error) {\n            console.error('Failed to load items data:', error);\n            return {};\n        }\n    }\n    async _loadSpeciesData() {\n        try {\n            const response = await fetch('data/species.json');\n            if (!response.ok) {\n                throw new Error(\"HTTP error! status: \".concat(response.status));\n            }\n            return await response.json();\n        } catch (error) {\n            console.error('Failed to load species data:', error);\n            return {};\n        }\n    }\n    async _loadLocationsData() {\n        try {\n            const response = await fetch('data/locations.json');\n            if (!response.ok) {\n                throw new Error(\"HTTP error! status: \".concat(response.status));\n            }\n            return await response.json();\n        } catch (error) {\n            console.error('Failed to load locations data:', error);\n            return {};\n        }\n    }\n    async _loadAchievementsData() {\n        try {\n            const response = await fetch('data/achievements.json');\n            if (!response.ok) {\n                throw new Error(\"HTTP error! status: \".concat(response.status));\n            }\n            return await response.json();\n        } catch (error) {\n            console.error('Failed to load achievements data:', error);\n            return {};\n        }\n    }\n    _setupEventListeners() {\n        // Set up global event listeners\n        this.eventSystem.on('state:changed', ()=>{\n            this.stateManager.save();\n        });\n        this.eventSystem.on('error', (error)=>{\n            console.error('Game engine error:', error);\n        });\n        // Set up location change events\n        this.eventSystem.on('location:changed', (data)=>{\n            console.log('Location changed:', data);\n            // Emit event for UI updates\n            this.eventSystem.emit('ui:locationChanged', data);\n        });\n    }\n    _cleanupEventListeners() {\n        // Clean up event listeners\n        this.eventSystem.removeAllListeners();\n    }\n    _startAutoSave() {\n        this.autoSaveInterval = setInterval(()=>{\n            this.stateManager.save();\n        }, this.config.autoSaveInterval);\n    }\n    _stopAutoSave() {\n        if (this.autoSaveInterval) {\n            clearInterval(this.autoSaveInterval);\n            this.autoSaveInterval = null;\n        }\n    }\n    constructor(config = {}){\n        this.config = {\n            autoSaveInterval: 120000,\n            defaultLanguage: 'en',\n            assetCacheSize: 100,\n            ...config\n        };\n        // Core systems\n        this.stateManager = null;\n        this.eventSystem = null;\n        this.assetLoader = null;\n        this.localization = null;\n        this.configManager = null;\n        // Game systems\n        this.skillManager = null;\n        this.inventoryManager = null;\n        this.speciesSystem = null;\n        this.actionManager = null;\n        this.achievementSystem = null;\n        this.locationSystem = null;\n        this.encyclopediaSystem = null;\n        this.traitManager = null;\n        this.uiManager = null;\n        // Game state\n        this.isRunning = false;\n        this.currentMod = null;\n        this.gameData = null;\n        // Initialize core systems\n        this._initializeCoreSystems();\n    }\n}\n// Export for use in other modules\nif ( true && module.exports) {\n    module.exports = GameEngine;\n}\nif (true) window.GameEngine = GameEngine;\n// ES Module exports\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvZ2FtZS1lbmdpbmUvY29yZS9HYW1lRW5naW5lLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7Ozs7O0NBTUMsR0FFRCxzQkFBc0I7QUFDbUM7QUFDVjtBQUNBO0FBQ0k7QUFDSztBQUV4RCxNQUFNSztJQW9DRjs7OztLQUlDLEdBQ0QsTUFBTUMsV0FBV0MsS0FBSyxFQUFnQjtZQUFkQyxVQUFBQSxpRUFBVSxDQUFDO1FBQy9CLElBQUk7WUFDQUMsUUFBUUMsR0FBRyxDQUFDLHNDQUE0QyxPQUFOSDtZQUVsRCxnQkFBZ0I7WUFDaEIsSUFBSSxDQUFDSSxVQUFVLEdBQUcsTUFBTSxJQUFJLENBQUNDLFFBQVEsQ0FBQ0w7WUFDdEMsSUFBSSxDQUFDTSxRQUFRLEdBQUcsSUFBSSxDQUFDRixVQUFVLENBQUNHLElBQUk7WUFFcEMsd0NBQXdDO1lBQ3hDLE1BQU0sSUFBSSxDQUFDQyxzQkFBc0I7WUFFakMsaUNBQWlDO1lBQ2pDLElBQUksQ0FBQ0Msc0JBQXNCO1lBRTNCLHlCQUF5QjtZQUN6QixJQUFJLENBQUNDLG9CQUFvQjtZQUV6QixnQ0FBZ0M7WUFDaEMsSUFBSVQsUUFBUVUsY0FBYyxLQUFLLE9BQU87Z0JBQ2xDLElBQUksQ0FBQ0MsWUFBWSxDQUFDQyxhQUFhLENBQUMsSUFBSSxDQUFDQyxZQUFZLEVBQUUsSUFBSSxDQUFDQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUNDLFlBQVk7WUFDL0Y7WUFFQSxrQkFBa0I7WUFDbEIsSUFBSSxDQUFDQyxjQUFjO1lBRW5CLElBQUksQ0FBQ0MsU0FBUyxHQUFHO1lBQ2pCaEIsUUFBUUMsR0FBRyxDQUFDO1lBRVoscUNBQXFDO1lBQ3JDLElBQUksQ0FBQ2dCLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDLHNCQUFzQjtnQkFBRXBCO2dCQUFPTSxVQUFVLElBQUksQ0FBQ0EsUUFBUTtZQUFDO1FBRWpGLEVBQUUsT0FBT2UsT0FBTztZQUNabkIsUUFBUW1CLEtBQUssQ0FBQyxx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LENBQUNJLGtCQUFrQixHQUFHO1FBQzFCLElBQUksQ0FBQ3RDLFlBQVksR0FBRztRQUNwQixJQUFJLENBQUN3QyxTQUFTLEdBQUc7UUFFakIsYUFBYTtRQUNiLElBQUksQ0FBQ3RDLFNBQVMsR0FBRztRQUNqQixJQUFJLENBQUNkLFVBQVUsR0FBRztRQUNsQixJQUFJLENBQUNFLFFBQVEsR0FBRztRQUVoQiwwQkFBMEI7UUFDMUIsSUFBSSxDQUFDcUQsc0JBQXNCO0lBQy9CO0FBNmFKO0FBRUEsa0NBQWtDO0FBQ2xDLElBQUksS0FBNkIsSUFBSWtELE9BQU9DLE9BQU8sRUFBRTtJQUNqREQsT0FBT0MsT0FBTyxHQUFHaEg7QUFDckI7QUFFQSxJQUFJLElBQTZCLEVBQUVpSCxPQUFPakgsVUFBVSxHQUFHQTtBQUV2RCxvQkFBb0I7QUFDRSIsInNvdXJjZXMiOlsiQzpcXEdpdEh1YlxcU2VsZlxcdGF2ZXJuc1xcc3JjXFxsaWJcXGdhbWUtZW5naW5lXFxjb3JlXFxHYW1lRW5naW5lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDb3JlIEdhbWUgRW5naW5lXHJcbiAqIFxyXG4gKiBUaGlzIGlzIHRoZSBtYWluIGVuZ2luZSBjbGFzcyB0aGF0IG9yY2hlc3RyYXRlcyBhbGwgZ2FtZSBzeXN0ZW1zLlxyXG4gKiBJdCBtYWludGFpbnMgY2xlYW4gc2VwYXJhdGlvbiBiZXR3ZWVuIGVuZ2luZSBsb2dpYyBhbmQgZ2FtZSBkYXRhLFxyXG4gKiBhbGxvd2luZyB0aGUgc2FtZSBlbmdpbmUgdG8gcnVuIGRpZmZlcmVudCBnYW1lcyB3aXRoIGRpZmZlcmVudCBkYXRhIHNldHMuXHJcbiAqL1xyXG5cclxuLy8gSW1wb3J0IGNvcmUgc3lzdGVtc1xyXG5pbXBvcnQgeyBHYW1lU3RhdGVNYW5hZ2VyIH0gZnJvbSAnLi9HYW1lU3RhdGVNYW5hZ2VyLmpzJztcclxuaW1wb3J0IHsgRXZlbnRTeXN0ZW0gfSBmcm9tICcuL0V2ZW50U3lzdGVtLmpzJztcclxuaW1wb3J0IHsgQXNzZXRMb2FkZXIgfSBmcm9tICcuL0Fzc2V0TG9hZGVyLmpzJztcclxuaW1wb3J0IHsgQ29uZmlnTWFuYWdlciB9IGZyb20gJy4vQ29uZmlnTWFuYWdlci5qcyc7XHJcbmltcG9ydCB7IExvY2FsaXphdGlvbiB9IGZyb20gJy4uL3V0aWxzL0xvY2FsaXphdGlvbi5qcyc7XHJcblxyXG5jbGFzcyBHYW1lRW5naW5lIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSB7XHJcbiAgICAgICAgICAgIGF1dG9TYXZlSW50ZXJ2YWw6IDEyMDAwMCwgLy8gMiBtaW51dGVzXHJcbiAgICAgICAgICAgIGRlZmF1bHRMYW5ndWFnZTogJ2VuJyxcclxuICAgICAgICAgICAgYXNzZXRDYWNoZVNpemU6IDEwMCxcclxuICAgICAgICAgICAgLi4uY29uZmlnXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDb3JlIHN5c3RlbXNcclxuICAgICAgICB0aGlzLnN0YXRlTWFuYWdlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5ldmVudFN5c3RlbSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hc3NldExvYWRlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5sb2NhbGl6YXRpb24gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY29uZmlnTWFuYWdlciA9IG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gR2FtZSBzeXN0ZW1zXHJcbiAgICAgICAgdGhpcy5za2lsbE1hbmFnZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW52ZW50b3J5TWFuYWdlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zcGVjaWVzU3lzdGVtID0gbnVsbDtcclxuICAgICAgICB0aGlzLmFjdGlvbk1hbmFnZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYWNoaWV2ZW1lbnRTeXN0ZW0gPSBudWxsO1xyXG4gICAgICAgIHRoaXMubG9jYXRpb25TeXN0ZW0gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZW5jeWNsb3BlZGlhU3lzdGVtID0gbnVsbDtcclxuICAgICAgICB0aGlzLnRyYWl0TWFuYWdlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy51aU1hbmFnZXIgPSBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEdhbWUgc3RhdGVcclxuICAgICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY3VycmVudE1vZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5nYW1lRGF0YSA9IG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBjb3JlIHN5c3RlbXNcclxuICAgICAgICB0aGlzLl9pbml0aWFsaXplQ29yZVN5c3RlbXMoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIHRoZSBnYW1lIHdpdGggYSBzcGVjaWZpYyBtb2QvZGF0YSBzZXRcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RJZCAtIFRoZSBtb2QgdG8gbG9hZCAoZS5nLiwgJ2Jhc2UtZ2FtZScsICdmYW50YXN5LW1vZCcpXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIEFkZGl0aW9uYWwgaW5pdGlhbGl6YXRpb24gb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBhc3luYyBpbml0aWFsaXplKG1vZElkLCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgSW5pdGlhbGl6aW5nIGdhbWUgZW5naW5lIHdpdGggbW9kOiAke21vZElkfWApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gTG9hZCBtb2QgZGF0YVxyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRNb2QgPSBhd2FpdCB0aGlzLl9sb2FkTW9kKG1vZElkKTtcclxuICAgICAgICAgICAgdGhpcy5nYW1lRGF0YSA9IHRoaXMuY3VycmVudE1vZC5kYXRhO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBnYW1lIHN5c3RlbXMgd2l0aCBtb2QgZGF0YVxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9pbml0aWFsaXplR2FtZVN5c3RlbXMoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNldCB1cCBjcm9zcy1zeXN0ZW0gcmVmZXJlbmNlc1xyXG4gICAgICAgICAgICB0aGlzLl9zZXR1cFN5c3RlbVJlZmVyZW5jZXMoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNldCB1cCBldmVudCBsaXN0ZW5lcnNcclxuICAgICAgICAgICAgdGhpcy5fc2V0dXBFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gTG9hZCBzYXZlZCBzdGF0ZSBpZiByZXF1ZXN0ZWRcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubG9hZFNhdmVkU3RhdGUgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlTWFuYWdlci5sb2FkR2FtZVN0YXRlKHRoaXMuc2tpbGxNYW5hZ2VyLCB0aGlzLmludmVudG9yeU1hbmFnZXIsIHRoaXMudHJhaXRNYW5hZ2VyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gU3RhcnQgYXV0by1zYXZlXHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXJ0QXV0b1NhdmUoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuaXNSdW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0dhbWUgZW5naW5lIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gRW1pdCBpbml0aWFsaXphdGlvbiBjb21wbGV0ZSBldmVudFxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLmVtaXQoJ2VuZ2luZTppbml0aWFsaXplZCcsIHsgbW9kSWQsIGdhbWVEYXRhOiB0aGlzLmdhbWVEYXRhIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBnYW1lIGVuZ2luZTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydCB0aGUgZ2FtZVxyXG4gICAgICovXHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNSdW5uaW5nKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignR2FtZSBlbmdpbmUgbXVzdCBiZSBpbml0aWFsaXplZCBiZWZvcmUgc3RhcnRpbmcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1N0YXJ0aW5nIGdhbWUgZW5naW5lJyk7XHJcbiAgICAgICAgdGhpcy5ldmVudFN5c3RlbS5lbWl0KCdlbmdpbmU6c3RhcnRlZCcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFBhdXNlIHRoZSBnYW1lXHJcbiAgICAgKi9cclxuICAgIHBhdXNlKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdQYXVzaW5nIGdhbWUgZW5naW5lJyk7XHJcbiAgICAgICAgdGhpcy5ldmVudFN5c3RlbS5lbWl0KCdlbmdpbmU6cGF1c2VkJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogUmVzdW1lIHRoZSBnYW1lXHJcbiAgICAgKi9cclxuICAgIHJlc3VtZSgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnUmVzdW1pbmcgZ2FtZSBlbmdpbmUnKTtcclxuICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLmVtaXQoJ2VuZ2luZTpyZXN1bWVkJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogU3RvcCB0aGUgZ2FtZSBhbmQgY2xlYW4gdXBcclxuICAgICAqL1xyXG4gICAgc3RvcCgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnU3RvcHBpbmcgZ2FtZSBlbmdpbmUnKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBTdG9wIGF1dG8tc2F2ZVxyXG4gICAgICAgIHRoaXMuX3N0b3BBdXRvU2F2ZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNhdmUgZmluYWwgc3RhdGVcclxuICAgICAgICB0aGlzLnN0YXRlTWFuYWdlci5zYXZlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ2xlYW4gdXAgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICAgICAgdGhpcy5fY2xlYW51cEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLmVtaXQoJ2VuZ2luZTpzdG9wcGVkJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogU3dpdGNoIHRvIGEgZGlmZmVyZW50IG1vZC9nYW1lXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kSWQgLSBUaGUgbmV3IG1vZCB0byBsb2FkXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHN3aXRjaE1vZChtb2RJZCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBTd2l0Y2hpbmcgdG8gbW9kOiAke21vZElkfWApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFN0b3AgY3VycmVudCBnYW1lXHJcbiAgICAgICAgdGhpcy5zdG9wKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB3aXRoIG5ldyBtb2RcclxuICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUobW9kSWQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFN0YXJ0IG5ldyBnYW1lXHJcbiAgICAgICAgdGhpcy5zdGFydCgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhIHN5c3RlbSBieSBuYW1lXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3lzdGVtTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBzeXN0ZW0gdG8gZ2V0XHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgc3lzdGVtIGluc3RhbmNlXHJcbiAgICAgKi9cclxuICAgIGdldFN5c3RlbShzeXN0ZW1OYW1lKSB7XHJcbiAgICAgICAgY29uc3Qgc3lzdGVtcyA9IHtcclxuICAgICAgICAgICAgZXZlbnRzOiB0aGlzLmV2ZW50U3lzdGVtLFxyXG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZU1hbmFnZXIsXHJcbiAgICAgICAgICAgIGNvbmZpZzogdGhpcy5jb25maWdNYW5hZ2VyLFxyXG4gICAgICAgICAgICBhc3NldHM6IHRoaXMuYXNzZXRMb2FkZXIsXHJcbiAgICAgICAgICAgIG1vZHM6IHRoaXMubW9kTWFuYWdlcixcclxuICAgICAgICAgICAgc2tpbGxzOiB0aGlzLnNraWxsTWFuYWdlcixcclxuICAgICAgICAgICAgaW52ZW50b3J5OiB0aGlzLmludmVudG9yeU1hbmFnZXIsXHJcbiAgICAgICAgICAgIHRyYWl0czogdGhpcy50cmFpdE1hbmFnZXIsXHJcbiAgICAgICAgICAgIGFjdGlvbnM6IHRoaXMuYWN0aW9uTWFuYWdlcixcclxuICAgICAgICAgICAgc3BlY2llczogdGhpcy5zcGVjaWVzU3lzdGVtLFxyXG4gICAgICAgICAgICBsb2NhdGlvbnM6IHRoaXMubG9jYXRpb25TeXN0ZW0sXHJcbiAgICAgICAgICAgIGFjaGlldmVtZW50czogdGhpcy5hY2hpZXZlbWVudFN5c3RlbSxcclxuICAgICAgICAgICAgZW5jeWNsb3BlZGlhOiB0aGlzLmVuY3ljbG9wZWRpYVN5c3RlbSxcclxuICAgICAgICAgICAgdWk6IHRoaXMudWlNYW5hZ2VyXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gc3lzdGVtc1tzeXN0ZW1OYW1lXSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCBjdXJyZW50IGdhbWUgZGF0YVxyXG4gICAgICogQHJldHVybnMge09iamVjdH0gQ3VycmVudCBnYW1lIGRhdGFcclxuICAgICAqL1xyXG4gICAgZ2V0R2FtZURhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2FtZURhdGE7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2V0IGN1cnJlbnQgbW9kIGluZm9ybWF0aW9uXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBDdXJyZW50IG1vZCBkYXRhXHJcbiAgICAgKi9cclxuICAgIGdldEN1cnJlbnRNb2QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudE1vZDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gUHJpdmF0ZSBtZXRob2RzXHJcbiAgICBcclxuICAgIF9pbml0aWFsaXplQ29yZVN5c3RlbXMoKSB7XHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBjb3JlIHN5c3RlbXNcclxuICAgICAgICB0aGlzLnN0YXRlTWFuYWdlciA9IG5ldyBHYW1lU3RhdGVNYW5hZ2VyKCk7XHJcbiAgICAgICAgdGhpcy5ldmVudFN5c3RlbSA9IG5ldyBFdmVudFN5c3RlbSgpO1xyXG4gICAgICAgIHRoaXMuYXNzZXRMb2FkZXIgPSBuZXcgQXNzZXRMb2FkZXIodGhpcy5jb25maWcuYXNzZXRDYWNoZVNpemUpO1xyXG4gICAgICAgIHRoaXMubG9jYWxpemF0aW9uID0gbmV3IExvY2FsaXphdGlvbih0aGlzLmNvbmZpZy5kZWZhdWx0TGFuZ3VhZ2UpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnTWFuYWdlciA9IG5ldyBDb25maWdNYW5hZ2VyKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU2V0IHVwIGV2ZW50IGxpc3RlbmVyc1xyXG4gICAgICAgIHRoaXMuX3NldHVwRXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIGdhbWUgc3lzdGVtc1xyXG4gICAgICovXHJcbiAgICBhc3luYyBfaW5pdGlhbGl6ZUdhbWVTeXN0ZW1zKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdJbml0aWFsaXppbmcgZ2FtZSBzeXN0ZW1zLi4uJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTG9hZCBzeXN0ZW0gbW9kdWxlcyBmaXJzdFxyXG4gICAgICAgIGF3YWl0IHRoaXMuX2xvYWRTeXN0ZW1Nb2R1bGVzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBtb2QgbWFuYWdlciBhZnRlciBtb2R1bGVzIGFyZSBsb2FkZWRcclxuICAgICAgICB0aGlzLm1vZE1hbmFnZXIgPSBuZXcgTW9kTWFuYWdlcih0aGlzLmV2ZW50U3lzdGVtLCB0aGlzLmFzc2V0TG9hZGVyKTtcclxuICAgICAgICBhd2FpdCB0aGlzLm1vZE1hbmFnZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEdldCBtb2QgZGF0YVxyXG4gICAgICAgIGNvbnN0IG1vZERhdGEgPSB0aGlzLm1vZE1hbmFnZXIuZ2V0QWxsTW9kRGF0YSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgc3lzdGVtcyB3aXRoIG1vZCBkYXRhIChvbmx5IGNyZWF0ZSB0aGUgb25lcyB0aGF0IG5lZWQgc3BlY2lhbCBpbml0aWFsaXphdGlvbilcclxuICAgICAgICB0aGlzLmxvY2F0aW9uU3lzdGVtID0gbmV3IExvY2F0aW9uU3lzdGVtKG1vZERhdGEubG9jYXRpb25zIHx8IHt9LCB0aGlzLnN0YXRlTWFuYWdlciwgdGhpcy5ldmVudFN5c3RlbSk7XHJcbiAgICAgICAgdGhpcy5hY2hpZXZlbWVudFN5c3RlbSA9IG5ldyBBY2hpZXZlbWVudFN5c3RlbShtb2REYXRhLmFjaGlldmVtZW50cyB8fCB7fSwgdGhpcy5zdGF0ZU1hbmFnZXIsIHRoaXMuZXZlbnRTeXN0ZW0pO1xyXG4gICAgICAgIHRoaXMuZW5jeWNsb3BlZGlhU3lzdGVtID0gbmV3IEVuY3ljbG9wZWRpYVN5c3RlbShtb2REYXRhLCB0aGlzLmV2ZW50U3lzdGVtKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBJbml0aWFsaXplIHN5c3RlbXMgKG9ubHkgY2FsbCBpbml0aWFsaXplIGlmIHRoZSBtZXRob2QgZXhpc3RzKVxyXG4gICAgICAgIGlmICh0aGlzLnNraWxsTWFuYWdlci5pbml0aWFsaXplKSBhd2FpdCB0aGlzLnNraWxsTWFuYWdlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuaW52ZW50b3J5TWFuYWdlci5pbml0aWFsaXplKSBhd2FpdCB0aGlzLmludmVudG9yeU1hbmFnZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLnRyYWl0TWFuYWdlci5pbml0aWFsaXplKSBhd2FpdCB0aGlzLnRyYWl0TWFuYWdlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aW9uTWFuYWdlci5pbml0aWFsaXplKSBhd2FpdCB0aGlzLmFjdGlvbk1hbmFnZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLmxvY2F0aW9uU3lzdGVtLmluaXRpYWxpemUpIGF3YWl0IHRoaXMubG9jYXRpb25TeXN0ZW0uaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLmFjaGlldmVtZW50U3lzdGVtLmluaXRpYWxpemUpIGF3YWl0IHRoaXMuYWNoaWV2ZW1lbnRTeXN0ZW0uaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLmVuY3ljbG9wZWRpYVN5c3RlbS5pbml0aWFsaXplKSBhd2FpdCB0aGlzLmVuY3ljbG9wZWRpYVN5c3RlbS5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgaWYgKHRoaXMudWlNYW5hZ2VyLmluaXRpYWxpemUpIGF3YWl0IHRoaXMudWlNYW5hZ2VyLmluaXRpYWxpemUoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBMb2FkIGNvbmZpZ3VyYXRpb25zIGZyb20gbW9kIGRhdGFcclxuICAgICAgICB0aGlzLnNraWxsTWFuYWdlci5sb2FkRnJvbUNvbmZpZyhtb2REYXRhLnNraWxscyB8fCB7fSwgbW9kRGF0YS5jb25maWcgfHwge30pO1xyXG4gICAgICAgIHRoaXMuaW52ZW50b3J5TWFuYWdlci5sb2FkRnJvbUNvbmZpZyhtb2REYXRhLml0ZW1zIHx8IHt9KTtcclxuICAgICAgICB0aGlzLnRyYWl0TWFuYWdlci5sb2FkRnJvbUNvbmZpZyhtb2REYXRhLnRyYWl0cyB8fCB7fSk7XHJcbiAgICAgICAgdGhpcy5hY3Rpb25NYW5hZ2VyLmxvYWRGcm9tQ29uZmlnKG1vZERhdGEuYWN0aW9ucyB8fCB7fSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU2V0IHVwIGNyb3NzLXN5c3RlbSByZWZlcmVuY2VzXHJcbiAgICAgICAgdGhpcy5fc2V0dXBTeXN0ZW1SZWZlcmVuY2VzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coJ0dhbWUgc3lzdGVtcyBpbml0aWFsaXplZCcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIExvYWQgYWxsIHJlcXVpcmVkIHN5c3RlbSBtb2R1bGVzIGR5bmFtaWNhbGx5XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIF9sb2FkU3lzdGVtTW9kdWxlcygpIHtcclxuICAgICAgICAvLyBJbiBOZXh0LmpzIGVudmlyb25tZW50LCBtb2R1bGVzIGFyZSBpbXBvcnRlZCBkaXJlY3RseVxyXG4gICAgICAgIC8vIE5vIG5lZWQgZm9yIGR5bmFtaWMgbG9hZGluZyBzaW5jZSB3ZSdyZSB1c2luZyBFUyBtb2R1bGVzXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1N5c3RlbSBtb2R1bGVzIGxvYWRlZCB2aWEgRVMgaW1wb3J0cycpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIEltcG9ydCBhbGwgc3lzdGVtIG1vZHVsZXNcclxuICAgICAgICAgICAgY29uc3QgeyBTa2lsbE1hbmFnZXIgfSA9IGF3YWl0IGltcG9ydCgnLi4vc3lzdGVtcy9Ta2lsbE1hbmFnZXIuanMnKTtcclxuICAgICAgICAgICAgY29uc3QgeyBJbnZlbnRvcnlNYW5hZ2VyIH0gPSBhd2FpdCBpbXBvcnQoJy4uL3N5c3RlbXMvSW52ZW50b3J5TWFuYWdlci5qcycpO1xyXG4gICAgICAgICAgICBjb25zdCB7IFRyYWl0TWFuYWdlciB9ID0gYXdhaXQgaW1wb3J0KCcuLi9zeXN0ZW1zL1RyYWl0TWFuYWdlci5qcycpO1xyXG4gICAgICAgICAgICBjb25zdCB7IEFjdGlvbkF2YWlsYWJpbGl0eUVuZ2luZSB9ID0gYXdhaXQgaW1wb3J0KCcuLi9zeXN0ZW1zL0FjdGlvbkF2YWlsYWJpbGl0eUVuZ2luZS5qcycpO1xyXG4gICAgICAgICAgICBjb25zdCB7IEFjdGlvbk1hbmFnZXIgfSA9IGF3YWl0IGltcG9ydCgnLi4vc3lzdGVtcy9BY3Rpb25NYW5hZ2VyLmpzJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgU3BlY2llc1N5c3RlbSB9ID0gYXdhaXQgaW1wb3J0KCcuLi9zeXN0ZW1zL1NwZWNpZXNTeXN0ZW0uanMnKTtcclxuICAgICAgICAgICAgY29uc3QgeyBMb2NhdGlvblN5c3RlbSB9ID0gYXdhaXQgaW1wb3J0KCcuLi9zeXN0ZW1zL0xvY2F0aW9uU3lzdGVtLmpzJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgQWNoaWV2ZW1lbnRTeXN0ZW0gfSA9IGF3YWl0IGltcG9ydCgnLi4vc3lzdGVtcy9BY2hpZXZlbWVudFN5c3RlbS5qcycpO1xyXG4gICAgICAgICAgICBjb25zdCB7IEVuY3ljbG9wZWRpYVN5c3RlbSB9ID0gYXdhaXQgaW1wb3J0KCcuLi9zeXN0ZW1zL0VuY3ljbG9wZWRpYVN5c3RlbS5qcycpO1xyXG4gICAgICAgICAgICBjb25zdCB7IFVJTWFuYWdlciB9ID0gYXdhaXQgaW1wb3J0KCcuLi91aS9VSU1hbmFnZXIuanMnKTtcclxuICAgICAgICAgICAgY29uc3QgeyBFbmN5Y2xvcGVkaWFVSSB9ID0gYXdhaXQgaW1wb3J0KCcuLi91aS9FbmN5Y2xvcGVkaWFVSS5qcycpO1xyXG4gICAgICAgICAgICBjb25zdCB7IEZvb2RDYXRlZ29yeVVJIH0gPSBhd2FpdCBpbXBvcnQoJy4uL3VpL0Zvb2RDYXRlZ29yeVVJLmpzJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgTW9kTWFuYWdlciB9ID0gYXdhaXQgaW1wb3J0KCcuL01vZE1hbmFnZXIuanMnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgbWFuYWdlcnMgd2l0aCBpbXBvcnRlZCBjbGFzc2VzXHJcbiAgICAgICAgICAgIHRoaXMuc2tpbGxNYW5hZ2VyID0gbmV3IFNraWxsTWFuYWdlcigpO1xyXG4gICAgICAgICAgICB0aGlzLmludmVudG9yeU1hbmFnZXIgPSBuZXcgSW52ZW50b3J5TWFuYWdlcigpO1xyXG4gICAgICAgICAgICB0aGlzLnRyYWl0TWFuYWdlciA9IG5ldyBUcmFpdE1hbmFnZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25BdmFpbGFiaWxpdHlFbmdpbmUgPSBuZXcgQWN0aW9uQXZhaWxhYmlsaXR5RW5naW5lKCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uTWFuYWdlciA9IG5ldyBBY3Rpb25NYW5hZ2VyKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3BlY2llc1N5c3RlbSA9IG5ldyBTcGVjaWVzU3lzdGVtKCk7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYXRpb25TeXN0ZW0gPSBuZXcgTG9jYXRpb25TeXN0ZW0oKTtcclxuICAgICAgICAgICAgdGhpcy5hY2hpZXZlbWVudFN5c3RlbSA9IG5ldyBBY2hpZXZlbWVudFN5c3RlbSgpO1xyXG4gICAgICAgICAgICB0aGlzLmVuY3ljbG9wZWRpYVN5c3RlbSA9IG5ldyBFbmN5Y2xvcGVkaWFTeXN0ZW0oKTtcclxuICAgICAgICAgICAgdGhpcy51aU1hbmFnZXIgPSBuZXcgVUlNYW5hZ2VyKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZW5jeWNsb3BlZGlhVUkgPSBuZXcgRW5jeWNsb3BlZGlhVUkoKTtcclxuICAgICAgICAgICAgdGhpcy5mb29kQ2F0ZWdvcnlVSSA9IG5ldyBGb29kQ2F0ZWdvcnlVSSgpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZE1hbmFnZXIgPSBuZXcgTW9kTWFuYWdlcigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1N1Y2Nlc3NmdWxseSBsb2FkZWQgYWxsIHN5c3RlbSBtb2R1bGVzJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHN5c3RlbSBtb2R1bGVzOicsIGVycm9yKTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFNldCB1cCBjcm9zcy1zeXN0ZW0gcmVmZXJlbmNlc1xyXG4gICAgICovXHJcbiAgICBfc2V0dXBTeXN0ZW1SZWZlcmVuY2VzKCkge1xyXG4gICAgICAgIC8vIFNldCB1cCBjcm9zcy1zeXN0ZW0gcmVmZXJlbmNlc1xyXG4gICAgICAgIGlmICh0aGlzLmFjdGlvbk1hbmFnZXIgJiYgdGhpcy5sb2NhdGlvblN5c3RlbSkge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbk1hbmFnZXIuc2V0TG9jYXRpb25TeXN0ZW0odGhpcy5sb2NhdGlvblN5c3RlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLnNraWxsTWFuYWdlciAmJiB0aGlzLmludmVudG9yeU1hbmFnZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5za2lsbE1hbmFnZXIuc2V0SW52ZW50b3J5U3lzdGVtKHRoaXMuaW52ZW50b3J5TWFuYWdlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLmFjdGlvbk1hbmFnZXIgJiYgdGhpcy5za2lsbE1hbmFnZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25NYW5hZ2VyLnNldFNraWxsU3lzdGVtKHRoaXMuc2tpbGxNYW5hZ2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aW9uTWFuYWdlciAmJiB0aGlzLmludmVudG9yeU1hbmFnZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25NYW5hZ2VyLnNldEludmVudG9yeVN5c3RlbSh0aGlzLmludmVudG9yeU1hbmFnZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBTZXQgdXAgcXVlc3QgYW5kIE5QQyBzeXN0ZW0gcmVmZXJlbmNlcyAocGxhY2Vob2xkZXIgZm9yIGZ1dHVyZSBzeXN0ZW1zKVxyXG4gICAgICAgIGlmICh0aGlzLmFjdGlvbk1hbmFnZXIpIHtcclxuICAgICAgICAgICAgLy8gVE9ETzogQWRkIGFjdHVhbCBxdWVzdCBhbmQgTlBDIHN5c3RlbXMgd2hlbiBpbXBsZW1lbnRlZFxyXG4gICAgICAgICAgICAvLyB0aGlzLmFjdGlvbk1hbmFnZXIuc2V0UXVlc3RTeXN0ZW0odGhpcy5xdWVzdFN5c3RlbSk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuYWN0aW9uTWFuYWdlci5zZXROUENTeXN0ZW0odGhpcy5ucGNTeXN0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5hY2hpZXZlbWVudFN5c3RlbSAmJiB0aGlzLnNraWxsTWFuYWdlcikge1xyXG4gICAgICAgICAgICB0aGlzLmFjaGlldmVtZW50U3lzdGVtLnNldFNraWxsU3lzdGVtKHRoaXMuc2tpbGxNYW5hZ2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMuYWNoaWV2ZW1lbnRTeXN0ZW0gJiYgdGhpcy5pbnZlbnRvcnlNYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWNoaWV2ZW1lbnRTeXN0ZW0uc2V0SW52ZW50b3J5U3lzdGVtKHRoaXMuaW52ZW50b3J5TWFuYWdlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNldCB1cCBtYW5hZ2VyIHJlZmVyZW5jZXNcclxuICAgICAgICBpZiAodGhpcy5za2lsbE1hbmFnZXIgJiYgdGhpcy5jb25maWdNYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2tpbGxNYW5hZ2VyLnNldENvbmZpZ01hbmFnZXIodGhpcy5jb25maWdNYW5hZ2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMuc2tpbGxNYW5hZ2VyICYmIHRoaXMudWlNYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2tpbGxNYW5hZ2VyLnNldFVJTWFuYWdlcih0aGlzLnVpTWFuYWdlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLnNraWxsTWFuYWdlciAmJiB0aGlzLmV2ZW50U3lzdGVtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2tpbGxNYW5hZ2VyLnNldEV2ZW50U3lzdGVtKHRoaXMuZXZlbnRTeXN0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5hY3Rpb25NYW5hZ2VyICYmIHRoaXMuY29uZmlnTWFuYWdlcikge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbk1hbmFnZXIuc2V0Q29uZmlnTWFuYWdlcih0aGlzLmNvbmZpZ01hbmFnZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5hY3Rpb25NYW5hZ2VyICYmIHRoaXMudWlNYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uTWFuYWdlci5zZXRVSU1hbmFnZXIodGhpcy51aU1hbmFnZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5pbnZlbnRvcnlNYW5hZ2VyICYmIHRoaXMuY29uZmlnTWFuYWdlcikge1xyXG4gICAgICAgICAgICB0aGlzLmludmVudG9yeU1hbmFnZXIuc2V0Q29uZmlnTWFuYWdlcih0aGlzLmNvbmZpZ01hbmFnZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5pbnZlbnRvcnlNYW5hZ2VyICYmIHRoaXMudWlNYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW52ZW50b3J5TWFuYWdlci5zZXRVSU1hbmFnZXIodGhpcy51aU1hbmFnZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5pbnZlbnRvcnlNYW5hZ2VyICYmIHRoaXMuZXZlbnRTeXN0ZW0pIHtcclxuICAgICAgICAgICAgdGhpcy5pbnZlbnRvcnlNYW5hZ2VyLnNldEV2ZW50U3lzdGVtKHRoaXMuZXZlbnRTeXN0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy50cmFpdE1hbmFnZXIgJiYgdGhpcy5jb25maWdNYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhaXRNYW5hZ2VyLnNldENvbmZpZ01hbmFnZXIodGhpcy5jb25maWdNYW5hZ2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMudHJhaXRNYW5hZ2VyICYmIHRoaXMudWlNYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhaXRNYW5hZ2VyLnNldFVJTWFuYWdlcih0aGlzLnVpTWFuYWdlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhc3luYyBfbG9hZE1vZChtb2RJZCkge1xyXG4gICAgICAgIC8vIEZvciBub3csIGp1c3QgcmV0dXJuIHRoZSBiYXNlIGdhbWUgZGF0YVxyXG4gICAgICAgIC8vIEluIHRoZSBmdXR1cmUsIHRoaXMgY291bGQgbG9hZCBkaWZmZXJlbnQgbW9kc1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlkOiBtb2RJZCxcclxuICAgICAgICAgICAgbWFuaWZlc3Q6IHsgbmFtZTogJ0Jhc2UgR2FtZScsIHZlcnNpb246ICcxLjAuMCcgfSxcclxuICAgICAgICAgICAgZGF0YToge31cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhc3luYyBfbG9hZEl0ZW1zRGF0YSgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdkYXRhL2l0ZW1zLmpzb24nKTtcclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQIGVycm9yISBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgaXRlbXMgZGF0YTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGFzeW5jIF9sb2FkU3BlY2llc0RhdGEoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnZGF0YS9zcGVjaWVzLmpzb24nKTtcclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQIGVycm9yISBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgc3BlY2llcyBkYXRhOicsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgYXN5bmMgX2xvYWRMb2NhdGlvbnNEYXRhKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2RhdGEvbG9jYXRpb25zLmpzb24nKTtcclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQIGVycm9yISBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgbG9jYXRpb25zIGRhdGE6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhc3luYyBfbG9hZEFjaGlldmVtZW50c0RhdGEoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnZGF0YS9hY2hpZXZlbWVudHMuanNvbicpO1xyXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgZXJyb3IhIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBhY2hpZXZlbWVudHMgZGF0YTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF9zZXR1cEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIC8vIFNldCB1cCBnbG9iYWwgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICAgICAgdGhpcy5ldmVudFN5c3RlbS5vbignc3RhdGU6Y2hhbmdlZCcsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZU1hbmFnZXIuc2F2ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0ub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dhbWUgZW5naW5lIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBTZXQgdXAgbG9jYXRpb24gY2hhbmdlIGV2ZW50c1xyXG4gICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0ub24oJ2xvY2F0aW9uOmNoYW5nZWQnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTG9jYXRpb24gY2hhbmdlZDonLCBkYXRhKTtcclxuICAgICAgICAgICAgLy8gRW1pdCBldmVudCBmb3IgVUkgdXBkYXRlc1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLmVtaXQoJ3VpOmxvY2F0aW9uQ2hhbmdlZCcsIGRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfY2xlYW51cEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIC8vIENsZWFuIHVwIGV2ZW50IGxpc3RlbmVyc1xyXG4gICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0ucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF9zdGFydEF1dG9TYXZlKCkge1xyXG4gICAgICAgIHRoaXMuYXV0b1NhdmVJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZU1hbmFnZXIuc2F2ZSgpO1xyXG4gICAgICAgIH0sIHRoaXMuY29uZmlnLmF1dG9TYXZlSW50ZXJ2YWwpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfc3RvcEF1dG9TYXZlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmF1dG9TYXZlSW50ZXJ2YWwpIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmF1dG9TYXZlSW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICB0aGlzLmF1dG9TYXZlSW50ZXJ2YWwgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy8gRXhwb3J0IGZvciB1c2UgaW4gb3RoZXIgbW9kdWxlc1xyXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcclxuICAgIG1vZHVsZS5leHBvcnRzID0gR2FtZUVuZ2luZTtcclxufVxyXG5cclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB3aW5kb3cuR2FtZUVuZ2luZSA9IEdhbWVFbmdpbmU7XHJcblxyXG4vLyBFUyBNb2R1bGUgZXhwb3J0c1xyXG5leHBvcnQgeyBHYW1lRW5naW5lIH07ICJdLCJuYW1lcyI6WyJHYW1lU3RhdGVNYW5hZ2VyIiwiRXZlbnRTeXN0ZW0iLCJBc3NldExvYWRlciIsIkNvbmZpZ01hbmFnZXIiLCJMb2NhbGl6YXRpb24iLCJHYW1lRW5naW5lIiwiaW5pdGlhbGl6ZSIsIm1vZElkIiwib3B0aW9ucyIsImNvbnNvbGUiLCJsb2ciLCJjdXJyZW50TW9kIiwiX2xvYWRNb2QiLCJnYW1lRGF0YSIsImRhdGEiLCJfaW5pdGlhbGl6ZUdhbWVTeXN0ZW1zIiwiX3NldHVwU3lzdGVtUmVmZXJlbmNlcyIsIl9zZXR1cEV2ZW50TGlzdGVuZXJzIiwibG9hZFNhdmVkU3RhdGUiLCJzdGF0ZU1hbmFnZXIiLCJsb2FkR2FtZVN0YXRlIiwic2tpbGxNYW5hZ2VyIiwiaW52ZW50b3J5TWFuYWdlciIsInRyYWl0TWFuYWdlciIsIl9zdGFydEF1dG9TYXZlIiwiaXNSdW5uaW5nIiwiZXZlbnRTeXN0ZW0iLCJlbWl0IiwiZXJyb3IiLCJzdGFydCIsIkVycm9yIiwicGF1c2UiLCJyZXN1bWUiLCJzdG9wIiwiX3N0b3BBdXRvU2F2ZSIsInNhdmUiLCJfY2xlYW51cEV2ZW50TGlzdGVuZXJzIiwic3dpdGNoTW9kIiwiZ2V0U3lzdGVtIiwic3lzdGVtTmFtZSIsInN5c3RlbXMiLCJldmVudHMiLCJzdGF0ZSIsImNvbmZpZyIsImNvbmZpZ01hbmFnZXIiLCJhc3NldHMiLCJhc3NldExvYWRlciIsIm1vZHMiLCJtb2RNYW5hZ2VyIiwic2tpbGxzIiwiaW52ZW50b3J5IiwidHJhaXRzIiwiYWN0aW9ucyIsImFjdGlvbk1hbmFnZXIiLCJzcGVjaWVzIiwic3BlY2llc1N5c3RlbSIsImxvY2F0aW9ucyIsImxvY2F0aW9uU3lzdGVtIiwiYWNoaWV2ZW1lbnRzIiwiYWNoaWV2ZW1lbnRTeXN0ZW0iLCJlbmN5Y2xvcGVkaWEiLCJlbmN5Y2xvcGVkaWFTeXN0ZW0iLCJ1aSIsInVpTWFuYWdlciIsImdldEdhbWVEYXRhIiwiZ2V0Q3VycmVudE1vZCIsIl9pbml0aWFsaXplQ29yZVN5c3RlbXMiLCJhc3NldENhY2hlU2l6ZSIsImxvY2FsaXphdGlvbiIsImRlZmF1bHRMYW5ndWFnZSIsIl9sb2FkU3lzdGVtTW9kdWxlcyIsIk1vZE1hbmFnZXIiLCJtb2REYXRhIiwiZ2V0QWxsTW9kRGF0YSIsIkxvY2F0aW9uU3lzdGVtIiwiQWNoaWV2ZW1lbnRTeXN0ZW0iLCJFbmN5Y2xvcGVkaWFTeXN0ZW0iLCJsb2FkRnJvbUNvbmZpZyIsIml0ZW1zIiwiU2tpbGxNYW5hZ2VyIiwiSW52ZW50b3J5TWFuYWdlciIsIlRyYWl0TWFuYWdlciIsIkFjdGlvbkF2YWlsYWJpbGl0eUVuZ2luZSIsIkFjdGlvbk1hbmFnZXIiLCJTcGVjaWVzU3lzdGVtIiwiVUlNYW5hZ2VyIiwiRW5jeWNsb3BlZGlhVUkiLCJGb29kQ2F0ZWdvcnlVSSIsImFjdGlvbkF2YWlsYWJpbGl0eUVuZ2luZSIsImVuY3ljbG9wZWRpYVVJIiwiZm9vZENhdGVnb3J5VUkiLCJzZXRMb2NhdGlvblN5c3RlbSIsInNldEludmVudG9yeVN5c3RlbSIsInNldFNraWxsU3lzdGVtIiwic2V0Q29uZmlnTWFuYWdlciIsInNldFVJTWFuYWdlciIsInNldEV2ZW50U3lzdGVtIiwiaWQiLCJtYW5pZmVzdCIsIm5hbWUiLCJ2ZXJzaW9uIiwiX2xvYWRJdGVtc0RhdGEiLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJzdGF0dXMiLCJqc29uIiwiX2xvYWRTcGVjaWVzRGF0YSIsIl9sb2FkTG9jYXRpb25zRGF0YSIsIl9sb2FkQWNoaWV2ZW1lbnRzRGF0YSIsIm9uIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiYXV0b1NhdmVJbnRlcnZhbCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImNvbnN0cnVjdG9yIiwibW9kdWxlIiwiZXhwb3J0cyIsIndpbmRvdyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/game-engine/core/GameEngine.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/lib/game-engine/utils/Localization.js":
/*!***************************************************!*\
  !*** ./src/lib/game-engine/utils/Localization.js ***!
  \***************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Localization: () => (/* binding */ Localization)\n/* harmony export */ });\n/* module decorator */ module = __webpack_require__.hmd(module);\n/**\r\n * Localization System\r\n * \r\n * Handles multiple languages and provides fallback mechanisms\r\n * for missing translations.\r\n */ class Localization {\n    /**\r\n     * Set the current language\r\n     * @param {string} language - Language code (e.g., 'en', 'es', 'fr')\r\n     */ setLanguage(language) {\n        this.currentLanguage = language;\n        this.emit('language:changed', {\n            language\n        });\n    }\n    /**\r\n     * Get the current language\r\n     * @returns {string} Current language code\r\n     */ getLanguage() {\n        return this.currentLanguage;\n    }\n    /**\r\n     * Get the default language\r\n     * @returns {string} Default language code\r\n     */ getDefaultLanguage() {\n        return this.defaultLanguage;\n    }\n    /**\r\n     * Load translations for a language\r\n     * @param {string} language - Language code\r\n     * @param {Object} translations - Translation data\r\n     */ loadTranslations(language, translations) {\n        this.translations.set(language, translations);\n        this.loadedLanguages.add(language);\n        this.emit('translations:loaded', {\n            language,\n            count: Object.keys(translations).length\n        });\n    }\n    /**\r\n     * Load translations from a file\r\n     * @param {string} language - Language code\r\n     * @param {string} path - Path to translation file\r\n     */ async loadTranslationsFromFile(language, path) {\n        try {\n            const response = await fetch(path);\n            if (!response.ok) {\n                throw new Error(\"HTTP \".concat(response.status, \": \").concat(response.statusText));\n            }\n            const translations = await response.json();\n            this.loadTranslations(language, translations);\n            return true;\n        } catch (error) {\n            console.error(\"Failed to load translations for \".concat(language, \":\"), error);\n            this.emit('translations:loadError', {\n                language,\n                error\n            });\n            return false;\n        }\n    }\n    /**\r\n     * Get a translated string\r\n     * @param {string} key - Translation key\r\n     * @param {Object} params - Parameters for interpolation\r\n     * @param {string} language - Optional language override\r\n     * @returns {string} Translated string\r\n     */ get(key) {\n        let params = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, language = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : null;\n        const targetLanguage = language || this.currentLanguage;\n        // Try to get translation from target language\n        let translation = this._getTranslation(key, targetLanguage);\n        // If not found, try fallback chain\n        if (!translation) {\n            for (const fallbackLang of this.fallbackChain){\n                if (fallbackLang !== targetLanguage) {\n                    translation = this._getTranslation(key, fallbackLang);\n                    if (translation) break;\n                }\n            }\n        }\n        // If still not found, return the key\n        if (!translation) {\n            console.warn(\"Translation key not found: \".concat(key, \" for language: \").concat(targetLanguage));\n            return key;\n        }\n        // Interpolate parameters\n        return this._interpolate(translation, params);\n    }\n    /**\r\n     * Get a translated string with pluralization\r\n     * @param {string} key - Translation key\r\n     * @param {number} count - Count for pluralization\r\n     * @param {Object} params - Parameters for interpolation\r\n     * @param {string} language - Optional language override\r\n     * @returns {string} Translated string\r\n     */ getPlural(key, count) {\n        let params = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, language = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : null;\n        const targetLanguage = language || this.currentLanguage;\n        const pluralForm = this._getPluralForm(count, targetLanguage);\n        // Try to get pluralized key\n        const pluralKey = \"\".concat(key, \"_\").concat(pluralForm);\n        let translation = this.get(pluralKey, {\n            ...params,\n            count\n        }, language);\n        // If plural key not found, try the base key\n        if (translation === pluralKey) {\n            translation = this.get(key, {\n                ...params,\n                count\n            }, language);\n        }\n        return translation;\n    }\n    /**\r\n     * Check if a translation key exists\r\n     * @param {string} key - Translation key\r\n     * @param {string} language - Optional language override\r\n     * @returns {boolean} Whether the key exists\r\n     */ has(key) {\n        let language = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null;\n        const targetLanguage = language || this.currentLanguage;\n        // Check target language\n        if (this._getTranslation(key, targetLanguage)) {\n            return true;\n        }\n        // Check fallback chain\n        for (const fallbackLang of this.fallbackChain){\n            if (fallbackLang !== targetLanguage && this._getTranslation(key, fallbackLang)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\r\n     * Get all loaded languages\r\n     * @returns {Array} Array of loaded language codes\r\n     */ getLoadedLanguages() {\n        return Array.from(this.loadedLanguages);\n    }\n    /**\r\n     * Get translation statistics\r\n     * @param {string} language - Optional language filter\r\n     * @returns {Object} Translation statistics\r\n     */ getStats() {\n        let language = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : null;\n        if (language) {\n            const translations = this.translations.get(language);\n            return {\n                language,\n                keyCount: translations ? Object.keys(translations).length : 0,\n                loaded: this.loadedLanguages.has(language)\n            };\n        }\n        const stats = {};\n        for (const lang of this.loadedLanguages){\n            stats[lang] = this.getStats(lang);\n        }\n        return {\n            currentLanguage: this.currentLanguage,\n            defaultLanguage: this.defaultLanguage,\n            loadedLanguages: this.getLoadedLanguages(),\n            languages: stats\n        };\n    }\n    /**\r\n     * Add a fallback language\r\n     * @param {string} language - Language code to add to fallback chain\r\n     */ addFallbackLanguage(language) {\n        if (!this.fallbackChain.includes(language)) {\n            this.fallbackChain.push(language);\n        }\n    }\n    /**\r\n     * Remove a fallback language\r\n     * @param {string} language - Language code to remove from fallback chain\r\n     */ removeFallbackLanguage(language) {\n        const index = this.fallbackChain.indexOf(language);\n        if (index > -1) {\n            this.fallbackChain.splice(index, 1);\n        }\n    }\n    /**\r\n     * Get the fallback chain\r\n     * @returns {Array} Array of fallback languages\r\n     */ getFallbackChain() {\n        return [\n            ...this.fallbackChain\n        ];\n    }\n    /**\r\n     * Clear all translations\r\n     */ clear() {\n        this.translations.clear();\n        this.loadedLanguages.clear();\n        this.emit('translations:cleared', {});\n    }\n    /**\r\n     * Subscribe to localization events\r\n     * @param {string} event - Event name\r\n     * @param {Function} callback - Callback function\r\n     */ on(event, callback) {\n        if (!this.listeners) {\n            this.listeners = new Map();\n        }\n        if (!this.listeners.has(event)) {\n            this.listeners.set(event, []);\n        }\n        this.listeners.get(event).push(callback);\n    }\n    /**\r\n     * Unsubscribe from localization events\r\n     * @param {string} event - Event name\r\n     * @param {Function} callback - Callback function\r\n     */ off(event, callback) {\n        if (this.listeners && this.listeners.has(event)) {\n            const callbacks = this.listeners.get(event);\n            const index = callbacks.indexOf(callback);\n            if (index > -1) {\n                callbacks.splice(index, 1);\n            }\n        }\n    }\n    /**\r\n     * Emit an event to all listeners\r\n     * @param {string} event - Event name\r\n     * @param {Object} data - Event data\r\n     */ emit(event, data) {\n        if (this.listeners && this.listeners.has(event)) {\n            this.listeners.get(event).forEach((callback)=>{\n                try {\n                    callback(data);\n                } catch (error) {\n                    console.error(\"Error in localization event listener for \".concat(event, \":\"), error);\n                }\n            });\n        }\n    }\n    // Private methods\n    /**\r\n     * Get translation from a specific language\r\n     * @param {string} key - Translation key\r\n     * @param {string} language - Language code\r\n     * @returns {string|null} Translation or null if not found\r\n     */ _getTranslation(key, language) {\n        const translations = this.translations.get(language);\n        if (!translations) return null;\n        // Support nested keys with dot notation\n        const keys = key.split('.');\n        let current = translations;\n        for (const k of keys){\n            if (current && typeof current === 'object' && k in current) {\n                current = current[k];\n            } else {\n                return null;\n            }\n        }\n        return typeof current === 'string' ? current : null;\n    }\n    /**\r\n     * Interpolate parameters into a translation string\r\n     * @param {string} text - Text with placeholders\r\n     * @param {Object} params - Parameters to interpolate\r\n     * @returns {string} Interpolated text\r\n     */ _interpolate(text, params) {\n        return text.replace(/\\{(\\w+)\\}/g, (match, key)=>{\n            return params[key] !== undefined ? params[key] : match;\n        });\n    }\n    /**\r\n     * Get plural form for a count\r\n     * @param {number} count - Count\r\n     * @param {string} language - Language code\r\n     * @returns {string} Plural form\r\n     */ _getPluralForm(count, language) {\n        const rule = this.pluralRules.get(language);\n        if (!rule) return 'other';\n        return rule(count);\n    }\n    /**\r\n     * Initialize plural rules for common languages\r\n     */ _initializePluralRules() {\n        // English: 1 = one, other = other\n        this.pluralRules.set('en', (count)=>{\n            return count === 1 ? 'one' : 'other';\n        });\n        // Spanish: 1 = one, other = other\n        this.pluralRules.set('es', (count)=>{\n            return count === 1 ? 'one' : 'other';\n        });\n        // French: 0,1 = one, other = other\n        this.pluralRules.set('fr', (count)=>{\n            return count === 0 || count === 1 ? 'one' : 'other';\n        });\n        // German: 1 = one, other = other\n        this.pluralRules.set('de', (count)=>{\n            return count === 1 ? 'one' : 'other';\n        });\n        // Russian: 1 = one, 2-4 = few, 0,5-20 = other, other = other\n        this.pluralRules.set('ru', (count)=>{\n            const mod10 = count % 10;\n            const mod100 = count % 100;\n            if (mod10 === 1 && mod100 !== 11) return 'one';\n            if ([\n                2,\n                3,\n                4\n            ].includes(mod10) && ![\n                12,\n                13,\n                14\n            ].includes(mod100)) return 'few';\n            if (mod10 === 0 || [\n                5,\n                6,\n                7,\n                8,\n                9\n            ].includes(mod10) || [\n                11,\n                12,\n                13,\n                14\n            ].includes(mod100)) return 'other';\n            return 'other';\n        });\n    }\n    constructor(defaultLanguage = 'en'){\n        this.defaultLanguage = defaultLanguage;\n        this.currentLanguage = defaultLanguage;\n        this.translations = new Map();\n        this.loadedLanguages = new Set();\n        this.fallbackChain = [\n            'en',\n            'en-US',\n            'en-GB'\n        ];\n        this.pluralRules = new Map();\n        // Initialize plural rules for common languages\n        this._initializePluralRules();\n    }\n}\n// Export for use in other modules\nif ( true && module.exports) {\n    module.exports = Localization;\n}\nif (true) window.Localization = Localization;\n// ES Module exports\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvZ2FtZS1lbmdpbmUvdXRpbHMvTG9jYWxpemF0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7Ozs7O0NBS0MsR0FFRCxNQUFNQTtJQWFGOzs7S0FHQyxHQUNEQyxZQUFZQyxRQUFRLEVBQUU7UUFDbEIsSUFBSSxDQUFDQyxlQUFlLEdBQUdEO1FBQ3ZCLElBQUksQ0FBQ0UsSUFBSSxDQUFDLG9CQUFvQjtZQUFFRjtRQUFTO0lBQzdDO0lBRUE7OztLQUdDLEdBQ0RHLGNBQWM7UUFDVixPQUFPLElBQUksQ0FBQ0YsZUFBZTtJQUMvQjtJQUVBOzs7S0FHQyxHQUNERyxxQkFBcUI7UUFDakIsT0FBTyxJQUFJLENBQUNDLGVBQWU7SUFDL0I7SUFFQTs7OztLQUlDLEdBQ0RDLGlCQUFpQk4sUUFBUSxFQUFFTyxZQUFZLEVBQUU7UUFDckMsSUFBSSxDQUFDQSxZQUFZLENBQUNDLEdBQUcsQ0FBQ1IsVUFBVU87UUFDaEMsSUFBSSxDQUFDRSxlQUFlLENBQUNDLEdBQUcsQ0FBQ1Y7UUFDekIsSUFBSSxDQUFDRSxJQUFJLENBQUMsdUJBQXVCO1lBQUVGO1lBQVVXLE9BQU9DLE9BQU9DLElBQUksQ0FBQ04sY0FBY08sTUFBTTtRQUFDO0lBQ3pGO0lBRUE7Ozs7S0FJQyxHQUNELE1BQU1DLHlCQUF5QmYsUUFBUSxFQUFFZ0IsSUFBSSxFQUFFO1FBQzNDLElBQUk7WUFDQSxNQUFNQyxXQUFXLE1BQU1DLE1BQU1GO1lBQzdCLElBQUksQ0FBQ0MsU0FBU0UsRUFBRSxFQUFFO2dCQUNkLE1BQU0sSUFBSUMsTUFBTSxRQUE0QkgsT0FBcEJBLFNBQVNJLE1BQU0sRUFBQyxNQUF3QixPQUFwQkosU0FBU0ssVUFBVTtZQUNuRTtZQUVBLE1BQU1mLGVBQWUsTUFBTVUsU0FBU00sSUFBSTtZQUN4QyxJQUFJLENBQUNqQixnQkFBZ0IsQ0FBQ04sVUFBVU87WUFDaEMsT0FBTztRQUNYLEVBQUUsT0FBT2lCLE9BQU87WUFDWkMsUUFBUUQsS0FBSyxDQUFDLG1DQUE0QyxPQUFUeEIsVUFBUyxNQUFJd0I7WUFDOUQsSUFBSSxDQUFDdEIsSUFBSSxDQUFDLDBCQUEwQjtnQkFBRUY7Z0JBQVV3QjtZQUFNO1lBQ3RELE9BQU87UUFDWDtJQUNKO0lBRUE7Ozs7OztLQU1DLEdBQ0RFLElBQUlDLEdBQUcsRUFBZ0M7WUFBOUJDLFNBQUFBLGlFQUFTLENBQUMsR0FBRzVCLFdBQUFBLGlFQUFXO1FBQzdCLE1BQU02QixpQkFBaUI3QixZQUFZLElBQUksQ0FBQ0MsZUFBZTtRQUV2RCw4Q0FBOEM7UUFDOUMsSUFBSTZCLGNBQWMsSUFBSSxDQUFDQyxlQUFlLENBQUNKLEtBQUtFO1FBRTVDLG1DQUFtQztRQUNuQyxJQUFJLENBQUNDLGFBQWE7WUFDZCxLQUFLLE1BQU1FLGdCQUFnQixJQUFJLENBQUNDLGFBQWEsQ0FBRTtnQkFDM0MsSUFBSUQsaUJBQWlCSCxnQkFBZ0I7b0JBQ2pDQyxjQUFjLElBQUksQ0FBQ0MsZUFBZSxDQUFDSixLQUFLSztvQkFDeEMsSUFBSUYsYUFBYTtnQkFDckI7WUFDSjtRQUNKO1FBRUEscUNBQXFDO1FBQ3JDLElBQUksQ0FBQ0EsYUFBYTtZQUNkTCxRQUFRUyxJQUFJLENBQUMsOEJBQW1ETCxPQUFyQkYsS0FBSSxtQkFBZ0MsT0FBZkU7WUFDaEUsT0FBT0Y7UUFDWDtRQUVBLHlCQUF5QjtRQUN6QixPQUFPLElBQUksQ0FBQ1EsWUFBWSxDQUFDTCxhQUFhRjtJQUMxQztJQUVBOzs7Ozs7O0tBT0MsR0FDRFEsVUFBVVQsR0FBRyxFQUFFaEIsS0FBSyxFQUFnQztZQUE5QmlCLFNBQUFBLGlFQUFTLENBQUMsR0FBRzVCLFdBQUFBLGlFQUFXO1FBQzFDLE1BQU02QixpQkFBaUI3QixZQUFZLElBQUksQ0FBQ0MsZUFBZTtRQUN2RCxNQUFNb0MsYUFBYSxJQUFJLENBQUNDLGNBQWMsQ0FBQzNCLE9BQU9rQjtRQUU5Qyw0QkFBNEI7UUFDNUIsTUFBTVUsWUFBWSxHQUFVRixPQUFQVixLQUFJLEtBQWMsT0FBWFU7UUFDNUIsSUFBSVAsY0FBYyxJQUFJLENBQUNKLEdBQUcsQ0FBQ2EsV0FBVztZQUFFLEdBQUdYLE1BQU07WUFBRWpCO1FBQU0sR0FBR1g7UUFFNUQsNENBQTRDO1FBQzVDLElBQUk4QixnQkFBZ0JTLFdBQVc7WUFDM0JULGNBQWMsSUFBSSxDQUFDSixHQUFHLENBQUNDLEtBQUs7Z0JBQUUsR0FBR0MsTUFBTTtnQkFBRWpCO1lBQU0sR0FBR1g7UUFDdEQ7UUFFQSxPQUFPOEI7SUFDWDtJQUVBOzs7OztLQUtDLEdBQ0RVLElBQUliLEdBQUcsRUFBbUI7WUFBakIzQixXQUFBQSxpRUFBVztRQUNoQixNQUFNNkIsaUJBQWlCN0IsWUFBWSxJQUFJLENBQUNDLGVBQWU7UUFFdkQsd0JBQXdCO1FBQ3hCLElBQUksSUFBSSxDQUFDOEIsZUFBZSxDQUFDSixLQUFLRSxpQkFBaUI7WUFDM0MsT0FBTztRQUNYO1FBRUEsdUJBQXVCO1FBQ3ZCLEtBQUssTUFBTUcsZ0JBQWdCLElBQUksQ0FBQ0MsYUFBYSxDQUFFO1lBQzNDLElBQUlELGlCQUFpQkgsa0JBQWtCLElBQUksQ0FBQ0UsZUFBZSxDQUFDSixLQUFLSyxlQUFlO2dCQUM1RSxPQUFPO1lBQ1g7UUFDSjtRQUVBLE9BQU87SUFDWDtJQUVBOzs7S0FHQyxHQUNEUyxxQkFBcUI7UUFDakIsT0FBT0MsTUFBTUMsSUFBSSxDQUFDLElBQUksQ0FBQ2xDLGVBQWU7SUFDMUM7SUFFQTs7OztLQUlDLEdBQ0RtQyxXQUEwQjtZQUFqQjVDLFdBQUFBLGlFQUFXO1FBQ2hCLElBQUlBLFVBQVU7WUFDVixNQUFNTyxlQUFlLElBQUksQ0FBQ0EsWUFBWSxDQUFDbUIsR0FBRyxDQUFDMUI7WUFDM0MsT0FBTztnQkFDSEE7Z0JBQ0E2QyxVQUFVdEMsZUFBZUssT0FBT0MsSUFBSSxDQUFDTixjQUFjTyxNQUFNLEdBQUc7Z0JBQzVEZ0MsUUFBUSxJQUFJLENBQUNyQyxlQUFlLENBQUMrQixHQUFHLENBQUN4QztZQUNyQztRQUNKO1FBRUEsTUFBTStDLFFBQVEsQ0FBQztRQUNmLEtBQUssTUFBTUMsUUFBUSxJQUFJLENBQUN2QyxlQUFlLENBQUU7WUFDckNzQyxLQUFLLENBQUNDLEtBQUssR0FBRyxJQUFJLENBQUNKLFFBQVEsQ0FBQ0k7UUFDaEM7UUFFQSxPQUFPO1lBQ0gvQyxpQkFBaUIsSUFBSSxDQUFDQSxlQUFlO1lBQ3JDSSxpQkFBaUIsSUFBSSxDQUFDQSxlQUFlO1lBQ3JDSSxpQkFBaUIsSUFBSSxDQUFDZ0Msa0JBQWtCO1lBQ3hDUSxXQUFXRjtRQUNmO0lBQ0o7SUFFQTs7O0tBR0MsR0FDREcsb0JBQW9CbEQsUUFBUSxFQUFFO1FBQzFCLElBQUksQ0FBQyxJQUFJLENBQUNpQyxhQUFhLENBQUNrQixRQUFRLENBQUNuRCxXQUFXO1lBQ3hDLElBQUksQ0FBQ2lDLGFBQWEsQ0FBQ21CLElBQUksQ0FBQ3BEO1FBQzVCO0lBQ0o7SUFFQTs7O0tBR0MsR0FDRHFELHVCQUF1QnJELFFBQVEsRUFBRTtRQUM3QixNQUFNc0QsUUFBUSxJQUFJLENBQUNyQixhQUFhLENBQUNzQixPQUFPLENBQUN2RDtRQUN6QyxJQUFJc0QsUUFBUSxDQUFDLEdBQUc7WUFDWixJQUFJLENBQUNyQixhQUFhLENBQUN1QixNQUFNLENBQUNGLE9BQU87UUFDckM7SUFDSjtJQUVBOzs7S0FHQyxHQUNERyxtQkFBbUI7UUFDZixPQUFPO2VBQUksSUFBSSxDQUFDeEIsYUFBYTtTQUFDO0lBQ2xDO0lBRUE7O0tBRUMsR0FDRHlCLFFBQVE7UUFDSixJQUFJLENBQUNuRCxZQUFZLENBQUNtRCxLQUFLO1FBQ3ZCLElBQUksQ0FBQ2pELGVBQWUsQ0FBQ2lELEtBQUs7UUFDMUIsSUFBSSxDQUFDeEQsSUFBSSxDQUFDLHdCQUF3QixDQUFDO0lBQ3ZDO0lBRUE7Ozs7S0FJQyxHQUNEeUQsR0FBR0MsS0FBSyxFQUFFQyxRQUFRLEVBQUU7UUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQ0MsU0FBUyxFQUFFO1lBQ2pCLElBQUksQ0FBQ0EsU0FBUyxHQUFHLElBQUlDO1FBQ3pCO1FBRUEsSUFBSSxDQUFDLElBQUksQ0FBQ0QsU0FBUyxDQUFDdEIsR0FBRyxDQUFDb0IsUUFBUTtZQUM1QixJQUFJLENBQUNFLFNBQVMsQ0FBQ3RELEdBQUcsQ0FBQ29ELE9BQU8sRUFBRTtRQUNoQztRQUVBLElBQUksQ0FBQ0UsU0FBUyxDQUFDcEMsR0FBRyxDQUFDa0MsT0FBT1IsSUFBSSxDQUFDUztJQUNuQztJQUVBOzs7O0tBSUMsR0FDREcsSUFBSUosS0FBSyxFQUFFQyxRQUFRLEVBQUU7UUFDakIsSUFBSSxJQUFJLENBQUNDLFNBQVMsSUFBSSxJQUFJLENBQUNBLFNBQVMsQ0FBQ3RCLEdBQUcsQ0FBQ29CLFFBQVE7WUFDN0MsTUFBTUssWUFBWSxJQUFJLENBQUNILFNBQVMsQ0FBQ3BDLEdBQUcsQ0FBQ2tDO1lBQ3JDLE1BQU1OLFFBQVFXLFVBQVVWLE9BQU8sQ0FBQ007WUFDaEMsSUFBSVAsUUFBUSxDQUFDLEdBQUc7Z0JBQ1pXLFVBQVVULE1BQU0sQ0FBQ0YsT0FBTztZQUM1QjtRQUNKO0lBQ0o7SUFFQTs7OztLQUlDLEdBQ0RwRCxLQUFLMEQsS0FBSyxFQUFFTSxJQUFJLEVBQUU7UUFDZCxJQUFJLElBQUksQ0FBQ0osU0FBUyxJQUFJLElBQUksQ0FBQ0EsU0FBUyxDQUFDdEIsR0FBRyxDQUFDb0IsUUFBUTtZQUM3QyxJQUFJLENBQUNFLFNBQVMsQ0FBQ3BDLEdBQUcsQ0FBQ2tDLE9BQU9PLE9BQU8sQ0FBQ04sQ0FBQUE7Z0JBQzlCLElBQUk7b0JBQ0FBLFNBQVNLO2dCQUNiLEVBQUUsT0FBTzFDLE9BQU87b0JBQ1pDLFFBQVFELEtBQUssQ0FBQyw0Q0FBa0QsT0FBTm9DLE9BQU0sTUFBSXBDO2dCQUN4RTtZQUNKO1FBQ0o7SUFDSjtJQUVBLGtCQUFrQjtJQUVsQjs7Ozs7S0FLQyxHQUNETyxnQkFBZ0JKLEdBQUcsRUFBRTNCLFFBQVEsRUFBRTtRQUMzQixNQUFNTyxlQUFlLElBQUksQ0FBQ0EsWUFBWSxDQUFDbUIsR0FBRyxDQUFDMUI7UUFDM0MsSUFBSSxDQUFDTyxjQUFjLE9BQU87UUFFMUIsd0NBQXdDO1FBQ3hDLE1BQU1NLE9BQU9jLElBQUl5QyxLQUFLLENBQUM7UUFDdkIsSUFBSUMsVUFBVTlEO1FBRWQsS0FBSyxNQUFNK0QsS0FBS3pELEtBQU07WUFDbEIsSUFBSXdELFdBQVcsT0FBT0EsWUFBWSxZQUFZQyxLQUFLRCxTQUFTO2dCQUN4REEsVUFBVUEsT0FBTyxDQUFDQyxFQUFFO1lBQ3hCLE9BQU87Z0JBQ0gsT0FBTztZQUNYO1FBQ0o7UUFFQSxPQUFPLE9BQU9ELFlBQVksV0FBV0EsVUFBVTtJQUNuRDtJQUVBOzs7OztLQUtDLEdBQ0RsQyxhQUFhb0MsSUFBSSxFQUFFM0MsTUFBTSxFQUFFO1FBQ3ZCLE9BQU8yQyxLQUFLQyxPQUFPLENBQUMsY0FBYyxDQUFDQyxPQUFPOUM7WUFDdEMsT0FBT0MsTUFBTSxDQUFDRCxJQUFJLEtBQUsrQyxZQUFZOUMsTUFBTSxDQUFDRCxJQUFJLEdBQUc4QztRQUNyRDtJQUNKO0lBRUE7Ozs7O0tBS0MsR0FDRG5DLGVBQWUzQixLQUFLLEVBQUVYLFFBQVEsRUFBRTtRQUM1QixNQUFNMkUsT0FBTyxJQUFJLENBQUNDLFdBQVcsQ0FBQ2xELEdBQUcsQ0FBQzFCO1FBQ2xDLElBQUksQ0FBQzJFLE1BQU0sT0FBTztRQUVsQixPQUFPQSxLQUFLaEU7SUFDaEI7SUFFQTs7S0FFQyxHQUNEa0UseUJBQXlCO1FBQ3JCLGtDQUFrQztRQUNsQyxJQUFJLENBQUNELFdBQVcsQ0FBQ3BFLEdBQUcsQ0FBQyxNQUFNLENBQUNHO1lBQ3hCLE9BQU9BLFVBQVUsSUFBSSxRQUFRO1FBQ2pDO1FBRUEsa0NBQWtDO1FBQ2xDLElBQUksQ0FBQ2lFLFdBQVcsQ0FBQ3BFLEdBQUcsQ0FBQyxNQUFNLENBQUNHO1lBQ3hCLE9BQU9BLFVBQVUsSUFBSSxRQUFRO1FBQ2pDO1FBRUEsbUNBQW1DO1FBQ25DLElBQUksQ0FBQ2lFLFdBQVcsQ0FBQ3BFLEdBQUcsQ0FBQyxNQUFNLENBQUNHO1lBQ3hCLE9BQU9BLFVBQVUsS0FBS0EsVUFBVSxJQUFJLFFBQVE7UUFDaEQ7UUFFQSxpQ0FBaUM7UUFDakMsSUFBSSxDQUFDaUUsV0FBVyxDQUFDcEUsR0FBRyxDQUFDLE1BQU0sQ0FBQ0c7WUFDeEIsT0FBT0EsVUFBVSxJQUFJLFFBQVE7UUFDakM7UUFFQSw2REFBNkQ7UUFDN0QsSUFBSSxDQUFDaUUsV0FBVyxDQUFDcEUsR0FBRyxDQUFDLE1BQU0sQ0FBQ0c7WUFDeEIsTUFBTW1FLFFBQVFuRSxRQUFRO1lBQ3RCLE1BQU1vRSxTQUFTcEUsUUFBUTtZQUV2QixJQUFJbUUsVUFBVSxLQUFLQyxXQUFXLElBQUksT0FBTztZQUN6QyxJQUFJO2dCQUFDO2dCQUFHO2dCQUFHO2FBQUUsQ0FBQzVCLFFBQVEsQ0FBQzJCLFVBQVUsQ0FBQztnQkFBQztnQkFBSTtnQkFBSTthQUFHLENBQUMzQixRQUFRLENBQUM0QixTQUFTLE9BQU87WUFDeEUsSUFBSUQsVUFBVSxLQUFLO2dCQUFDO2dCQUFHO2dCQUFHO2dCQUFHO2dCQUFHO2FBQUUsQ0FBQzNCLFFBQVEsQ0FBQzJCLFVBQVU7Z0JBQUM7Z0JBQUk7Z0JBQUk7Z0JBQUk7YUFBRyxDQUFDM0IsUUFBUSxDQUFDNEIsU0FBUyxPQUFPO1lBQ2hHLE9BQU87UUFDWDtJQUNKO0lBeFdBQyxZQUFZM0Usa0JBQWtCLElBQUksQ0FBRTtRQUNoQyxJQUFJLENBQUNBLGVBQWUsR0FBR0E7UUFDdkIsSUFBSSxDQUFDSixlQUFlLEdBQUdJO1FBQ3ZCLElBQUksQ0FBQ0UsWUFBWSxHQUFHLElBQUl3RDtRQUN4QixJQUFJLENBQUN0RCxlQUFlLEdBQUcsSUFBSXdFO1FBQzNCLElBQUksQ0FBQ2hELGFBQWEsR0FBRztZQUFDO1lBQU07WUFBUztTQUFRO1FBQzdDLElBQUksQ0FBQzJDLFdBQVcsR0FBRyxJQUFJYjtRQUV2QiwrQ0FBK0M7UUFDL0MsSUFBSSxDQUFDYyxzQkFBc0I7SUFDL0I7QUErVko7QUFFQSxrQ0FBa0M7QUFDbEMsSUFBSSxLQUE2QixJQUFJSyxPQUFPQyxPQUFPLEVBQUU7SUFDakRELE9BQU9DLE9BQU8sR0FBR3JGO0FBQ3JCO0FBRUEsSUFBSSxJQUE2QixFQUFFc0YsT0FBT3RGLFlBQVksR0FBR0E7QUFFekQsb0JBQW9CO0FBQ0kiLCJzb3VyY2VzIjpbIkM6XFxHaXRIdWJcXFNlbGZcXHRhdmVybnNcXHNyY1xcbGliXFxnYW1lLWVuZ2luZVxcdXRpbHNcXExvY2FsaXphdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTG9jYWxpemF0aW9uIFN5c3RlbVxyXG4gKiBcclxuICogSGFuZGxlcyBtdWx0aXBsZSBsYW5ndWFnZXMgYW5kIHByb3ZpZGVzIGZhbGxiYWNrIG1lY2hhbmlzbXNcclxuICogZm9yIG1pc3NpbmcgdHJhbnNsYXRpb25zLlxyXG4gKi9cclxuXHJcbmNsYXNzIExvY2FsaXphdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihkZWZhdWx0TGFuZ3VhZ2UgPSAnZW4nKSB7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0TGFuZ3VhZ2UgPSBkZWZhdWx0TGFuZ3VhZ2U7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50TGFuZ3VhZ2UgPSBkZWZhdWx0TGFuZ3VhZ2U7XHJcbiAgICAgICAgdGhpcy50cmFuc2xhdGlvbnMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5sb2FkZWRMYW5ndWFnZXMgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgdGhpcy5mYWxsYmFja0NoYWluID0gWydlbicsICdlbi1VUycsICdlbi1HQiddO1xyXG4gICAgICAgIHRoaXMucGx1cmFsUnVsZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBwbHVyYWwgcnVsZXMgZm9yIGNvbW1vbiBsYW5ndWFnZXNcclxuICAgICAgICB0aGlzLl9pbml0aWFsaXplUGx1cmFsUnVsZXMoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGN1cnJlbnQgbGFuZ3VhZ2VcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZSAtIExhbmd1YWdlIGNvZGUgKGUuZy4sICdlbicsICdlcycsICdmcicpXHJcbiAgICAgKi9cclxuICAgIHNldExhbmd1YWdlKGxhbmd1YWdlKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50TGFuZ3VhZ2UgPSBsYW5ndWFnZTtcclxuICAgICAgICB0aGlzLmVtaXQoJ2xhbmd1YWdlOmNoYW5nZWQnLCB7IGxhbmd1YWdlIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgY3VycmVudCBsYW5ndWFnZVxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQ3VycmVudCBsYW5ndWFnZSBjb2RlXHJcbiAgICAgKi9cclxuICAgIGdldExhbmd1YWdlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRMYW5ndWFnZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIGRlZmF1bHQgbGFuZ3VhZ2VcclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IERlZmF1bHQgbGFuZ3VhZ2UgY29kZVxyXG4gICAgICovXHJcbiAgICBnZXREZWZhdWx0TGFuZ3VhZ2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdExhbmd1YWdlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIExvYWQgdHJhbnNsYXRpb25zIGZvciBhIGxhbmd1YWdlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZ3VhZ2UgLSBMYW5ndWFnZSBjb2RlXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gdHJhbnNsYXRpb25zIC0gVHJhbnNsYXRpb24gZGF0YVxyXG4gICAgICovXHJcbiAgICBsb2FkVHJhbnNsYXRpb25zKGxhbmd1YWdlLCB0cmFuc2xhdGlvbnMpIHtcclxuICAgICAgICB0aGlzLnRyYW5zbGF0aW9ucy5zZXQobGFuZ3VhZ2UsIHRyYW5zbGF0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5sb2FkZWRMYW5ndWFnZXMuYWRkKGxhbmd1YWdlKTtcclxuICAgICAgICB0aGlzLmVtaXQoJ3RyYW5zbGF0aW9uczpsb2FkZWQnLCB7IGxhbmd1YWdlLCBjb3VudDogT2JqZWN0LmtleXModHJhbnNsYXRpb25zKS5sZW5ndGggfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogTG9hZCB0cmFuc2xhdGlvbnMgZnJvbSBhIGZpbGVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZSAtIExhbmd1YWdlIGNvZGVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gUGF0aCB0byB0cmFuc2xhdGlvbiBmaWxlXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGxvYWRUcmFuc2xhdGlvbnNGcm9tRmlsZShsYW5ndWFnZSwgcGF0aCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gocGF0aCk7XHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgdHJhbnNsYXRpb25zID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRUcmFuc2xhdGlvbnMobGFuZ3VhZ2UsIHRyYW5zbGF0aW9ucyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBsb2FkIHRyYW5zbGF0aW9ucyBmb3IgJHtsYW5ndWFnZX06YCwgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3RyYW5zbGF0aW9uczpsb2FkRXJyb3InLCB7IGxhbmd1YWdlLCBlcnJvciB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSB0cmFuc2xhdGVkIHN0cmluZ1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIFRyYW5zbGF0aW9uIGtleVxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIFBhcmFtZXRlcnMgZm9yIGludGVycG9sYXRpb25cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZSAtIE9wdGlvbmFsIGxhbmd1YWdlIG92ZXJyaWRlXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUcmFuc2xhdGVkIHN0cmluZ1xyXG4gICAgICovXHJcbiAgICBnZXQoa2V5LCBwYXJhbXMgPSB7fSwgbGFuZ3VhZ2UgPSBudWxsKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0TGFuZ3VhZ2UgPSBsYW5ndWFnZSB8fCB0aGlzLmN1cnJlbnRMYW5ndWFnZTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBUcnkgdG8gZ2V0IHRyYW5zbGF0aW9uIGZyb20gdGFyZ2V0IGxhbmd1YWdlXHJcbiAgICAgICAgbGV0IHRyYW5zbGF0aW9uID0gdGhpcy5fZ2V0VHJhbnNsYXRpb24oa2V5LCB0YXJnZXRMYW5ndWFnZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSWYgbm90IGZvdW5kLCB0cnkgZmFsbGJhY2sgY2hhaW5cclxuICAgICAgICBpZiAoIXRyYW5zbGF0aW9uKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmFsbGJhY2tMYW5nIG9mIHRoaXMuZmFsbGJhY2tDaGFpbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZhbGxiYWNrTGFuZyAhPT0gdGFyZ2V0TGFuZ3VhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbiA9IHRoaXMuX2dldFRyYW5zbGF0aW9uKGtleSwgZmFsbGJhY2tMYW5nKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNsYXRpb24pIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIElmIHN0aWxsIG5vdCBmb3VuZCwgcmV0dXJuIHRoZSBrZXlcclxuICAgICAgICBpZiAoIXRyYW5zbGF0aW9uKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgVHJhbnNsYXRpb24ga2V5IG5vdCBmb3VuZDogJHtrZXl9IGZvciBsYW5ndWFnZTogJHt0YXJnZXRMYW5ndWFnZX1gKTtcclxuICAgICAgICAgICAgcmV0dXJuIGtleTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSW50ZXJwb2xhdGUgcGFyYW1ldGVyc1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcnBvbGF0ZSh0cmFuc2xhdGlvbiwgcGFyYW1zKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSB0cmFuc2xhdGVkIHN0cmluZyB3aXRoIHBsdXJhbGl6YXRpb25cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBUcmFuc2xhdGlvbiBrZXlcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjb3VudCAtIENvdW50IGZvciBwbHVyYWxpemF0aW9uXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIC0gUGFyYW1ldGVycyBmb3IgaW50ZXJwb2xhdGlvblxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlIC0gT3B0aW9uYWwgbGFuZ3VhZ2Ugb3ZlcnJpZGVcclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRyYW5zbGF0ZWQgc3RyaW5nXHJcbiAgICAgKi9cclxuICAgIGdldFBsdXJhbChrZXksIGNvdW50LCBwYXJhbXMgPSB7fSwgbGFuZ3VhZ2UgPSBudWxsKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0TGFuZ3VhZ2UgPSBsYW5ndWFnZSB8fCB0aGlzLmN1cnJlbnRMYW5ndWFnZTtcclxuICAgICAgICBjb25zdCBwbHVyYWxGb3JtID0gdGhpcy5fZ2V0UGx1cmFsRm9ybShjb3VudCwgdGFyZ2V0TGFuZ3VhZ2UpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRyeSB0byBnZXQgcGx1cmFsaXplZCBrZXlcclxuICAgICAgICBjb25zdCBwbHVyYWxLZXkgPSBgJHtrZXl9XyR7cGx1cmFsRm9ybX1gO1xyXG4gICAgICAgIGxldCB0cmFuc2xhdGlvbiA9IHRoaXMuZ2V0KHBsdXJhbEtleSwgeyAuLi5wYXJhbXMsIGNvdW50IH0sIGxhbmd1YWdlKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBJZiBwbHVyYWwga2V5IG5vdCBmb3VuZCwgdHJ5IHRoZSBiYXNlIGtleVxyXG4gICAgICAgIGlmICh0cmFuc2xhdGlvbiA9PT0gcGx1cmFsS2V5KSB7XHJcbiAgICAgICAgICAgIHRyYW5zbGF0aW9uID0gdGhpcy5nZXQoa2V5LCB7IC4uLnBhcmFtcywgY291bnQgfSwgbGFuZ3VhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gdHJhbnNsYXRpb247XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgYSB0cmFuc2xhdGlvbiBrZXkgZXhpc3RzXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gVHJhbnNsYXRpb24ga2V5XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZ3VhZ2UgLSBPcHRpb25hbCBsYW5ndWFnZSBvdmVycmlkZVxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGtleSBleGlzdHNcclxuICAgICAqL1xyXG4gICAgaGFzKGtleSwgbGFuZ3VhZ2UgPSBudWxsKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0TGFuZ3VhZ2UgPSBsYW5ndWFnZSB8fCB0aGlzLmN1cnJlbnRMYW5ndWFnZTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDaGVjayB0YXJnZXQgbGFuZ3VhZ2VcclxuICAgICAgICBpZiAodGhpcy5fZ2V0VHJhbnNsYXRpb24oa2V5LCB0YXJnZXRMYW5ndWFnZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENoZWNrIGZhbGxiYWNrIGNoYWluXHJcbiAgICAgICAgZm9yIChjb25zdCBmYWxsYmFja0xhbmcgb2YgdGhpcy5mYWxsYmFja0NoYWluKSB7XHJcbiAgICAgICAgICAgIGlmIChmYWxsYmFja0xhbmcgIT09IHRhcmdldExhbmd1YWdlICYmIHRoaXMuX2dldFRyYW5zbGF0aW9uKGtleSwgZmFsbGJhY2tMYW5nKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhbGwgbG9hZGVkIGxhbmd1YWdlc1xyXG4gICAgICogQHJldHVybnMge0FycmF5fSBBcnJheSBvZiBsb2FkZWQgbGFuZ3VhZ2UgY29kZXNcclxuICAgICAqL1xyXG4gICAgZ2V0TG9hZGVkTGFuZ3VhZ2VzKCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMubG9hZGVkTGFuZ3VhZ2VzKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdHJhbnNsYXRpb24gc3RhdGlzdGljc1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlIC0gT3B0aW9uYWwgbGFuZ3VhZ2UgZmlsdGVyXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBUcmFuc2xhdGlvbiBzdGF0aXN0aWNzXHJcbiAgICAgKi9cclxuICAgIGdldFN0YXRzKGxhbmd1YWdlID0gbnVsbCkge1xyXG4gICAgICAgIGlmIChsYW5ndWFnZSkge1xyXG4gICAgICAgICAgICBjb25zdCB0cmFuc2xhdGlvbnMgPSB0aGlzLnRyYW5zbGF0aW9ucy5nZXQobGFuZ3VhZ2UpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2UsXHJcbiAgICAgICAgICAgICAgICBrZXlDb3VudDogdHJhbnNsYXRpb25zID8gT2JqZWN0LmtleXModHJhbnNsYXRpb25zKS5sZW5ndGggOiAwLFxyXG4gICAgICAgICAgICAgICAgbG9hZGVkOiB0aGlzLmxvYWRlZExhbmd1YWdlcy5oYXMobGFuZ3VhZ2UpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHN0YXRzID0ge307XHJcbiAgICAgICAgZm9yIChjb25zdCBsYW5nIG9mIHRoaXMubG9hZGVkTGFuZ3VhZ2VzKSB7XHJcbiAgICAgICAgICAgIHN0YXRzW2xhbmddID0gdGhpcy5nZXRTdGF0cyhsYW5nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY3VycmVudExhbmd1YWdlOiB0aGlzLmN1cnJlbnRMYW5ndWFnZSxcclxuICAgICAgICAgICAgZGVmYXVsdExhbmd1YWdlOiB0aGlzLmRlZmF1bHRMYW5ndWFnZSxcclxuICAgICAgICAgICAgbG9hZGVkTGFuZ3VhZ2VzOiB0aGlzLmdldExvYWRlZExhbmd1YWdlcygpLFxyXG4gICAgICAgICAgICBsYW5ndWFnZXM6IHN0YXRzXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYSBmYWxsYmFjayBsYW5ndWFnZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlIC0gTGFuZ3VhZ2UgY29kZSB0byBhZGQgdG8gZmFsbGJhY2sgY2hhaW5cclxuICAgICAqL1xyXG4gICAgYWRkRmFsbGJhY2tMYW5ndWFnZShsYW5ndWFnZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5mYWxsYmFja0NoYWluLmluY2x1ZGVzKGxhbmd1YWdlKSkge1xyXG4gICAgICAgICAgICB0aGlzLmZhbGxiYWNrQ2hhaW4ucHVzaChsYW5ndWFnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBhIGZhbGxiYWNrIGxhbmd1YWdlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZ3VhZ2UgLSBMYW5ndWFnZSBjb2RlIHRvIHJlbW92ZSBmcm9tIGZhbGxiYWNrIGNoYWluXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZUZhbGxiYWNrTGFuZ3VhZ2UobGFuZ3VhZ2UpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZmFsbGJhY2tDaGFpbi5pbmRleE9mKGxhbmd1YWdlKTtcclxuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICB0aGlzLmZhbGxiYWNrQ2hhaW4uc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBmYWxsYmFjayBjaGFpblxyXG4gICAgICogQHJldHVybnMge0FycmF5fSBBcnJheSBvZiBmYWxsYmFjayBsYW5ndWFnZXNcclxuICAgICAqL1xyXG4gICAgZ2V0RmFsbGJhY2tDaGFpbigpIHtcclxuICAgICAgICByZXR1cm4gWy4uLnRoaXMuZmFsbGJhY2tDaGFpbl07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogQ2xlYXIgYWxsIHRyYW5zbGF0aW9uc1xyXG4gICAgICovXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLnRyYW5zbGF0aW9ucy5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMubG9hZGVkTGFuZ3VhZ2VzLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5lbWl0KCd0cmFuc2xhdGlvbnM6Y2xlYXJlZCcsIHt9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJzY3JpYmUgdG8gbG9jYWxpemF0aW9uIGV2ZW50c1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IC0gRXZlbnQgbmFtZVxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsYmFjayBmdW5jdGlvblxyXG4gICAgICovXHJcbiAgICBvbihldmVudCwgY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJzLmhhcyhldmVudCkpIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnMuc2V0KGV2ZW50LCBbXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzLmdldChldmVudCkucHVzaChjYWxsYmFjayk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogVW5zdWJzY3JpYmUgZnJvbSBsb2NhbGl6YXRpb24gZXZlbnRzXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgLSBFdmVudCBuYW1lXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIENhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKi9cclxuICAgIG9mZihldmVudCwgY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAodGhpcy5saXN0ZW5lcnMgJiYgdGhpcy5saXN0ZW5lcnMuaGFzKGV2ZW50KSkge1xyXG4gICAgICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLmxpc3RlbmVycy5nZXQoZXZlbnQpO1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGNhbGxiYWNrcy5pbmRleE9mKGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEVtaXQgYW4gZXZlbnQgdG8gYWxsIGxpc3RlbmVyc1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IC0gRXZlbnQgbmFtZVxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgLSBFdmVudCBkYXRhXHJcbiAgICAgKi9cclxuICAgIGVtaXQoZXZlbnQsIGRhdGEpIHtcclxuICAgICAgICBpZiAodGhpcy5saXN0ZW5lcnMgJiYgdGhpcy5saXN0ZW5lcnMuaGFzKGV2ZW50KSkge1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVycy5nZXQoZXZlbnQpLmZvckVhY2goY2FsbGJhY2sgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gbG9jYWxpemF0aW9uIGV2ZW50IGxpc3RlbmVyIGZvciAke2V2ZW50fTpgLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gUHJpdmF0ZSBtZXRob2RzXHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRyYW5zbGF0aW9uIGZyb20gYSBzcGVjaWZpYyBsYW5ndWFnZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIFRyYW5zbGF0aW9uIGtleVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlIC0gTGFuZ3VhZ2UgY29kZVxyXG4gICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBUcmFuc2xhdGlvbiBvciBudWxsIGlmIG5vdCBmb3VuZFxyXG4gICAgICovXHJcbiAgICBfZ2V0VHJhbnNsYXRpb24oa2V5LCBsYW5ndWFnZSkge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zbGF0aW9ucyA9IHRoaXMudHJhbnNsYXRpb25zLmdldChsYW5ndWFnZSk7XHJcbiAgICAgICAgaWYgKCF0cmFuc2xhdGlvbnMpIHJldHVybiBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFN1cHBvcnQgbmVzdGVkIGtleXMgd2l0aCBkb3Qgbm90YXRpb25cclxuICAgICAgICBjb25zdCBrZXlzID0ga2V5LnNwbGl0KCcuJyk7XHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0cmFuc2xhdGlvbnM7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCBrIG9mIGtleXMpIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnQgJiYgdHlwZW9mIGN1cnJlbnQgPT09ICdvYmplY3QnICYmIGsgaW4gY3VycmVudCkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnRba107XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gdHlwZW9mIGN1cnJlbnQgPT09ICdzdHJpbmcnID8gY3VycmVudCA6IG51bGw7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogSW50ZXJwb2xhdGUgcGFyYW1ldGVycyBpbnRvIGEgdHJhbnNsYXRpb24gc3RyaW5nXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFRleHQgd2l0aCBwbGFjZWhvbGRlcnNcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBQYXJhbWV0ZXJzIHRvIGludGVycG9sYXRlXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBJbnRlcnBvbGF0ZWQgdGV4dFxyXG4gICAgICovXHJcbiAgICBfaW50ZXJwb2xhdGUodGV4dCwgcGFyYW1zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRleHQucmVwbGFjZSgvXFx7KFxcdyspXFx9L2csIChtYXRjaCwga2V5KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJhbXNba2V5XSAhPT0gdW5kZWZpbmVkID8gcGFyYW1zW2tleV0gOiBtYXRjaDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgcGx1cmFsIGZvcm0gZm9yIGEgY291bnRcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjb3VudCAtIENvdW50XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZ3VhZ2UgLSBMYW5ndWFnZSBjb2RlXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBQbHVyYWwgZm9ybVxyXG4gICAgICovXHJcbiAgICBfZ2V0UGx1cmFsRm9ybShjb3VudCwgbGFuZ3VhZ2UpIHtcclxuICAgICAgICBjb25zdCBydWxlID0gdGhpcy5wbHVyYWxSdWxlcy5nZXQobGFuZ3VhZ2UpO1xyXG4gICAgICAgIGlmICghcnVsZSkgcmV0dXJuICdvdGhlcic7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHJ1bGUoY291bnQpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgcGx1cmFsIHJ1bGVzIGZvciBjb21tb24gbGFuZ3VhZ2VzXHJcbiAgICAgKi9cclxuICAgIF9pbml0aWFsaXplUGx1cmFsUnVsZXMoKSB7XHJcbiAgICAgICAgLy8gRW5nbGlzaDogMSA9IG9uZSwgb3RoZXIgPSBvdGhlclxyXG4gICAgICAgIHRoaXMucGx1cmFsUnVsZXMuc2V0KCdlbicsIChjb3VudCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gY291bnQgPT09IDEgPyAnb25lJyA6ICdvdGhlcic7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU3BhbmlzaDogMSA9IG9uZSwgb3RoZXIgPSBvdGhlclxyXG4gICAgICAgIHRoaXMucGx1cmFsUnVsZXMuc2V0KCdlcycsIChjb3VudCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gY291bnQgPT09IDEgPyAnb25lJyA6ICdvdGhlcic7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRnJlbmNoOiAwLDEgPSBvbmUsIG90aGVyID0gb3RoZXJcclxuICAgICAgICB0aGlzLnBsdXJhbFJ1bGVzLnNldCgnZnInLCAoY291bnQpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvdW50ID09PSAwIHx8IGNvdW50ID09PSAxID8gJ29uZScgOiAnb3RoZXInO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEdlcm1hbjogMSA9IG9uZSwgb3RoZXIgPSBvdGhlclxyXG4gICAgICAgIHRoaXMucGx1cmFsUnVsZXMuc2V0KCdkZScsIChjb3VudCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gY291bnQgPT09IDEgPyAnb25lJyA6ICdvdGhlcic7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gUnVzc2lhbjogMSA9IG9uZSwgMi00ID0gZmV3LCAwLDUtMjAgPSBvdGhlciwgb3RoZXIgPSBvdGhlclxyXG4gICAgICAgIHRoaXMucGx1cmFsUnVsZXMuc2V0KCdydScsIChjb3VudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2QxMCA9IGNvdW50ICUgMTA7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZDEwMCA9IGNvdW50ICUgMTAwO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKG1vZDEwID09PSAxICYmIG1vZDEwMCAhPT0gMTEpIHJldHVybiAnb25lJztcclxuICAgICAgICAgICAgaWYgKFsyLCAzLCA0XS5pbmNsdWRlcyhtb2QxMCkgJiYgIVsxMiwgMTMsIDE0XS5pbmNsdWRlcyhtb2QxMDApKSByZXR1cm4gJ2Zldyc7XHJcbiAgICAgICAgICAgIGlmIChtb2QxMCA9PT0gMCB8fCBbNSwgNiwgNywgOCwgOV0uaW5jbHVkZXMobW9kMTApIHx8IFsxMSwgMTIsIDEzLCAxNF0uaW5jbHVkZXMobW9kMTAwKSkgcmV0dXJuICdvdGhlcic7XHJcbiAgICAgICAgICAgIHJldHVybiAnb3RoZXInO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBFeHBvcnQgZm9yIHVzZSBpbiBvdGhlciBtb2R1bGVzXHJcbmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBMb2NhbGl6YXRpb247XHJcbn1cclxuXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgd2luZG93LkxvY2FsaXphdGlvbiA9IExvY2FsaXphdGlvbjtcclxuXHJcbi8vIEVTIE1vZHVsZSBleHBvcnRzXHJcbmV4cG9ydCB7IExvY2FsaXphdGlvbiB9OyAiXSwibmFtZXMiOlsiTG9jYWxpemF0aW9uIiwic2V0TGFuZ3VhZ2UiLCJsYW5ndWFnZSIsImN1cnJlbnRMYW5ndWFnZSIsImVtaXQiLCJnZXRMYW5ndWFnZSIsImdldERlZmF1bHRMYW5ndWFnZSIsImRlZmF1bHRMYW5ndWFnZSIsImxvYWRUcmFuc2xhdGlvbnMiLCJ0cmFuc2xhdGlvbnMiLCJzZXQiLCJsb2FkZWRMYW5ndWFnZXMiLCJhZGQiLCJjb3VudCIsIk9iamVjdCIsImtleXMiLCJsZW5ndGgiLCJsb2FkVHJhbnNsYXRpb25zRnJvbUZpbGUiLCJwYXRoIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwianNvbiIsImVycm9yIiwiY29uc29sZSIsImdldCIsImtleSIsInBhcmFtcyIsInRhcmdldExhbmd1YWdlIiwidHJhbnNsYXRpb24iLCJfZ2V0VHJhbnNsYXRpb24iLCJmYWxsYmFja0xhbmciLCJmYWxsYmFja0NoYWluIiwid2FybiIsIl9pbnRlcnBvbGF0ZSIsImdldFBsdXJhbCIsInBsdXJhbEZvcm0iLCJfZ2V0UGx1cmFsRm9ybSIsInBsdXJhbEtleSIsImhhcyIsImdldExvYWRlZExhbmd1YWdlcyIsIkFycmF5IiwiZnJvbSIsImdldFN0YXRzIiwia2V5Q291bnQiLCJsb2FkZWQiLCJzdGF0cyIsImxhbmciLCJsYW5ndWFnZXMiLCJhZGRGYWxsYmFja0xhbmd1YWdlIiwiaW5jbHVkZXMiLCJwdXNoIiwicmVtb3ZlRmFsbGJhY2tMYW5ndWFnZSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImdldEZhbGxiYWNrQ2hhaW4iLCJjbGVhciIsIm9uIiwiZXZlbnQiLCJjYWxsYmFjayIsImxpc3RlbmVycyIsIk1hcCIsIm9mZiIsImNhbGxiYWNrcyIsImRhdGEiLCJmb3JFYWNoIiwic3BsaXQiLCJjdXJyZW50IiwiayIsInRleHQiLCJyZXBsYWNlIiwibWF0Y2giLCJ1bmRlZmluZWQiLCJydWxlIiwicGx1cmFsUnVsZXMiLCJfaW5pdGlhbGl6ZVBsdXJhbFJ1bGVzIiwibW9kMTAiLCJtb2QxMDAiLCJjb25zdHJ1Y3RvciIsIlNldCIsIm1vZHVsZSIsImV4cG9ydHMiLCJ3aW5kb3ciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/game-engine/utils/Localization.js\n"));

/***/ })

});