"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_src_lib_game-engine_systems_ActionAvailabilityEngine_js";
exports.ids = ["_ssr_src_lib_game-engine_systems_ActionAvailabilityEngine_js"];
exports.modules = {

/***/ "(ssr)/./src/lib/game-engine/systems/ActionAvailabilityEngine.js":
/*!*****************************************************************!*\
  !*** ./src/lib/game-engine/systems/ActionAvailabilityEngine.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ActionAvailabilityEngine: () => (/* binding */ ActionAvailabilityEngine)\n/* harmony export */ });\n/**\r\n * Action Availability Engine\r\n * \r\n * Handles dynamic action availability based on various conditions:\r\n * - Location-based availability\r\n * - Time-of-day restrictions\r\n * - Weather/environmental modifiers\r\n * - Quest-based unlocks\r\n * - NPC interaction requirements\r\n * - Action cooldowns\r\n * - Prerequisites and dependencies\r\n * - Player status (health, energy, etc.)\r\n * - Equipment and tool requirements\r\n */ class ActionAvailabilityEngine {\n    constructor(eventSystem, stateManager){\n        this.eventSystem = eventSystem;\n        this.stateManager = stateManager;\n        // Rules registry\n        this.availabilityRules = new Map();\n        // Cooldown tracking\n        this.actionCooldowns = new Map();\n        // Time tracking\n        this.gameTime = {\n            hour: 12,\n            minute: 0,\n            day: 1,\n            season: 'spring'\n        };\n        // Weather system\n        this.weather = {\n            type: 'clear',\n            intensity: 0,\n            temperature: 20\n        };\n        // Player status\n        this.playerStatus = {\n            health: 100,\n            energy: 100,\n            hunger: 0,\n            thirst: 0,\n            temperature: 20\n        };\n        this._initializeDefaultRules();\n        this._setupEventListeners();\n    }\n    /**\r\n     * Initialize default availability rules\r\n     */ _initializeDefaultRules() {\n        // Location-based rules\n        this.addRule('location', (action, context)=>{\n            const { currentLocation, locationSystem } = context;\n            if (!action.locationRestrictions) return true;\n            return action.locationRestrictions.some((restriction)=>{\n                return this._checkLocationRestriction(restriction, currentLocation, locationSystem);\n            });\n        });\n        // Time-based rules\n        this.addRule('time', (action, context)=>{\n            if (!action.timeRestrictions) return true;\n            return action.timeRestrictions.every((restriction)=>{\n                return this._checkTimeRestriction(restriction, this.gameTime);\n            });\n        });\n        // Weather-based rules\n        this.addRule('weather', (action, context)=>{\n            if (!action.weatherRestrictions) return true;\n            return action.weatherRestrictions.every((restriction)=>{\n                return this._checkWeatherRestriction(restriction, this.weather);\n            });\n        });\n        // Player status rules\n        this.addRule('playerStatus', (action, context)=>{\n            if (!action.playerStatusRequirements) return true;\n            return this._checkPlayerStatusRequirements(action.playerStatusRequirements, this.playerStatus);\n        });\n        // Equipment rules\n        this.addRule('equipment', (action, context)=>{\n            if (!action.equipmentRequirements) return true;\n            const { inventoryManager } = context;\n            return this._checkEquipmentRequirements(action.equipmentRequirements, inventoryManager);\n        });\n        // Cooldown rules\n        this.addRule('cooldown', (action, context)=>{\n            if (!action.cooldown) return true;\n            return this._checkCooldown(action.name, action.cooldown);\n        });\n        // Quest rules\n        this.addRule('quest', (action, context)=>{\n            if (!action.questRequirements) return true;\n            const { questSystem } = context;\n            return this._checkQuestRequirements(action.questRequirements, questSystem);\n        });\n        // NPC interaction rules\n        this.addRule('npc', (action, context)=>{\n            if (!action.npcRequirements) return true;\n            const { npcSystem } = context;\n            return this._checkNPCRequirements(action.npcRequirements, npcSystem);\n        });\n    }\n    /**\r\n     * Setup event listeners for dynamic updates\r\n     */ _setupEventListeners() {\n        if (this.eventSystem) {\n            this.eventSystem.on('time:update', (data)=>{\n                this.gameTime = {\n                    ...this.gameTime,\n                    ...data\n                };\n                this._notifyAvailabilityChange();\n            });\n            this.eventSystem.on('weather:change', (data)=>{\n                this.weather = {\n                    ...this.weather,\n                    ...data\n                };\n                this._notifyAvailabilityChange();\n            });\n            this.eventSystem.on('player:status:update', (data)=>{\n                this.playerStatus = {\n                    ...this.playerStatus,\n                    ...data\n                };\n                this._notifyAvailabilityChange();\n            });\n            this.eventSystem.on('location:change', (data)=>{\n                this._notifyAvailabilityChange();\n            });\n            this.eventSystem.on('quest:update', (data)=>{\n                this._notifyAvailabilityChange();\n            });\n            this.eventSystem.on('npc:interaction', (data)=>{\n                this._notifyAvailabilityChange();\n            });\n        }\n    }\n    /**\r\n     * Add a custom availability rule\r\n     * @param {string} ruleName - Name of the rule\r\n     * @param {Function} ruleFunction - Function that returns boolean\r\n     */ addRule(ruleName, ruleFunction) {\n        this.availabilityRules.set(ruleName, ruleFunction);\n    }\n    /**\r\n     * Check if an action is available given the current context\r\n     * @param {Object} action - The action to check\r\n     * @param {Object} context - Current game context\r\n     * @returns {Object} Availability result with details\r\n     */ checkActionAvailability(action, context) {\n        const result = {\n            available: true,\n            reasons: [],\n            missingRequirements: []\n        };\n        // Check each rule\n        for (const [ruleName, ruleFunction] of this.availabilityRules){\n            try {\n                const ruleResult = ruleFunction(action, context);\n                if (typeof ruleResult === 'boolean') {\n                    if (!ruleResult) {\n                        result.available = false;\n                        result.reasons.push(`Failed ${ruleName} check`);\n                    }\n                } else if (ruleResult && typeof ruleResult === 'object') {\n                    if (!ruleResult.available) {\n                        result.available = false;\n                        result.reasons.push(ruleResult.reason || `Failed ${ruleName} check`);\n                        if (ruleResult.missingRequirements) {\n                            result.missingRequirements.push(...ruleResult.missingRequirements);\n                        }\n                    }\n                }\n            } catch (error) {\n                console.error(`Error checking ${ruleName} rule for action ${action.name}:`, error);\n                result.available = false;\n                result.reasons.push(`Error in ${ruleName} check`);\n            }\n        }\n        return result;\n    }\n    /**\r\n     * Check location restriction\r\n     * @param {Object} restriction - Location restriction object\r\n     * @param {Object} currentLocation - Current player location\r\n     * @param {Object} locationSystem - Location system instance\r\n     * @returns {boolean} Whether location requirement is met\r\n     */ _checkLocationRestriction(restriction, currentLocation, locationSystem) {\n        if (!currentLocation || !locationSystem) return false;\n        switch(restriction.type){\n            case 'spot':\n                return currentLocation.spot === restriction.spotId;\n            case 'region':\n                return currentLocation.region === restriction.regionId;\n            case 'country':\n                return currentLocation.country === restriction.countryId;\n            case 'continent':\n                return currentLocation.continent === restriction.continentId;\n            case 'globe':\n                return currentLocation.globe === restriction.globeId;\n            case 'biome':\n                const currentSpot = locationSystem.getCurrentSpot();\n                return currentSpot && currentSpot.biome === restriction.biomeType;\n            default:\n                return false;\n        }\n    }\n    /**\r\n     * Check time restriction\r\n     * @param {Object} restriction - Time restriction object\r\n     * @param {Object} gameTime - Current game time\r\n     * @returns {boolean} Whether time requirement is met\r\n     */ _checkTimeRestriction(restriction, gameTime) {\n        switch(restriction.type){\n            case 'hour':\n                return gameTime.hour >= restriction.min && gameTime.hour <= restriction.max;\n            case 'day':\n                return gameTime.day >= restriction.min && gameTime.day <= restriction.max;\n            case 'season':\n                return restriction.seasons.includes(gameTime.season);\n            case 'timeOfDay':\n                const hour = gameTime.hour;\n                switch(restriction.timeOfDay){\n                    case 'dawn':\n                        return hour >= 5 && hour < 8;\n                    case 'morning':\n                        return hour >= 8 && hour < 12;\n                    case 'afternoon':\n                        return hour >= 12 && hour < 17;\n                    case 'evening':\n                        return hour >= 17 && hour < 20;\n                    case 'night':\n                        return hour >= 20 || hour < 5;\n                    default:\n                        return false;\n                }\n            default:\n                return false;\n        }\n    }\n    /**\r\n     * Check weather restriction\r\n     * @param {Object} restriction - Weather restriction object\r\n     * @param {Object} weather - Current weather\r\n     * @returns {boolean} Whether weather requirement is met\r\n     */ _checkWeatherRestriction(restriction, weather) {\n        switch(restriction.type){\n            case 'weatherType':\n                return restriction.allowedTypes.includes(weather.type);\n            case 'temperature':\n                return weather.temperature >= restriction.min && weather.temperature <= restriction.max;\n            case 'intensity':\n                return weather.intensity >= restriction.min && weather.intensity <= restriction.max;\n            default:\n                return false;\n        }\n    }\n    /**\r\n     * Check player status requirements\r\n     * @param {Object} requirements - Player status requirements\r\n     * @param {Object} playerStatus - Current player status\r\n     * @returns {Object} Check result with details\r\n     */ _checkPlayerStatusRequirements(requirements, playerStatus) {\n        const result = {\n            available: true,\n            missingRequirements: []\n        };\n        for (const [stat, requirement] of Object.entries(requirements)){\n            const currentValue = playerStatus[stat];\n            if (currentValue === undefined) continue;\n            if (requirement.min !== undefined && currentValue < requirement.min) {\n                result.available = false;\n                result.missingRequirements.push(`${stat} >= ${requirement.min} (current: ${currentValue})`);\n            }\n            if (requirement.max !== undefined && currentValue > requirement.max) {\n                result.available = false;\n                result.missingRequirements.push(`${stat} <= ${requirement.max} (current: ${currentValue})`);\n            }\n        }\n        return result;\n    }\n    /**\r\n     * Check equipment requirements\r\n     * @param {Object} requirements - Equipment requirements\r\n     * @param {Object} inventoryManager - Inventory manager instance\r\n     * @returns {Object} Check result with details\r\n     */ _checkEquipmentRequirements(requirements, inventoryManager) {\n        const result = {\n            available: true,\n            missingRequirements: []\n        };\n        for (const [itemId, requirement] of Object.entries(requirements)){\n            const hasItem = inventoryManager && inventoryManager.hasItem(itemId, requirement.quantity || 1);\n            if (!hasItem) {\n                result.available = false;\n                const itemName = inventoryManager ? inventoryManager.getGameObject(itemId)?.displayName || itemId : itemId;\n                result.missingRequirements.push(`${itemName} (${requirement.quantity || 1})`);\n            }\n        }\n        return result;\n    }\n    /**\r\n     * Check cooldown for an action\r\n     * @param {string} actionName - Name of the action\r\n     * @param {number} cooldownTime - Cooldown time in milliseconds\r\n     * @returns {boolean} Whether cooldown has expired\r\n     */ _checkCooldown(actionName, cooldownTime) {\n        const lastUsed = this.actionCooldowns.get(actionName);\n        if (!lastUsed) return true;\n        const timeSinceLastUse = Date.now() - lastUsed;\n        return timeSinceLastUse >= cooldownTime;\n    }\n    /**\r\n     * Check quest requirements\r\n     * @param {Object} requirements - Quest requirements\r\n     * @param {Object} questSystem - Quest system instance\r\n     * @returns {boolean} Whether quest requirements are met\r\n     */ _checkQuestRequirements(requirements, questSystem) {\n        if (!questSystem) return true;\n        for (const requirement of requirements){\n            switch(requirement.type){\n                case 'questCompleted':\n                    if (!questSystem.isQuestCompleted(requirement.questId)) {\n                        return false;\n                    }\n                    break;\n                case 'questActive':\n                    if (!questSystem.isQuestActive(requirement.questId)) {\n                        return false;\n                    }\n                    break;\n                case 'questStage':\n                    if (!questSystem.isQuestAtStage(requirement.questId, requirement.stage)) {\n                        return false;\n                    }\n                    break;\n                default:\n                    return false;\n            }\n        }\n        return true;\n    }\n    /**\r\n     * Check NPC requirements\r\n     * @param {Object} requirements - NPC requirements\r\n     * @param {Object} npcSystem - NPC system instance\r\n     * @returns {boolean} Whether NPC requirements are met\r\n     */ _checkNPCRequirements(requirements, npcSystem) {\n        if (!npcSystem) return true;\n        for (const requirement of requirements){\n            switch(requirement.type){\n                case 'npcPresent':\n                    if (!npcSystem.isNPCPresent(requirement.npcId)) {\n                        return false;\n                    }\n                    break;\n                case 'npcRelationship':\n                    const relationship = npcSystem.getNPCRelationship(requirement.npcId);\n                    if (relationship < requirement.minRelationship) {\n                        return false;\n                    }\n                    break;\n                case 'npcQuest':\n                    if (!npcSystem.hasNPCQuest(requirement.npcId, requirement.questId)) {\n                        return false;\n                    }\n                    break;\n                default:\n                    return false;\n            }\n        }\n        return true;\n    }\n    /**\r\n     * Record action usage for cooldown tracking\r\n     * @param {string} actionName - Name of the action used\r\n     */ recordActionUsage(actionName) {\n        this.actionCooldowns.set(actionName, Date.now());\n    }\n    /**\r\n     * Get remaining cooldown time for an action\r\n     * @param {string} actionName - Name of the action\r\n     * @param {number} cooldownTime - Cooldown time in milliseconds\r\n     * @returns {number} Remaining cooldown time in milliseconds\r\n     */ getRemainingCooldown(actionName, cooldownTime) {\n        const lastUsed = this.actionCooldowns.get(actionName);\n        if (!lastUsed) return 0;\n        const timeSinceLastUse = Date.now() - lastUsed;\n        const remaining = cooldownTime - timeSinceLastUse;\n        return Math.max(0, remaining);\n    }\n    /**\r\n     * Update game time\r\n     * @param {Object} timeData - New time data\r\n     */ updateGameTime(timeData) {\n        this.gameTime = {\n            ...this.gameTime,\n            ...timeData\n        };\n        if (this.eventSystem) {\n            this.eventSystem.emit('time:update', timeData);\n        }\n    }\n    /**\r\n     * Update weather\r\n     * @param {Object} weatherData - New weather data\r\n     */ updateWeather(weatherData) {\n        this.weather = {\n            ...this.weather,\n            ...weatherData\n        };\n        if (this.eventSystem) {\n            this.eventSystem.emit('weather:change', weatherData);\n        }\n    }\n    /**\r\n     * Update player status\r\n     * @param {Object} statusData - New status data\r\n     */ updatePlayerStatus(statusData) {\n        this.playerStatus = {\n            ...this.playerStatus,\n            ...statusData\n        };\n        if (this.eventSystem) {\n            this.eventSystem.emit('player:status:update', statusData);\n        }\n    }\n    /**\r\n     * Notify systems of availability changes\r\n     */ _notifyAvailabilityChange() {\n        if (this.eventSystem) {\n            this.eventSystem.emit('action:availability:changed', {\n                gameTime: this.gameTime,\n                weather: this.weather,\n                playerStatus: this.playerStatus\n            });\n        }\n    }\n    /**\r\n     * Get current game state for debugging\r\n     * @returns {Object} Current state information\r\n     */ getDebugInfo() {\n        return {\n            gameTime: this.gameTime,\n            weather: this.weather,\n            playerStatus: this.playerStatus,\n            activeCooldowns: Array.from(this.actionCooldowns.entries()).map(([action, timestamp])=>({\n                    action,\n                    lastUsed: new Date(timestamp).toISOString(),\n                    timeSince: Date.now() - timestamp\n                })),\n            ruleCount: this.availabilityRules.size\n        };\n    }\n}\nif (false) {}\n// ES Module exports\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvbGliL2dhbWUtZW5naW5lL3N5c3RlbXMvQWN0aW9uQXZhaWxhYmlsaXR5RW5naW5lLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7Ozs7Ozs7Ozs7OztDQWFDLEdBRUQsTUFBTUE7SUFDRkMsWUFBWUMsV0FBVyxFQUFFQyxZQUFZLENBQUU7UUFDbkMsSUFBSSxDQUFDRCxXQUFXLEdBQUdBO1FBQ25CLElBQUksQ0FBQ0MsWUFBWSxHQUFHQTtRQUVwQixpQkFBaUI7UUFDakIsSUFBSSxDQUFDQyxpQkFBaUIsR0FBRyxJQUFJQztRQUU3QixvQkFBb0I7UUFDcEIsSUFBSSxDQUFDQyxlQUFlLEdBQUcsSUFBSUQ7UUFFM0IsZ0JBQWdCO1FBQ2hCLElBQUksQ0FBQ0UsUUFBUSxHQUFHO1lBQ1pDLE1BQU07WUFDTkMsUUFBUTtZQUNSQyxLQUFLO1lBQ0xDLFFBQVE7UUFDWjtRQUVBLGlCQUFpQjtRQUNqQixJQUFJLENBQUNDLE9BQU8sR0FBRztZQUNYQyxNQUFNO1lBQ05DLFdBQVc7WUFDWEMsYUFBYTtRQUNqQjtRQUVBLGdCQUFnQjtRQUNoQixJQUFJLENBQUNDLFlBQVksR0FBRztZQUNoQkMsUUFBUTtZQUNSQyxRQUFRO1lBQ1JDLFFBQVE7WUFDUkMsUUFBUTtZQUNSTCxhQUFhO1FBQ2pCO1FBRUEsSUFBSSxDQUFDTSx1QkFBdUI7UUFDNUIsSUFBSSxDQUFDQyxvQkFBb0I7SUFDN0I7SUFFQTs7S0FFQyxHQUNERCwwQkFBMEI7UUFDdEIsdUJBQXVCO1FBQ3ZCLElBQUksQ0FBQ0UsT0FBTyxDQUFDLFlBQVksQ0FBQ0MsUUFBUUM7WUFDOUIsTUFBTSxFQUFFQyxlQUFlLEVBQUVDLGNBQWMsRUFBRSxHQUFHRjtZQUM1QyxJQUFJLENBQUNELE9BQU9JLG9CQUFvQixFQUFFLE9BQU87WUFFekMsT0FBT0osT0FBT0ksb0JBQW9CLENBQUNDLElBQUksQ0FBQ0MsQ0FBQUE7Z0JBQ3BDLE9BQU8sSUFBSSxDQUFDQyx5QkFBeUIsQ0FBQ0QsYUFBYUosaUJBQWlC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Q1gsT0FBTztZQUNIMUgsVUFBVSxJQUFJLENBQUNBLFFBQVE7WUFDdkJLLFNBQVMsSUFBSSxDQUFDQSxPQUFPO1lBQ3JCSSxjQUFjLElBQUksQ0FBQ0EsWUFBWTtZQUMvQmtILGlCQUFpQkMsTUFBTUMsSUFBSSxDQUFDLElBQUksQ0FBQzlILGVBQWUsQ0FBQ3FGLE9BQU8sSUFBSTBDLEdBQUcsQ0FBQyxDQUFDLENBQUM3RyxRQUFROEcsVUFBVSxHQUFNO29CQUN0RjlHO29CQUNBOEUsVUFBVSxJQUFJRyxLQUFLNkIsV0FBV0MsV0FBVztvQkFDekNDLFdBQVcvQixLQUFLQyxHQUFHLEtBQUs0QjtnQkFDNUI7WUFDQUcsV0FBVyxJQUFJLENBQUNySSxpQkFBaUIsQ0FBQ3NJLElBQUk7UUFDMUM7SUFDSjtBQUNKO0FBRUEsSUFBSSxLQUE2QixFQUFFQyxFQUEyRDNJO0FBRTlGLG9CQUFvQjtBQUNnQiIsInNvdXJjZXMiOlsiQzpcXEdpdEh1YlxcU2VsZlxcdGF2ZXJuc1xcc3JjXFxsaWJcXGdhbWUtZW5naW5lXFxzeXN0ZW1zXFxBY3Rpb25BdmFpbGFiaWxpdHlFbmdpbmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEFjdGlvbiBBdmFpbGFiaWxpdHkgRW5naW5lXHJcbiAqIFxyXG4gKiBIYW5kbGVzIGR5bmFtaWMgYWN0aW9uIGF2YWlsYWJpbGl0eSBiYXNlZCBvbiB2YXJpb3VzIGNvbmRpdGlvbnM6XHJcbiAqIC0gTG9jYXRpb24tYmFzZWQgYXZhaWxhYmlsaXR5XHJcbiAqIC0gVGltZS1vZi1kYXkgcmVzdHJpY3Rpb25zXHJcbiAqIC0gV2VhdGhlci9lbnZpcm9ubWVudGFsIG1vZGlmaWVyc1xyXG4gKiAtIFF1ZXN0LWJhc2VkIHVubG9ja3NcclxuICogLSBOUEMgaW50ZXJhY3Rpb24gcmVxdWlyZW1lbnRzXHJcbiAqIC0gQWN0aW9uIGNvb2xkb3duc1xyXG4gKiAtIFByZXJlcXVpc2l0ZXMgYW5kIGRlcGVuZGVuY2llc1xyXG4gKiAtIFBsYXllciBzdGF0dXMgKGhlYWx0aCwgZW5lcmd5LCBldGMuKVxyXG4gKiAtIEVxdWlwbWVudCBhbmQgdG9vbCByZXF1aXJlbWVudHNcclxuICovXHJcblxyXG5jbGFzcyBBY3Rpb25BdmFpbGFiaWxpdHlFbmdpbmUge1xyXG4gICAgY29uc3RydWN0b3IoZXZlbnRTeXN0ZW0sIHN0YXRlTWFuYWdlcikge1xyXG4gICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0gPSBldmVudFN5c3RlbTtcclxuICAgICAgICB0aGlzLnN0YXRlTWFuYWdlciA9IHN0YXRlTWFuYWdlcjtcclxuICAgICAgICBcclxuICAgICAgICAvLyBSdWxlcyByZWdpc3RyeVxyXG4gICAgICAgIHRoaXMuYXZhaWxhYmlsaXR5UnVsZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ29vbGRvd24gdHJhY2tpbmdcclxuICAgICAgICB0aGlzLmFjdGlvbkNvb2xkb3ducyA9IG5ldyBNYXAoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBUaW1lIHRyYWNraW5nXHJcbiAgICAgICAgdGhpcy5nYW1lVGltZSA9IHtcclxuICAgICAgICAgICAgaG91cjogMTIsXHJcbiAgICAgICAgICAgIG1pbnV0ZTogMCxcclxuICAgICAgICAgICAgZGF5OiAxLFxyXG4gICAgICAgICAgICBzZWFzb246ICdzcHJpbmcnXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBXZWF0aGVyIHN5c3RlbVxyXG4gICAgICAgIHRoaXMud2VhdGhlciA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ2NsZWFyJyxcclxuICAgICAgICAgICAgaW50ZW5zaXR5OiAwLFxyXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZTogMjBcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFBsYXllciBzdGF0dXNcclxuICAgICAgICB0aGlzLnBsYXllclN0YXR1cyA9IHtcclxuICAgICAgICAgICAgaGVhbHRoOiAxMDAsXHJcbiAgICAgICAgICAgIGVuZXJneTogMTAwLFxyXG4gICAgICAgICAgICBodW5nZXI6IDAsXHJcbiAgICAgICAgICAgIHRoaXJzdDogMCxcclxuICAgICAgICAgICAgdGVtcGVyYXR1cmU6IDIwXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9pbml0aWFsaXplRGVmYXVsdFJ1bGVzKCk7XHJcbiAgICAgICAgdGhpcy5fc2V0dXBFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZSBkZWZhdWx0IGF2YWlsYWJpbGl0eSBydWxlc1xyXG4gICAgICovXHJcbiAgICBfaW5pdGlhbGl6ZURlZmF1bHRSdWxlcygpIHtcclxuICAgICAgICAvLyBMb2NhdGlvbi1iYXNlZCBydWxlc1xyXG4gICAgICAgIHRoaXMuYWRkUnVsZSgnbG9jYXRpb24nLCAoYWN0aW9uLCBjb250ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgY3VycmVudExvY2F0aW9uLCBsb2NhdGlvblN5c3RlbSB9ID0gY29udGV4dDtcclxuICAgICAgICAgICAgaWYgKCFhY3Rpb24ubG9jYXRpb25SZXN0cmljdGlvbnMpIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGFjdGlvbi5sb2NhdGlvblJlc3RyaWN0aW9ucy5zb21lKHJlc3RyaWN0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja0xvY2F0aW9uUmVzdHJpY3Rpb24ocmVzdHJpY3Rpb24sIGN1cnJlbnRMb2NhdGlvbiwgbG9jYXRpb25TeXN0ZW0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gVGltZS1iYXNlZCBydWxlc1xyXG4gICAgICAgIHRoaXMuYWRkUnVsZSgndGltZScsIChhY3Rpb24sIGNvbnRleHQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFhY3Rpb24udGltZVJlc3RyaWN0aW9ucykgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gYWN0aW9uLnRpbWVSZXN0cmljdGlvbnMuZXZlcnkocmVzdHJpY3Rpb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrVGltZVJlc3RyaWN0aW9uKHJlc3RyaWN0aW9uLCB0aGlzLmdhbWVUaW1lKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFdlYXRoZXItYmFzZWQgcnVsZXNcclxuICAgICAgICB0aGlzLmFkZFJ1bGUoJ3dlYXRoZXInLCAoYWN0aW9uLCBjb250ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghYWN0aW9uLndlYXRoZXJSZXN0cmljdGlvbnMpIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGFjdGlvbi53ZWF0aGVyUmVzdHJpY3Rpb25zLmV2ZXJ5KHJlc3RyaWN0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja1dlYXRoZXJSZXN0cmljdGlvbihyZXN0cmljdGlvbiwgdGhpcy53ZWF0aGVyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFBsYXllciBzdGF0dXMgcnVsZXNcclxuICAgICAgICB0aGlzLmFkZFJ1bGUoJ3BsYXllclN0YXR1cycsIChhY3Rpb24sIGNvbnRleHQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFhY3Rpb24ucGxheWVyU3RhdHVzUmVxdWlyZW1lbnRzKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja1BsYXllclN0YXR1c1JlcXVpcmVtZW50cyhhY3Rpb24ucGxheWVyU3RhdHVzUmVxdWlyZW1lbnRzLCB0aGlzLnBsYXllclN0YXR1cyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEVxdWlwbWVudCBydWxlc1xyXG4gICAgICAgIHRoaXMuYWRkUnVsZSgnZXF1aXBtZW50JywgKGFjdGlvbiwgY29udGV4dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWFjdGlvbi5lcXVpcG1lbnRSZXF1aXJlbWVudHMpIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgeyBpbnZlbnRvcnlNYW5hZ2VyIH0gPSBjb250ZXh0O1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tFcXVpcG1lbnRSZXF1aXJlbWVudHMoYWN0aW9uLmVxdWlwbWVudFJlcXVpcmVtZW50cywgaW52ZW50b3J5TWFuYWdlcik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIENvb2xkb3duIHJ1bGVzXHJcbiAgICAgICAgdGhpcy5hZGRSdWxlKCdjb29sZG93bicsIChhY3Rpb24sIGNvbnRleHQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFhY3Rpb24uY29vbGRvd24pIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrQ29vbGRvd24oYWN0aW9uLm5hbWUsIGFjdGlvbi5jb29sZG93bik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFF1ZXN0IHJ1bGVzXHJcbiAgICAgICAgdGhpcy5hZGRSdWxlKCdxdWVzdCcsIChhY3Rpb24sIGNvbnRleHQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFhY3Rpb24ucXVlc3RSZXF1aXJlbWVudHMpIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgeyBxdWVzdFN5c3RlbSB9ID0gY29udGV4dDtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUXVlc3RSZXF1aXJlbWVudHMoYWN0aW9uLnF1ZXN0UmVxdWlyZW1lbnRzLCBxdWVzdFN5c3RlbSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIE5QQyBpbnRlcmFjdGlvbiBydWxlc1xyXG4gICAgICAgIHRoaXMuYWRkUnVsZSgnbnBjJywgKGFjdGlvbiwgY29udGV4dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWFjdGlvbi5ucGNSZXF1aXJlbWVudHMpIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgeyBucGNTeXN0ZW0gfSA9IGNvbnRleHQ7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja05QQ1JlcXVpcmVtZW50cyhhY3Rpb24ubnBjUmVxdWlyZW1lbnRzLCBucGNTeXN0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0dXAgZXZlbnQgbGlzdGVuZXJzIGZvciBkeW5hbWljIHVwZGF0ZXNcclxuICAgICAqL1xyXG4gICAgX3NldHVwRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZXZlbnRTeXN0ZW0pIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudFN5c3RlbS5vbigndGltZTp1cGRhdGUnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lVGltZSA9IHsgLi4udGhpcy5nYW1lVGltZSwgLi4uZGF0YSB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbm90aWZ5QXZhaWxhYmlsaXR5Q2hhbmdlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudFN5c3RlbS5vbignd2VhdGhlcjpjaGFuZ2UnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53ZWF0aGVyID0geyAuLi50aGlzLndlYXRoZXIsIC4uLmRhdGEgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX25vdGlmeUF2YWlsYWJpbGl0eUNoYW5nZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0ub24oJ3BsYXllcjpzdGF0dXM6dXBkYXRlJywgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyU3RhdHVzID0geyAuLi50aGlzLnBsYXllclN0YXR1cywgLi4uZGF0YSB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbm90aWZ5QXZhaWxhYmlsaXR5Q2hhbmdlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudFN5c3RlbS5vbignbG9jYXRpb246Y2hhbmdlJywgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX25vdGlmeUF2YWlsYWJpbGl0eUNoYW5nZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0ub24oJ3F1ZXN0OnVwZGF0ZScsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9ub3RpZnlBdmFpbGFiaWxpdHlDaGFuZ2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLm9uKCducGM6aW50ZXJhY3Rpb24nLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbm90aWZ5QXZhaWxhYmlsaXR5Q2hhbmdlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCBhIGN1c3RvbSBhdmFpbGFiaWxpdHkgcnVsZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJ1bGVOYW1lIC0gTmFtZSBvZiB0aGUgcnVsZVxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcnVsZUZ1bmN0aW9uIC0gRnVuY3Rpb24gdGhhdCByZXR1cm5zIGJvb2xlYW5cclxuICAgICAqL1xyXG4gICAgYWRkUnVsZShydWxlTmFtZSwgcnVsZUZ1bmN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5hdmFpbGFiaWxpdHlSdWxlcy5zZXQocnVsZU5hbWUsIHJ1bGVGdW5jdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBhbiBhY3Rpb24gaXMgYXZhaWxhYmxlIGdpdmVuIHRoZSBjdXJyZW50IGNvbnRleHRcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBhY3Rpb24gLSBUaGUgYWN0aW9uIHRvIGNoZWNrXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dCAtIEN1cnJlbnQgZ2FtZSBjb250ZXh0XHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBBdmFpbGFiaWxpdHkgcmVzdWx0IHdpdGggZGV0YWlsc1xyXG4gICAgICovXHJcbiAgICBjaGVja0FjdGlvbkF2YWlsYWJpbGl0eShhY3Rpb24sIGNvbnRleHQpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgIGF2YWlsYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgcmVhc29uczogW10sXHJcbiAgICAgICAgICAgIG1pc3NpbmdSZXF1aXJlbWVudHM6IFtdXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgZWFjaCBydWxlXHJcbiAgICAgICAgZm9yIChjb25zdCBbcnVsZU5hbWUsIHJ1bGVGdW5jdGlvbl0gb2YgdGhpcy5hdmFpbGFiaWxpdHlSdWxlcykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcnVsZVJlc3VsdCA9IHJ1bGVGdW5jdGlvbihhY3Rpb24sIGNvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJ1bGVSZXN1bHQgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcnVsZVJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXZhaWxhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWFzb25zLnB1c2goYEZhaWxlZCAke3J1bGVOYW1lfSBjaGVja2ApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocnVsZVJlc3VsdCAmJiB0eXBlb2YgcnVsZVJlc3VsdCA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJ1bGVSZXN1bHQuYXZhaWxhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hdmFpbGFibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnJlYXNvbnMucHVzaChydWxlUmVzdWx0LnJlYXNvbiB8fCBgRmFpbGVkICR7cnVsZU5hbWV9IGNoZWNrYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChydWxlUmVzdWx0Lm1pc3NpbmdSZXF1aXJlbWVudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5taXNzaW5nUmVxdWlyZW1lbnRzLnB1c2goLi4ucnVsZVJlc3VsdC5taXNzaW5nUmVxdWlyZW1lbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGNoZWNraW5nICR7cnVsZU5hbWV9IHJ1bGUgZm9yIGFjdGlvbiAke2FjdGlvbi5uYW1lfTpgLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQuYXZhaWxhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQucmVhc29ucy5wdXNoKGBFcnJvciBpbiAke3J1bGVOYW1lfSBjaGVja2ApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgbG9jYXRpb24gcmVzdHJpY3Rpb25cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXN0cmljdGlvbiAtIExvY2F0aW9uIHJlc3RyaWN0aW9uIG9iamVjdFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGN1cnJlbnRMb2NhdGlvbiAtIEN1cnJlbnQgcGxheWVyIGxvY2F0aW9uXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbG9jYXRpb25TeXN0ZW0gLSBMb2NhdGlvbiBzeXN0ZW0gaW5zdGFuY2VcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIGxvY2F0aW9uIHJlcXVpcmVtZW50IGlzIG1ldFxyXG4gICAgICovXHJcbiAgICBfY2hlY2tMb2NhdGlvblJlc3RyaWN0aW9uKHJlc3RyaWN0aW9uLCBjdXJyZW50TG9jYXRpb24sIGxvY2F0aW9uU3lzdGVtKSB7XHJcbiAgICAgICAgaWYgKCFjdXJyZW50TG9jYXRpb24gfHwgIWxvY2F0aW9uU3lzdGVtKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIHN3aXRjaCAocmVzdHJpY3Rpb24udHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdzcG90JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50TG9jYXRpb24uc3BvdCA9PT0gcmVzdHJpY3Rpb24uc3BvdElkO1xyXG4gICAgICAgICAgICBjYXNlICdyZWdpb24nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRMb2NhdGlvbi5yZWdpb24gPT09IHJlc3RyaWN0aW9uLnJlZ2lvbklkO1xyXG4gICAgICAgICAgICBjYXNlICdjb3VudHJ5JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50TG9jYXRpb24uY291bnRyeSA9PT0gcmVzdHJpY3Rpb24uY291bnRyeUlkO1xyXG4gICAgICAgICAgICBjYXNlICdjb250aW5lbnQnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRMb2NhdGlvbi5jb250aW5lbnQgPT09IHJlc3RyaWN0aW9uLmNvbnRpbmVudElkO1xyXG4gICAgICAgICAgICBjYXNlICdnbG9iZSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudExvY2F0aW9uLmdsb2JlID09PSByZXN0cmljdGlvbi5nbG9iZUlkO1xyXG4gICAgICAgICAgICBjYXNlICdiaW9tZSc6XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U3BvdCA9IGxvY2F0aW9uU3lzdGVtLmdldEN1cnJlbnRTcG90KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudFNwb3QgJiYgY3VycmVudFNwb3QuYmlvbWUgPT09IHJlc3RyaWN0aW9uLmJpb21lVHlwZTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayB0aW1lIHJlc3RyaWN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVzdHJpY3Rpb24gLSBUaW1lIHJlc3RyaWN0aW9uIG9iamVjdFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGdhbWVUaW1lIC0gQ3VycmVudCBnYW1lIHRpbWVcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIHRpbWUgcmVxdWlyZW1lbnQgaXMgbWV0XHJcbiAgICAgKi9cclxuICAgIF9jaGVja1RpbWVSZXN0cmljdGlvbihyZXN0cmljdGlvbiwgZ2FtZVRpbWUpIHtcclxuICAgICAgICBzd2l0Y2ggKHJlc3RyaWN0aW9uLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnaG91cic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2FtZVRpbWUuaG91ciA+PSByZXN0cmljdGlvbi5taW4gJiYgZ2FtZVRpbWUuaG91ciA8PSByZXN0cmljdGlvbi5tYXg7XHJcbiAgICAgICAgICAgIGNhc2UgJ2RheSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2FtZVRpbWUuZGF5ID49IHJlc3RyaWN0aW9uLm1pbiAmJiBnYW1lVGltZS5kYXkgPD0gcmVzdHJpY3Rpb24ubWF4O1xyXG4gICAgICAgICAgICBjYXNlICdzZWFzb24nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3RyaWN0aW9uLnNlYXNvbnMuaW5jbHVkZXMoZ2FtZVRpbWUuc2Vhc29uKTtcclxuICAgICAgICAgICAgY2FzZSAndGltZU9mRGF5JzpcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhvdXIgPSBnYW1lVGltZS5ob3VyO1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChyZXN0cmljdGlvbi50aW1lT2ZEYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdkYXduJzogcmV0dXJuIGhvdXIgPj0gNSAmJiBob3VyIDwgODtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdtb3JuaW5nJzogcmV0dXJuIGhvdXIgPj0gOCAmJiBob3VyIDwgMTI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWZ0ZXJub29uJzogcmV0dXJuIGhvdXIgPj0gMTIgJiYgaG91ciA8IDE3O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2V2ZW5pbmcnOiByZXR1cm4gaG91ciA+PSAxNyAmJiBob3VyIDwgMjA7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbmlnaHQnOiByZXR1cm4gaG91ciA+PSAyMCB8fCBob3VyIDwgNTtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgd2VhdGhlciByZXN0cmljdGlvblxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlc3RyaWN0aW9uIC0gV2VhdGhlciByZXN0cmljdGlvbiBvYmplY3RcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSB3ZWF0aGVyIC0gQ3VycmVudCB3ZWF0aGVyXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciB3ZWF0aGVyIHJlcXVpcmVtZW50IGlzIG1ldFxyXG4gICAgICovXHJcbiAgICBfY2hlY2tXZWF0aGVyUmVzdHJpY3Rpb24ocmVzdHJpY3Rpb24sIHdlYXRoZXIpIHtcclxuICAgICAgICBzd2l0Y2ggKHJlc3RyaWN0aW9uLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnd2VhdGhlclR5cGUnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3RyaWN0aW9uLmFsbG93ZWRUeXBlcy5pbmNsdWRlcyh3ZWF0aGVyLnR5cGUpO1xyXG4gICAgICAgICAgICBjYXNlICd0ZW1wZXJhdHVyZSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd2VhdGhlci50ZW1wZXJhdHVyZSA+PSByZXN0cmljdGlvbi5taW4gJiYgd2VhdGhlci50ZW1wZXJhdHVyZSA8PSByZXN0cmljdGlvbi5tYXg7XHJcbiAgICAgICAgICAgIGNhc2UgJ2ludGVuc2l0eSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd2VhdGhlci5pbnRlbnNpdHkgPj0gcmVzdHJpY3Rpb24ubWluICYmIHdlYXRoZXIuaW50ZW5zaXR5IDw9IHJlc3RyaWN0aW9uLm1heDtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBwbGF5ZXIgc3RhdHVzIHJlcXVpcmVtZW50c1xyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlcXVpcmVtZW50cyAtIFBsYXllciBzdGF0dXMgcmVxdWlyZW1lbnRzXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGxheWVyU3RhdHVzIC0gQ3VycmVudCBwbGF5ZXIgc3RhdHVzXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBDaGVjayByZXN1bHQgd2l0aCBkZXRhaWxzXHJcbiAgICAgKi9cclxuICAgIF9jaGVja1BsYXllclN0YXR1c1JlcXVpcmVtZW50cyhyZXF1aXJlbWVudHMsIHBsYXllclN0YXR1cykge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHsgYXZhaWxhYmxlOiB0cnVlLCBtaXNzaW5nUmVxdWlyZW1lbnRzOiBbXSB9O1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IFtzdGF0LCByZXF1aXJlbWVudF0gb2YgT2JqZWN0LmVudHJpZXMocmVxdWlyZW1lbnRzKSkge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBwbGF5ZXJTdGF0dXNbc3RhdF07XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50VmFsdWUgPT09IHVuZGVmaW5lZCkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVxdWlyZW1lbnQubWluICE9PSB1bmRlZmluZWQgJiYgY3VycmVudFZhbHVlIDwgcmVxdWlyZW1lbnQubWluKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQuYXZhaWxhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQubWlzc2luZ1JlcXVpcmVtZW50cy5wdXNoKGAke3N0YXR9ID49ICR7cmVxdWlyZW1lbnQubWlufSAoY3VycmVudDogJHtjdXJyZW50VmFsdWV9KWApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocmVxdWlyZW1lbnQubWF4ICE9PSB1bmRlZmluZWQgJiYgY3VycmVudFZhbHVlID4gcmVxdWlyZW1lbnQubWF4KSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQuYXZhaWxhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQubWlzc2luZ1JlcXVpcmVtZW50cy5wdXNoKGAke3N0YXR9IDw9ICR7cmVxdWlyZW1lbnQubWF4fSAoY3VycmVudDogJHtjdXJyZW50VmFsdWV9KWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgZXF1aXBtZW50IHJlcXVpcmVtZW50c1xyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlcXVpcmVtZW50cyAtIEVxdWlwbWVudCByZXF1aXJlbWVudHNcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnZlbnRvcnlNYW5hZ2VyIC0gSW52ZW50b3J5IG1hbmFnZXIgaW5zdGFuY2VcclxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IENoZWNrIHJlc3VsdCB3aXRoIGRldGFpbHNcclxuICAgICAqL1xyXG4gICAgX2NoZWNrRXF1aXBtZW50UmVxdWlyZW1lbnRzKHJlcXVpcmVtZW50cywgaW52ZW50b3J5TWFuYWdlcikge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHsgYXZhaWxhYmxlOiB0cnVlLCBtaXNzaW5nUmVxdWlyZW1lbnRzOiBbXSB9O1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IFtpdGVtSWQsIHJlcXVpcmVtZW50XSBvZiBPYmplY3QuZW50cmllcyhyZXF1aXJlbWVudHMpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhc0l0ZW0gPSBpbnZlbnRvcnlNYW5hZ2VyICYmIGludmVudG9yeU1hbmFnZXIuaGFzSXRlbShpdGVtSWQsIHJlcXVpcmVtZW50LnF1YW50aXR5IHx8IDEpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFoYXNJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQuYXZhaWxhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtTmFtZSA9IGludmVudG9yeU1hbmFnZXIgPyBcclxuICAgICAgICAgICAgICAgICAgICBpbnZlbnRvcnlNYW5hZ2VyLmdldEdhbWVPYmplY3QoaXRlbUlkKT8uZGlzcGxheU5hbWUgfHwgaXRlbUlkIDogXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0Lm1pc3NpbmdSZXF1aXJlbWVudHMucHVzaChgJHtpdGVtTmFtZX0gKCR7cmVxdWlyZW1lbnQucXVhbnRpdHkgfHwgMX0pYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBjb29sZG93biBmb3IgYW4gYWN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYWN0aW9uTmFtZSAtIE5hbWUgb2YgdGhlIGFjdGlvblxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNvb2xkb3duVGltZSAtIENvb2xkb3duIHRpbWUgaW4gbWlsbGlzZWNvbmRzXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciBjb29sZG93biBoYXMgZXhwaXJlZFxyXG4gICAgICovXHJcbiAgICBfY2hlY2tDb29sZG93bihhY3Rpb25OYW1lLCBjb29sZG93blRpbWUpIHtcclxuICAgICAgICBjb25zdCBsYXN0VXNlZCA9IHRoaXMuYWN0aW9uQ29vbGRvd25zLmdldChhY3Rpb25OYW1lKTtcclxuICAgICAgICBpZiAoIWxhc3RVc2VkKSByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdFVzZSA9IERhdGUubm93KCkgLSBsYXN0VXNlZDtcclxuICAgICAgICByZXR1cm4gdGltZVNpbmNlTGFzdFVzZSA+PSBjb29sZG93blRpbWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBxdWVzdCByZXF1aXJlbWVudHNcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXF1aXJlbWVudHMgLSBRdWVzdCByZXF1aXJlbWVudHNcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBxdWVzdFN5c3RlbSAtIFF1ZXN0IHN5c3RlbSBpbnN0YW5jZVxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgcXVlc3QgcmVxdWlyZW1lbnRzIGFyZSBtZXRcclxuICAgICAqL1xyXG4gICAgX2NoZWNrUXVlc3RSZXF1aXJlbWVudHMocmVxdWlyZW1lbnRzLCBxdWVzdFN5c3RlbSkge1xyXG4gICAgICAgIGlmICghcXVlc3RTeXN0ZW0pIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IHJlcXVpcmVtZW50IG9mIHJlcXVpcmVtZW50cykge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHJlcXVpcmVtZW50LnR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3F1ZXN0Q29tcGxldGVkJzpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXF1ZXN0U3lzdGVtLmlzUXVlc3RDb21wbGV0ZWQocmVxdWlyZW1lbnQucXVlc3RJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3F1ZXN0QWN0aXZlJzpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXF1ZXN0U3lzdGVtLmlzUXVlc3RBY3RpdmUocmVxdWlyZW1lbnQucXVlc3RJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3F1ZXN0U3RhZ2UnOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcXVlc3RTeXN0ZW0uaXNRdWVzdEF0U3RhZ2UocmVxdWlyZW1lbnQucXVlc3RJZCwgcmVxdWlyZW1lbnQuc3RhZ2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBOUEMgcmVxdWlyZW1lbnRzXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVxdWlyZW1lbnRzIC0gTlBDIHJlcXVpcmVtZW50c1xyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG5wY1N5c3RlbSAtIE5QQyBzeXN0ZW0gaW5zdGFuY2VcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIE5QQyByZXF1aXJlbWVudHMgYXJlIG1ldFxyXG4gICAgICovXHJcbiAgICBfY2hlY2tOUENSZXF1aXJlbWVudHMocmVxdWlyZW1lbnRzLCBucGNTeXN0ZW0pIHtcclxuICAgICAgICBpZiAoIW5wY1N5c3RlbSkgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgcmVxdWlyZW1lbnQgb2YgcmVxdWlyZW1lbnRzKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAocmVxdWlyZW1lbnQudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbnBjUHJlc2VudCc6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFucGNTeXN0ZW0uaXNOUENQcmVzZW50KHJlcXVpcmVtZW50Lm5wY0lkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbnBjUmVsYXRpb25zaGlwJzpcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWxhdGlvbnNoaXAgPSBucGNTeXN0ZW0uZ2V0TlBDUmVsYXRpb25zaGlwKHJlcXVpcmVtZW50Lm5wY0lkKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVsYXRpb25zaGlwIDwgcmVxdWlyZW1lbnQubWluUmVsYXRpb25zaGlwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICducGNRdWVzdCc6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFucGNTeXN0ZW0uaGFzTlBDUXVlc3QocmVxdWlyZW1lbnQubnBjSWQsIHJlcXVpcmVtZW50LnF1ZXN0SWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWNvcmQgYWN0aW9uIHVzYWdlIGZvciBjb29sZG93biB0cmFja2luZ1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFjdGlvbk5hbWUgLSBOYW1lIG9mIHRoZSBhY3Rpb24gdXNlZFxyXG4gICAgICovXHJcbiAgICByZWNvcmRBY3Rpb25Vc2FnZShhY3Rpb25OYW1lKSB7XHJcbiAgICAgICAgdGhpcy5hY3Rpb25Db29sZG93bnMuc2V0KGFjdGlvbk5hbWUsIERhdGUubm93KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHJlbWFpbmluZyBjb29sZG93biB0aW1lIGZvciBhbiBhY3Rpb25cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhY3Rpb25OYW1lIC0gTmFtZSBvZiB0aGUgYWN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY29vbGRvd25UaW1lIC0gQ29vbGRvd24gdGltZSBpbiBtaWxsaXNlY29uZHNcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJlbWFpbmluZyBjb29sZG93biB0aW1lIGluIG1pbGxpc2Vjb25kc1xyXG4gICAgICovXHJcbiAgICBnZXRSZW1haW5pbmdDb29sZG93bihhY3Rpb25OYW1lLCBjb29sZG93blRpbWUpIHtcclxuICAgICAgICBjb25zdCBsYXN0VXNlZCA9IHRoaXMuYWN0aW9uQ29vbGRvd25zLmdldChhY3Rpb25OYW1lKTtcclxuICAgICAgICBpZiAoIWxhc3RVc2VkKSByZXR1cm4gMDtcclxuXHJcbiAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdFVzZSA9IERhdGUubm93KCkgLSBsYXN0VXNlZDtcclxuICAgICAgICBjb25zdCByZW1haW5pbmcgPSBjb29sZG93blRpbWUgLSB0aW1lU2luY2VMYXN0VXNlO1xyXG4gICAgICAgIHJldHVybiBNYXRoLm1heCgwLCByZW1haW5pbmcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIGdhbWUgdGltZVxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHRpbWVEYXRhIC0gTmV3IHRpbWUgZGF0YVxyXG4gICAgICovXHJcbiAgICB1cGRhdGVHYW1lVGltZSh0aW1lRGF0YSkge1xyXG4gICAgICAgIHRoaXMuZ2FtZVRpbWUgPSB7IC4uLnRoaXMuZ2FtZVRpbWUsIC4uLnRpbWVEYXRhIH07XHJcbiAgICAgICAgaWYgKHRoaXMuZXZlbnRTeXN0ZW0pIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudFN5c3RlbS5lbWl0KCd0aW1lOnVwZGF0ZScsIHRpbWVEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgd2VhdGhlclxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHdlYXRoZXJEYXRhIC0gTmV3IHdlYXRoZXIgZGF0YVxyXG4gICAgICovXHJcbiAgICB1cGRhdGVXZWF0aGVyKHdlYXRoZXJEYXRhKSB7XHJcbiAgICAgICAgdGhpcy53ZWF0aGVyID0geyAuLi50aGlzLndlYXRoZXIsIC4uLndlYXRoZXJEYXRhIH07XHJcbiAgICAgICAgaWYgKHRoaXMuZXZlbnRTeXN0ZW0pIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudFN5c3RlbS5lbWl0KCd3ZWF0aGVyOmNoYW5nZScsIHdlYXRoZXJEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgcGxheWVyIHN0YXR1c1xyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHN0YXR1c0RhdGEgLSBOZXcgc3RhdHVzIGRhdGFcclxuICAgICAqL1xyXG4gICAgdXBkYXRlUGxheWVyU3RhdHVzKHN0YXR1c0RhdGEpIHtcclxuICAgICAgICB0aGlzLnBsYXllclN0YXR1cyA9IHsgLi4udGhpcy5wbGF5ZXJTdGF0dXMsIC4uLnN0YXR1c0RhdGEgfTtcclxuICAgICAgICBpZiAodGhpcy5ldmVudFN5c3RlbSkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLmVtaXQoJ3BsYXllcjpzdGF0dXM6dXBkYXRlJywgc3RhdHVzRGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTm90aWZ5IHN5c3RlbXMgb2YgYXZhaWxhYmlsaXR5IGNoYW5nZXNcclxuICAgICAqL1xyXG4gICAgX25vdGlmeUF2YWlsYWJpbGl0eUNoYW5nZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5ldmVudFN5c3RlbSkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLmVtaXQoJ2FjdGlvbjphdmFpbGFiaWxpdHk6Y2hhbmdlZCcsIHtcclxuICAgICAgICAgICAgICAgIGdhbWVUaW1lOiB0aGlzLmdhbWVUaW1lLFxyXG4gICAgICAgICAgICAgICAgd2VhdGhlcjogdGhpcy53ZWF0aGVyLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyU3RhdHVzOiB0aGlzLnBsYXllclN0YXR1c1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgY3VycmVudCBnYW1lIHN0YXRlIGZvciBkZWJ1Z2dpbmdcclxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IEN1cnJlbnQgc3RhdGUgaW5mb3JtYXRpb25cclxuICAgICAqL1xyXG4gICAgZ2V0RGVidWdJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGdhbWVUaW1lOiB0aGlzLmdhbWVUaW1lLFxyXG4gICAgICAgICAgICB3ZWF0aGVyOiB0aGlzLndlYXRoZXIsXHJcbiAgICAgICAgICAgIHBsYXllclN0YXR1czogdGhpcy5wbGF5ZXJTdGF0dXMsXHJcbiAgICAgICAgICAgIGFjdGl2ZUNvb2xkb3duczogQXJyYXkuZnJvbSh0aGlzLmFjdGlvbkNvb2xkb3ducy5lbnRyaWVzKCkpLm1hcCgoW2FjdGlvbiwgdGltZXN0YW1wXSkgPT4gKHtcclxuICAgICAgICAgICAgICAgIGFjdGlvbixcclxuICAgICAgICAgICAgICAgIGxhc3RVc2VkOiBuZXcgRGF0ZSh0aW1lc3RhbXApLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB0aW1lU2luY2U6IERhdGUubm93KCkgLSB0aW1lc3RhbXBcclxuICAgICAgICAgICAgfSkpLFxyXG4gICAgICAgICAgICBydWxlQ291bnQ6IHRoaXMuYXZhaWxhYmlsaXR5UnVsZXMuc2l6ZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgd2luZG93LkFjdGlvbkF2YWlsYWJpbGl0eUVuZ2luZSA9IEFjdGlvbkF2YWlsYWJpbGl0eUVuZ2luZTtcclxuXHJcbi8vIEVTIE1vZHVsZSBleHBvcnRzXHJcbmV4cG9ydCB7IEFjdGlvbkF2YWlsYWJpbGl0eUVuZ2luZSB9OyAiXSwibmFtZXMiOlsiQWN0aW9uQXZhaWxhYmlsaXR5RW5naW5lIiwiY29uc3RydWN0b3IiLCJldmVudFN5c3RlbSIsInN0YXRlTWFuYWdlciIsImF2YWlsYWJpbGl0eVJ1bGVzIiwiTWFwIiwiYWN0aW9uQ29vbGRvd25zIiwiZ2FtZVRpbWUiLCJob3VyIiwibWludXRlIiwiZGF5Iiwic2Vhc29uIiwid2VhdGhlciIsInR5cGUiLCJpbnRlbnNpdHkiLCJ0ZW1wZXJhdHVyZSIsInBsYXllclN0YXR1cyIsImhlYWx0aCIsImVuZXJneSIsImh1bmdlciIsInRoaXJzdCIsIl9pbml0aWFsaXplRGVmYXVsdFJ1bGVzIiwiX3NldHVwRXZlbnRMaXN0ZW5lcnMiLCJhZGRSdWxlIiwiYWN0aW9uIiwiY29udGV4dCIsImN1cnJlbnRMb2NhdGlvbiIsImxvY2F0aW9uU3lzdGVtIiwibG9jYXRpb25SZXN0cmljdGlvbnMiLCJzb21lIiwicmVzdHJpY3Rpb24iLCJfY2hlY2tMb2NhdGlvblJlc3RyaWN0aW9uIiwidGltZVJlc3RyaWN0aW9ucyIsImV2ZXJ5IiwiX2NoZWNrVGltZVJlc3RyaWN0aW9uIiwid2VhdGhlclJlc3RyaWN0aW9ucyIsIl9jaGVja1dlYXRoZXJSZXN0cmljdGlvbiIsInBsYXllclN0YXR1c1JlcXVpcmVtZW50cyIsIl9jaGVja1BsYXllclN0YXR1c1JlcXVpcmVtZW50cyIsImVxdWlwbWVudFJlcXVpcmVtZW50cyIsImludmVudG9yeU1hbmFnZXIiLCJfY2hlY2tFcXVpcG1lbnRSZXF1aXJlbWVudHMiLCJjb29sZG93biIsIl9jaGVja0Nvb2xkb3duIiwibmFtZSIsInF1ZXN0UmVxdWlyZW1lbnRzIiwicXVlc3RTeXN0ZW0iLCJfY2hlY2tRdWVzdFJlcXVpcmVtZW50cyIsIm5wY1JlcXVpcmVtZW50cyIsIm5wY1N5c3RlbSIsIl9jaGVja05QQ1JlcXVpcmVtZW50cyIsIm9uIiwiZGF0YSIsIl9ub3RpZnlBdmFpbGFiaWxpdHlDaGFuZ2UiLCJydWxlTmFtZSIsInJ1bGVGdW5jdGlvbiIsInNldCIsImNoZWNrQWN0aW9uQXZhaWxhYmlsaXR5IiwicmVzdWx0IiwiYXZhaWxhYmxlIiwicmVhc29ucyIsIm1pc3NpbmdSZXF1aXJlbWVudHMiLCJydWxlUmVzdWx0IiwicHVzaCIsInJlYXNvbiIsImVycm9yIiwiY29uc29sZSIsInNwb3QiLCJzcG90SWQiLCJyZWdpb24iLCJyZWdpb25JZCIsImNvdW50cnkiLCJjb3VudHJ5SWQiLCJjb250aW5lbnQiLCJjb250aW5lbnRJZCIsImdsb2JlIiwiZ2xvYmVJZCIsImN1cnJlbnRTcG90IiwiZ2V0Q3VycmVudFNwb3QiLCJiaW9tZSIsImJpb21lVHlwZSIsIm1pbiIsIm1heCIsInNlYXNvbnMiLCJpbmNsdWRlcyIsInRpbWVPZkRheSIsImFsbG93ZWRUeXBlcyIsInJlcXVpcmVtZW50cyIsInN0YXQiLCJyZXF1aXJlbWVudCIsIk9iamVjdCIsImVudHJpZXMiLCJjdXJyZW50VmFsdWUiLCJ1bmRlZmluZWQiLCJpdGVtSWQiLCJoYXNJdGVtIiwicXVhbnRpdHkiLCJpdGVtTmFtZSIsImdldEdhbWVPYmplY3QiLCJkaXNwbGF5TmFtZSIsImFjdGlvbk5hbWUiLCJjb29sZG93blRpbWUiLCJsYXN0VXNlZCIsImdldCIsInRpbWVTaW5jZUxhc3RVc2UiLCJEYXRlIiwibm93IiwiaXNRdWVzdENvbXBsZXRlZCIsInF1ZXN0SWQiLCJpc1F1ZXN0QWN0aXZlIiwiaXNRdWVzdEF0U3RhZ2UiLCJzdGFnZSIsImlzTlBDUHJlc2VudCIsIm5wY0lkIiwicmVsYXRpb25zaGlwIiwiZ2V0TlBDUmVsYXRpb25zaGlwIiwibWluUmVsYXRpb25zaGlwIiwiaGFzTlBDUXVlc3QiLCJyZWNvcmRBY3Rpb25Vc2FnZSIsImdldFJlbWFpbmluZ0Nvb2xkb3duIiwicmVtYWluaW5nIiwiTWF0aCIsInVwZGF0ZUdhbWVUaW1lIiwidGltZURhdGEiLCJlbWl0IiwidXBkYXRlV2VhdGhlciIsIndlYXRoZXJEYXRhIiwidXBkYXRlUGxheWVyU3RhdHVzIiwic3RhdHVzRGF0YSIsImdldERlYnVnSW5mbyIsImFjdGl2ZUNvb2xkb3ducyIsIkFycmF5IiwiZnJvbSIsIm1hcCIsInRpbWVzdGFtcCIsInRvSVNPU3RyaW5nIiwidGltZVNpbmNlIiwicnVsZUNvdW50Iiwic2l6ZSIsIndpbmRvdyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/game-engine/systems/ActionAvailabilityEngine.js\n");

/***/ })

};
;