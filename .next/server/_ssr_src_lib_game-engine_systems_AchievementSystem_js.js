"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_src_lib_game-engine_systems_AchievementSystem_js";
exports.ids = ["_ssr_src_lib_game-engine_systems_AchievementSystem_js"];
exports.modules = {

/***/ "(ssr)/./src/lib/game-engine/systems/AchievementSystem.js":
/*!**********************************************************!*\
  !*** ./src/lib/game-engine/systems/AchievementSystem.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AchievementSystem: () => (/* binding */ AchievementSystem)\n/* harmony export */ });\n/**\r\n * Achievement System\r\n * \r\n * Manages achievements, tracks progress, and handles achievement unlocking.\r\n * Integrates with other systems to monitor game state and award achievements.\r\n */ class AchievementSystem {\n    constructor(achievementsData, stateManager, eventSystem){\n        this.achievementsData = achievementsData || {};\n        this.stateManager = stateManager;\n        this.eventSystem = eventSystem;\n        // System references\n        this.skillManager = null;\n        this.inventoryManager = null;\n        // Achievement state\n        this.unlockedAchievements = new Set();\n        this.achievementProgress = {};\n        // Initialize achievement progress tracking\n        this._initializeProgress();\n    }\n    /**\r\n     * Initialize the achievement system\r\n     */ async initialize() {\n        console.log('Initializing Achievement System');\n        // Load saved achievement state\n        this._loadAchievementState();\n        // Set up event listeners for achievement tracking\n        this._setupEventListeners();\n        // Check for any achievements that should already be unlocked\n        this._checkInitialAchievements();\n        console.log('Achievement System initialized');\n    }\n    /**\r\n     * Get all achievements data\r\n     * @returns {Object} All achievements configuration\r\n     */ getAllAchievements() {\n        return this.achievementsData;\n    }\n    /**\r\n     * Get unlocked achievements\r\n     * @returns {Set} Set of unlocked achievement IDs\r\n     */ getUnlockedAchievements() {\n        return this.unlockedAchievements;\n    }\n    /**\r\n     * Get achievement progress\r\n     * @returns {Object} Achievement progress data\r\n     */ getAchievementProgress() {\n        return this.achievementProgress;\n    }\n    /**\r\n     * Check if an achievement is unlocked\r\n     * @param {string} achievementId - The achievement ID to check\r\n     * @returns {boolean} True if achievement is unlocked\r\n     */ isAchievementUnlocked(achievementId) {\n        return this.unlockedAchievements.has(achievementId);\n    }\n    /**\r\n     * Get total achievement points earned\r\n     * @returns {number} Total points from unlocked achievements\r\n     */ getTotalPoints() {\n        let total = 0;\n        for (const achievementId of this.unlockedAchievements){\n            const achievement = this.achievementsData[achievementId];\n            if (achievement) {\n                total += achievement.points || 0;\n            }\n        }\n        return total;\n    }\n    /**\r\n     * Check and unlock achievements based on current game state\r\n     * This is the main method that will be called to evaluate achievements\r\n     */ checkAchievements() {\n        const gameState = this.stateManager.getState();\n        for (const [achievementId, achievement] of Object.entries(this.achievementsData)){\n            if (this.unlockedAchievements.has(achievementId)) {\n                continue; // Already unlocked\n            }\n            if (this._evaluateAchievement(achievement, gameState)) {\n                this._unlockAchievement(achievementId);\n            }\n        }\n    }\n    /**\r\n     * Force unlock an achievement (for testing or special cases)\r\n     * @param {string} achievementId - The achievement ID to unlock\r\n     */ forceUnlockAchievement(achievementId) {\n        if (!this.achievementsData[achievementId]) {\n            console.warn(`Attempted to unlock non-existent achievement: ${achievementId}`);\n            return;\n        }\n        this._unlockAchievement(achievementId);\n    }\n    /**\r\n     * Reset all achievements (for testing or new game)\r\n     */ resetAchievements() {\n        this.unlockedAchievements.clear();\n        this.achievementProgress = {};\n        this._initializeProgress();\n        this._saveAchievementState();\n        this.eventSystem.emit('achievements:reset');\n    }\n    /**\r\n     * Set the skill manager reference\r\n     * @param {SkillManager} skillManager - The skill manager instance\r\n     */ setSkillSystem(skillManager) {\n        this.skillManager = skillManager;\n    }\n    /**\r\n     * Set the inventory manager reference\r\n     * @param {InventoryManager} inventoryManager - The inventory manager instance\r\n     */ setInventorySystem(inventoryManager) {\n        this.inventoryManager = inventoryManager;\n    }\n    // Private methods\n    _initializeProgress() {\n        // Initialize progress tracking for each achievement\n        for (const achievementId of Object.keys(this.achievementsData)){\n            this.achievementProgress[achievementId] = {\n                current: 0,\n                required: this._getRequiredValue(this.achievementsData[achievementId]),\n                completed: false\n            };\n        }\n    }\n    _loadAchievementState() {\n        try {\n            const savedState = this.stateManager.getState().achievements;\n            if (savedState) {\n                this.unlockedAchievements = new Set(savedState.unlocked || []);\n                this.achievementProgress = savedState.progress || this.achievementProgress;\n            }\n        } catch (error) {\n            console.warn('Failed to load achievement state:', error);\n        }\n    }\n    _saveAchievementState() {\n        try {\n            const currentState = this.stateManager.getState();\n            currentState.achievements = {\n                unlocked: Array.from(this.unlockedAchievements),\n                progress: this.achievementProgress\n            };\n            this.stateManager.setState(currentState);\n        } catch (error) {\n            console.error('Failed to save achievement state:', error);\n        }\n    }\n    _setupEventListeners() {\n        // Listen for skill level ups\n        this.eventSystem.on('skill:levelUp', (data)=>{\n            this._updateSkillLevelProgress(data.skillName, data.newLevel);\n            this.checkAchievements();\n        });\n        // Listen for inventory changes\n        this.eventSystem.on('inventory:itemAdded', (data)=>{\n            this._updateInventoryProgress(data.itemId);\n            this.checkAchievements();\n        });\n        // Listen for trading events\n        this.eventSystem.on('trade:completed', (data)=>{\n            this._updateTradingProgress(data);\n            this.checkAchievements();\n        });\n        // Listen for consumption events\n        this.eventSystem.on('item:consumed', (data)=>{\n            this._updateConsumptionProgress(data);\n            this.checkAchievements();\n        });\n        // Listen for crafting events\n        this.eventSystem.on('craft:completed', (data)=>{\n            this._updateCraftingProgress(data);\n            this.checkAchievements();\n        });\n        // Listen for location visits\n        this.eventSystem.on('location:visited', (data)=>{\n            this._updateLocationProgress(data);\n            this.checkAchievements();\n        });\n        // Listen for pet capture events\n        this.eventSystem.on('pet:captured', (data)=>{\n            this._updatePetProgress(data);\n            this.checkAchievements();\n        });\n        // Listen for cooking events\n        this.eventSystem.on('cooking:completed', (data)=>{\n            this._updateCookingProgress(data);\n            this.checkAchievements();\n        });\n        // Listen for game state changes that might affect achievements\n        this.eventSystem.on('state:changed', ()=>{\n            this.checkAchievements();\n        });\n    }\n    _checkInitialAchievements() {\n        // Check for achievements that should be unlocked based on current state\n        this.checkAchievements();\n    }\n    _evaluateAchievement(achievement, gameState) {\n        const requirements = achievement.requirements;\n        if (!requirements) {\n            return false;\n        }\n        // Check skill level requirements\n        if (requirements.skillLevel) {\n            for (const [skillName, requiredLevel] of Object.entries(requirements.skillLevel)){\n                const skill = gameState.skills?.[skillName];\n                if (!skill || skill.level < requiredLevel) {\n                    return false;\n                }\n            }\n        }\n        // Check any skill level requirement\n        if (requirements.anySkillLevel) {\n            const requiredLevel = requirements.anySkillLevel;\n            const hasAnySkillAtLevel = Object.values(gameState.skills || {}).some((skill)=>skill.level >= requiredLevel);\n            if (!hasAnySkillAtLevel) {\n                return false;\n            }\n        }\n        // Check multiple skill levels requirement\n        if (requirements.multipleSkillLevels) {\n            const { count, level } = requirements.multipleSkillLevels;\n            const skillsAtLevel = Object.values(gameState.skills || {}).filter((skill)=>skill.level >= level).length;\n            if (skillsAtLevel < count) {\n                return false;\n            }\n        }\n        // Check unique items requirement\n        if (requirements.uniqueItems) {\n            const requiredCount = requirements.uniqueItems;\n            const uniqueItemCount = Object.keys(gameState.inventory || {}).length;\n            if (uniqueItemCount < requiredCount) {\n                return false;\n            }\n        }\n        // Check custom requirements\n        if (requirements.custom) {\n            return this._evaluateCustomRequirement(requirements.custom, gameState);\n        }\n        return true;\n    }\n    _evaluateCustomRequirement(requirementType, gameState) {\n        switch(requirementType){\n            case 'secret_discovery':\n                // This is a placeholder for secret achievements\n                // In a real implementation, this would check for specific game events\n                return false;\n            case 'trade_syrup_maple_run':\n                // Check if player has traded syrup in Maple Run\n                // This would need to be tracked in game state\n                return gameState.tradingHistory?.some((trade)=>trade.itemId === 'syrup' && trade.location === 'maple_run') || false;\n            case 'consume_red_mushroom':\n                // Check if player has consumed a red mushroom\n                return gameState.consumptionHistory?.some((consumption)=>consumption.itemId === 'red_mushroom') || false;\n            case 'animate_mushroom_pet':\n                // Check if player has used Animation spell on mushroom and captured as pet\n                return gameState.petHistory?.some((pet)=>pet.source === 'animated_mushroom') || false;\n            case 'cook_moss_mossy_glade':\n                // Check if player has cooked with moss in Mossy Glade\n                return gameState.cookingHistory?.some((cooking)=>cooking.ingredients?.includes('moss') && cooking.location === 'mossy_glade') || false;\n            case 'first_craft':\n                // Check if player has crafted any item\n                return gameState.craftingHistory?.length > 0 || false;\n            case 'visit_locations':\n                // Check if player has visited enough locations\n                const visitedLocations = gameState.visitedLocations || [];\n                const requiredCount = gameState.achievementRequirements?.locationCount || 5;\n                return visitedLocations.length >= requiredCount;\n            default:\n                return false;\n        }\n    }\n    _getRequiredValue(achievement) {\n        const requirements = achievement.requirements;\n        if (requirements.skillLevel) {\n            return Math.max(...Object.values(requirements.skillLevel));\n        }\n        if (requirements.anySkillLevel) {\n            return requirements.anySkillLevel;\n        }\n        if (requirements.multipleSkillLevels) {\n            return requirements.multipleSkillLevels.level;\n        }\n        if (requirements.uniqueItems) {\n            return requirements.uniqueItems;\n        }\n        return 1; // Default required value\n    }\n    _unlockAchievement(achievementId) {\n        const achievement = this.achievementsData[achievementId];\n        if (!achievement) {\n            console.warn(`Attempted to unlock non-existent achievement: ${achievementId}`);\n            return;\n        }\n        this.unlockedAchievements.add(achievementId);\n        if (!this.achievementProgress[achievementId]) {\n            this.achievementProgress[achievementId] = {\n                current: 0,\n                required: this._getRequiredValue(achievement),\n                completed: false\n            };\n        }\n        this.achievementProgress[achievementId].completed = true;\n        this.achievementProgress[achievementId].current = this.achievementProgress[achievementId].required;\n        // Save state\n        this._saveAchievementState();\n        // Emit achievement unlocked event\n        this.eventSystem.emit('achievement:unlocked', {\n            achievementId,\n            achievement,\n            points: achievement.points || 0,\n            totalPoints: this.getTotalPoints()\n        });\n        console.log(`Achievement unlocked: ${achievement.name} (${achievementId})`);\n    }\n    _updateSkillLevelProgress(skillName, level) {\n        for (const [achievementId, achievement] of Object.entries(this.achievementsData)){\n            if (this.unlockedAchievements.has(achievementId)) {\n                continue;\n            }\n            const requirements = achievement.requirements;\n            if (requirements.skillLevel && requirements.skillLevel[skillName]) {\n                const requiredLevel = requirements.skillLevel[skillName];\n                if (!this.achievementProgress[achievementId]) {\n                    this.achievementProgress[achievementId] = {\n                        current: 0,\n                        required: this._getRequiredValue(achievement),\n                        completed: false\n                    };\n                }\n                this.achievementProgress[achievementId].current = Math.min(level, requiredLevel);\n            }\n            if (requirements.anySkillLevel) {\n                const requiredLevel = requirements.anySkillLevel;\n                if (!this.achievementProgress[achievementId]) {\n                    this.achievementProgress[achievementId] = {\n                        current: 0,\n                        required: this._getRequiredValue(achievement),\n                        completed: false\n                    };\n                }\n                this.achievementProgress[achievementId].current = Math.min(level, requiredLevel);\n            }\n        }\n    }\n    _updateInventoryProgress(itemId) {\n        for (const [achievementId, achievement] of Object.entries(this.achievementsData)){\n            if (this.unlockedAchievements.has(achievementId)) {\n                continue;\n            }\n            const requirements = achievement.requirements;\n            if (requirements.uniqueItems) {\n                const gameState = this.stateManager.getState();\n                const uniqueItemCount = Object.keys(gameState.inventory || {}).length;\n                if (!this.achievementProgress[achievementId]) {\n                    this.achievementProgress[achievementId] = {\n                        current: 0,\n                        required: this._getRequiredValue(achievement),\n                        completed: false\n                    };\n                }\n                this.achievementProgress[achievementId].current = Math.min(uniqueItemCount, requirements.uniqueItems);\n            }\n        }\n    }\n    _updateTradingProgress(data) {\n        // Update trading history in game state\n        const gameState = this.stateManager.getState();\n        if (!gameState.tradingHistory) {\n            gameState.tradingHistory = [];\n        }\n        gameState.tradingHistory.push({\n            itemId: data.itemId,\n            location: data.location,\n            type: data.type,\n            timestamp: Date.now()\n        });\n        this.stateManager.setState(gameState);\n    }\n    _updateConsumptionProgress(data) {\n        // Update consumption history in game state\n        const gameState = this.stateManager.getState();\n        if (!gameState.consumptionHistory) {\n            gameState.consumptionHistory = [];\n        }\n        gameState.consumptionHistory.push({\n            itemId: data.itemId,\n            timestamp: Date.now()\n        });\n        this.stateManager.setState(gameState);\n    }\n    _updateCraftingProgress(data) {\n        // Update crafting history in game state\n        const gameState = this.stateManager.getState();\n        if (!gameState.craftingHistory) {\n            gameState.craftingHistory = [];\n        }\n        gameState.craftingHistory.push({\n            itemId: data.itemId,\n            timestamp: Date.now()\n        });\n        this.stateManager.setState(gameState);\n    }\n    _updateLocationProgress(data) {\n        // Update visited locations in game state\n        const gameState = this.stateManager.getState();\n        if (!gameState.visitedLocations) {\n            gameState.visitedLocations = [];\n        }\n        if (!gameState.visitedLocations.includes(data.locationId)) {\n            gameState.visitedLocations.push(data.locationId);\n        }\n        this.stateManager.setState(gameState);\n    }\n    _updatePetProgress(data) {\n        // Update pet history in game state\n        const gameState = this.stateManager.getState();\n        if (!gameState.petHistory) {\n            gameState.petHistory = [];\n        }\n        gameState.petHistory.push({\n            source: data.source,\n            petType: data.petType,\n            timestamp: Date.now()\n        });\n        this.stateManager.setState(gameState);\n    }\n    _updateCookingProgress(data) {\n        // Update cooking history in game state\n        const gameState = this.stateManager.getState();\n        if (!gameState.cookingHistory) {\n            gameState.cookingHistory = [];\n        }\n        gameState.cookingHistory.push({\n            ingredients: data.ingredients,\n            location: data.location,\n            timestamp: Date.now()\n        });\n        this.stateManager.setState(gameState);\n    }\n}\nif (false) {}\n// ES Module exports\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvbGliL2dhbWUtZW5naW5lL3N5c3RlbXMvQWNoaWV2ZW1lbnRTeXN0ZW0uanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7OztDQUtDLEdBRUQsTUFBTUE7SUFDRkMsWUFBWUMsZ0JBQWdCLEVBQUVDLFlBQVksRUFBRUMsV0FBVyxDQUFFO1FBQ3JELElBQUksQ0FBQ0YsZ0JBQWdCLEdBQUdBLG9CQUFvQixDQUFDO1FBQzdDLElBQUksQ0FBQ0MsWUFBWSxHQUFHQTtRQUNwQixJQUFJLENBQUNDLFdBQVcsR0FBR0E7UUFFbkIsb0JBQW9CO1FBQ3BCLElBQUksQ0FBQ0MsWUFBWSxHQUFHO1FBQ3BCLElBQUksQ0FBQ0MsZ0JBQWdCLEdBQUc7UUFFeEIsb0JBQW9CO1FBQ3BCLElBQUksQ0FBQ0Msb0JBQW9CLEdBQUcsSUFBSUM7UUFDaEMsSUFBSSxDQUFDQyxtQkFBbUIsR0FBRyxDQUFDO1FBRTVCLDJDQUEyQztRQUMzQyxJQUFJLENBQUNDLG1CQUFtQjtJQUM1QjtJQUVBOztLQUVDLEdBQ0QsTUFBTUMsYUFBYTtRQUNmQyxRQUFRQyxHQUFHLENBQUM7UUFFWiwrQkFBK0I7UUFDL0IsSUFBSSxDQUFDQyxxQkFBcUI7UUFFMUIsa0RBQWtEO1FBQ2xELElBQUksQ0FBQ0Msb0JBQW9CO1FBRXpCLDZEQUE2RDtRQUM3RCxJQUFJLENBQUNDLHlCQUF5QjtRQUU5QkosUUFBUUMsR0FBRyxDQUFDO0lBQ2hCO0lBRUE7OztLQUdDLEdBQ0RJLHFCQUFxQjtRQUNqQixPQUFPLElBQUksQ0FBQ2YsZ0JBQWdCO0lBQ2hDO0lBRUE7OztLQUdDLEdBQ0RnQiwwQkFBMEI7UUFDdEIsT0FBTyxJQUFJLENBQUNYLG9CQUFvQjtJQUNwQztJQUVBOzs7S0FHQyxHQUNEWSx5QkFBeUI7UUFDckIsT0FBTyxJQUFJLENBQUNWLG1CQUFtQjtJQUNuQztJQUVBOzs7O0tBSUMsR0FDRFcsc0JBQXNCQyxhQUFhLEVBQUU7UUFDakMsT0FBTyxJQUFJLENBQUNkLG9CQUFvQixDQUFDZSxH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RUFBRTtRQUNyQixtQ0FBbUM7UUFDbkMsTUFBTTdCLFlBQVksSUFBSSxDQUFDekIsWUFBWSxDQUFDMEIsUUFBUTtRQUM1QyxJQUFJLENBQUNELFVBQVVvRSxVQUFVLEVBQUU7WUFDdkJwRSxVQUFVb0UsVUFBVSxHQUFHLEVBQUU7UUFDN0I7UUFDQXBFLFVBQVVvRSxVQUFVLENBQUNpQixJQUFJLENBQUM7WUFDdEJmLFFBQVF6QyxLQUFLeUMsTUFBTTtZQUNuQnFCLFNBQVM5RCxLQUFLOEQsT0FBTztZQUNyQkosV0FBV0MsS0FBS0MsR0FBRztRQUN2QjtRQUNBLElBQUksQ0FBQ2xILFlBQVksQ0FBQ29ELFFBQVEsQ0FBQzNCO0lBQy9CO0lBRUF3Qyx1QkFBdUJYLElBQUksRUFBRTtRQUN6Qix1Q0FBdUM7UUFDdkMsTUFBTTdCLFlBQVksSUFBSSxDQUFDekIsWUFBWSxDQUFDMEIsUUFBUTtRQUM1QyxJQUFJLENBQUNELFVBQVV1RSxjQUFjLEVBQUU7WUFDM0J2RSxVQUFVdUUsY0FBYyxHQUFHLEVBQUU7UUFDakM7UUFDQXZFLFVBQVV1RSxjQUFjLENBQUNjLElBQUksQ0FBQztZQUMxQlosYUFBYTVDLEtBQUs0QyxXQUFXO1lBQzdCUixVQUFVcEMsS0FBS29DLFFBQVE7WUFDdkJzQixXQUFXQyxLQUFLQyxHQUFHO1FBQ3ZCO1FBQ0EsSUFBSSxDQUFDbEgsWUFBWSxDQUFDb0QsUUFBUSxDQUFDM0I7SUFDL0I7QUFDSjtBQUVBLElBQUksS0FBNkIsRUFBRTRGLEVBQTZDeEg7QUFFaEYsb0JBQW9CO0FBQ1MiLCJzb3VyY2VzIjpbIkM6XFxHaXRIdWJcXFNlbGZcXHRhdmVybnNcXHNyY1xcbGliXFxnYW1lLWVuZ2luZVxcc3lzdGVtc1xcQWNoaWV2ZW1lbnRTeXN0ZW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEFjaGlldmVtZW50IFN5c3RlbVxyXG4gKiBcclxuICogTWFuYWdlcyBhY2hpZXZlbWVudHMsIHRyYWNrcyBwcm9ncmVzcywgYW5kIGhhbmRsZXMgYWNoaWV2ZW1lbnQgdW5sb2NraW5nLlxyXG4gKiBJbnRlZ3JhdGVzIHdpdGggb3RoZXIgc3lzdGVtcyB0byBtb25pdG9yIGdhbWUgc3RhdGUgYW5kIGF3YXJkIGFjaGlldmVtZW50cy5cclxuICovXHJcblxyXG5jbGFzcyBBY2hpZXZlbWVudFN5c3RlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhY2hpZXZlbWVudHNEYXRhLCBzdGF0ZU1hbmFnZXIsIGV2ZW50U3lzdGVtKSB7XHJcbiAgICAgICAgdGhpcy5hY2hpZXZlbWVudHNEYXRhID0gYWNoaWV2ZW1lbnRzRGF0YSB8fCB7fTtcclxuICAgICAgICB0aGlzLnN0YXRlTWFuYWdlciA9IHN0YXRlTWFuYWdlcjtcclxuICAgICAgICB0aGlzLmV2ZW50U3lzdGVtID0gZXZlbnRTeXN0ZW07XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU3lzdGVtIHJlZmVyZW5jZXNcclxuICAgICAgICB0aGlzLnNraWxsTWFuYWdlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbnZlbnRvcnlNYW5hZ2VyID0gbnVsbDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBBY2hpZXZlbWVudCBzdGF0ZVxyXG4gICAgICAgIHRoaXMudW5sb2NrZWRBY2hpZXZlbWVudHMgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgdGhpcy5hY2hpZXZlbWVudFByb2dyZXNzID0ge307XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBhY2hpZXZlbWVudCBwcm9ncmVzcyB0cmFja2luZ1xyXG4gICAgICAgIHRoaXMuX2luaXRpYWxpemVQcm9ncmVzcygpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgdGhlIGFjaGlldmVtZW50IHN5c3RlbVxyXG4gICAgICovXHJcbiAgICBhc3luYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdJbml0aWFsaXppbmcgQWNoaWV2ZW1lbnQgU3lzdGVtJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTG9hZCBzYXZlZCBhY2hpZXZlbWVudCBzdGF0ZVxyXG4gICAgICAgIHRoaXMuX2xvYWRBY2hpZXZlbWVudFN0YXRlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU2V0IHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgYWNoaWV2ZW1lbnQgdHJhY2tpbmdcclxuICAgICAgICB0aGlzLl9zZXR1cEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGFueSBhY2hpZXZlbWVudHMgdGhhdCBzaG91bGQgYWxyZWFkeSBiZSB1bmxvY2tlZFxyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5pdGlhbEFjaGlldmVtZW50cygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdBY2hpZXZlbWVudCBTeXN0ZW0gaW5pdGlhbGl6ZWQnKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYWxsIGFjaGlldmVtZW50cyBkYXRhXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBBbGwgYWNoaWV2ZW1lbnRzIGNvbmZpZ3VyYXRpb25cclxuICAgICAqL1xyXG4gICAgZ2V0QWxsQWNoaWV2ZW1lbnRzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFjaGlldmVtZW50c0RhdGE7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2V0IHVubG9ja2VkIGFjaGlldmVtZW50c1xyXG4gICAgICogQHJldHVybnMge1NldH0gU2V0IG9mIHVubG9ja2VkIGFjaGlldmVtZW50IElEc1xyXG4gICAgICovXHJcbiAgICBnZXRVbmxvY2tlZEFjaGlldmVtZW50cygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy51bmxvY2tlZEFjaGlldmVtZW50cztcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYWNoaWV2ZW1lbnQgcHJvZ3Jlc3NcclxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IEFjaGlldmVtZW50IHByb2dyZXNzIGRhdGFcclxuICAgICAqL1xyXG4gICAgZ2V0QWNoaWV2ZW1lbnRQcm9ncmVzcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hY2hpZXZlbWVudFByb2dyZXNzO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIGFuIGFjaGlldmVtZW50IGlzIHVubG9ja2VkXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYWNoaWV2ZW1lbnRJZCAtIFRoZSBhY2hpZXZlbWVudCBJRCB0byBjaGVja1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYWNoaWV2ZW1lbnQgaXMgdW5sb2NrZWRcclxuICAgICAqL1xyXG4gICAgaXNBY2hpZXZlbWVudFVubG9ja2VkKGFjaGlldmVtZW50SWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy51bmxvY2tlZEFjaGlldmVtZW50cy5oYXMoYWNoaWV2ZW1lbnRJZCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRvdGFsIGFjaGlldmVtZW50IHBvaW50cyBlYXJuZWRcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFRvdGFsIHBvaW50cyBmcm9tIHVubG9ja2VkIGFjaGlldmVtZW50c1xyXG4gICAgICovXHJcbiAgICBnZXRUb3RhbFBvaW50cygpIHtcclxuICAgICAgICBsZXQgdG90YWwgPSAwO1xyXG4gICAgICAgIGZvciAoY29uc3QgYWNoaWV2ZW1lbnRJZCBvZiB0aGlzLnVubG9ja2VkQWNoaWV2ZW1lbnRzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFjaGlldmVtZW50ID0gdGhpcy5hY2hpZXZlbWVudHNEYXRhW2FjaGlldmVtZW50SWRdO1xyXG4gICAgICAgICAgICBpZiAoYWNoaWV2ZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRvdGFsICs9IGFjaGlldmVtZW50LnBvaW50cyB8fCAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0b3RhbDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBhbmQgdW5sb2NrIGFjaGlldmVtZW50cyBiYXNlZCBvbiBjdXJyZW50IGdhbWUgc3RhdGVcclxuICAgICAqIFRoaXMgaXMgdGhlIG1haW4gbWV0aG9kIHRoYXQgd2lsbCBiZSBjYWxsZWQgdG8gZXZhbHVhdGUgYWNoaWV2ZW1lbnRzXHJcbiAgICAgKi9cclxuICAgIGNoZWNrQWNoaWV2ZW1lbnRzKCkge1xyXG4gICAgICAgIGNvbnN0IGdhbWVTdGF0ZSA9IHRoaXMuc3RhdGVNYW5hZ2VyLmdldFN0YXRlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCBbYWNoaWV2ZW1lbnRJZCwgYWNoaWV2ZW1lbnRdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuYWNoaWV2ZW1lbnRzRGF0YSkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudW5sb2NrZWRBY2hpZXZlbWVudHMuaGFzKGFjaGlldmVtZW50SWQpKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTsgLy8gQWxyZWFkeSB1bmxvY2tlZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAodGhpcy5fZXZhbHVhdGVBY2hpZXZlbWVudChhY2hpZXZlbWVudCwgZ2FtZVN0YXRlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdW5sb2NrQWNoaWV2ZW1lbnQoYWNoaWV2ZW1lbnRJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogRm9yY2UgdW5sb2NrIGFuIGFjaGlldmVtZW50IChmb3IgdGVzdGluZyBvciBzcGVjaWFsIGNhc2VzKVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFjaGlldmVtZW50SWQgLSBUaGUgYWNoaWV2ZW1lbnQgSUQgdG8gdW5sb2NrXHJcbiAgICAgKi9cclxuICAgIGZvcmNlVW5sb2NrQWNoaWV2ZW1lbnQoYWNoaWV2ZW1lbnRJZCkge1xyXG4gICAgICAgIGlmICghdGhpcy5hY2hpZXZlbWVudHNEYXRhW2FjaGlldmVtZW50SWRdKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgQXR0ZW1wdGVkIHRvIHVubG9jayBub24tZXhpc3RlbnQgYWNoaWV2ZW1lbnQ6ICR7YWNoaWV2ZW1lbnRJZH1gKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl91bmxvY2tBY2hpZXZlbWVudChhY2hpZXZlbWVudElkKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNldCBhbGwgYWNoaWV2ZW1lbnRzIChmb3IgdGVzdGluZyBvciBuZXcgZ2FtZSlcclxuICAgICAqL1xyXG4gICAgcmVzZXRBY2hpZXZlbWVudHMoKSB7XHJcbiAgICAgICAgdGhpcy51bmxvY2tlZEFjaGlldmVtZW50cy5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMuYWNoaWV2ZW1lbnRQcm9ncmVzcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2luaXRpYWxpemVQcm9ncmVzcygpO1xyXG4gICAgICAgIHRoaXMuX3NhdmVBY2hpZXZlbWVudFN0YXRlKCk7XHJcbiAgICAgICAgdGhpcy5ldmVudFN5c3RlbS5lbWl0KCdhY2hpZXZlbWVudHM6cmVzZXQnKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIHNraWxsIG1hbmFnZXIgcmVmZXJlbmNlXHJcbiAgICAgKiBAcGFyYW0ge1NraWxsTWFuYWdlcn0gc2tpbGxNYW5hZ2VyIC0gVGhlIHNraWxsIG1hbmFnZXIgaW5zdGFuY2VcclxuICAgICAqL1xyXG4gICAgc2V0U2tpbGxTeXN0ZW0oc2tpbGxNYW5hZ2VyKSB7XHJcbiAgICAgICAgdGhpcy5za2lsbE1hbmFnZXIgPSBza2lsbE1hbmFnZXI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBpbnZlbnRvcnkgbWFuYWdlciByZWZlcmVuY2VcclxuICAgICAqIEBwYXJhbSB7SW52ZW50b3J5TWFuYWdlcn0gaW52ZW50b3J5TWFuYWdlciAtIFRoZSBpbnZlbnRvcnkgbWFuYWdlciBpbnN0YW5jZVxyXG4gICAgICovXHJcbiAgICBzZXRJbnZlbnRvcnlTeXN0ZW0oaW52ZW50b3J5TWFuYWdlcikge1xyXG4gICAgICAgIHRoaXMuaW52ZW50b3J5TWFuYWdlciA9IGludmVudG9yeU1hbmFnZXI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFByaXZhdGUgbWV0aG9kc1xyXG4gICAgXHJcbiAgICBfaW5pdGlhbGl6ZVByb2dyZXNzKCkge1xyXG4gICAgICAgIC8vIEluaXRpYWxpemUgcHJvZ3Jlc3MgdHJhY2tpbmcgZm9yIGVhY2ggYWNoaWV2ZW1lbnRcclxuICAgICAgICBmb3IgKGNvbnN0IGFjaGlldmVtZW50SWQgb2YgT2JqZWN0LmtleXModGhpcy5hY2hpZXZlbWVudHNEYXRhKSkge1xyXG4gICAgICAgICAgICB0aGlzLmFjaGlldmVtZW50UHJvZ3Jlc3NbYWNoaWV2ZW1lbnRJZF0gPSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50OiAwLFxyXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRoaXMuX2dldFJlcXVpcmVkVmFsdWUodGhpcy5hY2hpZXZlbWVudHNEYXRhW2FjaGlldmVtZW50SWRdKSxcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlZDogZmFsc2VcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF9sb2FkQWNoaWV2ZW1lbnRTdGF0ZSgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBzYXZlZFN0YXRlID0gdGhpcy5zdGF0ZU1hbmFnZXIuZ2V0U3RhdGUoKS5hY2hpZXZlbWVudHM7XHJcbiAgICAgICAgICAgIGlmIChzYXZlZFN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVubG9ja2VkQWNoaWV2ZW1lbnRzID0gbmV3IFNldChzYXZlZFN0YXRlLnVubG9ja2VkIHx8IFtdKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWNoaWV2ZW1lbnRQcm9ncmVzcyA9IHNhdmVkU3RhdGUucHJvZ3Jlc3MgfHwgdGhpcy5hY2hpZXZlbWVudFByb2dyZXNzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gbG9hZCBhY2hpZXZlbWVudCBzdGF0ZTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfc2F2ZUFjaGlldmVtZW50U3RhdGUoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudFN0YXRlID0gdGhpcy5zdGF0ZU1hbmFnZXIuZ2V0U3RhdGUoKTtcclxuICAgICAgICAgICAgY3VycmVudFN0YXRlLmFjaGlldmVtZW50cyA9IHtcclxuICAgICAgICAgICAgICAgIHVubG9ja2VkOiBBcnJheS5mcm9tKHRoaXMudW5sb2NrZWRBY2hpZXZlbWVudHMpLFxyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IHRoaXMuYWNoaWV2ZW1lbnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlTWFuYWdlci5zZXRTdGF0ZShjdXJyZW50U3RhdGUpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIGFjaGlldmVtZW50IHN0YXRlOicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF9zZXR1cEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIC8vIExpc3RlbiBmb3Igc2tpbGwgbGV2ZWwgdXBzXHJcbiAgICAgICAgdGhpcy5ldmVudFN5c3RlbS5vbignc2tpbGw6bGV2ZWxVcCcsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVNraWxsTGV2ZWxQcm9ncmVzcyhkYXRhLnNraWxsTmFtZSwgZGF0YS5uZXdMZXZlbCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tBY2hpZXZlbWVudHMoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBMaXN0ZW4gZm9yIGludmVudG9yeSBjaGFuZ2VzXHJcbiAgICAgICAgdGhpcy5ldmVudFN5c3RlbS5vbignaW52ZW50b3J5Oml0ZW1BZGRlZCcsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUludmVudG9yeVByb2dyZXNzKGRhdGEuaXRlbUlkKTtcclxuICAgICAgICAgICAgdGhpcy5jaGVja0FjaGlldmVtZW50cygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIExpc3RlbiBmb3IgdHJhZGluZyBldmVudHNcclxuICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLm9uKCd0cmFkZTpjb21wbGV0ZWQnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVUcmFkaW5nUHJvZ3Jlc3MoZGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tBY2hpZXZlbWVudHMoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBMaXN0ZW4gZm9yIGNvbnN1bXB0aW9uIGV2ZW50c1xyXG4gICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0ub24oJ2l0ZW06Y29uc3VtZWQnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVDb25zdW1wdGlvblByb2dyZXNzKGRhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrQWNoaWV2ZW1lbnRzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTGlzdGVuIGZvciBjcmFmdGluZyBldmVudHNcclxuICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLm9uKCdjcmFmdDpjb21wbGV0ZWQnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVDcmFmdGluZ1Byb2dyZXNzKGRhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrQWNoaWV2ZW1lbnRzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTGlzdGVuIGZvciBsb2NhdGlvbiB2aXNpdHNcclxuICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLm9uKCdsb2NhdGlvbjp2aXNpdGVkJywgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlTG9jYXRpb25Qcm9ncmVzcyhkYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5jaGVja0FjaGlldmVtZW50cygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIExpc3RlbiBmb3IgcGV0IGNhcHR1cmUgZXZlbnRzXHJcbiAgICAgICAgdGhpcy5ldmVudFN5c3RlbS5vbigncGV0OmNhcHR1cmVkJywgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlUGV0UHJvZ3Jlc3MoZGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tBY2hpZXZlbWVudHMoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBMaXN0ZW4gZm9yIGNvb2tpbmcgZXZlbnRzXHJcbiAgICAgICAgdGhpcy5ldmVudFN5c3RlbS5vbignY29va2luZzpjb21wbGV0ZWQnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVDb29raW5nUHJvZ3Jlc3MoZGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tBY2hpZXZlbWVudHMoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBMaXN0ZW4gZm9yIGdhbWUgc3RhdGUgY2hhbmdlcyB0aGF0IG1pZ2h0IGFmZmVjdCBhY2hpZXZlbWVudHNcclxuICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLm9uKCdzdGF0ZTpjaGFuZ2VkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrQWNoaWV2ZW1lbnRzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF9jaGVja0luaXRpYWxBY2hpZXZlbWVudHMoKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGFjaGlldmVtZW50cyB0aGF0IHNob3VsZCBiZSB1bmxvY2tlZCBiYXNlZCBvbiBjdXJyZW50IHN0YXRlXHJcbiAgICAgICAgdGhpcy5jaGVja0FjaGlldmVtZW50cygpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfZXZhbHVhdGVBY2hpZXZlbWVudChhY2hpZXZlbWVudCwgZ2FtZVN0YXRlKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWlyZW1lbnRzID0gYWNoaWV2ZW1lbnQucmVxdWlyZW1lbnRzO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghcmVxdWlyZW1lbnRzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ2hlY2sgc2tpbGwgbGV2ZWwgcmVxdWlyZW1lbnRzXHJcbiAgICAgICAgaWYgKHJlcXVpcmVtZW50cy5za2lsbExldmVsKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgW3NraWxsTmFtZSwgcmVxdWlyZWRMZXZlbF0gb2YgT2JqZWN0LmVudHJpZXMocmVxdWlyZW1lbnRzLnNraWxsTGV2ZWwpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBza2lsbCA9IGdhbWVTdGF0ZS5za2lsbHM/Lltza2lsbE5hbWVdO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFza2lsbCB8fCBza2lsbC5sZXZlbCA8IHJlcXVpcmVkTGV2ZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ2hlY2sgYW55IHNraWxsIGxldmVsIHJlcXVpcmVtZW50XHJcbiAgICAgICAgaWYgKHJlcXVpcmVtZW50cy5hbnlTa2lsbExldmVsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVpcmVkTGV2ZWwgPSByZXF1aXJlbWVudHMuYW55U2tpbGxMZXZlbDtcclxuICAgICAgICAgICAgY29uc3QgaGFzQW55U2tpbGxBdExldmVsID0gT2JqZWN0LnZhbHVlcyhnYW1lU3RhdGUuc2tpbGxzIHx8IHt9KS5zb21lKHNraWxsID0+IHNraWxsLmxldmVsID49IHJlcXVpcmVkTGV2ZWwpO1xyXG4gICAgICAgICAgICBpZiAoIWhhc0FueVNraWxsQXRMZXZlbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENoZWNrIG11bHRpcGxlIHNraWxsIGxldmVscyByZXF1aXJlbWVudFxyXG4gICAgICAgIGlmIChyZXF1aXJlbWVudHMubXVsdGlwbGVTa2lsbExldmVscykge1xyXG4gICAgICAgICAgICBjb25zdCB7IGNvdW50LCBsZXZlbCB9ID0gcmVxdWlyZW1lbnRzLm11bHRpcGxlU2tpbGxMZXZlbHM7XHJcbiAgICAgICAgICAgIGNvbnN0IHNraWxsc0F0TGV2ZWwgPSBPYmplY3QudmFsdWVzKGdhbWVTdGF0ZS5za2lsbHMgfHwge30pLmZpbHRlcihza2lsbCA9PiBza2lsbC5sZXZlbCA+PSBsZXZlbCkubGVuZ3RoO1xyXG4gICAgICAgICAgICBpZiAoc2tpbGxzQXRMZXZlbCA8IGNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ2hlY2sgdW5pcXVlIGl0ZW1zIHJlcXVpcmVtZW50XHJcbiAgICAgICAgaWYgKHJlcXVpcmVtZW50cy51bmlxdWVJdGVtcykge1xyXG4gICAgICAgICAgICBjb25zdCByZXF1aXJlZENvdW50ID0gcmVxdWlyZW1lbnRzLnVuaXF1ZUl0ZW1zO1xyXG4gICAgICAgICAgICBjb25zdCB1bmlxdWVJdGVtQ291bnQgPSBPYmplY3Qua2V5cyhnYW1lU3RhdGUuaW52ZW50b3J5IHx8IHt9KS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGlmICh1bmlxdWVJdGVtQ291bnQgPCByZXF1aXJlZENvdW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ2hlY2sgY3VzdG9tIHJlcXVpcmVtZW50c1xyXG4gICAgICAgIGlmIChyZXF1aXJlbWVudHMuY3VzdG9tKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9ldmFsdWF0ZUN1c3RvbVJlcXVpcmVtZW50KHJlcXVpcmVtZW50cy5jdXN0b20sIGdhbWVTdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfZXZhbHVhdGVDdXN0b21SZXF1aXJlbWVudChyZXF1aXJlbWVudFR5cGUsIGdhbWVTdGF0ZSkge1xyXG4gICAgICAgIHN3aXRjaCAocmVxdWlyZW1lbnRUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3NlY3JldF9kaXNjb3ZlcnknOlxyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHBsYWNlaG9sZGVyIGZvciBzZWNyZXQgYWNoaWV2ZW1lbnRzXHJcbiAgICAgICAgICAgICAgICAvLyBJbiBhIHJlYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd291bGQgY2hlY2sgZm9yIHNwZWNpZmljIGdhbWUgZXZlbnRzXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGNhc2UgJ3RyYWRlX3N5cnVwX21hcGxlX3J1bic6XHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBwbGF5ZXIgaGFzIHRyYWRlZCBzeXJ1cCBpbiBNYXBsZSBSdW5cclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgd291bGQgbmVlZCB0byBiZSB0cmFja2VkIGluIGdhbWUgc3RhdGVcclxuICAgICAgICAgICAgICAgIHJldHVybiBnYW1lU3RhdGUudHJhZGluZ0hpc3Rvcnk/LnNvbWUodHJhZGUgPT4gXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhZGUuaXRlbUlkID09PSAnc3lydXAnICYmIHRyYWRlLmxvY2F0aW9uID09PSAnbWFwbGVfcnVuJ1xyXG4gICAgICAgICAgICAgICAgKSB8fCBmYWxzZTtcclxuICAgICAgICAgICAgY2FzZSAnY29uc3VtZV9yZWRfbXVzaHJvb20nOlxyXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgcGxheWVyIGhhcyBjb25zdW1lZCBhIHJlZCBtdXNocm9vbVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdhbWVTdGF0ZS5jb25zdW1wdGlvbkhpc3Rvcnk/LnNvbWUoY29uc3VtcHRpb24gPT4gXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3VtcHRpb24uaXRlbUlkID09PSAncmVkX211c2hyb29tJ1xyXG4gICAgICAgICAgICAgICAgKSB8fCBmYWxzZTtcclxuICAgICAgICAgICAgY2FzZSAnYW5pbWF0ZV9tdXNocm9vbV9wZXQnOlxyXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgcGxheWVyIGhhcyB1c2VkIEFuaW1hdGlvbiBzcGVsbCBvbiBtdXNocm9vbSBhbmQgY2FwdHVyZWQgYXMgcGV0XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2FtZVN0YXRlLnBldEhpc3Rvcnk/LnNvbWUocGV0ID0+IFxyXG4gICAgICAgICAgICAgICAgICAgIHBldC5zb3VyY2UgPT09ICdhbmltYXRlZF9tdXNocm9vbSdcclxuICAgICAgICAgICAgICAgICkgfHwgZmFsc2U7XHJcbiAgICAgICAgICAgIGNhc2UgJ2Nvb2tfbW9zc19tb3NzeV9nbGFkZSc6XHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBwbGF5ZXIgaGFzIGNvb2tlZCB3aXRoIG1vc3MgaW4gTW9zc3kgR2xhZGVcclxuICAgICAgICAgICAgICAgIHJldHVybiBnYW1lU3RhdGUuY29va2luZ0hpc3Rvcnk/LnNvbWUoY29va2luZyA9PiBcclxuICAgICAgICAgICAgICAgICAgICBjb29raW5nLmluZ3JlZGllbnRzPy5pbmNsdWRlcygnbW9zcycpICYmIGNvb2tpbmcubG9jYXRpb24gPT09ICdtb3NzeV9nbGFkZSdcclxuICAgICAgICAgICAgICAgICkgfHwgZmFsc2U7XHJcbiAgICAgICAgICAgIGNhc2UgJ2ZpcnN0X2NyYWZ0JzpcclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHBsYXllciBoYXMgY3JhZnRlZCBhbnkgaXRlbVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdhbWVTdGF0ZS5jcmFmdGluZ0hpc3Rvcnk/Lmxlbmd0aCA+IDAgfHwgZmFsc2U7XHJcbiAgICAgICAgICAgIGNhc2UgJ3Zpc2l0X2xvY2F0aW9ucyc6XHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBwbGF5ZXIgaGFzIHZpc2l0ZWQgZW5vdWdoIGxvY2F0aW9uc1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmlzaXRlZExvY2F0aW9ucyA9IGdhbWVTdGF0ZS52aXNpdGVkTG9jYXRpb25zIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWlyZWRDb3VudCA9IGdhbWVTdGF0ZS5hY2hpZXZlbWVudFJlcXVpcmVtZW50cz8ubG9jYXRpb25Db3VudCB8fCA1O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZpc2l0ZWRMb2NhdGlvbnMubGVuZ3RoID49IHJlcXVpcmVkQ291bnQ7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfZ2V0UmVxdWlyZWRWYWx1ZShhY2hpZXZlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVpcmVtZW50cyA9IGFjaGlldmVtZW50LnJlcXVpcmVtZW50cztcclxuICAgICAgICBcclxuICAgICAgICBpZiAocmVxdWlyZW1lbnRzLnNraWxsTGV2ZWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KC4uLk9iamVjdC52YWx1ZXMocmVxdWlyZW1lbnRzLnNraWxsTGV2ZWwpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHJlcXVpcmVtZW50cy5hbnlTa2lsbExldmVsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXF1aXJlbWVudHMuYW55U2tpbGxMZXZlbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHJlcXVpcmVtZW50cy5tdWx0aXBsZVNraWxsTGV2ZWxzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXF1aXJlbWVudHMubXVsdGlwbGVTa2lsbExldmVscy5sZXZlbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHJlcXVpcmVtZW50cy51bmlxdWVJdGVtcykge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVxdWlyZW1lbnRzLnVuaXF1ZUl0ZW1zO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gMTsgLy8gRGVmYXVsdCByZXF1aXJlZCB2YWx1ZVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfdW5sb2NrQWNoaWV2ZW1lbnQoYWNoaWV2ZW1lbnRJZCkge1xyXG4gICAgICAgIGNvbnN0IGFjaGlldmVtZW50ID0gdGhpcy5hY2hpZXZlbWVudHNEYXRhW2FjaGlldmVtZW50SWRdO1xyXG4gICAgICAgIGlmICghYWNoaWV2ZW1lbnQpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBBdHRlbXB0ZWQgdG8gdW5sb2NrIG5vbi1leGlzdGVudCBhY2hpZXZlbWVudDogJHthY2hpZXZlbWVudElkfWApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudW5sb2NrZWRBY2hpZXZlbWVudHMuYWRkKGFjaGlldmVtZW50SWQpO1xyXG4gICAgICAgIGlmICghdGhpcy5hY2hpZXZlbWVudFByb2dyZXNzW2FjaGlldmVtZW50SWRdKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWNoaWV2ZW1lbnRQcm9ncmVzc1thY2hpZXZlbWVudElkXSA9IHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnQ6IDAsXHJcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdGhpcy5fZ2V0UmVxdWlyZWRWYWx1ZShhY2hpZXZlbWVudCksXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWQ6IGZhbHNlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYWNoaWV2ZW1lbnRQcm9ncmVzc1thY2hpZXZlbWVudElkXS5jb21wbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYWNoaWV2ZW1lbnRQcm9ncmVzc1thY2hpZXZlbWVudElkXS5jdXJyZW50ID0gdGhpcy5hY2hpZXZlbWVudFByb2dyZXNzW2FjaGlldmVtZW50SWRdLnJlcXVpcmVkO1xyXG4gICAgICAgIC8vIFNhdmUgc3RhdGVcclxuICAgICAgICB0aGlzLl9zYXZlQWNoaWV2ZW1lbnRTdGF0ZSgpO1xyXG4gICAgICAgIC8vIEVtaXQgYWNoaWV2ZW1lbnQgdW5sb2NrZWQgZXZlbnRcclxuICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLmVtaXQoJ2FjaGlldmVtZW50OnVubG9ja2VkJywge1xyXG4gICAgICAgICAgICBhY2hpZXZlbWVudElkLFxyXG4gICAgICAgICAgICBhY2hpZXZlbWVudCxcclxuICAgICAgICAgICAgcG9pbnRzOiBhY2hpZXZlbWVudC5wb2ludHMgfHwgMCxcclxuICAgICAgICAgICAgdG90YWxQb2ludHM6IHRoaXMuZ2V0VG90YWxQb2ludHMoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBBY2hpZXZlbWVudCB1bmxvY2tlZDogJHthY2hpZXZlbWVudC5uYW1lfSAoJHthY2hpZXZlbWVudElkfSlgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgX3VwZGF0ZVNraWxsTGV2ZWxQcm9ncmVzcyhza2lsbE5hbWUsIGxldmVsKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBbYWNoaWV2ZW1lbnRJZCwgYWNoaWV2ZW1lbnRdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuYWNoaWV2ZW1lbnRzRGF0YSkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudW5sb2NrZWRBY2hpZXZlbWVudHMuaGFzKGFjaGlldmVtZW50SWQpKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCByZXF1aXJlbWVudHMgPSBhY2hpZXZlbWVudC5yZXF1aXJlbWVudHM7XHJcbiAgICAgICAgICAgIGlmIChyZXF1aXJlbWVudHMuc2tpbGxMZXZlbCAmJiByZXF1aXJlbWVudHMuc2tpbGxMZXZlbFtza2lsbE5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1aXJlZExldmVsID0gcmVxdWlyZW1lbnRzLnNraWxsTGV2ZWxbc2tpbGxOYW1lXTtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5hY2hpZXZlbWVudFByb2dyZXNzW2FjaGlldmVtZW50SWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2hpZXZlbWVudFByb2dyZXNzW2FjaGlldmVtZW50SWRdID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdGhpcy5fZ2V0UmVxdWlyZWRWYWx1ZShhY2hpZXZlbWVudCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZDogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hY2hpZXZlbWVudFByb2dyZXNzW2FjaGlldmVtZW50SWRdLmN1cnJlbnQgPSBNYXRoLm1pbihsZXZlbCwgcmVxdWlyZWRMZXZlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHJlcXVpcmVtZW50cy5hbnlTa2lsbExldmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1aXJlZExldmVsID0gcmVxdWlyZW1lbnRzLmFueVNraWxsTGV2ZWw7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYWNoaWV2ZW1lbnRQcm9ncmVzc1thY2hpZXZlbWVudElkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWNoaWV2ZW1lbnRQcm9ncmVzc1thY2hpZXZlbWVudElkXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRoaXMuX2dldFJlcXVpcmVkVmFsdWUoYWNoaWV2ZW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWQ6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuYWNoaWV2ZW1lbnRQcm9ncmVzc1thY2hpZXZlbWVudElkXS5jdXJyZW50ID0gTWF0aC5taW4obGV2ZWwsIHJlcXVpcmVkTGV2ZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfdXBkYXRlSW52ZW50b3J5UHJvZ3Jlc3MoaXRlbUlkKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBbYWNoaWV2ZW1lbnRJZCwgYWNoaWV2ZW1lbnRdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuYWNoaWV2ZW1lbnRzRGF0YSkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudW5sb2NrZWRBY2hpZXZlbWVudHMuaGFzKGFjaGlldmVtZW50SWQpKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCByZXF1aXJlbWVudHMgPSBhY2hpZXZlbWVudC5yZXF1aXJlbWVudHM7XHJcbiAgICAgICAgICAgIGlmIChyZXF1aXJlbWVudHMudW5pcXVlSXRlbXMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVTdGF0ZSA9IHRoaXMuc3RhdGVNYW5hZ2VyLmdldFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1bmlxdWVJdGVtQ291bnQgPSBPYmplY3Qua2V5cyhnYW1lU3RhdGUuaW52ZW50b3J5IHx8IHt9KS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYWNoaWV2ZW1lbnRQcm9ncmVzc1thY2hpZXZlbWVudElkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWNoaWV2ZW1lbnRQcm9ncmVzc1thY2hpZXZlbWVudElkXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRoaXMuX2dldFJlcXVpcmVkVmFsdWUoYWNoaWV2ZW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWQ6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuYWNoaWV2ZW1lbnRQcm9ncmVzc1thY2hpZXZlbWVudElkXS5jdXJyZW50ID0gTWF0aC5taW4odW5pcXVlSXRlbUNvdW50LCByZXF1aXJlbWVudHMudW5pcXVlSXRlbXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfdXBkYXRlVHJhZGluZ1Byb2dyZXNzKGRhdGEpIHtcclxuICAgICAgICAvLyBVcGRhdGUgdHJhZGluZyBoaXN0b3J5IGluIGdhbWUgc3RhdGVcclxuICAgICAgICBjb25zdCBnYW1lU3RhdGUgPSB0aGlzLnN0YXRlTWFuYWdlci5nZXRTdGF0ZSgpO1xyXG4gICAgICAgIGlmICghZ2FtZVN0YXRlLnRyYWRpbmdIaXN0b3J5KSB7XHJcbiAgICAgICAgICAgIGdhbWVTdGF0ZS50cmFkaW5nSGlzdG9yeSA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnYW1lU3RhdGUudHJhZGluZ0hpc3RvcnkucHVzaCh7XHJcbiAgICAgICAgICAgIGl0ZW1JZDogZGF0YS5pdGVtSWQsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uOiBkYXRhLmxvY2F0aW9uLFxyXG4gICAgICAgICAgICB0eXBlOiBkYXRhLnR5cGUsIC8vIGJ1eS9zZWxsXHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc3RhdGVNYW5hZ2VyLnNldFN0YXRlKGdhbWVTdGF0ZSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF91cGRhdGVDb25zdW1wdGlvblByb2dyZXNzKGRhdGEpIHtcclxuICAgICAgICAvLyBVcGRhdGUgY29uc3VtcHRpb24gaGlzdG9yeSBpbiBnYW1lIHN0YXRlXHJcbiAgICAgICAgY29uc3QgZ2FtZVN0YXRlID0gdGhpcy5zdGF0ZU1hbmFnZXIuZ2V0U3RhdGUoKTtcclxuICAgICAgICBpZiAoIWdhbWVTdGF0ZS5jb25zdW1wdGlvbkhpc3RvcnkpIHtcclxuICAgICAgICAgICAgZ2FtZVN0YXRlLmNvbnN1bXB0aW9uSGlzdG9yeSA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnYW1lU3RhdGUuY29uc3VtcHRpb25IaXN0b3J5LnB1c2goe1xyXG4gICAgICAgICAgICBpdGVtSWQ6IGRhdGEuaXRlbUlkLFxyXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnN0YXRlTWFuYWdlci5zZXRTdGF0ZShnYW1lU3RhdGUpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfdXBkYXRlQ3JhZnRpbmdQcm9ncmVzcyhkYXRhKSB7XHJcbiAgICAgICAgLy8gVXBkYXRlIGNyYWZ0aW5nIGhpc3RvcnkgaW4gZ2FtZSBzdGF0ZVxyXG4gICAgICAgIGNvbnN0IGdhbWVTdGF0ZSA9IHRoaXMuc3RhdGVNYW5hZ2VyLmdldFN0YXRlKCk7XHJcbiAgICAgICAgaWYgKCFnYW1lU3RhdGUuY3JhZnRpbmdIaXN0b3J5KSB7XHJcbiAgICAgICAgICAgIGdhbWVTdGF0ZS5jcmFmdGluZ0hpc3RvcnkgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2FtZVN0YXRlLmNyYWZ0aW5nSGlzdG9yeS5wdXNoKHtcclxuICAgICAgICAgICAgaXRlbUlkOiBkYXRhLml0ZW1JZCxcclxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZU1hbmFnZXIuc2V0U3RhdGUoZ2FtZVN0YXRlKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgX3VwZGF0ZUxvY2F0aW9uUHJvZ3Jlc3MoZGF0YSkge1xyXG4gICAgICAgIC8vIFVwZGF0ZSB2aXNpdGVkIGxvY2F0aW9ucyBpbiBnYW1lIHN0YXRlXHJcbiAgICAgICAgY29uc3QgZ2FtZVN0YXRlID0gdGhpcy5zdGF0ZU1hbmFnZXIuZ2V0U3RhdGUoKTtcclxuICAgICAgICBpZiAoIWdhbWVTdGF0ZS52aXNpdGVkTG9jYXRpb25zKSB7XHJcbiAgICAgICAgICAgIGdhbWVTdGF0ZS52aXNpdGVkTG9jYXRpb25zID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghZ2FtZVN0YXRlLnZpc2l0ZWRMb2NhdGlvbnMuaW5jbHVkZXMoZGF0YS5sb2NhdGlvbklkKSkge1xyXG4gICAgICAgICAgICBnYW1lU3RhdGUudmlzaXRlZExvY2F0aW9ucy5wdXNoKGRhdGEubG9jYXRpb25JZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3RhdGVNYW5hZ2VyLnNldFN0YXRlKGdhbWVTdGF0ZSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF91cGRhdGVQZXRQcm9ncmVzcyhkYXRhKSB7XHJcbiAgICAgICAgLy8gVXBkYXRlIHBldCBoaXN0b3J5IGluIGdhbWUgc3RhdGVcclxuICAgICAgICBjb25zdCBnYW1lU3RhdGUgPSB0aGlzLnN0YXRlTWFuYWdlci5nZXRTdGF0ZSgpO1xyXG4gICAgICAgIGlmICghZ2FtZVN0YXRlLnBldEhpc3RvcnkpIHtcclxuICAgICAgICAgICAgZ2FtZVN0YXRlLnBldEhpc3RvcnkgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2FtZVN0YXRlLnBldEhpc3RvcnkucHVzaCh7XHJcbiAgICAgICAgICAgIHNvdXJjZTogZGF0YS5zb3VyY2UsXHJcbiAgICAgICAgICAgIHBldFR5cGU6IGRhdGEucGV0VHlwZSxcclxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZU1hbmFnZXIuc2V0U3RhdGUoZ2FtZVN0YXRlKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgX3VwZGF0ZUNvb2tpbmdQcm9ncmVzcyhkYXRhKSB7XHJcbiAgICAgICAgLy8gVXBkYXRlIGNvb2tpbmcgaGlzdG9yeSBpbiBnYW1lIHN0YXRlXHJcbiAgICAgICAgY29uc3QgZ2FtZVN0YXRlID0gdGhpcy5zdGF0ZU1hbmFnZXIuZ2V0U3RhdGUoKTtcclxuICAgICAgICBpZiAoIWdhbWVTdGF0ZS5jb29raW5nSGlzdG9yeSkge1xyXG4gICAgICAgICAgICBnYW1lU3RhdGUuY29va2luZ0hpc3RvcnkgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2FtZVN0YXRlLmNvb2tpbmdIaXN0b3J5LnB1c2goe1xyXG4gICAgICAgICAgICBpbmdyZWRpZW50czogZGF0YS5pbmdyZWRpZW50cyxcclxuICAgICAgICAgICAgbG9jYXRpb246IGRhdGEubG9jYXRpb24sXHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc3RhdGVNYW5hZ2VyLnNldFN0YXRlKGdhbWVTdGF0ZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgd2luZG93LkFjaGlldmVtZW50U3lzdGVtID0gQWNoaWV2ZW1lbnRTeXN0ZW07XHJcblxyXG4vLyBFUyBNb2R1bGUgZXhwb3J0c1xyXG5leHBvcnQgeyBBY2hpZXZlbWVudFN5c3RlbSB9OyAiXSwibmFtZXMiOlsiQWNoaWV2ZW1lbnRTeXN0ZW0iLCJjb25zdHJ1Y3RvciIsImFjaGlldmVtZW50c0RhdGEiLCJzdGF0ZU1hbmFnZXIiLCJldmVudFN5c3RlbSIsInNraWxsTWFuYWdlciIsImludmVudG9yeU1hbmFnZXIiLCJ1bmxvY2tlZEFjaGlldmVtZW50cyIsIlNldCIsImFjaGlldmVtZW50UHJvZ3Jlc3MiLCJfaW5pdGlhbGl6ZVByb2dyZXNzIiwiaW5pdGlhbGl6ZSIsImNvbnNvbGUiLCJsb2ciLCJfbG9hZEFjaGlldmVtZW50U3RhdGUiLCJfc2V0dXBFdmVudExpc3RlbmVycyIsIl9jaGVja0luaXRpYWxBY2hpZXZlbWVudHMiLCJnZXRBbGxBY2hpZXZlbWVudHMiLCJnZXRVbmxvY2tlZEFjaGlldmVtZW50cyIsImdldEFjaGlldmVtZW50UHJvZ3Jlc3MiLCJpc0FjaGlldmVtZW50VW5sb2NrZWQiLCJhY2hpZXZlbWVudElkIiwiaGFzIiwiZ2V0VG90YWxQb2ludHMiLCJ0b3RhbCIsImFjaGlldmVtZW50IiwicG9pbnRzIiwiY2hlY2tBY2hpZXZlbWVudHMiLCJnYW1lU3RhdGUiLCJnZXRTdGF0ZSIsIk9iamVjdCIsImVudHJpZXMiLCJfZXZhbHVhdGVBY2hpZXZlbWVudCIsIl91bmxvY2tBY2hpZXZlbWVudCIsImZvcmNlVW5sb2NrQWNoaWV2ZW1lbnQiLCJ3YXJuIiwicmVzZXRBY2hpZXZlbWVudHMiLCJjbGVhciIsIl9zYXZlQWNoaWV2ZW1lbnRTdGF0ZSIsImVtaXQiLCJzZXRTa2lsbFN5c3RlbSIsInNldEludmVudG9yeVN5c3RlbSIsImtleXMiLCJjdXJyZW50IiwicmVxdWlyZWQiLCJfZ2V0UmVxdWlyZWRWYWx1ZSIsImNvbXBsZXRlZCIsInNhdmVkU3RhdGUiLCJhY2hpZXZlbWVudHMiLCJ1bmxvY2tlZCIsInByb2dyZXNzIiwiZXJyb3IiLCJjdXJyZW50U3RhdGUiLCJBcnJheSIsImZyb20iLCJzZXRTdGF0ZSIsIm9uIiwiZGF0YSIsIl91cGRhdGVTa2lsbExldmVsUHJvZ3Jlc3MiLCJza2lsbE5hbWUiLCJuZXdMZXZlbCIsIl91cGRhdGVJbnZlbnRvcnlQcm9ncmVzcyIsIml0ZW1JZCIsIl91cGRhdGVUcmFkaW5nUHJvZ3Jlc3MiLCJfdXBkYXRlQ29uc3VtcHRpb25Qcm9ncmVzcyIsIl91cGRhdGVDcmFmdGluZ1Byb2dyZXNzIiwiX3VwZGF0ZUxvY2F0aW9uUHJvZ3Jlc3MiLCJfdXBkYXRlUGV0UHJvZ3Jlc3MiLCJfdXBkYXRlQ29va2luZ1Byb2dyZXNzIiwicmVxdWlyZW1lbnRzIiwic2tpbGxMZXZlbCIsInJlcXVpcmVkTGV2ZWwiLCJza2lsbCIsInNraWxscyIsImxldmVsIiwiYW55U2tpbGxMZXZlbCIsImhhc0FueVNraWxsQXRMZXZlbCIsInZhbHVlcyIsInNvbWUiLCJtdWx0aXBsZVNraWxsTGV2ZWxzIiwiY291bnQiLCJza2lsbHNBdExldmVsIiwiZmlsdGVyIiwibGVuZ3RoIiwidW5pcXVlSXRlbXMiLCJyZXF1aXJlZENvdW50IiwidW5pcXVlSXRlbUNvdW50IiwiaW52ZW50b3J5IiwiY3VzdG9tIiwiX2V2YWx1YXRlQ3VzdG9tUmVxdWlyZW1lbnQiLCJyZXF1aXJlbWVudFR5cGUiLCJ0cmFkaW5nSGlzdG9yeSIsInRyYWRlIiwibG9jYXRpb24iLCJjb25zdW1wdGlvbkhpc3RvcnkiLCJjb25zdW1wdGlvbiIsInBldEhpc3RvcnkiLCJwZXQiLCJzb3VyY2UiLCJjb29raW5nSGlzdG9yeSIsImNvb2tpbmciLCJpbmdyZWRpZW50cyIsImluY2x1ZGVzIiwiY3JhZnRpbmdIaXN0b3J5IiwidmlzaXRlZExvY2F0aW9ucyIsImFjaGlldmVtZW50UmVxdWlyZW1lbnRzIiwibG9jYXRpb25Db3VudCIsIk1hdGgiLCJtYXgiLCJhZGQiLCJ0b3RhbFBvaW50cyIsIm5hbWUiLCJtaW4iLCJwdXNoIiwidHlwZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJsb2NhdGlvbklkIiwicGV0VHlwZSIsIndpbmRvdyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/game-engine/systems/AchievementSystem.js\n");

/***/ })

};
;