"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_src_lib_game-engine_systems_SpeciesSystem_js";
exports.ids = ["_ssr_src_lib_game-engine_systems_SpeciesSystem_js"];
exports.modules = {

/***/ "(ssr)/./src/lib/game-engine/systems/SpeciesSystem.js":
/*!******************************************************!*\
  !*** ./src/lib/game-engine/systems/SpeciesSystem.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SpeciesSystem: () => (/* binding */ SpeciesSystem)\n/* harmony export */ });\n/**\r\n * Species System\r\n * \r\n * Manages all species-related functionality including species data,\r\n * attributes, bonuses, and species operations.\r\n */ class Species {\n    constructor(data){\n        this.id = data.id;\n        this.name = data.name;\n        this.description = data.description;\n        this.type = data.type || 'playable';\n        this.attributes = data.attributes || {};\n        this.bonuses = data.bonuses || {};\n        this.professions = data.professions || [];\n        this.traits = data.traits || [];\n        this.image = data.image;\n        this.icon = data.icon;\n    }\n    /**\r\n     * Get an attribute value\r\n     * @param {string} attributeName - Name of the attribute\r\n     * @returns {number} Attribute value\r\n     */ getAttribute(attributeName) {\n        return this.attributes[attributeName] || 0;\n    }\n    /**\r\n     * Get attribute range (min/max)\r\n     * @param {string} attributeName - Name of the attribute\r\n     * @returns {Object|null} Range object or null if not found\r\n     */ getAttributeRange(attributeName) {\n        const attr = this.attributes[attributeName];\n        if (typeof attr === 'object' && attr.min !== undefined && attr.max !== undefined) {\n            return {\n                min: attr.min,\n                max: attr.max\n            };\n        }\n        return null;\n    }\n    /**\r\n     * Get a bonus value\r\n     * @param {string} bonusType - Type of bonus\r\n     * @returns {number} Bonus value\r\n     */ getBonus(bonusType) {\n        return this.bonuses[bonusType] || 0;\n    }\n    /**\r\n     * Check if species has a specific profession\r\n     * @param {string} profession - Profession to check\r\n     * @returns {boolean} Whether species has the profession\r\n     */ hasProfession(profession) {\n        return this.professions.includes(profession);\n    }\n    /**\r\n     * Check if species has a specific trait\r\n     * @param {string} trait - Trait to check\r\n     * @returns {boolean} Whether species has the trait\r\n     */ hasTrait(trait) {\n        return this.traits.includes(trait);\n    }\n    /**\r\n     * Get all attributes as an object\r\n     * @returns {Object} All attributes\r\n     */ getAllAttributes() {\n        return {\n            ...this.attributes\n        };\n    }\n    /**\r\n     * Get all bonuses as an object\r\n     * @returns {Object} All bonuses\r\n     */ getAllBonuses() {\n        return {\n            ...this.bonuses\n        };\n    }\n    /**\r\n     * Get all professions\r\n     * @returns {Array} Array of professions\r\n     */ getAllProfessions() {\n        return [\n            ...this.professions\n        ];\n    }\n    /**\r\n     * Get all traits\r\n     * @returns {Array} Array of traits\r\n     */ getAllTraits() {\n        return [\n            ...this.traits\n        ];\n    }\n    /**\r\n     * Check if species is playable\r\n     * @returns {boolean} Whether species is playable\r\n     */ isPlayable() {\n        return this.type === 'playable';\n    }\n    /**\r\n     * Get species statistics\r\n     * @returns {Object} Species statistics\r\n     */ getStats() {\n        const totalAttributes = Object.values(this.attributes).reduce((sum, attr)=>{\n            if (typeof attr === 'number') return sum + attr;\n            if (typeof attr === 'object' && attr.min !== undefined) return sum + attr.min;\n            return sum;\n        }, 0);\n        return {\n            id: this.id,\n            name: this.name,\n            type: this.type,\n            attributesCount: Object.keys(this.attributes).length,\n            bonusesCount: Object.keys(this.bonuses).length,\n            professionsCount: this.professions.length,\n            traitsCount: this.traits.length,\n            totalAttributes,\n            isPlayable: this.isPlayable()\n        };\n    }\n}\nclass SpeciesSystem {\n    constructor(speciesConfig, stateManager, eventSystem){\n        this.speciesConfig = speciesConfig;\n        this.stateManager = stateManager;\n        this.eventSystem = eventSystem;\n        this.species = new Map();\n        this.playableSpecies = new Map();\n        this.nonPlayableSpecies = new Map();\n        this.isLoaded = false;\n        // Bind methods to maintain context\n        this.getSpecies = this.getSpecies.bind(this);\n        this.getPlayableSpecies = this.getPlayableSpecies.bind(this);\n    }\n    /**\r\n     * Initialize the species system\r\n     */ async initialize() {\n        try {\n            console.log('Initializing species system...');\n            // Load species from configuration\n            await this.loadSpeciesData();\n            // Set up event listeners\n            this._setupEventListeners();\n            console.log('Species system initialized successfully');\n            this.eventSystem.emit('speciesSystem:initialized', {\n                totalSpecies: this.species.size,\n                playableSpecies: this.playableSpecies.size,\n                nonPlayableSpecies: this.nonPlayableSpecies.size\n            });\n        } catch (error) {\n            console.error('Failed to initialize species system:', error);\n            this.eventSystem.emit('speciesSystem:initError', {\n                error\n            });\n            throw error;\n        }\n    }\n    /**\r\n     * Load species data from configuration\r\n     * @param {string} dataPath - Path to species data file\r\n     * @returns {Promise<boolean>} True if loading successful\r\n     */ async loadSpeciesData(dataPath = null) {\n        try {\n            const path = dataPath || this.speciesConfig || '../data/species.json';\n            // If path is provided as a string, load from file\n            if (typeof path === 'string') {\n                const response = await fetch(path);\n                if (!response.ok) {\n                    throw new Error(`Failed to load species data: ${response.status}`);\n                }\n                const speciesData = await response.json();\n                this.processSpeciesData(speciesData);\n            } else if (typeof path === 'object') {\n                // If path is an object, use it directly\n                this.processSpeciesData(path);\n            } else {\n                throw new Error('Invalid species configuration');\n            }\n            this.isLoaded = true;\n            console.log(`Loaded ${this.species.size} species (${this.playableSpecies.size} playable)`);\n            return true;\n        } catch (error) {\n            console.error('Error loading species data:', error);\n            this.isLoaded = false;\n            throw error;\n        }\n    }\n    /**\r\n     * Process loaded species data and create Species instances\r\n     * @param {Object} speciesData - Raw species data from JSON\r\n     */ processSpeciesData(speciesData) {\n        this.species.clear();\n        this.playableSpecies.clear();\n        this.nonPlayableSpecies.clear();\n        // Process playable species\n        if (speciesData.playable) {\n            for (const [id, data] of Object.entries(speciesData.playable)){\n                const species = new Species({\n                    id,\n                    ...data\n                });\n                this.species.set(id, species);\n                this.playableSpecies.set(id, species);\n            }\n        }\n        // Process non-playable species\n        if (speciesData.non_playable) {\n            for (const [id, data] of Object.entries(speciesData.non_playable)){\n                const species = new Species({\n                    id,\n                    ...data\n                });\n                this.species.set(id, species);\n                this.nonPlayableSpecies.set(id, species);\n            }\n        }\n    }\n    /**\r\n     * Get a species by ID\r\n     * @param {string} speciesId - ID of the species\r\n     * @returns {Species|null} Species instance or null if not found\r\n     */ getSpecies(speciesId) {\n        return this.species.get(speciesId) || null;\n    }\n    /**\r\n     * Get a species by name (case-insensitive)\r\n     * @param {string} speciesName - Name of the species\r\n     * @returns {Species|null} Species instance or null if not found\r\n     */ getSpeciesByName(speciesName) {\n        const normalizedName = speciesName.toLowerCase();\n        for (const species of this.species.values()){\n            if (species.name.toLowerCase() === normalizedName) {\n                return species;\n            }\n        }\n        return null;\n    }\n    /**\r\n     * Get all species\r\n     * @returns {Array<Species>} Array of all species\r\n     */ getAllSpecies() {\n        return Array.from(this.species.values());\n    }\n    /**\r\n     * Get all playable species\r\n     * @returns {Array<Species>} Array of playable species\r\n     */ getPlayableSpecies() {\n        return Array.from(this.playableSpecies.values());\n    }\n    /**\r\n     * Get all non-playable species\r\n     * @returns {Array<Species>} Array of non-playable species\r\n     */ getNonPlayableSpecies() {\n        return Array.from(this.nonPlayableSpecies.values());\n    }\n    /**\r\n     * Get species that have a specific profession\r\n     * @param {string} profession - Profession to search for\r\n     * @returns {Array<Species>} Array of species with the profession\r\n     */ getSpeciesByProfession(profession) {\n        return this.getAllSpecies().filter((species)=>species.hasProfession(profession));\n    }\n    /**\r\n     * Get species within a specific attribute range\r\n     * @param {string} attributeName - Name of the attribute\r\n     * @param {number} minValue - Minimum value\r\n     * @param {number} maxValue - Maximum value\r\n     * @returns {Array<Species>} Array of species within the range\r\n     */ getSpeciesByAttributeRange(attributeName, minValue, maxValue) {\n        return this.getAllSpecies().filter((species)=>{\n            const range = species.getAttributeRange(attributeName);\n            if (!range) return false;\n            return range.min >= minValue && range.max <= maxValue;\n        });\n    }\n    /**\r\n     * Get species with a specific bonus\r\n     * @param {string} bonusType - Type of bonus\r\n     * @param {number} minValue - Minimum bonus value\r\n     * @returns {Array<Species>} Array of species with the bonus\r\n     */ getSpeciesByBonus(bonusType, minValue = 0) {\n        return this.getAllSpecies().filter((species)=>species.getBonus(bonusType) >= minValue);\n    }\n    /**\r\n     * Generate a random playable species\r\n     * @returns {Species|null} Random playable species or null if none available\r\n     */ getRandomPlayableSpecies() {\n        const playableSpecies = this.getPlayableSpecies();\n        if (playableSpecies.length === 0) return null;\n        const randomIndex = Math.floor(Math.random() * playableSpecies.length);\n        return playableSpecies[randomIndex];\n    }\n    /**\r\n     * Generate a random non-playable species\r\n     * @returns {Species|null} Random non-playable species or null if none available\r\n     */ getRandomNonPlayableSpecies() {\n        const nonPlayableSpecies = this.getNonPlayableSpecies();\n        if (nonPlayableSpecies.length === 0) return null;\n        const randomIndex = Math.floor(Math.random() * nonPlayableSpecies.length);\n        return nonPlayableSpecies[randomIndex];\n    }\n    /**\r\n     * Search species by name (partial match)\r\n     * @param {string} searchTerm - Search term\r\n     * @returns {Array<Species>} Array of matching species\r\n     */ searchSpecies(searchTerm) {\n        const normalizedTerm = searchTerm.toLowerCase();\n        return this.getAllSpecies().filter((species)=>species.name.toLowerCase().includes(normalizedTerm) || species.description.toLowerCase().includes(normalizedTerm));\n    }\n    /**\r\n     * Get all unique professions across all species\r\n     * @returns {Array<string>} Array of unique professions\r\n     */ getAllProfessions() {\n        const professions = new Set();\n        this.getAllSpecies().forEach((species)=>{\n            species.getAllProfessions().forEach((profession)=>{\n                professions.add(profession);\n            });\n        });\n        return Array.from(professions);\n    }\n    /**\r\n     * Get all unique attributes across all species\r\n     * @returns {Array<string>} Array of unique attributes\r\n     */ getAllAttributes() {\n        const attributes = new Set();\n        this.getAllSpecies().forEach((species)=>{\n            Object.keys(species.getAllAttributes()).forEach((attribute)=>{\n                attributes.add(attribute);\n            });\n        });\n        return Array.from(attributes);\n    }\n    /**\r\n     * Check if species data is loaded\r\n     * @returns {boolean} True if species data is loaded\r\n     */ isDataLoaded() {\n        return this.isLoaded;\n    }\n    /**\r\n     * Get species system statistics\r\n     * @returns {Object} Statistics object\r\n     */ getStats() {\n        return {\n            total: this.species.size,\n            playable: this.playableSpecies.size,\n            nonPlayable: this.nonPlayableSpecies.size,\n            loaded: this.isLoaded,\n            professions: this.getAllProfessions().length,\n            attributes: this.getAllAttributes().length\n        };\n    }\n    /**\r\n     * Set up event listeners\r\n     */ _setupEventListeners() {\n        // Listen for species-related events\n        this.eventSystem.on('species:selected', (data)=>{\n        // Handle species selection\n        });\n        this.eventSystem.on('species:created', (data)=>{\n        // Handle species creation\n        });\n    }\n}\nif (false) {}\n// ES Module exports\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvbGliL2dhbWUtZW5naW5lL3N5c3RlbXMvU3BlY2llc1N5c3RlbS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7Ozs7O0NBS0MsR0FFRCxNQUFNQTtJQUNGQyxZQUFZQyxJQUFJLENBQUU7UUFDZCxJQUFJLENBQUNDLEVBQUUsR0FBR0QsS0FBS0MsRUFBRTtRQUNqQixJQUFJLENBQUNDLElBQUksR0FBR0YsS0FBS0UsSUFBSTtRQUNyQixJQUFJLENBQUNDLFdBQVcsR0FBR0gsS0FBS0csV0FBVztRQUNuQyxJQUFJLENBQUNDLElBQUksR0FBR0osS0FBS0ksSUFBSSxJQUFJO1FBQ3pCLElBQUksQ0FBQ0MsVUFBVSxHQUFHTCxLQUFLSyxVQUFVLElBQUksQ0FBQztRQUN0QyxJQUFJLENBQUNDLE9BQU8sR0FBR04sS0FBS00sT0FBTyxJQUFJLENBQUM7UUFDaEMsSUFBSSxDQUFDQyxXQUFXLEdBQUdQLEtBQUtPLFdBQVcsSUFBSSxFQUFFO1FBQ3pDLElBQUksQ0FBQ0MsTUFBTSxHQUFHUixLQUFLUSxNQUFNLElBQUksRUFBRTtRQUMvQixJQUFJLENBQUNDLEtBQUssR0FBR1QsS0FBS1MsS0FBSztRQUN2QixJQUFJLENBQUNDLElBQUksR0FBR1YsS0FBS1UsSUFBSTtJQUN6QjtJQUVBOzs7O0tBSUMsR0FDREMsYUFBYUMsYUFBYSxFQUFFO1FBQ3hCLE9BQU8sSUFBSSxDQUFDUCxVQUFVLENBQUNPLGNBQWMsSUFBSTtJQUM3QztJQUVBOzs7O0tBSUMsR0FDREMsa0JBQWtCRCxhQUFhLEVBQUU7UUFDN0IsTUFBTUUsT0FBTyxJQUFJLENBQUNULFVBQVUsQ0FBQ08sY0FBYztRQUMzQyxJQUFJLE9BQU9FLFNBQVMsWUFBWUEsS0FBS0MsR0FBRyxLQUFLQyxhQUFhRixLQUFLRyxHQUFHLEtBQUtELFdBQVc7WUFDOUUsT0FBTztnQkFBRUQsS0FBS0QsS0FBS0MsR0FBRztnQkFBRUUsS0FBS0gsS0FBS0csR0FBRztZQUFDO1FBQzFDO1FBQ0EsT0FBTztJQUNY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bGZcXHRhdmVybnNcXHNyY1xcbGliXFxnYW1lLWVuZ2luZVxcc3lzdGVtc1xcU3BlY2llc1N5c3RlbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogU3BlY2llcyBTeXN0ZW1cclxuICogXHJcbiAqIE1hbmFnZXMgYWxsIHNwZWNpZXMtcmVsYXRlZCBmdW5jdGlvbmFsaXR5IGluY2x1ZGluZyBzcGVjaWVzIGRhdGEsXHJcbiAqIGF0dHJpYnV0ZXMsIGJvbnVzZXMsIGFuZCBzcGVjaWVzIG9wZXJhdGlvbnMuXHJcbiAqL1xyXG5cclxuY2xhc3MgU3BlY2llcyB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5pZCA9IGRhdGEuaWQ7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkYXRhLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IGRhdGEudHlwZSB8fCAncGxheWFibGUnO1xyXG4gICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IGRhdGEuYXR0cmlidXRlcyB8fCB7fTtcclxuICAgICAgICB0aGlzLmJvbnVzZXMgPSBkYXRhLmJvbnVzZXMgfHwge307XHJcbiAgICAgICAgdGhpcy5wcm9mZXNzaW9ucyA9IGRhdGEucHJvZmVzc2lvbnMgfHwgW107XHJcbiAgICAgICAgdGhpcy50cmFpdHMgPSBkYXRhLnRyYWl0cyB8fCBbXTtcclxuICAgICAgICB0aGlzLmltYWdlID0gZGF0YS5pbWFnZTtcclxuICAgICAgICB0aGlzLmljb24gPSBkYXRhLmljb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYW4gYXR0cmlidXRlIHZhbHVlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlTmFtZSAtIE5hbWUgb2YgdGhlIGF0dHJpYnV0ZVxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gQXR0cmlidXRlIHZhbHVlXHJcbiAgICAgKi9cclxuICAgIGdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXSB8fCAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGF0dHJpYnV0ZSByYW5nZSAobWluL21heClcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVOYW1lIC0gTmFtZSBvZiB0aGUgYXR0cmlidXRlXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fG51bGx9IFJhbmdlIG9iamVjdCBvciBudWxsIGlmIG5vdCBmb3VuZFxyXG4gICAgICovXHJcbiAgICBnZXRBdHRyaWJ1dGVSYW5nZShhdHRyaWJ1dGVOYW1lKSB7XHJcbiAgICAgICAgY29uc3QgYXR0ciA9IHRoaXMuYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXTtcclxuICAgICAgICBpZiAodHlwZW9mIGF0dHIgPT09ICdvYmplY3QnICYmIGF0dHIubWluICE9PSB1bmRlZmluZWQgJiYgYXR0ci5tYXggIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBtaW46IGF0dHIubWluLCBtYXg6IGF0dHIubWF4IH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgYm9udXMgdmFsdWVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBib251c1R5cGUgLSBUeXBlIG9mIGJvbnVzXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBCb251cyB2YWx1ZVxyXG4gICAgICovXHJcbiAgICBnZXRCb251cyhib251c1R5cGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ib251c2VzW2JvbnVzVHlwZV0gfHwgMDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIHNwZWNpZXMgaGFzIGEgc3BlY2lmaWMgcHJvZmVzc2lvblxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb2Zlc3Npb24gLSBQcm9mZXNzaW9uIHRvIGNoZWNrXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciBzcGVjaWVzIGhhcyB0aGUgcHJvZmVzc2lvblxyXG4gICAgICovXHJcbiAgICBoYXNQcm9mZXNzaW9uKHByb2Zlc3Npb24pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wcm9mZXNzaW9ucy5pbmNsdWRlcyhwcm9mZXNzaW9uKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIHNwZWNpZXMgaGFzIGEgc3BlY2lmaWMgdHJhaXRcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0cmFpdCAtIFRyYWl0IHRvIGNoZWNrXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciBzcGVjaWVzIGhhcyB0aGUgdHJhaXRcclxuICAgICAqL1xyXG4gICAgaGFzVHJhaXQodHJhaXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50cmFpdHMuaW5jbHVkZXModHJhaXQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGFsbCBhdHRyaWJ1dGVzIGFzIGFuIG9iamVjdFxyXG4gICAgICogQHJldHVybnMge09iamVjdH0gQWxsIGF0dHJpYnV0ZXNcclxuICAgICAqL1xyXG4gICAgZ2V0QWxsQXR0cmlidXRlcygpIHtcclxuICAgICAgICByZXR1cm4geyAuLi50aGlzLmF0dHJpYnV0ZXMgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhbGwgYm9udXNlcyBhcyBhbiBvYmplY3RcclxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IEFsbCBib251c2VzXHJcbiAgICAgKi9cclxuICAgIGdldEFsbEJvbnVzZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgLi4udGhpcy5ib251c2VzIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYWxsIHByb2Zlc3Npb25zXHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IEFycmF5IG9mIHByb2Zlc3Npb25zXHJcbiAgICAgKi9cclxuICAgIGdldEFsbFByb2Zlc3Npb25zKCkge1xyXG4gICAgICAgIHJldHVybiBbLi4udGhpcy5wcm9mZXNzaW9uc107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYWxsIHRyYWl0c1xyXG4gICAgICogQHJldHVybnMge0FycmF5fSBBcnJheSBvZiB0cmFpdHNcclxuICAgICAqL1xyXG4gICAgZ2V0QWxsVHJhaXRzKCkge1xyXG4gICAgICAgIHJldHVybiBbLi4udGhpcy50cmFpdHNdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgc3BlY2llcyBpcyBwbGF5YWJsZVxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgc3BlY2llcyBpcyBwbGF5YWJsZVxyXG4gICAgICovXHJcbiAgICBpc1BsYXlhYmxlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUgPT09ICdwbGF5YWJsZSc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgc3BlY2llcyBzdGF0aXN0aWNzXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBTcGVjaWVzIHN0YXRpc3RpY3NcclxuICAgICAqL1xyXG4gICAgZ2V0U3RhdHMoKSB7XHJcbiAgICAgICAgY29uc3QgdG90YWxBdHRyaWJ1dGVzID0gT2JqZWN0LnZhbHVlcyh0aGlzLmF0dHJpYnV0ZXMpXHJcbiAgICAgICAgICAgIC5yZWR1Y2UoKHN1bSwgYXR0cikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhdHRyID09PSAnbnVtYmVyJykgcmV0dXJuIHN1bSArIGF0dHI7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGF0dHIgPT09ICdvYmplY3QnICYmIGF0dHIubWluICE9PSB1bmRlZmluZWQpIHJldHVybiBzdW0gKyBhdHRyLm1pbjtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdW07XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpZDogdGhpcy5pZCxcclxuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxyXG4gICAgICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXNDb3VudDogT2JqZWN0LmtleXModGhpcy5hdHRyaWJ1dGVzKS5sZW5ndGgsXHJcbiAgICAgICAgICAgIGJvbnVzZXNDb3VudDogT2JqZWN0LmtleXModGhpcy5ib251c2VzKS5sZW5ndGgsXHJcbiAgICAgICAgICAgIHByb2Zlc3Npb25zQ291bnQ6IHRoaXMucHJvZmVzc2lvbnMubGVuZ3RoLFxyXG4gICAgICAgICAgICB0cmFpdHNDb3VudDogdGhpcy50cmFpdHMubGVuZ3RoLFxyXG4gICAgICAgICAgICB0b3RhbEF0dHJpYnV0ZXMsXHJcbiAgICAgICAgICAgIGlzUGxheWFibGU6IHRoaXMuaXNQbGF5YWJsZSgpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgU3BlY2llc1N5c3RlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcihzcGVjaWVzQ29uZmlnLCBzdGF0ZU1hbmFnZXIsIGV2ZW50U3lzdGVtKSB7XHJcbiAgICAgICAgdGhpcy5zcGVjaWVzQ29uZmlnID0gc3BlY2llc0NvbmZpZztcclxuICAgICAgICB0aGlzLnN0YXRlTWFuYWdlciA9IHN0YXRlTWFuYWdlcjtcclxuICAgICAgICB0aGlzLmV2ZW50U3lzdGVtID0gZXZlbnRTeXN0ZW07XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zcGVjaWVzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMucGxheWFibGVTcGVjaWVzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMubm9uUGxheWFibGVTcGVjaWVzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuaXNMb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBCaW5kIG1ldGhvZHMgdG8gbWFpbnRhaW4gY29udGV4dFxyXG4gICAgICAgIHRoaXMuZ2V0U3BlY2llcyA9IHRoaXMuZ2V0U3BlY2llcy5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZ2V0UGxheWFibGVTcGVjaWVzID0gdGhpcy5nZXRQbGF5YWJsZVNwZWNpZXMuYmluZCh0aGlzKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIHRoZSBzcGVjaWVzIHN5c3RlbVxyXG4gICAgICovXHJcbiAgICBhc3luYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJbml0aWFsaXppbmcgc3BlY2llcyBzeXN0ZW0uLi4nKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIExvYWQgc3BlY2llcyBmcm9tIGNvbmZpZ3VyYXRpb25cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkU3BlY2llc0RhdGEoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNldCB1cCBldmVudCBsaXN0ZW5lcnNcclxuICAgICAgICAgICAgdGhpcy5fc2V0dXBFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NwZWNpZXMgc3lzdGVtIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLmVtaXQoJ3NwZWNpZXNTeXN0ZW06aW5pdGlhbGl6ZWQnLCB7IFxyXG4gICAgICAgICAgICAgICAgdG90YWxTcGVjaWVzOiB0aGlzLnNwZWNpZXMuc2l6ZSxcclxuICAgICAgICAgICAgICAgIHBsYXlhYmxlU3BlY2llczogdGhpcy5wbGF5YWJsZVNwZWNpZXMuc2l6ZSxcclxuICAgICAgICAgICAgICAgIG5vblBsYXlhYmxlU3BlY2llczogdGhpcy5ub25QbGF5YWJsZVNwZWNpZXMuc2l6ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgc3BlY2llcyBzeXN0ZW06JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLmVtaXQoJ3NwZWNpZXNTeXN0ZW06aW5pdEVycm9yJywgeyBlcnJvciB9KTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIExvYWQgc3BlY2llcyBkYXRhIGZyb20gY29uZmlndXJhdGlvblxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGFQYXRoIC0gUGF0aCB0byBzcGVjaWVzIGRhdGEgZmlsZVxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IFRydWUgaWYgbG9hZGluZyBzdWNjZXNzZnVsXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGxvYWRTcGVjaWVzRGF0YShkYXRhUGF0aCA9IG51bGwpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBwYXRoID0gZGF0YVBhdGggfHwgdGhpcy5zcGVjaWVzQ29uZmlnIHx8ICcuLi9kYXRhL3NwZWNpZXMuanNvbic7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBJZiBwYXRoIGlzIHByb3ZpZGVkIGFzIGEgc3RyaW5nLCBsb2FkIGZyb20gZmlsZVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxvYWQgc3BlY2llcyBkYXRhOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3BlY2llc0RhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NTcGVjaWVzRGF0YShzcGVjaWVzRGF0YSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHBhdGggPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiBwYXRoIGlzIGFuIG9iamVjdCwgdXNlIGl0IGRpcmVjdGx5XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NTcGVjaWVzRGF0YShwYXRoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzcGVjaWVzIGNvbmZpZ3VyYXRpb24nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5pc0xvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBMb2FkZWQgJHt0aGlzLnNwZWNpZXMuc2l6ZX0gc3BlY2llcyAoJHt0aGlzLnBsYXlhYmxlU3BlY2llcy5zaXplfSBwbGF5YWJsZSlgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgc3BlY2llcyBkYXRhOicsIGVycm9yKTtcclxuICAgICAgICAgICAgdGhpcy5pc0xvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogUHJvY2VzcyBsb2FkZWQgc3BlY2llcyBkYXRhIGFuZCBjcmVhdGUgU3BlY2llcyBpbnN0YW5jZXNcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzcGVjaWVzRGF0YSAtIFJhdyBzcGVjaWVzIGRhdGEgZnJvbSBKU09OXHJcbiAgICAgKi9cclxuICAgIHByb2Nlc3NTcGVjaWVzRGF0YShzcGVjaWVzRGF0YSkge1xyXG4gICAgICAgIHRoaXMuc3BlY2llcy5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMucGxheWFibGVTcGVjaWVzLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5ub25QbGF5YWJsZVNwZWNpZXMuY2xlYXIoKTtcclxuXHJcbiAgICAgICAgLy8gUHJvY2VzcyBwbGF5YWJsZSBzcGVjaWVzXHJcbiAgICAgICAgaWYgKHNwZWNpZXNEYXRhLnBsYXlhYmxlKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2lkLCBkYXRhXSBvZiBPYmplY3QuZW50cmllcyhzcGVjaWVzRGF0YS5wbGF5YWJsZSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNwZWNpZXMgPSBuZXcgU3BlY2llcyh7IGlkLCAuLi5kYXRhIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGVjaWVzLnNldChpZCwgc3BlY2llcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXlhYmxlU3BlY2llcy5zZXQoaWQsIHNwZWNpZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQcm9jZXNzIG5vbi1wbGF5YWJsZSBzcGVjaWVzXHJcbiAgICAgICAgaWYgKHNwZWNpZXNEYXRhLm5vbl9wbGF5YWJsZSkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtpZCwgZGF0YV0gb2YgT2JqZWN0LmVudHJpZXMoc3BlY2llc0RhdGEubm9uX3BsYXlhYmxlKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3BlY2llcyA9IG5ldyBTcGVjaWVzKHsgaWQsIC4uLmRhdGEgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwZWNpZXMuc2V0KGlkLCBzcGVjaWVzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9uUGxheWFibGVTcGVjaWVzLnNldChpZCwgc3BlY2llcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgc3BlY2llcyBieSBJRFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNwZWNpZXNJZCAtIElEIG9mIHRoZSBzcGVjaWVzXHJcbiAgICAgKiBAcmV0dXJucyB7U3BlY2llc3xudWxsfSBTcGVjaWVzIGluc3RhbmNlIG9yIG51bGwgaWYgbm90IGZvdW5kXHJcbiAgICAgKi9cclxuICAgIGdldFNwZWNpZXMoc3BlY2llc0lkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3BlY2llcy5nZXQoc3BlY2llc0lkKSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhIHNwZWNpZXMgYnkgbmFtZSAoY2FzZS1pbnNlbnNpdGl2ZSlcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzcGVjaWVzTmFtZSAtIE5hbWUgb2YgdGhlIHNwZWNpZXNcclxuICAgICAqIEByZXR1cm5zIHtTcGVjaWVzfG51bGx9IFNwZWNpZXMgaW5zdGFuY2Ugb3IgbnVsbCBpZiBub3QgZm91bmRcclxuICAgICAqL1xyXG4gICAgZ2V0U3BlY2llc0J5TmFtZShzcGVjaWVzTmFtZSkge1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWROYW1lID0gc3BlY2llc05hbWUudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNwZWNpZXMgb2YgdGhpcy5zcGVjaWVzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgICAgIGlmIChzcGVjaWVzLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbm9ybWFsaXplZE5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzcGVjaWVzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhbGwgc3BlY2llc1xyXG4gICAgICogQHJldHVybnMge0FycmF5PFNwZWNpZXM+fSBBcnJheSBvZiBhbGwgc3BlY2llc1xyXG4gICAgICovXHJcbiAgICBnZXRBbGxTcGVjaWVzKCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuc3BlY2llcy52YWx1ZXMoKSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2V0IGFsbCBwbGF5YWJsZSBzcGVjaWVzXHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXk8U3BlY2llcz59IEFycmF5IG9mIHBsYXlhYmxlIHNwZWNpZXNcclxuICAgICAqL1xyXG4gICAgZ2V0UGxheWFibGVTcGVjaWVzKCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucGxheWFibGVTcGVjaWVzLnZhbHVlcygpKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYWxsIG5vbi1wbGF5YWJsZSBzcGVjaWVzXHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXk8U3BlY2llcz59IEFycmF5IG9mIG5vbi1wbGF5YWJsZSBzcGVjaWVzXHJcbiAgICAgKi9cclxuICAgIGdldE5vblBsYXlhYmxlU3BlY2llcygpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLm5vblBsYXlhYmxlU3BlY2llcy52YWx1ZXMoKSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2V0IHNwZWNpZXMgdGhhdCBoYXZlIGEgc3BlY2lmaWMgcHJvZmVzc2lvblxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb2Zlc3Npb24gLSBQcm9mZXNzaW9uIHRvIHNlYXJjaCBmb3JcclxuICAgICAqIEByZXR1cm5zIHtBcnJheTxTcGVjaWVzPn0gQXJyYXkgb2Ygc3BlY2llcyB3aXRoIHRoZSBwcm9mZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIGdldFNwZWNpZXNCeVByb2Zlc3Npb24ocHJvZmVzc2lvbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEFsbFNwZWNpZXMoKS5maWx0ZXIoc3BlY2llcyA9PiBcclxuICAgICAgICAgICAgc3BlY2llcy5oYXNQcm9mZXNzaW9uKHByb2Zlc3Npb24pXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgc3BlY2llcyB3aXRoaW4gYSBzcGVjaWZpYyBhdHRyaWJ1dGUgcmFuZ2VcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVOYW1lIC0gTmFtZSBvZiB0aGUgYXR0cmlidXRlXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluVmFsdWUgLSBNaW5pbXVtIHZhbHVlXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4VmFsdWUgLSBNYXhpbXVtIHZhbHVlXHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXk8U3BlY2llcz59IEFycmF5IG9mIHNwZWNpZXMgd2l0aGluIHRoZSByYW5nZVxyXG4gICAgICovXHJcbiAgICBnZXRTcGVjaWVzQnlBdHRyaWJ1dGVSYW5nZShhdHRyaWJ1dGVOYW1lLCBtaW5WYWx1ZSwgbWF4VmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBbGxTcGVjaWVzKCkuZmlsdGVyKHNwZWNpZXMgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByYW5nZSA9IHNwZWNpZXMuZ2V0QXR0cmlidXRlUmFuZ2UoYXR0cmlidXRlTmFtZSk7XHJcbiAgICAgICAgICAgIGlmICghcmFuZ2UpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiByYW5nZS5taW4gPj0gbWluVmFsdWUgJiYgcmFuZ2UubWF4IDw9IG1heFZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCBzcGVjaWVzIHdpdGggYSBzcGVjaWZpYyBib251c1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGJvbnVzVHlwZSAtIFR5cGUgb2YgYm9udXNcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5WYWx1ZSAtIE1pbmltdW0gYm9udXMgdmFsdWVcclxuICAgICAqIEByZXR1cm5zIHtBcnJheTxTcGVjaWVzPn0gQXJyYXkgb2Ygc3BlY2llcyB3aXRoIHRoZSBib251c1xyXG4gICAgICovXHJcbiAgICBnZXRTcGVjaWVzQnlCb251cyhib251c1R5cGUsIG1pblZhbHVlID0gMCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEFsbFNwZWNpZXMoKS5maWx0ZXIoc3BlY2llcyA9PiBcclxuICAgICAgICAgICAgc3BlY2llcy5nZXRCb251cyhib251c1R5cGUpID49IG1pblZhbHVlXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZSBhIHJhbmRvbSBwbGF5YWJsZSBzcGVjaWVzXHJcbiAgICAgKiBAcmV0dXJucyB7U3BlY2llc3xudWxsfSBSYW5kb20gcGxheWFibGUgc3BlY2llcyBvciBudWxsIGlmIG5vbmUgYXZhaWxhYmxlXHJcbiAgICAgKi9cclxuICAgIGdldFJhbmRvbVBsYXlhYmxlU3BlY2llcygpIHtcclxuICAgICAgICBjb25zdCBwbGF5YWJsZVNwZWNpZXMgPSB0aGlzLmdldFBsYXlhYmxlU3BlY2llcygpO1xyXG4gICAgICAgIGlmIChwbGF5YWJsZVNwZWNpZXMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBsYXlhYmxlU3BlY2llcy5sZW5ndGgpO1xyXG4gICAgICAgIHJldHVybiBwbGF5YWJsZVNwZWNpZXNbcmFuZG9tSW5kZXhdO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlIGEgcmFuZG9tIG5vbi1wbGF5YWJsZSBzcGVjaWVzXHJcbiAgICAgKiBAcmV0dXJucyB7U3BlY2llc3xudWxsfSBSYW5kb20gbm9uLXBsYXlhYmxlIHNwZWNpZXMgb3IgbnVsbCBpZiBub25lIGF2YWlsYWJsZVxyXG4gICAgICovXHJcbiAgICBnZXRSYW5kb21Ob25QbGF5YWJsZVNwZWNpZXMoKSB7XHJcbiAgICAgICAgY29uc3Qgbm9uUGxheWFibGVTcGVjaWVzID0gdGhpcy5nZXROb25QbGF5YWJsZVNwZWNpZXMoKTtcclxuICAgICAgICBpZiAobm9uUGxheWFibGVTcGVjaWVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBub25QbGF5YWJsZVNwZWNpZXMubGVuZ3RoKTtcclxuICAgICAgICByZXR1cm4gbm9uUGxheWFibGVTcGVjaWVzW3JhbmRvbUluZGV4XTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBTZWFyY2ggc3BlY2llcyBieSBuYW1lIChwYXJ0aWFsIG1hdGNoKVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNlYXJjaFRlcm0gLSBTZWFyY2ggdGVybVxyXG4gICAgICogQHJldHVybnMge0FycmF5PFNwZWNpZXM+fSBBcnJheSBvZiBtYXRjaGluZyBzcGVjaWVzXHJcbiAgICAgKi9cclxuICAgIHNlYXJjaFNwZWNpZXMoc2VhcmNoVGVybSkge1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRUZXJtID0gc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEFsbFNwZWNpZXMoKS5maWx0ZXIoc3BlY2llcyA9PiBcclxuICAgICAgICAgICAgc3BlY2llcy5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobm9ybWFsaXplZFRlcm0pIHx8XHJcbiAgICAgICAgICAgIHNwZWNpZXMuZGVzY3JpcHRpb24udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhub3JtYWxpemVkVGVybSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhbGwgdW5pcXVlIHByb2Zlc3Npb25zIGFjcm9zcyBhbGwgc3BlY2llc1xyXG4gICAgICogQHJldHVybnMge0FycmF5PHN0cmluZz59IEFycmF5IG9mIHVuaXF1ZSBwcm9mZXNzaW9uc1xyXG4gICAgICovXHJcbiAgICBnZXRBbGxQcm9mZXNzaW9ucygpIHtcclxuICAgICAgICBjb25zdCBwcm9mZXNzaW9ucyA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLmdldEFsbFNwZWNpZXMoKS5mb3JFYWNoKHNwZWNpZXMgPT4ge1xyXG4gICAgICAgICAgICBzcGVjaWVzLmdldEFsbFByb2Zlc3Npb25zKCkuZm9yRWFjaChwcm9mZXNzaW9uID0+IHtcclxuICAgICAgICAgICAgICAgIHByb2Zlc3Npb25zLmFkZChwcm9mZXNzaW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20ocHJvZmVzc2lvbnMpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhbGwgdW5pcXVlIGF0dHJpYnV0ZXMgYWNyb3NzIGFsbCBzcGVjaWVzXHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXk8c3RyaW5nPn0gQXJyYXkgb2YgdW5pcXVlIGF0dHJpYnV0ZXNcclxuICAgICAqL1xyXG4gICAgZ2V0QWxsQXR0cmlidXRlcygpIHtcclxuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMuZ2V0QWxsU3BlY2llcygpLmZvckVhY2goc3BlY2llcyA9PiB7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHNwZWNpZXMuZ2V0QWxsQXR0cmlidXRlcygpKS5mb3JFYWNoKGF0dHJpYnV0ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLmFkZChhdHRyaWJ1dGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShhdHRyaWJ1dGVzKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBzcGVjaWVzIGRhdGEgaXMgbG9hZGVkXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBzcGVjaWVzIGRhdGEgaXMgbG9hZGVkXHJcbiAgICAgKi9cclxuICAgIGlzRGF0YUxvYWRlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0xvYWRlZDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgc3BlY2llcyBzeXN0ZW0gc3RhdGlzdGljc1xyXG4gICAgICogQHJldHVybnMge09iamVjdH0gU3RhdGlzdGljcyBvYmplY3RcclxuICAgICAqL1xyXG4gICAgZ2V0U3RhdHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdG90YWw6IHRoaXMuc3BlY2llcy5zaXplLFxyXG4gICAgICAgICAgICBwbGF5YWJsZTogdGhpcy5wbGF5YWJsZVNwZWNpZXMuc2l6ZSxcclxuICAgICAgICAgICAgbm9uUGxheWFibGU6IHRoaXMubm9uUGxheWFibGVTcGVjaWVzLnNpemUsXHJcbiAgICAgICAgICAgIGxvYWRlZDogdGhpcy5pc0xvYWRlZCxcclxuICAgICAgICAgICAgcHJvZmVzc2lvbnM6IHRoaXMuZ2V0QWxsUHJvZmVzc2lvbnMoKS5sZW5ndGgsXHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHRoaXMuZ2V0QWxsQXR0cmlidXRlcygpLmxlbmd0aFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogU2V0IHVwIGV2ZW50IGxpc3RlbmVyc1xyXG4gICAgICovXHJcbiAgICBfc2V0dXBFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICAvLyBMaXN0ZW4gZm9yIHNwZWNpZXMtcmVsYXRlZCBldmVudHNcclxuICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLm9uKCdzcGVjaWVzOnNlbGVjdGVkJywgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgLy8gSGFuZGxlIHNwZWNpZXMgc2VsZWN0aW9uXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5ldmVudFN5c3RlbS5vbignc3BlY2llczpjcmVhdGVkJywgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgLy8gSGFuZGxlIHNwZWNpZXMgY3JlYXRpb25cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB3aW5kb3cuU3BlY2llc1N5c3RlbSA9IFNwZWNpZXNTeXN0ZW07XHJcblxyXG4vLyBFUyBNb2R1bGUgZXhwb3J0c1xyXG5leHBvcnQgeyBTcGVjaWVzU3lzdGVtIH07ICJdLCJuYW1lcyI6WyJTcGVjaWVzIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiaWQiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJ0eXBlIiwiYXR0cmlidXRlcyIsImJvbnVzZXMiLCJwcm9mZXNzaW9ucyIsInRyYWl0cyIsImltYWdlIiwiaWNvbiIsImdldEF0dHJpYnV0ZSIsImF0dHJpYnV0ZU5hbWUiLCJnZXRBdHRyaWJ1dGVSYW5nZSIsImF0dHIiLCJtaW4iLCJ1bmRlZmluZWQiLCJtYXgiLCJnZXRCb251cyIsImJvbnVzVHlwZSIsImhhc1Byb2Zlc3Npb24iLCJwcm9mZXNzaW9uIiwiaW5jbHVkZXMiLCJoYXNUcmFpdCIsInRyYWl0IiwiZ2V0QWxsQXR0cmlidXRlcyIsImdldEFsbEJvbnVzZXMiLCJnZXRBbGxQcm9mZXNzaW9ucyIsImdldEFsbFRyYWl0cyIsImlzUGxheWFibGUiLCJnZXRTdGF0cyIsInRvdGFsQXR0cmlidXRlcyIsIk9iamVjdCIsInZhbHVlcyIsInJlZHVjZSIsInN1bSIsImF0dHJpYnV0ZXNDb3VudCIsImtleXMiLCJsZW5ndGgiLCJib251c2VzQ291bnQiLCJwcm9mZXNzaW9uc0NvdW50IiwidHJhaXRzQ291bnQiLCJTcGVjaWVzU3lzdGVtIiwic3BlY2llc0NvbmZpZyIsInN0YXRlTWFuYWdlciIsImV2ZW50U3lzdGVtIiwic3BlY2llcyIsIk1hcCIsInBsYXlhYmxlU3BlY2llcyIsIm5vblBsYXlhYmxlU3BlY2llcyIsImlzTG9hZGVkIiwiZ2V0U3BlY2llcyIsImJpbmQiLCJnZXRQbGF5YWJsZVNwZWNpZXMiLCJpbml0aWFsaXplIiwiY29uc29sZSIsImxvZyIsImxvYWRTcGVjaWVzRGF0YSIsIl9zZXR1cEV2ZW50TGlzdGVuZXJzIiwiZW1pdCIsInRvdGFsU3BlY2llcyIsInNpemUiLCJlcnJvciIsImRhdGFQYXRoIiwicGF0aCIsInJlc3BvbnNlIiwiZmV0Y2giLCJvayIsIkVycm9yIiwic3RhdHVzIiwic3BlY2llc0RhdGEiLCJqc29uIiwicHJvY2Vzc1NwZWNpZXNEYXRhIiwiY2xlYXIiLCJwbGF5YWJsZSIsImVudHJpZXMiLCJzZXQiLCJub25fcGxheWFibGUiLCJzcGVjaWVzSWQiLCJnZXQiLCJnZXRTcGVjaWVzQnlOYW1lIiwic3BlY2llc05hbWUiLCJub3JtYWxpemVkTmFtZSIsInRvTG93ZXJDYXNlIiwiZ2V0QWxsU3BlY2llcyIsIkFycmF5IiwiZnJvbSIsImdldE5vblBsYXlhYmxlU3BlY2llcyIsImdldFNwZWNpZXNCeVByb2Zlc3Npb24iLCJmaWx0ZXIiLCJnZXRTcGVjaWVzQnlBdHRyaWJ1dGVSYW5nZSIsIm1pblZhbHVlIiwibWF4VmFsdWUiLCJyYW5nZSIsImdldFNwZWNpZXNCeUJvbnVzIiwiZ2V0UmFuZG9tUGxheWFibGVTcGVjaWVzIiwicmFuZG9tSW5kZXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJnZXRSYW5kb21Ob25QbGF5YWJsZVNwZWNpZXMiLCJzZWFyY2hTcGVjaWVzIiwic2VhcmNoVGVybSIsIm5vcm1hbGl6ZWRUZXJtIiwiU2V0IiwiZm9yRWFjaCIsImFkZCIsImF0dHJpYnV0ZSIsImlzRGF0YUxvYWRlZCIsInRvdGFsIiwibm9uUGxheWFibGUiLCJsb2FkZWQiLCJvbiIsIndpbmRvdyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/game-engine/systems/SpeciesSystem.js\n");

/***/ })

};
;