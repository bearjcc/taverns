"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_src_lib_game-engine_core_ModManager_js";
exports.ids = ["_ssr_src_lib_game-engine_core_ModManager_js"];
exports.modules = {

/***/ "(ssr)/./src/lib/game-engine/core/ModManager.js":
/*!************************************************!*\
  !*** ./src/lib/game-engine/core/ModManager.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ModManager: () => (/* binding */ ModManager)\n/* harmony export */ });\n/**\r\n * Mod Manager\r\n * \r\n * Handles loading and management of game mods.\r\n * Supports mod discovery, loading, and dependency resolution.\r\n */ class ModManager {\n    constructor(eventSystem, assetLoader){\n        this.eventSystem = eventSystem;\n        this.assetLoader = assetLoader;\n        this.loadedMods = new Map();\n        this.modManifests = new Map();\n        this.activeMods = new Set();\n        this.modLoadOrder = [];\n    }\n    /**\r\n     * Initialize the mod manager\r\n     */ async initialize() {\n        console.log('Initializing Mod Manager');\n        // Discover available mods\n        await this.discoverMods();\n        // Load base game mod by default\n        await this.loadMod('base-game');\n        console.log('Mod Manager initialized');\n    }\n    /**\r\n     * Discover available mods in the mods directory\r\n     */ async discoverMods() {\n        try {\n            // For now, we'll hardcode the base game mod\n            // In the future, this could scan the mods directory\n            const baseGameManifest = await this.loadModManifest('/mods/base-game/manifest.json');\n            this.modManifests.set('base-game', baseGameManifest);\n            console.log(`Discovered ${this.modManifests.size} mod(s)`);\n        } catch (error) {\n            console.error('Error discovering mods:', error);\n        }\n    }\n    /**\r\n     * Load a mod by ID\r\n     * @param {string} modId - The mod ID to load\r\n     * @returns {Object} The loaded mod data\r\n     */ async loadMod(modId) {\n        try {\n            console.log(`Loading mod: ${modId}`);\n            const manifest = this.modManifests.get(modId);\n            if (!manifest) {\n                throw new Error(`Mod manifest not found: ${modId}`);\n            }\n            // Check dependencies\n            await this.checkDependencies(manifest);\n            // Load mod data\n            const modData = await this.loadModData(manifest);\n            // Load mod assets\n            await this.loadModAssets(manifest);\n            // Load localization\n            await this.loadModLocalization(manifest);\n            // Store loaded mod\n            this.loadedMods.set(modId, {\n                manifest,\n                data: modData,\n                assets: {},\n                localization: {}\n            });\n            this.activeMods.add(modId);\n            this.modLoadOrder.push(modId);\n            // Emit mod loaded event\n            this.eventSystem.emit('mod:loaded', {\n                modId,\n                manifest,\n                data: modData\n            });\n            console.log(`Mod loaded successfully: ${modId}`);\n            return modData;\n        } catch (error) {\n            console.error(`Failed to load mod ${modId}:`, error);\n            throw error;\n        }\n    }\n    /**\r\n     * Load mod manifest from file\r\n     * @param {string} manifestPath - Path to the manifest file\r\n     * @returns {Object} The manifest data\r\n     */ async loadModManifest(manifestPath) {\n        try {\n            const response = await fetch(manifestPath);\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`);\n            }\n            return await response.json();\n        } catch (error) {\n            console.error(`Failed to load mod manifest ${manifestPath}:`, error);\n            throw error;\n        }\n    }\n    /**\r\n     * Check mod dependencies\r\n     * @param {Object} manifest - The mod manifest\r\n     */ async checkDependencies(manifest) {\n        const dependencies = manifest.dependencies || [];\n        for (const dependency of dependencies){\n            if (!this.loadedMods.has(dependency)) {\n                throw new Error(`Missing dependency: ${dependency}`);\n            }\n        }\n    }\n    /**\r\n     * Load mod data files\r\n     * @param {Object} manifest - The mod manifest\r\n     * @returns {Object} The loaded data\r\n     */ async loadModData(manifest) {\n        const data = {};\n        const dataFiles = manifest.data || {};\n        for (const [key, path] of Object.entries(dataFiles)){\n            try {\n                if (path.endsWith('/')) {\n                    // Directory - load all JSON files in directory\n                    data[key] = await this.loadDataDirectory(path);\n                } else {\n                    // Single file\n                    const response = await fetch(path);\n                    if (!response.ok) {\n                        console.warn(`Failed to load data file: ${path}`);\n                        continue;\n                    }\n                    data[key] = await response.json();\n                }\n            } catch (error) {\n                console.warn(`Failed to load data file ${path}:`, error);\n            }\n        }\n        return data;\n    }\n    /**\r\n     * Load all JSON files in a directory\r\n     * @param {string} directoryPath - Path to the directory\r\n     * @returns {Object} Object with filename keys and data values\r\n     */ async loadDataDirectory(directoryPath) {\n        // For now, we'll return an empty object\n        // In a real implementation, this would scan the directory\n        return {};\n    }\n    /**\r\n     * Load mod assets\r\n     * @param {Object} manifest - The mod manifest\r\n     */ async loadModAssets(manifest) {\n        const assets = manifest.assets || {};\n        // For now, we'll just log the asset paths\n        // In a real implementation, this would preload assets\n        console.log('Mod assets:', assets);\n    }\n    /**\r\n     * Load mod localization\r\n     * @param {Object} manifest - The mod manifest\r\n     */ async loadModLocalization(manifest) {\n        const localization = manifest.localization || {};\n        const defaultLang = localization.default || 'en';\n        const langPath = localization.path || 'localization/';\n        try {\n            const response = await fetch(`${langPath}${defaultLang}.json`);\n            if (response.ok) {\n                const langData = await response.json();\n                console.log('Loaded localization:', langData);\n            }\n        } catch (error) {\n            console.warn('Failed to load localization:', error);\n        }\n    }\n    /**\r\n     * Get loaded mod data\r\n     * @param {string} modId - The mod ID\r\n     * @returns {Object} The mod data\r\n     */ getModData(modId) {\n        const mod = this.loadedMods.get(modId);\n        return mod ? mod.data : null;\n    }\n    /**\r\n     * Get all loaded mod data merged together\r\n     * @returns {Object} Merged data from all loaded mods\r\n     */ getAllModData() {\n        const mergedData = {};\n        for (const [modId, mod] of this.loadedMods){\n            for (const [key, value] of Object.entries(mod.data)){\n                if (!mergedData[key]) {\n                    mergedData[key] = {};\n                }\n                // Merge data (mods loaded later override earlier ones)\n                if (typeof value === 'object' && value !== null) {\n                    Object.assign(mergedData[key], value);\n                } else {\n                    mergedData[key] = value;\n                }\n            }\n        }\n        return mergedData;\n    }\n    /**\r\n     * Get active mods\r\n     * @returns {Set} Set of active mod IDs\r\n     */ getActiveMods() {\n        return this.activeMods;\n    }\n    /**\r\n     * Get mod load order\r\n     * @returns {Array} Array of mod IDs in load order\r\n     */ getModLoadOrder() {\n        return this.modLoadOrder;\n    }\n    /**\r\n     * Unload a mod\r\n     * @param {string} modId - The mod ID to unload\r\n     */ unloadMod(modId) {\n        if (this.loadedMods.has(modId)) {\n            this.loadedMods.delete(modId);\n            this.activeMods.delete(modId);\n            const index = this.modLoadOrder.indexOf(modId);\n            if (index > -1) {\n                this.modLoadOrder.splice(index, 1);\n            }\n            this.eventSystem.emit('mod:unloaded', {\n                modId\n            });\n            console.log(`Mod unloaded: ${modId}`);\n        }\n    }\n    /**\r\n     * Reload a mod\r\n     * @param {string} modId - The mod ID to reload\r\n     */ async reloadMod(modId) {\n        this.unloadMod(modId);\n        await this.loadMod(modId);\n    }\n}\nif (false) {}\n// ES Module exports\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvbGliL2dhbWUtZW5naW5lL2NvcmUvTW9kTWFuYWdlci5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7Ozs7O0NBS0MsR0FFRCxNQUFNQTtJQUNGQyxZQUFZQyxXQUFXLEVBQUVDLFdBQVcsQ0FBRTtRQUNsQyxJQUFJLENBQUNELFdBQVcsR0FBR0E7UUFDbkIsSUFBSSxDQUFDQyxXQUFXLEdBQUdBO1FBQ25CLElBQUksQ0FBQ0MsVUFBVSxHQUFHLElBQUlDO1FBQ3RCLElBQUksQ0FBQ0MsWUFBWSxHQUFHLElBQUlEO1FBQ3hCLElBQUksQ0FBQ0UsVUFBVSxHQUFHLElBQUlDO1FBQ3RCLElBQUksQ0FBQ0MsWUFBWSxHQUFHLEVBQUU7SUFDMUI7SUFFQTs7S0FFQyxHQUNELE1BQU1DLGFBQWE7UUFDZkMsUUFBUUMsR0FBRyxDQUFDO1FBRVosMEJBQTBCO1FBQzFCLE1BQU0sSUFBSSxDQUFDQyxZQUFZO1FBRXZCLGdDQUFnQztRQUNoQyxNQUFNLElBQUksQ0FBQ0MsT0FBTyxDQUFDO1FBRW5CSCxRQUFRQyxHQUFHLENBQUM7SUFDaEI7SUFFQTs7S0FFQyxHQUNELE1BQU1DLGVBQWU7UUFDakIsSUFBSTtZQUNBLDRDQUE0QztZQUM1QyxvREFBb0Q7WUFDcEQsTUFBTUUsbUJBQW1CLE1BQU0sSUFBSSxDQUFDQyxlQUFlLENBQUM7WUFDcEQsSUFBSSxDQUFDVixZQUFZLENBQUNXLEdBQUcsQ0FBQyxhQUFhRjtZQUVuQ0osUUFBUUMsR0FBRyxDQUFDLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQ04sWUFBWSxDQUFDWSxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQzdELEVBQUUsT0FBT0MsT0FBTztZQUNaUixRQUFRUSxLQUFLLENBQUMsMkJBQTJCQTtRQUM3QztJQUNKO0lBRUE7Ozs7S0FJQyxHQUNELE1BQU1MLFFBQVFNLEtBQUssRUFBRTtRQUNqQixJQUFJO1lBQ0FULFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGFBQWEsRUFBRVEsT0FBTztZQUVuQyxNQUFNQyxX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QWMsRUFBRVEsT0FBTztRQUN4QztJQUNKO0lBRUE7OztLQUdDLEdBQ0QsTUFBTWtELFVBQVVsRCxLQUFLLEVBQUU7UUFDbkIsSUFBSSxDQUFDNkMsU0FBUyxDQUFDN0M7UUFDZixNQUFNLElBQUksQ0FBQ04sT0FBTyxDQUFDTTtJQUN2QjtBQUNKO0FBRUEsSUFBSSxLQUE2QixFQUFFbUQsRUFBK0J2RTtBQUVsRSxvQkFBb0I7QUFDRSIsInNvdXJjZXMiOlsiQzpcXEdpdEh1YlxcU2VsZlxcdGF2ZXJuc1xcc3JjXFxsaWJcXGdhbWUtZW5naW5lXFxjb3JlXFxNb2RNYW5hZ2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBNb2QgTWFuYWdlclxyXG4gKiBcclxuICogSGFuZGxlcyBsb2FkaW5nIGFuZCBtYW5hZ2VtZW50IG9mIGdhbWUgbW9kcy5cclxuICogU3VwcG9ydHMgbW9kIGRpc2NvdmVyeSwgbG9hZGluZywgYW5kIGRlcGVuZGVuY3kgcmVzb2x1dGlvbi5cclxuICovXHJcblxyXG5jbGFzcyBNb2RNYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKGV2ZW50U3lzdGVtLCBhc3NldExvYWRlcikge1xyXG4gICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0gPSBldmVudFN5c3RlbTtcclxuICAgICAgICB0aGlzLmFzc2V0TG9hZGVyID0gYXNzZXRMb2FkZXI7XHJcbiAgICAgICAgdGhpcy5sb2FkZWRNb2RzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMubW9kTWFuaWZlc3RzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlTW9kcyA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLm1vZExvYWRPcmRlciA9IFtdO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgdGhlIG1vZCBtYW5hZ2VyXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0luaXRpYWxpemluZyBNb2QgTWFuYWdlcicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIERpc2NvdmVyIGF2YWlsYWJsZSBtb2RzXHJcbiAgICAgICAgYXdhaXQgdGhpcy5kaXNjb3Zlck1vZHMoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBMb2FkIGJhc2UgZ2FtZSBtb2QgYnkgZGVmYXVsdFxyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZE1vZCgnYmFzZS1nYW1lJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coJ01vZCBNYW5hZ2VyIGluaXRpYWxpemVkJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogRGlzY292ZXIgYXZhaWxhYmxlIG1vZHMgaW4gdGhlIG1vZHMgZGlyZWN0b3J5XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGRpc2NvdmVyTW9kcygpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBGb3Igbm93LCB3ZSdsbCBoYXJkY29kZSB0aGUgYmFzZSBnYW1lIG1vZFxyXG4gICAgICAgICAgICAvLyBJbiB0aGUgZnV0dXJlLCB0aGlzIGNvdWxkIHNjYW4gdGhlIG1vZHMgZGlyZWN0b3J5XHJcbiAgICAgICAgICAgIGNvbnN0IGJhc2VHYW1lTWFuaWZlc3QgPSBhd2FpdCB0aGlzLmxvYWRNb2RNYW5pZmVzdCgnL21vZHMvYmFzZS1nYW1lL21hbmlmZXN0Lmpzb24nKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RNYW5pZmVzdHMuc2V0KCdiYXNlLWdhbWUnLCBiYXNlR2FtZU1hbmlmZXN0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBEaXNjb3ZlcmVkICR7dGhpcy5tb2RNYW5pZmVzdHMuc2l6ZX0gbW9kKHMpYCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGlzY292ZXJpbmcgbW9kczonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIExvYWQgYSBtb2QgYnkgSURcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RJZCAtIFRoZSBtb2QgSUQgdG8gbG9hZFxyXG4gICAgICogQHJldHVybnMge09iamVjdH0gVGhlIGxvYWRlZCBtb2QgZGF0YVxyXG4gICAgICovXHJcbiAgICBhc3luYyBsb2FkTW9kKG1vZElkKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYExvYWRpbmcgbW9kOiAke21vZElkfWApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgbWFuaWZlc3QgPSB0aGlzLm1vZE1hbmlmZXN0cy5nZXQobW9kSWQpO1xyXG4gICAgICAgICAgICBpZiAoIW1hbmlmZXN0KSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1vZCBtYW5pZmVzdCBub3QgZm91bmQ6ICR7bW9kSWR9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGRlcGVuZGVuY2llc1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNoZWNrRGVwZW5kZW5jaWVzKG1hbmlmZXN0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIExvYWQgbW9kIGRhdGFcclxuICAgICAgICAgICAgY29uc3QgbW9kRGF0YSA9IGF3YWl0IHRoaXMubG9hZE1vZERhdGEobWFuaWZlc3QpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gTG9hZCBtb2QgYXNzZXRzXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZE1vZEFzc2V0cyhtYW5pZmVzdCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBMb2FkIGxvY2FsaXphdGlvblxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRNb2RMb2NhbGl6YXRpb24obWFuaWZlc3QpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gU3RvcmUgbG9hZGVkIG1vZFxyXG4gICAgICAgICAgICB0aGlzLmxvYWRlZE1vZHMuc2V0KG1vZElkLCB7XHJcbiAgICAgICAgICAgICAgICBtYW5pZmVzdCxcclxuICAgICAgICAgICAgICAgIGRhdGE6IG1vZERhdGEsXHJcbiAgICAgICAgICAgICAgICBhc3NldHM6IHt9LFxyXG4gICAgICAgICAgICAgICAgbG9jYWxpemF0aW9uOiB7fVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlTW9kcy5hZGQobW9kSWQpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZExvYWRPcmRlci5wdXNoKG1vZElkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEVtaXQgbW9kIGxvYWRlZCBldmVudFxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLmVtaXQoJ21vZDpsb2FkZWQnLCB7XHJcbiAgICAgICAgICAgICAgICBtb2RJZCxcclxuICAgICAgICAgICAgICAgIG1hbmlmZXN0LFxyXG4gICAgICAgICAgICAgICAgZGF0YTogbW9kRGF0YVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBNb2QgbG9hZGVkIHN1Y2Nlc3NmdWxseTogJHttb2RJZH1gKTtcclxuICAgICAgICAgICAgcmV0dXJuIG1vZERhdGE7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBsb2FkIG1vZCAke21vZElkfTpgLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIG1vZCBtYW5pZmVzdCBmcm9tIGZpbGVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdFBhdGggLSBQYXRoIHRvIHRoZSBtYW5pZmVzdCBmaWxlXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgbWFuaWZlc3QgZGF0YVxyXG4gICAgICovXHJcbiAgICBhc3luYyBsb2FkTW9kTWFuaWZlc3QobWFuaWZlc3RQYXRoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChtYW5pZmVzdFBhdGgpO1xyXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgZXJyb3IhIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBtb2QgbWFuaWZlc3QgJHttYW5pZmVzdFBhdGh9OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIG1vZCBkZXBlbmRlbmNpZXNcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBtYW5pZmVzdCAtIFRoZSBtb2QgbWFuaWZlc3RcclxuICAgICAqL1xyXG4gICAgYXN5bmMgY2hlY2tEZXBlbmRlbmNpZXMobWFuaWZlc3QpIHtcclxuICAgICAgICBjb25zdCBkZXBlbmRlbmNpZXMgPSBtYW5pZmVzdC5kZXBlbmRlbmNpZXMgfHwgW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCBkZXBlbmRlbmN5IG9mIGRlcGVuZGVuY2llcykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMubG9hZGVkTW9kcy5oYXMoZGVwZW5kZW5jeSkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBkZXBlbmRlbmN5OiAke2RlcGVuZGVuY3l9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBtb2QgZGF0YSBmaWxlc1xyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1hbmlmZXN0IC0gVGhlIG1vZCBtYW5pZmVzdFxyXG4gICAgICogQHJldHVybnMge09iamVjdH0gVGhlIGxvYWRlZCBkYXRhXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGxvYWRNb2REYXRhKG1hbmlmZXN0KSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHt9O1xyXG4gICAgICAgIGNvbnN0IGRhdGFGaWxlcyA9IG1hbmlmZXN0LmRhdGEgfHwge307XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBwYXRoXSBvZiBPYmplY3QuZW50cmllcyhkYXRhRmlsZXMpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGF0aC5lbmRzV2l0aCgnLycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRGlyZWN0b3J5IC0gbG9hZCBhbGwgSlNPTiBmaWxlcyBpbiBkaXJlY3RvcnlcclxuICAgICAgICAgICAgICAgICAgICBkYXRhW2tleV0gPSBhd2FpdCB0aGlzLmxvYWREYXRhRGlyZWN0b3J5KHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBTaW5nbGUgZmlsZVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gocGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBsb2FkIGRhdGEgZmlsZTogJHtwYXRofWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtrZXldID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gbG9hZCBkYXRhIGZpbGUgJHtwYXRofTpgLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBhbGwgSlNPTiBmaWxlcyBpbiBhIGRpcmVjdG9yeVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRpcmVjdG9yeVBhdGggLSBQYXRoIHRvIHRoZSBkaXJlY3RvcnlcclxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IE9iamVjdCB3aXRoIGZpbGVuYW1lIGtleXMgYW5kIGRhdGEgdmFsdWVzXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGxvYWREYXRhRGlyZWN0b3J5KGRpcmVjdG9yeVBhdGgpIHtcclxuICAgICAgICAvLyBGb3Igbm93LCB3ZSdsbCByZXR1cm4gYW4gZW1wdHkgb2JqZWN0XHJcbiAgICAgICAgLy8gSW4gYSByZWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdvdWxkIHNjYW4gdGhlIGRpcmVjdG9yeVxyXG4gICAgICAgIHJldHVybiB7fTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIG1vZCBhc3NldHNcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBtYW5pZmVzdCAtIFRoZSBtb2QgbWFuaWZlc3RcclxuICAgICAqL1xyXG4gICAgYXN5bmMgbG9hZE1vZEFzc2V0cyhtYW5pZmVzdCkge1xyXG4gICAgICAgIGNvbnN0IGFzc2V0cyA9IG1hbmlmZXN0LmFzc2V0cyB8fCB7fTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBGb3Igbm93LCB3ZSdsbCBqdXN0IGxvZyB0aGUgYXNzZXQgcGF0aHNcclxuICAgICAgICAvLyBJbiBhIHJlYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd291bGQgcHJlbG9hZCBhc3NldHNcclxuICAgICAgICBjb25zb2xlLmxvZygnTW9kIGFzc2V0czonLCBhc3NldHMpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIExvYWQgbW9kIGxvY2FsaXphdGlvblxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1hbmlmZXN0IC0gVGhlIG1vZCBtYW5pZmVzdFxyXG4gICAgICovXHJcbiAgICBhc3luYyBsb2FkTW9kTG9jYWxpemF0aW9uKG1hbmlmZXN0KSB7XHJcbiAgICAgICAgY29uc3QgbG9jYWxpemF0aW9uID0gbWFuaWZlc3QubG9jYWxpemF0aW9uIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRMYW5nID0gbG9jYWxpemF0aW9uLmRlZmF1bHQgfHwgJ2VuJztcclxuICAgICAgICBjb25zdCBsYW5nUGF0aCA9IGxvY2FsaXphdGlvbi5wYXRoIHx8ICdsb2NhbGl6YXRpb24vJztcclxuICAgICAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke2xhbmdQYXRofSR7ZGVmYXVsdExhbmd9Lmpzb25gKTtcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYW5nRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMb2FkZWQgbG9jYWxpemF0aW9uOicsIGxhbmdEYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGxvYWQgbG9jYWxpemF0aW9uOicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2V0IGxvYWRlZCBtb2QgZGF0YVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZElkIC0gVGhlIG1vZCBJRFxyXG4gICAgICogQHJldHVybnMge09iamVjdH0gVGhlIG1vZCBkYXRhXHJcbiAgICAgKi9cclxuICAgIGdldE1vZERhdGEobW9kSWQpIHtcclxuICAgICAgICBjb25zdCBtb2QgPSB0aGlzLmxvYWRlZE1vZHMuZ2V0KG1vZElkKTtcclxuICAgICAgICByZXR1cm4gbW9kID8gbW9kLmRhdGEgOiBudWxsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhbGwgbG9hZGVkIG1vZCBkYXRhIG1lcmdlZCB0b2dldGhlclxyXG4gICAgICogQHJldHVybnMge09iamVjdH0gTWVyZ2VkIGRhdGEgZnJvbSBhbGwgbG9hZGVkIG1vZHNcclxuICAgICAqL1xyXG4gICAgZ2V0QWxsTW9kRGF0YSgpIHtcclxuICAgICAgICBjb25zdCBtZXJnZWREYXRhID0ge307XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCBbbW9kSWQsIG1vZF0gb2YgdGhpcy5sb2FkZWRNb2RzKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKG1vZC5kYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFtZXJnZWREYXRhW2tleV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXJnZWREYXRhW2tleV0gPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gTWVyZ2UgZGF0YSAobW9kcyBsb2FkZWQgbGF0ZXIgb3ZlcnJpZGUgZWFybGllciBvbmVzKVxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG1lcmdlZERhdGFba2V5XSwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXJnZWREYXRhW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gbWVyZ2VkRGF0YTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYWN0aXZlIG1vZHNcclxuICAgICAqIEByZXR1cm5zIHtTZXR9IFNldCBvZiBhY3RpdmUgbW9kIElEc1xyXG4gICAgICovXHJcbiAgICBnZXRBY3RpdmVNb2RzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFjdGl2ZU1vZHM7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2V0IG1vZCBsb2FkIG9yZGVyXHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IEFycmF5IG9mIG1vZCBJRHMgaW4gbG9hZCBvcmRlclxyXG4gICAgICovXHJcbiAgICBnZXRNb2RMb2FkT3JkZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubW9kTG9hZE9yZGVyO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFVubG9hZCBhIG1vZFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZElkIC0gVGhlIG1vZCBJRCB0byB1bmxvYWRcclxuICAgICAqL1xyXG4gICAgdW5sb2FkTW9kKG1vZElkKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubG9hZGVkTW9kcy5oYXMobW9kSWQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGVkTW9kcy5kZWxldGUobW9kSWQpO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZU1vZHMuZGVsZXRlKG1vZElkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5tb2RMb2FkT3JkZXIuaW5kZXhPZihtb2RJZCk7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZExvYWRPcmRlci5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLmVtaXQoJ21vZDp1bmxvYWRlZCcsIHsgbW9kSWQgfSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBNb2QgdW5sb2FkZWQ6ICR7bW9kSWR9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFJlbG9hZCBhIG1vZFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZElkIC0gVGhlIG1vZCBJRCB0byByZWxvYWRcclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmVsb2FkTW9kKG1vZElkKSB7XHJcbiAgICAgICAgdGhpcy51bmxvYWRNb2QobW9kSWQpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZE1vZChtb2RJZCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgd2luZG93Lk1vZE1hbmFnZXIgPSBNb2RNYW5hZ2VyO1xyXG5cclxuLy8gRVMgTW9kdWxlIGV4cG9ydHNcclxuZXhwb3J0IHsgTW9kTWFuYWdlciB9OyAiXSwibmFtZXMiOlsiTW9kTWFuYWdlciIsImNvbnN0cnVjdG9yIiwiZXZlbnRTeXN0ZW0iLCJhc3NldExvYWRlciIsImxvYWRlZE1vZHMiLCJNYXAiLCJtb2RNYW5pZmVzdHMiLCJhY3RpdmVNb2RzIiwiU2V0IiwibW9kTG9hZE9yZGVyIiwiaW5pdGlhbGl6ZSIsImNvbnNvbGUiLCJsb2ciLCJkaXNjb3Zlck1vZHMiLCJsb2FkTW9kIiwiYmFzZUdhbWVNYW5pZmVzdCIsImxvYWRNb2RNYW5pZmVzdCIsInNldCIsInNpemUiLCJlcnJvciIsIm1vZElkIiwibWFuaWZlc3QiLCJnZXQiLCJFcnJvciIsImNoZWNrRGVwZW5kZW5jaWVzIiwibW9kRGF0YSIsImxvYWRNb2REYXRhIiwibG9hZE1vZEFzc2V0cyIsImxvYWRNb2RMb2NhbGl6YXRpb24iLCJkYXRhIiwiYXNzZXRzIiwibG9jYWxpemF0aW9uIiwiYWRkIiwicHVzaCIsImVtaXQiLCJtYW5pZmVzdFBhdGgiLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJzdGF0dXMiLCJqc29uIiwiZGVwZW5kZW5jaWVzIiwiZGVwZW5kZW5jeSIsImhhcyIsImRhdGFGaWxlcyIsImtleSIsInBhdGgiLCJPYmplY3QiLCJlbnRyaWVzIiwiZW5kc1dpdGgiLCJsb2FkRGF0YURpcmVjdG9yeSIsIndhcm4iLCJkaXJlY3RvcnlQYXRoIiwiZGVmYXVsdExhbmciLCJkZWZhdWx0IiwibGFuZ1BhdGgiLCJsYW5nRGF0YSIsImdldE1vZERhdGEiLCJtb2QiLCJnZXRBbGxNb2REYXRhIiwibWVyZ2VkRGF0YSIsInZhbHVlIiwiYXNzaWduIiwiZ2V0QWN0aXZlTW9kcyIsImdldE1vZExvYWRPcmRlciIsInVubG9hZE1vZCIsImRlbGV0ZSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsInJlbG9hZE1vZCIsIndpbmRvdyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/game-engine/core/ModManager.js\n");

/***/ })

};
;