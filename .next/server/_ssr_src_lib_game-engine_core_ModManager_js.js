"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_src_lib_game-engine_core_ModManager_js";
exports.ids = ["_ssr_src_lib_game-engine_core_ModManager_js"];
exports.modules = {

/***/ "(ssr)/./src/lib/game-engine/core/ModManager.js":
/*!************************************************!*\
  !*** ./src/lib/game-engine/core/ModManager.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ModManager: () => (/* binding */ ModManager)\n/* harmony export */ });\n/**\r\n * Mod Manager\r\n * \r\n * Handles loading and management of game mods.\r\n * Supports mod discovery, loading, and dependency resolution.\r\n */ class ModManager {\n    constructor(eventSystem, assetLoader){\n        this.eventSystem = eventSystem;\n        this.assetLoader = assetLoader;\n        this.loadedMods = new Map();\n        this.modManifests = new Map();\n        this.activeMods = new Set();\n        this.modLoadOrder = [];\n    }\n    /**\r\n     * Initialize the mod manager\r\n     */ async initialize() {\n        console.log('Initializing Mod Manager');\n        // Discover available mods\n        await this.discoverMods();\n        // Load base game mod by default\n        await this.loadMod('base-game');\n        console.log('Mod Manager initialized');\n    }\n    /**\r\n     * Discover available mods in the mods directory\r\n     */ async discoverMods() {\n        try {\n            // For now, we'll hardcode the base game mod\n            // In the future, this could scan the mods directory\n            const baseGameManifest = await this.loadModManifest('mods/base-game/manifest.json');\n            this.modManifests.set('base-game', baseGameManifest);\n            console.log(`Discovered ${this.modManifests.size} mod(s)`);\n        } catch (error) {\n            console.error('Error discovering mods:', error);\n        }\n    }\n    /**\r\n     * Load a mod by ID\r\n     * @param {string} modId - The mod ID to load\r\n     * @returns {Object} The loaded mod data\r\n     */ async loadMod(modId) {\n        try {\n            console.log(`Loading mod: ${modId}`);\n            const manifest = this.modManifests.get(modId);\n            if (!manifest) {\n                throw new Error(`Mod manifest not found: ${modId}`);\n            }\n            // Check dependencies\n            await this.checkDependencies(manifest);\n            // Load mod data\n            const modData = await this.loadModData(manifest);\n            // Load mod assets\n            await this.loadModAssets(manifest);\n            // Load localization\n            await this.loadModLocalization(manifest);\n            // Store loaded mod\n            this.loadedMods.set(modId, {\n                manifest,\n                data: modData,\n                assets: {},\n                localization: {}\n            });\n            this.activeMods.add(modId);\n            this.modLoadOrder.push(modId);\n            // Emit mod loaded event\n            this.eventSystem.emit('mod:loaded', {\n                modId,\n                manifest,\n                data: modData\n            });\n            console.log(`Mod loaded successfully: ${modId}`);\n            return modData;\n        } catch (error) {\n            console.error(`Failed to load mod ${modId}:`, error);\n            throw error;\n        }\n    }\n    /**\r\n     * Load mod manifest from file\r\n     * @param {string} manifestPath - Path to the manifest file\r\n     * @returns {Object} The manifest data\r\n     */ async loadModManifest(manifestPath) {\n        try {\n            const response = await fetch(manifestPath);\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`);\n            }\n            return await response.json();\n        } catch (error) {\n            console.error(`Failed to load mod manifest ${manifestPath}:`, error);\n            throw error;\n        }\n    }\n    /**\r\n     * Check mod dependencies\r\n     * @param {Object} manifest - The mod manifest\r\n     */ async checkDependencies(manifest) {\n        const dependencies = manifest.dependencies || [];\n        for (const dependency of dependencies){\n            if (!this.loadedMods.has(dependency)) {\n                throw new Error(`Missing dependency: ${dependency}`);\n            }\n        }\n    }\n    /**\r\n     * Load mod data files\r\n     * @param {Object} manifest - The mod manifest\r\n     * @returns {Object} The loaded data\r\n     */ async loadModData(manifest) {\n        const data = {};\n        const dataFiles = manifest.data || {};\n        for (const [key, path] of Object.entries(dataFiles)){\n            try {\n                if (path.endsWith('/')) {\n                    // Directory - load all JSON files in directory\n                    data[key] = await this.loadDataDirectory(path);\n                } else {\n                    // Single file\n                    const response = await fetch(path);\n                    if (!response.ok) {\n                        console.warn(`Failed to load data file: ${path}`);\n                        continue;\n                    }\n                    data[key] = await response.json();\n                }\n            } catch (error) {\n                console.warn(`Failed to load data file ${path}:`, error);\n            }\n        }\n        return data;\n    }\n    /**\r\n     * Load all JSON files in a directory\r\n     * @param {string} directoryPath - Path to the directory\r\n     * @returns {Object} Object with filename keys and data values\r\n     */ async loadDataDirectory(directoryPath) {\n        // For now, we'll return an empty object\n        // In a real implementation, this would scan the directory\n        return {};\n    }\n    /**\r\n     * Load mod assets\r\n     * @param {Object} manifest - The mod manifest\r\n     */ async loadModAssets(manifest) {\n        const assets = manifest.assets || {};\n        // For now, we'll just log the asset paths\n        // In a real implementation, this would preload assets\n        console.log('Mod assets:', assets);\n    }\n    /**\r\n     * Load mod localization\r\n     * @param {Object} manifest - The mod manifest\r\n     */ async loadModLocalization(manifest) {\n        const localization = manifest.localization || {};\n        const defaultLang = localization.default || 'en';\n        const langPath = localization.path || 'localization/';\n        try {\n            const response = await fetch(`${langPath}${defaultLang}.json`);\n            if (response.ok) {\n                const langData = await response.json();\n                console.log('Loaded localization:', langData);\n            }\n        } catch (error) {\n            console.warn('Failed to load localization:', error);\n        }\n    }\n    /**\r\n     * Get loaded mod data\r\n     * @param {string} modId - The mod ID\r\n     * @returns {Object} The mod data\r\n     */ getModData(modId) {\n        const mod = this.loadedMods.get(modId);\n        return mod ? mod.data : null;\n    }\n    /**\r\n     * Get all loaded mod data merged together\r\n     * @returns {Object} Merged data from all loaded mods\r\n     */ getAllModData() {\n        const mergedData = {};\n        for (const [modId, mod] of this.loadedMods){\n            for (const [key, value] of Object.entries(mod.data)){\n                if (!mergedData[key]) {\n                    mergedData[key] = {};\n                }\n                // Merge data (mods loaded later override earlier ones)\n                if (typeof value === 'object' && value !== null) {\n                    Object.assign(mergedData[key], value);\n                } else {\n                    mergedData[key] = value;\n                }\n            }\n        }\n        return mergedData;\n    }\n    /**\r\n     * Get active mods\r\n     * @returns {Set} Set of active mod IDs\r\n     */ getActiveMods() {\n        return this.activeMods;\n    }\n    /**\r\n     * Get mod load order\r\n     * @returns {Array} Array of mod IDs in load order\r\n     */ getModLoadOrder() {\n        return this.modLoadOrder;\n    }\n    /**\r\n     * Unload a mod\r\n     * @param {string} modId - The mod ID to unload\r\n     */ unloadMod(modId) {\n        if (this.loadedMods.has(modId)) {\n            this.loadedMods.delete(modId);\n            this.activeMods.delete(modId);\n            const index = this.modLoadOrder.indexOf(modId);\n            if (index > -1) {\n                this.modLoadOrder.splice(index, 1);\n            }\n            this.eventSystem.emit('mod:unloaded', {\n                modId\n            });\n            console.log(`Mod unloaded: ${modId}`);\n        }\n    }\n    /**\r\n     * Reload a mod\r\n     * @param {string} modId - The mod ID to reload\r\n     */ async reloadMod(modId) {\n        this.unloadMod(modId);\n        await this.loadMod(modId);\n    }\n}\nif (false) {}\n// ES Module exports\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvbGliL2dhbWUtZW5naW5lL2NvcmUvTW9kTWFuYWdlci5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7Ozs7O0NBS0MsR0FFRCxNQUFNQTtJQUNGQyxZQUFZQyxXQUFXLEVBQUVDLFdBQVcsQ0FBRTtRQUNsQyxJQUFJLENBQUNELFdBQVcsR0FBR0E7UUFDbkIsSUFBSSxDQUFDQyxXQUFXLEdBQUdBO1FBQ25CLElBQUksQ0FBQ0MsVUFBVSxHQUFHLElBQUlDO1FBQ3RCLElBQUksQ0FBQ0MsWUFBWSxHQUFHLElBQUlEO1FBQ3hCLElBQUksQ0FBQ0UsVUFBVSxHQUFHLElBQUlDO1FBQ3RCLElBQUksQ0FBQ0MsWUFBWSxHQUFHLEVBQUU7SUFDMUI7SUFFQTs7S0FFQyxHQUNELE1BQU1DLGFBQWE7UUFDZkMsUUFBUUMsR0FBRyxDQUFDO1FBRVosMEJBQTBCO1FBQzFCLE1BQU0sSUFBSSxDQUFDQyxZQUFZO1FBRXZCLGdDQUFnQztRQUNoQyxNQUFNLElBQUksQ0FBQ0MsT0FBTyxDQUFDO1FBRW5CSCxRQUFRQyxHQUFHLENBQUM7SUFDaEI7SUFFQTs7S0FFQyxHQUNELE1BQU1DLGVBQWU7UUFDakIsSUFBSTtZQUNBLDRDQUE0QztZQUM1QyxvREFBb0Q7WUFDcEQsTUFBTUUsbUJBQW1CLE1BQU0sSUFBSSxDQUFDQyxlQUFlLENBQUM7WUFDcEQsSUFBSSxDQUFDVixZQUFZLENBQUNXLEdBQUcsQ0FBQyxhQUFhRjtZQUVuQ0osUUFBUUMsR0FBRyxDQUFDLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQ04sWUFBWSxDQUFDWSxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQzdELEVBQUUsT0FBT0MsT0FBTztZQUNaUixRQUFRUSxLQUFLLENBQUMsMkJBQTJCQTtRQUM3QztJQUNKO0lBRUE7Ozs7S0FJQyxHQUNELE1BQU1MLFFBQVFNLEtBQUssRUFBRTtRQUNqQixJQUFJO1lBQ0FULFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGFBQWEsRUFBRVEsT0FBTztZQUVuQyxNQUFNQyxX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QWMsRUFBRVEsT0FBTztRQUN4QztJQUNKO0lBRUE7OztLQUdDLEdBQ0QsTUFBTWtELFVBQVVsRCxLQUFLLEVBQUU7UUFDbkIsSUFBSSxDQUFDNkMsU0FBUyxDQUFDN0M7UUFDZixNQUFNLElBQUksQ0FBQ04sT0FBTyxDQUFDTTtJQUN2QjtBQUNKO0FBRUEsSUFBSSxLQUE2QixFQUFFbUQsRUFBK0J2RTtBQUVsRSxvQkFBb0I7QUFDRSIsInNvdXJjZXMiOlsiQzpcXEdpdEh1YlxcU2VsZlxcdGF2ZXJuc1xcc3JjXFxsaWJcXGdhbWUtZW5naW5lXFxjb3JlXFxNb2RNYW5hZ2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBNb2QgTWFuYWdlclxyXG4gKiBcclxuICogSGFuZGxlcyBsb2FkaW5nIGFuZCBtYW5hZ2VtZW50IG9mIGdhbWUgbW9kcy5cclxuICogU3VwcG9ydHMgbW9kIGRpc2NvdmVyeSwgbG9hZGluZywgYW5kIGRlcGVuZGVuY3kgcmVzb2x1dGlvbi5cclxuICovXHJcblxyXG5jbGFzcyBNb2RNYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKGV2ZW50U3lzdGVtLCBhc3NldExvYWRlcikge1xyXG4gICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0gPSBldmVudFN5c3RlbTtcclxuICAgICAgICB0aGlzLmFzc2V0TG9hZGVyID0gYXNzZXRMb2FkZXI7XHJcbiAgICAgICAgdGhpcy5sb2FkZWRNb2RzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMubW9kTWFuaWZlc3RzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlTW9kcyA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLm1vZExvYWRPcmRlciA9IFtdO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgdGhlIG1vZCBtYW5hZ2VyXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0luaXRpYWxpemluZyBNb2QgTWFuYWdlcicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIERpc2NvdmVyIGF2YWlsYWJsZSBtb2RzXHJcbiAgICAgICAgYXdhaXQgdGhpcy5kaXNjb3Zlck1vZHMoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBMb2FkIGJhc2UgZ2FtZSBtb2QgYnkgZGVmYXVsdFxyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZE1vZCgnYmFzZS1nYW1lJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coJ01vZCBNYW5hZ2VyIGluaXRpYWxpemVkJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogRGlzY292ZXIgYXZhaWxhYmxlIG1vZHMgaW4gdGhlIG1vZHMgZGlyZWN0b3J5XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGRpc2NvdmVyTW9kcygpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBGb3Igbm93LCB3ZSdsbCBoYXJkY29kZSB0aGUgYmFzZSBnYW1lIG1vZFxyXG4gICAgICAgICAgICAvLyBJbiB0aGUgZnV0dXJlLCB0aGlzIGNvdWxkIHNjYW4gdGhlIG1vZHMgZGlyZWN0b3J5XHJcbiAgICAgICAgICAgIGNvbnN0IGJhc2VHYW1lTWFuaWZlc3QgPSBhd2FpdCB0aGlzLmxvYWRNb2RNYW5pZmVzdCgnbW9kcy9iYXNlLWdhbWUvbWFuaWZlc3QuanNvbicpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZE1hbmlmZXN0cy5zZXQoJ2Jhc2UtZ2FtZScsIGJhc2VHYW1lTWFuaWZlc3QpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYERpc2NvdmVyZWQgJHt0aGlzLm1vZE1hbmlmZXN0cy5zaXplfSBtb2QocylgKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkaXNjb3ZlcmluZyBtb2RzOicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBhIG1vZCBieSBJRFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZElkIC0gVGhlIG1vZCBJRCB0byBsb2FkXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgbG9hZGVkIG1vZCBkYXRhXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGxvYWRNb2QobW9kSWQpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgTG9hZGluZyBtb2Q6ICR7bW9kSWR9YCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBtYW5pZmVzdCA9IHRoaXMubW9kTWFuaWZlc3RzLmdldChtb2RJZCk7XHJcbiAgICAgICAgICAgIGlmICghbWFuaWZlc3QpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTW9kIG1hbmlmZXN0IG5vdCBmb3VuZDogJHttb2RJZH1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ2hlY2sgZGVwZW5kZW5jaWVzXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2hlY2tEZXBlbmRlbmNpZXMobWFuaWZlc3QpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gTG9hZCBtb2QgZGF0YVxyXG4gICAgICAgICAgICBjb25zdCBtb2REYXRhID0gYXdhaXQgdGhpcy5sb2FkTW9kRGF0YShtYW5pZmVzdCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBMb2FkIG1vZCBhc3NldHNcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkTW9kQXNzZXRzKG1hbmlmZXN0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIExvYWQgbG9jYWxpemF0aW9uXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZE1vZExvY2FsaXphdGlvbihtYW5pZmVzdCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTdG9yZSBsb2FkZWQgbW9kXHJcbiAgICAgICAgICAgIHRoaXMubG9hZGVkTW9kcy5zZXQobW9kSWQsIHtcclxuICAgICAgICAgICAgICAgIG1hbmlmZXN0LFxyXG4gICAgICAgICAgICAgICAgZGF0YTogbW9kRGF0YSxcclxuICAgICAgICAgICAgICAgIGFzc2V0czoge30sXHJcbiAgICAgICAgICAgICAgICBsb2NhbGl6YXRpb246IHt9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVNb2RzLmFkZChtb2RJZCk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kTG9hZE9yZGVyLnB1c2gobW9kSWQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gRW1pdCBtb2QgbG9hZGVkIGV2ZW50XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0uZW1pdCgnbW9kOmxvYWRlZCcsIHtcclxuICAgICAgICAgICAgICAgIG1vZElkLFxyXG4gICAgICAgICAgICAgICAgbWFuaWZlc3QsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBtb2REYXRhXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYE1vZCBsb2FkZWQgc3VjY2Vzc2Z1bGx5OiAke21vZElkfWApO1xyXG4gICAgICAgICAgICByZXR1cm4gbW9kRGF0YTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGxvYWQgbW9kICR7bW9kSWR9OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIExvYWQgbW9kIG1hbmlmZXN0IGZyb20gZmlsZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0UGF0aCAtIFBhdGggdG8gdGhlIG1hbmlmZXN0IGZpbGVcclxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBtYW5pZmVzdCBkYXRhXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGxvYWRNb2RNYW5pZmVzdChtYW5pZmVzdFBhdGgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKG1hbmlmZXN0UGF0aCk7XHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSFRUUCBlcnJvciEgc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBsb2FkIG1vZCBtYW5pZmVzdCAke21hbmlmZXN0UGF0aH06YCwgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgbW9kIGRlcGVuZGVuY2llc1xyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1hbmlmZXN0IC0gVGhlIG1vZCBtYW5pZmVzdFxyXG4gICAgICovXHJcbiAgICBhc3luYyBjaGVja0RlcGVuZGVuY2llcyhtYW5pZmVzdCkge1xyXG4gICAgICAgIGNvbnN0IGRlcGVuZGVuY2llcyA9IG1hbmlmZXN0LmRlcGVuZGVuY2llcyB8fCBbXTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGNvbnN0IGRlcGVuZGVuY3kgb2YgZGVwZW5kZW5jaWVzKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5sb2FkZWRNb2RzLmhhcyhkZXBlbmRlbmN5KSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIGRlcGVuZGVuY3k6ICR7ZGVwZW5kZW5jeX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIG1vZCBkYXRhIGZpbGVzXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFuaWZlc3QgLSBUaGUgbW9kIG1hbmlmZXN0XHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgbG9hZGVkIGRhdGFcclxuICAgICAqL1xyXG4gICAgYXN5bmMgbG9hZE1vZERhdGEobWFuaWZlc3QpIHtcclxuICAgICAgICBjb25zdCBkYXRhID0ge307XHJcbiAgICAgICAgY29uc3QgZGF0YUZpbGVzID0gbWFuaWZlc3QuZGF0YSB8fCB7fTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHBhdGhdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGFGaWxlcykpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmIChwYXRoLmVuZHNXaXRoKCcvJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBEaXJlY3RvcnkgLSBsb2FkIGFsbCBKU09OIGZpbGVzIGluIGRpcmVjdG9yeVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFba2V5XSA9IGF3YWl0IHRoaXMubG9hZERhdGFEaXJlY3RvcnkocGF0aCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNpbmdsZSBmaWxlXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChwYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGxvYWQgZGF0YSBmaWxlOiAke3BhdGh9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkYXRhW2tleV0gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBsb2FkIGRhdGEgZmlsZSAke3BhdGh9OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIGFsbCBKU09OIGZpbGVzIGluIGEgZGlyZWN0b3J5XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGlyZWN0b3J5UGF0aCAtIFBhdGggdG8gdGhlIGRpcmVjdG9yeVxyXG4gICAgICogQHJldHVybnMge09iamVjdH0gT2JqZWN0IHdpdGggZmlsZW5hbWUga2V5cyBhbmQgZGF0YSB2YWx1ZXNcclxuICAgICAqL1xyXG4gICAgYXN5bmMgbG9hZERhdGFEaXJlY3RvcnkoZGlyZWN0b3J5UGF0aCkge1xyXG4gICAgICAgIC8vIEZvciBub3csIHdlJ2xsIHJldHVybiBhbiBlbXB0eSBvYmplY3RcclxuICAgICAgICAvLyBJbiBhIHJlYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd291bGQgc2NhbiB0aGUgZGlyZWN0b3J5XHJcbiAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIExvYWQgbW9kIGFzc2V0c1xyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1hbmlmZXN0IC0gVGhlIG1vZCBtYW5pZmVzdFxyXG4gICAgICovXHJcbiAgICBhc3luYyBsb2FkTW9kQXNzZXRzKG1hbmlmZXN0KSB7XHJcbiAgICAgICAgY29uc3QgYXNzZXRzID0gbWFuaWZlc3QuYXNzZXRzIHx8IHt9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEZvciBub3csIHdlJ2xsIGp1c3QgbG9nIHRoZSBhc3NldCBwYXRoc1xyXG4gICAgICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCBwcmVsb2FkIGFzc2V0c1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2QgYXNzZXRzOicsIGFzc2V0cyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBtb2QgbG9jYWxpemF0aW9uXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFuaWZlc3QgLSBUaGUgbW9kIG1hbmlmZXN0XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGxvYWRNb2RMb2NhbGl6YXRpb24obWFuaWZlc3QpIHtcclxuICAgICAgICBjb25zdCBsb2NhbGl6YXRpb24gPSBtYW5pZmVzdC5sb2NhbGl6YXRpb24gfHwge307XHJcbiAgICAgICAgY29uc3QgZGVmYXVsdExhbmcgPSBsb2NhbGl6YXRpb24uZGVmYXVsdCB8fCAnZW4nO1xyXG4gICAgICAgIGNvbnN0IGxhbmdQYXRoID0gbG9jYWxpemF0aW9uLnBhdGggfHwgJ2xvY2FsaXphdGlvbi8nO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7bGFuZ1BhdGh9JHtkZWZhdWx0TGFuZ30uanNvbmApO1xyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxhbmdEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0xvYWRlZCBsb2NhbGl6YXRpb246JywgbGFuZ0RhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gbG9hZCBsb2NhbGl6YXRpb246JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgbG9hZGVkIG1vZCBkYXRhXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kSWQgLSBUaGUgbW9kIElEXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgbW9kIGRhdGFcclxuICAgICAqL1xyXG4gICAgZ2V0TW9kRGF0YShtb2RJZCkge1xyXG4gICAgICAgIGNvbnN0IG1vZCA9IHRoaXMubG9hZGVkTW9kcy5nZXQobW9kSWQpO1xyXG4gICAgICAgIHJldHVybiBtb2QgPyBtb2QuZGF0YSA6IG51bGw7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2V0IGFsbCBsb2FkZWQgbW9kIGRhdGEgbWVyZ2VkIHRvZ2V0aGVyXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBNZXJnZWQgZGF0YSBmcm9tIGFsbCBsb2FkZWQgbW9kc1xyXG4gICAgICovXHJcbiAgICBnZXRBbGxNb2REYXRhKCkge1xyXG4gICAgICAgIGNvbnN0IG1lcmdlZERhdGEgPSB7fTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGNvbnN0IFttb2RJZCwgbW9kXSBvZiB0aGlzLmxvYWRlZE1vZHMpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMobW9kLmRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW1lcmdlZERhdGFba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lcmdlZERhdGFba2V5XSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBNZXJnZSBkYXRhIChtb2RzIGxvYWRlZCBsYXRlciBvdmVycmlkZSBlYXJsaWVyIG9uZXMpXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obWVyZ2VkRGF0YVtrZXldLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lcmdlZERhdGFba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBtZXJnZWREYXRhO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhY3RpdmUgbW9kc1xyXG4gICAgICogQHJldHVybnMge1NldH0gU2V0IG9mIGFjdGl2ZSBtb2QgSURzXHJcbiAgICAgKi9cclxuICAgIGdldEFjdGl2ZU1vZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlTW9kcztcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgbW9kIGxvYWQgb3JkZXJcclxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gQXJyYXkgb2YgbW9kIElEcyBpbiBsb2FkIG9yZGVyXHJcbiAgICAgKi9cclxuICAgIGdldE1vZExvYWRPcmRlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tb2RMb2FkT3JkZXI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogVW5sb2FkIGEgbW9kXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kSWQgLSBUaGUgbW9kIElEIHRvIHVubG9hZFxyXG4gICAgICovXHJcbiAgICB1bmxvYWRNb2QobW9kSWQpIHtcclxuICAgICAgICBpZiAodGhpcy5sb2FkZWRNb2RzLmhhcyhtb2RJZCkpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkZWRNb2RzLmRlbGV0ZShtb2RJZCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlTW9kcy5kZWxldGUobW9kSWQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLm1vZExvYWRPcmRlci5pbmRleE9mKG1vZElkKTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kTG9hZE9yZGVyLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRTeXN0ZW0uZW1pdCgnbW9kOnVubG9hZGVkJywgeyBtb2RJZCB9KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYE1vZCB1bmxvYWRlZDogJHttb2RJZH1gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogUmVsb2FkIGEgbW9kXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kSWQgLSBUaGUgbW9kIElEIHRvIHJlbG9hZFxyXG4gICAgICovXHJcbiAgICBhc3luYyByZWxvYWRNb2QobW9kSWQpIHtcclxuICAgICAgICB0aGlzLnVubG9hZE1vZChtb2RJZCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkTW9kKG1vZElkKTtcclxuICAgIH1cclxufVxyXG5cclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB3aW5kb3cuTW9kTWFuYWdlciA9IE1vZE1hbmFnZXI7XHJcblxyXG4vLyBFUyBNb2R1bGUgZXhwb3J0c1xyXG5leHBvcnQgeyBNb2RNYW5hZ2VyIH07ICJdLCJuYW1lcyI6WyJNb2RNYW5hZ2VyIiwiY29uc3RydWN0b3IiLCJldmVudFN5c3RlbSIsImFzc2V0TG9hZGVyIiwibG9hZGVkTW9kcyIsIk1hcCIsIm1vZE1hbmlmZXN0cyIsImFjdGl2ZU1vZHMiLCJTZXQiLCJtb2RMb2FkT3JkZXIiLCJpbml0aWFsaXplIiwiY29uc29sZSIsImxvZyIsImRpc2NvdmVyTW9kcyIsImxvYWRNb2QiLCJiYXNlR2FtZU1hbmlmZXN0IiwibG9hZE1vZE1hbmlmZXN0Iiwic2V0Iiwic2l6ZSIsImVycm9yIiwibW9kSWQiLCJtYW5pZmVzdCIsImdldCIsIkVycm9yIiwiY2hlY2tEZXBlbmRlbmNpZXMiLCJtb2REYXRhIiwibG9hZE1vZERhdGEiLCJsb2FkTW9kQXNzZXRzIiwibG9hZE1vZExvY2FsaXphdGlvbiIsImRhdGEiLCJhc3NldHMiLCJsb2NhbGl6YXRpb24iLCJhZGQiLCJwdXNoIiwiZW1pdCIsIm1hbmlmZXN0UGF0aCIsInJlc3BvbnNlIiwiZmV0Y2giLCJvayIsInN0YXR1cyIsImpzb24iLCJkZXBlbmRlbmNpZXMiLCJkZXBlbmRlbmN5IiwiaGFzIiwiZGF0YUZpbGVzIiwia2V5IiwicGF0aCIsIk9iamVjdCIsImVudHJpZXMiLCJlbmRzV2l0aCIsImxvYWREYXRhRGlyZWN0b3J5Iiwid2FybiIsImRpcmVjdG9yeVBhdGgiLCJkZWZhdWx0TGFuZyIsImRlZmF1bHQiLCJsYW5nUGF0aCIsImxhbmdEYXRhIiwiZ2V0TW9kRGF0YSIsIm1vZCIsImdldEFsbE1vZERhdGEiLCJtZXJnZWREYXRhIiwidmFsdWUiLCJhc3NpZ24iLCJnZXRBY3RpdmVNb2RzIiwiZ2V0TW9kTG9hZE9yZGVyIiwidW5sb2FkTW9kIiwiZGVsZXRlIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwicmVsb2FkTW9kIiwid2luZG93Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/game-engine/core/ModManager.js\n");

/***/ })

};
;