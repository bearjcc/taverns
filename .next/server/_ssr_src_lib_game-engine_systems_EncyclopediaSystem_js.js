"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_src_lib_game-engine_systems_EncyclopediaSystem_js";
exports.ids = ["_ssr_src_lib_game-engine_systems_EncyclopediaSystem_js"];
exports.modules = {

/***/ "(ssr)/./src/lib/game-engine/systems/EncyclopediaSystem.js":
/*!***********************************************************!*\
  !*** ./src/lib/game-engine/systems/EncyclopediaSystem.js ***!
  \***********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EncyclopediaSystem: () => (/* binding */ EncyclopediaSystem)\n/* harmony export */ });\n/* module decorator */ module = __webpack_require__.hmd(module);\n/**\r\n * Encyclopedia System - Manages game data encyclopedia with crosslinking\r\n * Provides organized access to all game content including skills, items, species, etc.\r\n */ class EncyclopediaSystem {\n    constructor(){\n        this.entries = new Map();\n        this.categories = new Map();\n        this.searchIndex = new Map();\n        this.crossReferences = new Map();\n        this.initialized = false;\n    }\n    /**\r\n   * Initialize the encyclopedia with all game data\r\n   * @param {Object} gameData - All loaded game data\r\n   */ async initialize(gameData) {\n        if (this.initialized) return;\n        try {\n            await this.loadSkillsData(gameData.skills || {});\n            await this.loadItemsData(gameData.items || {});\n            await this.loadSpeciesData(gameData.species || {});\n            await this.loadTraitsData(gameData.traits || {});\n            await this.loadLocationsData(gameData.locations || {});\n            await this.loadActionsData(gameData.actions || {});\n            this.buildCrossReferences();\n            this.buildSearchIndex();\n            this.initialized = true;\n            console.log('Encyclopedia system initialized with', this.entries.size, 'entries');\n        } catch (error) {\n            console.error('Failed to initialize encyclopedia system:', error);\n        }\n    }\n    /**\r\n   * Load skills data into encyclopedia\r\n   * @param {Object} skillsData - Skills configuration\r\n   */ async loadSkillsData(skillsData) {\n        const category = 'Skills';\n        this.categories.set(category, {\n            name: category,\n            description: 'All available skills and abilities',\n            icon: 'âš”ï¸',\n            entries: []\n        });\n        for (const [categoryName, categorySkills] of Object.entries(skillsData)){\n            for (const [skillName, skillData] of Object.entries(categorySkills)){\n                const entry = {\n                    id: `skill_${skillName.toLowerCase().replace(/\\s+/g, '_')}`,\n                    type: 'skill',\n                    category: category,\n                    subcategory: categoryName,\n                    name: skillName,\n                    description: skillData.description || 'No description available.',\n                    data: skillData,\n                    tags: [\n                        categoryName.toLowerCase(),\n                        'skill'\n                    ],\n                    crossReferences: []\n                };\n                // Add requirements as cross-references\n                if (skillData.requires) {\n                    entry.requirements = skillData.requires;\n                    entry.crossReferences.push({\n                        type: 'requirement',\n                        target: `skill_${skillData.requires.skill.toLowerCase().replace(/\\s+/g, '_')}`,\n                        description: `Requires ${skillData.requires.skill} level ${skillData.requires.level}`\n                    });\n                }\n                // Add sub-skills as cross-references\n                if (skillData.sub_skills) {\n                    for (const [subSkillName, subSkillData] of Object.entries(skillData.sub_skills)){\n                        entry.crossReferences.push({\n                            type: 'sub-skill',\n                            target: `skill_${subSkillName.toLowerCase().replace(/\\s+/g, '_')}`,\n                            description: `Sub-skill: ${subSkillName}`\n                        });\n                    }\n                }\n                this.entries.set(entry.id, entry);\n                this.categories.get(category).entries.push(entry.id);\n            }\n        }\n    }\n    /**\r\n   * Load items data into encyclopedia\r\n   * @param {Object} itemsData - Items configuration\r\n   */ async loadItemsData(itemsData) {\n        const category = 'Items';\n        this.categories.set(category, {\n            name: category,\n            description: 'All available items and equipment',\n            icon: 'ðŸŽ’',\n            entries: []\n        });\n        for (const [itemId, itemData] of Object.entries(itemsData)){\n            const entry = {\n                id: `item_${itemId}`,\n                type: 'item',\n                category: category,\n                name: itemData.displayName || itemData.name,\n                description: itemData.description || 'No description available.',\n                examineText: itemData.examineText || itemData.description,\n                icon: itemData.icon || 'ðŸ“¦',\n                data: itemData,\n                tags: [\n                    'item'\n                ],\n                crossReferences: []\n            };\n            // Add item type tags\n            if (itemData.stackable !== undefined) {\n                entry.tags.push(itemData.stackable ? 'stackable' : 'unique');\n            }\n            // Add equipment tags\n            if (itemData.equipmentType) {\n                entry.tags.push(itemData.equipmentType);\n                entry.subcategory = itemData.equipmentType;\n            }\n            this.entries.set(entry.id, entry);\n            this.categories.get(category).entries.push(entry.id);\n        }\n    }\n    /**\r\n   * Load species data into encyclopedia\r\n   * @param {Object} speciesData - Species configuration\r\n   */ async loadSpeciesData(speciesData) {\n        const category = 'Species';\n        this.categories.set(category, {\n            name: category,\n            description: 'All playable and non-playable species',\n            icon: 'ðŸ‘¥',\n            entries: []\n        });\n        for (const [categoryName, categorySpecies] of Object.entries(speciesData)){\n            for (const [speciesId, speciesData] of Object.entries(categorySpecies)){\n                const entry = {\n                    id: `species_${speciesId}`,\n                    type: 'species',\n                    category: category,\n                    subcategory: categoryName,\n                    name: speciesData.name || speciesId,\n                    description: speciesData.description || 'No description available.',\n                    icon: 'ðŸ‘¤',\n                    data: speciesData,\n                    tags: [\n                        categoryName,\n                        'species'\n                    ],\n                    crossReferences: []\n                };\n                // Add profession cross-references\n                if (speciesData.professions) {\n                    for (const profession of speciesData.professions){\n                        entry.crossReferences.push({\n                            type: 'profession',\n                            target: `skill_${profession.toLowerCase().replace(/\\s+/g, '_')}`,\n                            description: `Can specialize in ${profession}`\n                        });\n                    }\n                }\n                this.entries.set(entry.id, entry);\n                this.categories.get(category).entries.push(entry.id);\n            }\n        }\n    }\n    /**\r\n   * Load traits data into encyclopedia\r\n   * @param {Object} traitsData - Traits configuration\r\n   */ async loadTraitsData(traitsData) {\n        const category = 'Traits';\n        this.categories.set(category, {\n            name: category,\n            description: 'Character traits and abilities',\n            icon: 'âœ¨',\n            entries: []\n        });\n        for (const [traitId, traitData] of Object.entries(traitsData)){\n            const entry = {\n                id: `trait_${traitId}`,\n                type: 'trait',\n                category: category,\n                name: traitData.name || traitId,\n                description: traitData.description || 'No description available.',\n                icon: 'âœ¨',\n                data: traitData,\n                tags: [\n                    'trait'\n                ],\n                crossReferences: []\n            };\n            this.entries.set(entry.id, entry);\n            this.categories.get(category).entries.push(entry.id);\n        }\n    }\n    /**\r\n   * Load locations data into encyclopedia\r\n   * @param {Object} locationsData - Locations configuration\r\n   */ async loadLocationsData(locationsData) {\n        const category = 'Locations';\n        this.categories.set(category, {\n            name: category,\n            description: 'All game locations and areas',\n            icon: 'ðŸ—ºï¸',\n            entries: []\n        });\n        for (const [locationId, locationData] of Object.entries(locationsData)){\n            const entry = {\n                id: `location_${locationId}`,\n                type: 'location',\n                category: category,\n                name: locationData.name || locationId,\n                description: locationData.description || 'No description available.',\n                icon: 'ðŸ—ºï¸',\n                data: locationData,\n                tags: [\n                    'location'\n                ],\n                crossReferences: []\n            };\n            this.entries.set(entry.id, entry);\n            this.categories.get(category).entries.push(entry.id);\n        }\n    }\n    /**\r\n   * Load actions data into encyclopedia\r\n   * @param {Object} actionsData - Actions configuration\r\n   */ async loadActionsData(actionsData) {\n        const category = 'Actions';\n        this.categories.set(category, {\n            name: category,\n            description: 'All available player actions',\n            icon: 'âš¡',\n            entries: []\n        });\n        for (const [actionId, actionData] of Object.entries(actionsData)){\n            const entry = {\n                id: `action_${actionId}`,\n                type: 'action',\n                category: category,\n                name: actionData.name || actionId,\n                description: actionData.description || 'No description available.',\n                icon: 'âš¡',\n                data: actionData,\n                tags: [\n                    'action'\n                ],\n                crossReferences: []\n            };\n            // Add skill requirement cross-references\n            if (actionData.skillRequired) {\n                entry.crossReferences.push({\n                    type: 'skill-requirement',\n                    target: `skill_${actionData.skillRequired.toLowerCase().replace(/\\s+/g, '_')}`,\n                    description: `Requires ${actionData.skillRequired} skill`\n                });\n            }\n            // Add item requirement cross-references\n            if (actionData.itemsRequired) {\n                for (const itemId of Object.keys(actionData.itemsRequired)){\n                    entry.crossReferences.push({\n                        type: 'item-requirement',\n                        target: `item_${itemId}`,\n                        description: `Requires ${itemId}`\n                    });\n                }\n            }\n            this.entries.set(entry.id, entry);\n            this.categories.get(category).entries.push(entry.id);\n        }\n    }\n    /**\r\n   * Build cross-references between entries\r\n   */ buildCrossReferences() {\n        for (const [entryId, entry] of this.entries){\n            for (const crossRef of entry.crossReferences){\n                const targetEntry = this.entries.get(crossRef.target);\n                if (targetEntry) {\n                    if (!targetEntry.crossReferences) {\n                        targetEntry.crossReferences = [];\n                    }\n                    targetEntry.crossReferences.push({\n                        type: 'reverse',\n                        target: entryId,\n                        description: `Referenced by ${entry.name}`\n                    });\n                }\n            }\n        }\n    }\n    /**\r\n   * Build search index for quick lookups\r\n   */ buildSearchIndex() {\n        for (const [entryId, entry] of this.entries){\n            // Index by name\n            this.addToSearchIndex(entry.name.toLowerCase(), entryId);\n            // Index by description\n            this.addToSearchIndex(entry.description.toLowerCase(), entryId);\n            // Index by tags\n            for (const tag of entry.tags){\n                this.addToSearchIndex(tag.toLowerCase(), entryId);\n            }\n            // Index by subcategory\n            if (entry.subcategory) {\n                this.addToSearchIndex(entry.subcategory.toLowerCase(), entryId);\n            }\n        }\n    }\n    /**\r\n   * Add term to search index\r\n   * @param {string} term - Search term\r\n   * @param {string} entryId - Entry ID to index\r\n   */ addToSearchIndex(term, entryId) {\n        const words = term.split(/\\s+/);\n        for (const word of words){\n            if (word.length >= 2) {\n                if (!this.searchIndex.has(word)) {\n                    this.searchIndex.set(word, new Set());\n                }\n                this.searchIndex.get(word).add(entryId);\n            }\n        }\n    }\n    /**\r\n   * Search encyclopedia entries\r\n   * @param {string} query - Search query\r\n   * @returns {Array} Array of matching entries\r\n   */ search(query) {\n        if (!query || query.length < 2) return [];\n        const queryLower = query.toLowerCase();\n        const queryWords = queryLower.split(/\\s+/);\n        const results = new Map();\n        for (const word of queryWords){\n            if (word.length >= 2) {\n                const matches = this.searchIndex.get(word);\n                if (matches) {\n                    for (const entryId of matches){\n                        const entry = this.entries.get(entryId);\n                        if (entry) {\n                            const score = results.get(entryId) || 0;\n                            results.set(entryId, score + 1);\n                        }\n                    }\n                }\n            }\n        }\n        // Sort by relevance score\n        return Array.from(results.entries()).sort((a, b)=>b[1] - a[1]).map(([entryId])=>this.entries.get(entryId)).filter(Boolean);\n    }\n    /**\r\n   * Get entry by ID\r\n   * @param {string} entryId - Entry ID\r\n   * @returns {Object|null} Entry data or null if not found\r\n   */ getEntry(entryId) {\n        return this.entries.get(entryId) || null;\n    }\n    /**\r\n   * Get all categories\r\n   * @returns {Array} Array of category objects\r\n   */ getCategories() {\n        return Array.from(this.categories.values());\n    }\n    /**\r\n   * Get entries by category\r\n   * @param {string} categoryName - Category name\r\n   * @returns {Array} Array of entries in category\r\n   */ getEntriesByCategory(categoryName) {\n        const category = this.categories.get(categoryName);\n        if (!category) return [];\n        return category.entries.map((entryId)=>this.entries.get(entryId)).filter(Boolean);\n    }\n    /**\r\n   * Get cross-references for an entry\r\n   * @param {string} entryId - Entry ID\r\n   * @returns {Array} Array of cross-reference objects\r\n   */ getCrossReferences(entryId) {\n        const entry = this.entries.get(entryId);\n        if (!entry || !entry.crossReferences) return [];\n        return entry.crossReferences.map((crossRef)=>({\n                ...crossRef,\n                targetEntry: this.entries.get(crossRef.target)\n            })).filter((crossRef)=>crossRef.targetEntry);\n    }\n    /**\r\n   * Get encyclopedia statistics\r\n   * @returns {Object} Statistics about the encyclopedia\r\n   */ getStatistics() {\n        const stats = {\n            totalEntries: this.entries.size,\n            categories: this.categories.size,\n            searchIndexSize: this.searchIndex.size\n        };\n        for (const [categoryName, category] of this.categories){\n            stats[categoryName] = category.entries.length;\n        }\n        return stats;\n    }\n}\n// Export for use in other modules\nif ( true && module.exports) {\n    module.exports = EncyclopediaSystem;\n}\nif (false) {}\n// ES Module exports\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvbGliL2dhbWUtZW5naW5lL3N5c3RlbXMvRW5jeWNsb3BlZGlhU3lzdGVtLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7OztDQUdDLEdBQ0QsTUFBTUE7SUFDSkMsYUFBYztRQUNaLElBQUksQ0FBQ0MsT0FBTyxHQUFHLElBQUlDO1FBQ25CLElBQUksQ0FBQ0MsVUFBVSxHQUFHLElBQUlEO1FBQ3RCLElBQUksQ0FBQ0UsV0FBVyxHQUFHLElBQUlGO1FBQ3ZCLElBQUksQ0FBQ0csZUFBZSxHQUFHLElBQUlIO1FBQzNCLElBQUksQ0FBQ0ksV0FBVyxHQUFHO0lBQ3JCO0lBRUE7OztHQUdDLEdBQ0QsTUFBTUMsV0FBV0MsUUFBUSxFQUFFO1FBQ3pCLElBQUksSUFBSSxDQUFDRixXQUFXLEVBQUU7UUFFdEIsSUFBSTtZQUNGLE1BQU0sSUFBSSxDQUFDRyxjQUFjLENBQUNELFNBQVNFLE1BQU0sSUFBSSxDQUFDO1lBQzlDLE1BQU0sSUFBSSxDQUFDQyxhQUFhLENBQUNILFNBQVNJLEtBQUssSUFBSSxDQUFDO1lBQzVDLE1BQU0sSUFBSSxDQUFDQyxlQUFlLENBQUNMLFNBQVNNLE9BQU8sSUFBSSxDQUFDO1lBQ2hELE1BQU0sSUFBSSxDQUFDQyxjQUFjLENBQUNQLFNBQVNRLE1BQU0sSUFBSSxDQUFDO1lBQzlDLE1BQU0sSUFBSSxDQUFDQyxpQkFBaUIsQ0FBQ1QsU0FBU1UsU0FBUyxJQUFJLENBQUM7WUFDcEQsTUFBTSxJQUFJLENBQUNDLGVBQWUsQ0FBQ1gsU0FBU1ksT0FBTyxJQUFJLENBQUM7WUFFaEQsSUFBSSxDQUFDQyxvQkFBb0I7WUFDekIsSUFBSSxDQUFDQyxnQkFBZ0I7WUFDckIsSUFBSSxDQUFDaEIsV0FBVyxHQUFHO1lBRW5CaUIsUUFBUUMsR0FBRyxDQUFDLHdDQUF3QyxJQUFJLENBQUN2QixPQUFPLENBQUN3QixJQUFJLEVBQUU7UUFDekUsRUFBRSxPQUFPQyxPQUFPO1lBQ2RILFFBQVFHLEtBQUssQ0FBQyw2Q0FBNkNBO1FBQzdE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LE9BQU8sQ0FBQ3NELEdBQUcsQ0FBQzJCLFNBQVNqQyxNQUFNO1lBQy9DLElBQ0MwRCxNQUFNLENBQUN6QixDQUFBQSxXQUFZQSxTQUFTQyxXQUFXO0lBQzVDO0lBRUE7OztHQUdDLEdBQ0QrQixnQkFBZ0I7UUFDZCxNQUFNQyxRQUFRO1lBQ1pDLGNBQWMsSUFBSSxDQUFDbkgsT0FBTyxDQUFDd0IsSUFBSTtZQUMvQnRCLFlBQVksSUFBSSxDQUFDQSxVQUFVLENBQUNzQixJQUFJO1lBQ2hDNEYsaUJBQWlCLElBQUksQ0FBQ2pILFdBQVcsQ0FBQ3FCLElBQUk7UUFDeEM7UUFFQSxLQUFLLE1BQU0sQ0FBQ1EsY0FBY0wsU0FBUyxJQUFJLElBQUksQ0FBQ3pCLFVBQVUsQ0FBRTtZQUN0RGdILEtBQUssQ0FBQ2xGLGFBQWEsR0FBR0wsU0FBUzNCLE9BQU8sQ0FBQ3lGLE1BQU07UUFDL0M7UUFFQSxPQUFPeUI7SUFDVDtBQUNGO0FBRUEsa0NBQWtDO0FBQ2xDLElBQUksS0FBNkIsSUFBSUcsT0FBT0MsT0FBTyxFQUFFO0lBQ25ERCxPQUFPQyxPQUFPLEdBQUd4SDtBQUNuQjtBQUVBLElBQUksS0FBNkIsRUFBRXlILEVBQStDekg7QUFFbEYsb0JBQW9CO0FBQ1UiLCJzb3VyY2VzIjpbIkM6XFxHaXRIdWJcXFNlbGZcXHRhdmVybnNcXHNyY1xcbGliXFxnYW1lLWVuZ2luZVxcc3lzdGVtc1xcRW5jeWNsb3BlZGlhU3lzdGVtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBFbmN5Y2xvcGVkaWEgU3lzdGVtIC0gTWFuYWdlcyBnYW1lIGRhdGEgZW5jeWNsb3BlZGlhIHdpdGggY3Jvc3NsaW5raW5nXHJcbiAqIFByb3ZpZGVzIG9yZ2FuaXplZCBhY2Nlc3MgdG8gYWxsIGdhbWUgY29udGVudCBpbmNsdWRpbmcgc2tpbGxzLCBpdGVtcywgc3BlY2llcywgZXRjLlxyXG4gKi9cclxuY2xhc3MgRW5jeWNsb3BlZGlhU3lzdGVtIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuZW50cmllcyA9IG5ldyBNYXAoKTtcclxuICAgIHRoaXMuY2F0ZWdvcmllcyA9IG5ldyBNYXAoKTtcclxuICAgIHRoaXMuc2VhcmNoSW5kZXggPSBuZXcgTWFwKCk7XHJcbiAgICB0aGlzLmNyb3NzUmVmZXJlbmNlcyA9IG5ldyBNYXAoKTtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluaXRpYWxpemUgdGhlIGVuY3ljbG9wZWRpYSB3aXRoIGFsbCBnYW1lIGRhdGFcclxuICAgKiBAcGFyYW0ge09iamVjdH0gZ2FtZURhdGEgLSBBbGwgbG9hZGVkIGdhbWUgZGF0YVxyXG4gICAqL1xyXG4gIGFzeW5jIGluaXRpYWxpemUoZ2FtZURhdGEpIHtcclxuICAgIGlmICh0aGlzLmluaXRpYWxpemVkKSByZXR1cm47XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgdGhpcy5sb2FkU2tpbGxzRGF0YShnYW1lRGF0YS5za2lsbHMgfHwge30pO1xyXG4gICAgICBhd2FpdCB0aGlzLmxvYWRJdGVtc0RhdGEoZ2FtZURhdGEuaXRlbXMgfHwge30pO1xyXG4gICAgICBhd2FpdCB0aGlzLmxvYWRTcGVjaWVzRGF0YShnYW1lRGF0YS5zcGVjaWVzIHx8IHt9KTtcclxuICAgICAgYXdhaXQgdGhpcy5sb2FkVHJhaXRzRGF0YShnYW1lRGF0YS50cmFpdHMgfHwge30pO1xyXG4gICAgICBhd2FpdCB0aGlzLmxvYWRMb2NhdGlvbnNEYXRhKGdhbWVEYXRhLmxvY2F0aW9ucyB8fCB7fSk7XHJcbiAgICAgIGF3YWl0IHRoaXMubG9hZEFjdGlvbnNEYXRhKGdhbWVEYXRhLmFjdGlvbnMgfHwge30pO1xyXG4gICAgICBcclxuICAgICAgdGhpcy5idWlsZENyb3NzUmVmZXJlbmNlcygpO1xyXG4gICAgICB0aGlzLmJ1aWxkU2VhcmNoSW5kZXgoKTtcclxuICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZygnRW5jeWNsb3BlZGlhIHN5c3RlbSBpbml0aWFsaXplZCB3aXRoJywgdGhpcy5lbnRyaWVzLnNpemUsICdlbnRyaWVzJyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBlbmN5Y2xvcGVkaWEgc3lzdGVtOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIExvYWQgc2tpbGxzIGRhdGEgaW50byBlbmN5Y2xvcGVkaWFcclxuICAgKiBAcGFyYW0ge09iamVjdH0gc2tpbGxzRGF0YSAtIFNraWxscyBjb25maWd1cmF0aW9uXHJcbiAgICovXHJcbiAgYXN5bmMgbG9hZFNraWxsc0RhdGEoc2tpbGxzRGF0YSkge1xyXG4gICAgY29uc3QgY2F0ZWdvcnkgPSAnU2tpbGxzJztcclxuICAgIHRoaXMuY2F0ZWdvcmllcy5zZXQoY2F0ZWdvcnksIHtcclxuICAgICAgbmFtZTogY2F0ZWdvcnksXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnQWxsIGF2YWlsYWJsZSBza2lsbHMgYW5kIGFiaWxpdGllcycsXHJcbiAgICAgIGljb246ICfimpTvuI8nLFxyXG4gICAgICBlbnRyaWVzOiBbXVxyXG4gICAgfSk7XHJcblxyXG4gICAgZm9yIChjb25zdCBbY2F0ZWdvcnlOYW1lLCBjYXRlZ29yeVNraWxsc10gb2YgT2JqZWN0LmVudHJpZXMoc2tpbGxzRGF0YSkpIHtcclxuICAgICAgZm9yIChjb25zdCBbc2tpbGxOYW1lLCBza2lsbERhdGFdIG9mIE9iamVjdC5lbnRyaWVzKGNhdGVnb3J5U2tpbGxzKSkge1xyXG4gICAgICAgIGNvbnN0IGVudHJ5ID0ge1xyXG4gICAgICAgICAgaWQ6IGBza2lsbF8ke3NraWxsTmFtZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJ18nKX1gLFxyXG4gICAgICAgICAgdHlwZTogJ3NraWxsJyxcclxuICAgICAgICAgIGNhdGVnb3J5OiBjYXRlZ29yeSxcclxuICAgICAgICAgIHN1YmNhdGVnb3J5OiBjYXRlZ29yeU5hbWUsXHJcbiAgICAgICAgICBuYW1lOiBza2lsbE5hbWUsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogc2tpbGxEYXRhLmRlc2NyaXB0aW9uIHx8ICdObyBkZXNjcmlwdGlvbiBhdmFpbGFibGUuJyxcclxuICAgICAgICAgIGRhdGE6IHNraWxsRGF0YSxcclxuICAgICAgICAgIHRhZ3M6IFtjYXRlZ29yeU5hbWUudG9Mb3dlckNhc2UoKSwgJ3NraWxsJ10sXHJcbiAgICAgICAgICBjcm9zc1JlZmVyZW5jZXM6IFtdXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gQWRkIHJlcXVpcmVtZW50cyBhcyBjcm9zcy1yZWZlcmVuY2VzXHJcbiAgICAgICAgaWYgKHNraWxsRGF0YS5yZXF1aXJlcykge1xyXG4gICAgICAgICAgZW50cnkucmVxdWlyZW1lbnRzID0gc2tpbGxEYXRhLnJlcXVpcmVzO1xyXG4gICAgICAgICAgZW50cnkuY3Jvc3NSZWZlcmVuY2VzLnB1c2goe1xyXG4gICAgICAgICAgICB0eXBlOiAncmVxdWlyZW1lbnQnLFxyXG4gICAgICAgICAgICB0YXJnZXQ6IGBza2lsbF8ke3NraWxsRGF0YS5yZXF1aXJlcy5za2lsbC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJ18nKX1gLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogYFJlcXVpcmVzICR7c2tpbGxEYXRhLnJlcXVpcmVzLnNraWxsfSBsZXZlbCAke3NraWxsRGF0YS5yZXF1aXJlcy5sZXZlbH1gXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFkZCBzdWItc2tpbGxzIGFzIGNyb3NzLXJlZmVyZW5jZXNcclxuICAgICAgICBpZiAoc2tpbGxEYXRhLnN1Yl9za2lsbHMpIHtcclxuICAgICAgICAgIGZvciAoY29uc3QgW3N1YlNraWxsTmFtZSwgc3ViU2tpbGxEYXRhXSBvZiBPYmplY3QuZW50cmllcyhza2lsbERhdGEuc3ViX3NraWxscykpIHtcclxuICAgICAgICAgICAgZW50cnkuY3Jvc3NSZWZlcmVuY2VzLnB1c2goe1xyXG4gICAgICAgICAgICAgIHR5cGU6ICdzdWItc2tpbGwnLFxyXG4gICAgICAgICAgICAgIHRhcmdldDogYHNraWxsXyR7c3ViU2tpbGxOYW1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzKy9nLCAnXycpfWAsXHJcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGBTdWItc2tpbGw6ICR7c3ViU2tpbGxOYW1lfWBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmVudHJpZXMuc2V0KGVudHJ5LmlkLCBlbnRyeSk7XHJcbiAgICAgICAgdGhpcy5jYXRlZ29yaWVzLmdldChjYXRlZ29yeSkuZW50cmllcy5wdXNoKGVudHJ5LmlkKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTG9hZCBpdGVtcyBkYXRhIGludG8gZW5jeWNsb3BlZGlhXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGl0ZW1zRGF0YSAtIEl0ZW1zIGNvbmZpZ3VyYXRpb25cclxuICAgKi9cclxuICBhc3luYyBsb2FkSXRlbXNEYXRhKGl0ZW1zRGF0YSkge1xyXG4gICAgY29uc3QgY2F0ZWdvcnkgPSAnSXRlbXMnO1xyXG4gICAgdGhpcy5jYXRlZ29yaWVzLnNldChjYXRlZ29yeSwge1xyXG4gICAgICBuYW1lOiBjYXRlZ29yeSxcclxuICAgICAgZGVzY3JpcHRpb246ICdBbGwgYXZhaWxhYmxlIGl0ZW1zIGFuZCBlcXVpcG1lbnQnLFxyXG4gICAgICBpY29uOiAn8J+OkicsXHJcbiAgICAgIGVudHJpZXM6IFtdXHJcbiAgICB9KTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IFtpdGVtSWQsIGl0ZW1EYXRhXSBvZiBPYmplY3QuZW50cmllcyhpdGVtc0RhdGEpKSB7XHJcbiAgICAgIGNvbnN0IGVudHJ5ID0ge1xyXG4gICAgICAgIGlkOiBgaXRlbV8ke2l0ZW1JZH1gLFxyXG4gICAgICAgIHR5cGU6ICdpdGVtJyxcclxuICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnksXHJcbiAgICAgICAgbmFtZTogaXRlbURhdGEuZGlzcGxheU5hbWUgfHwgaXRlbURhdGEubmFtZSxcclxuICAgICAgICBkZXNjcmlwdGlvbjogaXRlbURhdGEuZGVzY3JpcHRpb24gfHwgJ05vIGRlc2NyaXB0aW9uIGF2YWlsYWJsZS4nLFxyXG4gICAgICAgIGV4YW1pbmVUZXh0OiBpdGVtRGF0YS5leGFtaW5lVGV4dCB8fCBpdGVtRGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICBpY29uOiBpdGVtRGF0YS5pY29uIHx8ICfwn5OmJyxcclxuICAgICAgICBkYXRhOiBpdGVtRGF0YSxcclxuICAgICAgICB0YWdzOiBbJ2l0ZW0nXSxcclxuICAgICAgICBjcm9zc1JlZmVyZW5jZXM6IFtdXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBBZGQgaXRlbSB0eXBlIHRhZ3NcclxuICAgICAgaWYgKGl0ZW1EYXRhLnN0YWNrYWJsZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgZW50cnkudGFncy5wdXNoKGl0ZW1EYXRhLnN0YWNrYWJsZSA/ICdzdGFja2FibGUnIDogJ3VuaXF1ZScpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBBZGQgZXF1aXBtZW50IHRhZ3NcclxuICAgICAgaWYgKGl0ZW1EYXRhLmVxdWlwbWVudFR5cGUpIHtcclxuICAgICAgICBlbnRyeS50YWdzLnB1c2goaXRlbURhdGEuZXF1aXBtZW50VHlwZSk7XHJcbiAgICAgICAgZW50cnkuc3ViY2F0ZWdvcnkgPSBpdGVtRGF0YS5lcXVpcG1lbnRUeXBlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmVudHJpZXMuc2V0KGVudHJ5LmlkLCBlbnRyeSk7XHJcbiAgICAgIHRoaXMuY2F0ZWdvcmllcy5nZXQoY2F0ZWdvcnkpLmVudHJpZXMucHVzaChlbnRyeS5pZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBMb2FkIHNwZWNpZXMgZGF0YSBpbnRvIGVuY3ljbG9wZWRpYVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzcGVjaWVzRGF0YSAtIFNwZWNpZXMgY29uZmlndXJhdGlvblxyXG4gICAqL1xyXG4gIGFzeW5jIGxvYWRTcGVjaWVzRGF0YShzcGVjaWVzRGF0YSkge1xyXG4gICAgY29uc3QgY2F0ZWdvcnkgPSAnU3BlY2llcyc7XHJcbiAgICB0aGlzLmNhdGVnb3JpZXMuc2V0KGNhdGVnb3J5LCB7XHJcbiAgICAgIG5hbWU6IGNhdGVnb3J5LFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ0FsbCBwbGF5YWJsZSBhbmQgbm9uLXBsYXlhYmxlIHNwZWNpZXMnLFxyXG4gICAgICBpY29uOiAn8J+RpScsXHJcbiAgICAgIGVudHJpZXM6IFtdXHJcbiAgICB9KTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IFtjYXRlZ29yeU5hbWUsIGNhdGVnb3J5U3BlY2llc10gb2YgT2JqZWN0LmVudHJpZXMoc3BlY2llc0RhdGEpKSB7XHJcbiAgICAgIGZvciAoY29uc3QgW3NwZWNpZXNJZCwgc3BlY2llc0RhdGFdIG9mIE9iamVjdC5lbnRyaWVzKGNhdGVnb3J5U3BlY2llcykpIHtcclxuICAgICAgICBjb25zdCBlbnRyeSA9IHtcclxuICAgICAgICAgIGlkOiBgc3BlY2llc18ke3NwZWNpZXNJZH1gLFxyXG4gICAgICAgICAgdHlwZTogJ3NwZWNpZXMnLFxyXG4gICAgICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5LFxyXG4gICAgICAgICAgc3ViY2F0ZWdvcnk6IGNhdGVnb3J5TmFtZSxcclxuICAgICAgICAgIG5hbWU6IHNwZWNpZXNEYXRhLm5hbWUgfHwgc3BlY2llc0lkLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246IHNwZWNpZXNEYXRhLmRlc2NyaXB0aW9uIHx8ICdObyBkZXNjcmlwdGlvbiBhdmFpbGFibGUuJyxcclxuICAgICAgICAgIGljb246ICfwn5GkJyxcclxuICAgICAgICAgIGRhdGE6IHNwZWNpZXNEYXRhLFxyXG4gICAgICAgICAgdGFnczogW2NhdGVnb3J5TmFtZSwgJ3NwZWNpZXMnXSxcclxuICAgICAgICAgIGNyb3NzUmVmZXJlbmNlczogW11cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBBZGQgcHJvZmVzc2lvbiBjcm9zcy1yZWZlcmVuY2VzXHJcbiAgICAgICAgaWYgKHNwZWNpZXNEYXRhLnByb2Zlc3Npb25zKSB7XHJcbiAgICAgICAgICBmb3IgKGNvbnN0IHByb2Zlc3Npb24gb2Ygc3BlY2llc0RhdGEucHJvZmVzc2lvbnMpIHtcclxuICAgICAgICAgICAgZW50cnkuY3Jvc3NSZWZlcmVuY2VzLnB1c2goe1xyXG4gICAgICAgICAgICAgIHR5cGU6ICdwcm9mZXNzaW9uJyxcclxuICAgICAgICAgICAgICB0YXJnZXQ6IGBza2lsbF8ke3Byb2Zlc3Npb24udG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICdfJyl9YCxcclxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYENhbiBzcGVjaWFsaXplIGluICR7cHJvZmVzc2lvbn1gXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5lbnRyaWVzLnNldChlbnRyeS5pZCwgZW50cnkpO1xyXG4gICAgICAgIHRoaXMuY2F0ZWdvcmllcy5nZXQoY2F0ZWdvcnkpLmVudHJpZXMucHVzaChlbnRyeS5pZCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIExvYWQgdHJhaXRzIGRhdGEgaW50byBlbmN5Y2xvcGVkaWFcclxuICAgKiBAcGFyYW0ge09iamVjdH0gdHJhaXRzRGF0YSAtIFRyYWl0cyBjb25maWd1cmF0aW9uXHJcbiAgICovXHJcbiAgYXN5bmMgbG9hZFRyYWl0c0RhdGEodHJhaXRzRGF0YSkge1xyXG4gICAgY29uc3QgY2F0ZWdvcnkgPSAnVHJhaXRzJztcclxuICAgIHRoaXMuY2F0ZWdvcmllcy5zZXQoY2F0ZWdvcnksIHtcclxuICAgICAgbmFtZTogY2F0ZWdvcnksXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ2hhcmFjdGVyIHRyYWl0cyBhbmQgYWJpbGl0aWVzJyxcclxuICAgICAgaWNvbjogJ+KcqCcsXHJcbiAgICAgIGVudHJpZXM6IFtdXHJcbiAgICB9KTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IFt0cmFpdElkLCB0cmFpdERhdGFdIG9mIE9iamVjdC5lbnRyaWVzKHRyYWl0c0RhdGEpKSB7XHJcbiAgICAgIGNvbnN0IGVudHJ5ID0ge1xyXG4gICAgICAgIGlkOiBgdHJhaXRfJHt0cmFpdElkfWAsXHJcbiAgICAgICAgdHlwZTogJ3RyYWl0JyxcclxuICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnksXHJcbiAgICAgICAgbmFtZTogdHJhaXREYXRhLm5hbWUgfHwgdHJhaXRJZCxcclxuICAgICAgICBkZXNjcmlwdGlvbjogdHJhaXREYXRhLmRlc2NyaXB0aW9uIHx8ICdObyBkZXNjcmlwdGlvbiBhdmFpbGFibGUuJyxcclxuICAgICAgICBpY29uOiAn4pyoJyxcclxuICAgICAgICBkYXRhOiB0cmFpdERhdGEsXHJcbiAgICAgICAgdGFnczogWyd0cmFpdCddLFxyXG4gICAgICAgIGNyb3NzUmVmZXJlbmNlczogW11cclxuICAgICAgfTtcclxuXHJcbiAgICAgIHRoaXMuZW50cmllcy5zZXQoZW50cnkuaWQsIGVudHJ5KTtcclxuICAgICAgdGhpcy5jYXRlZ29yaWVzLmdldChjYXRlZ29yeSkuZW50cmllcy5wdXNoKGVudHJ5LmlkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIExvYWQgbG9jYXRpb25zIGRhdGEgaW50byBlbmN5Y2xvcGVkaWFcclxuICAgKiBAcGFyYW0ge09iamVjdH0gbG9jYXRpb25zRGF0YSAtIExvY2F0aW9ucyBjb25maWd1cmF0aW9uXHJcbiAgICovXHJcbiAgYXN5bmMgbG9hZExvY2F0aW9uc0RhdGEobG9jYXRpb25zRGF0YSkge1xyXG4gICAgY29uc3QgY2F0ZWdvcnkgPSAnTG9jYXRpb25zJztcclxuICAgIHRoaXMuY2F0ZWdvcmllcy5zZXQoY2F0ZWdvcnksIHtcclxuICAgICAgbmFtZTogY2F0ZWdvcnksXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnQWxsIGdhbWUgbG9jYXRpb25zIGFuZCBhcmVhcycsXHJcbiAgICAgIGljb246ICfwn5e677iPJyxcclxuICAgICAgZW50cmllczogW11cclxuICAgIH0pO1xyXG5cclxuICAgIGZvciAoY29uc3QgW2xvY2F0aW9uSWQsIGxvY2F0aW9uRGF0YV0gb2YgT2JqZWN0LmVudHJpZXMobG9jYXRpb25zRGF0YSkpIHtcclxuICAgICAgY29uc3QgZW50cnkgPSB7XHJcbiAgICAgICAgaWQ6IGBsb2NhdGlvbl8ke2xvY2F0aW9uSWR9YCxcclxuICAgICAgICB0eXBlOiAnbG9jYXRpb24nLFxyXG4gICAgICAgIGNhdGVnb3J5OiBjYXRlZ29yeSxcclxuICAgICAgICBuYW1lOiBsb2NhdGlvbkRhdGEubmFtZSB8fCBsb2NhdGlvbklkLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBsb2NhdGlvbkRhdGEuZGVzY3JpcHRpb24gfHwgJ05vIGRlc2NyaXB0aW9uIGF2YWlsYWJsZS4nLFxyXG4gICAgICAgIGljb246ICfwn5e677iPJyxcclxuICAgICAgICBkYXRhOiBsb2NhdGlvbkRhdGEsXHJcbiAgICAgICAgdGFnczogWydsb2NhdGlvbiddLFxyXG4gICAgICAgIGNyb3NzUmVmZXJlbmNlczogW11cclxuICAgICAgfTtcclxuXHJcbiAgICAgIHRoaXMuZW50cmllcy5zZXQoZW50cnkuaWQsIGVudHJ5KTtcclxuICAgICAgdGhpcy5jYXRlZ29yaWVzLmdldChjYXRlZ29yeSkuZW50cmllcy5wdXNoKGVudHJ5LmlkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIExvYWQgYWN0aW9ucyBkYXRhIGludG8gZW5jeWNsb3BlZGlhXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGFjdGlvbnNEYXRhIC0gQWN0aW9ucyBjb25maWd1cmF0aW9uXHJcbiAgICovXHJcbiAgYXN5bmMgbG9hZEFjdGlvbnNEYXRhKGFjdGlvbnNEYXRhKSB7XHJcbiAgICBjb25zdCBjYXRlZ29yeSA9ICdBY3Rpb25zJztcclxuICAgIHRoaXMuY2F0ZWdvcmllcy5zZXQoY2F0ZWdvcnksIHtcclxuICAgICAgbmFtZTogY2F0ZWdvcnksXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnQWxsIGF2YWlsYWJsZSBwbGF5ZXIgYWN0aW9ucycsXHJcbiAgICAgIGljb246ICfimqEnLFxyXG4gICAgICBlbnRyaWVzOiBbXVxyXG4gICAgfSk7XHJcblxyXG4gICAgZm9yIChjb25zdCBbYWN0aW9uSWQsIGFjdGlvbkRhdGFdIG9mIE9iamVjdC5lbnRyaWVzKGFjdGlvbnNEYXRhKSkge1xyXG4gICAgICBjb25zdCBlbnRyeSA9IHtcclxuICAgICAgICBpZDogYGFjdGlvbl8ke2FjdGlvbklkfWAsXHJcbiAgICAgICAgdHlwZTogJ2FjdGlvbicsXHJcbiAgICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5LFxyXG4gICAgICAgIG5hbWU6IGFjdGlvbkRhdGEubmFtZSB8fCBhY3Rpb25JZCxcclxuICAgICAgICBkZXNjcmlwdGlvbjogYWN0aW9uRGF0YS5kZXNjcmlwdGlvbiB8fCAnTm8gZGVzY3JpcHRpb24gYXZhaWxhYmxlLicsXHJcbiAgICAgICAgaWNvbjogJ+KaoScsXHJcbiAgICAgICAgZGF0YTogYWN0aW9uRGF0YSxcclxuICAgICAgICB0YWdzOiBbJ2FjdGlvbiddLFxyXG4gICAgICAgIGNyb3NzUmVmZXJlbmNlczogW11cclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIEFkZCBza2lsbCByZXF1aXJlbWVudCBjcm9zcy1yZWZlcmVuY2VzXHJcbiAgICAgIGlmIChhY3Rpb25EYXRhLnNraWxsUmVxdWlyZWQpIHtcclxuICAgICAgICBlbnRyeS5jcm9zc1JlZmVyZW5jZXMucHVzaCh7XHJcbiAgICAgICAgICB0eXBlOiAnc2tpbGwtcmVxdWlyZW1lbnQnLFxyXG4gICAgICAgICAgdGFyZ2V0OiBgc2tpbGxfJHthY3Rpb25EYXRhLnNraWxsUmVxdWlyZWQudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICdfJyl9YCxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBgUmVxdWlyZXMgJHthY3Rpb25EYXRhLnNraWxsUmVxdWlyZWR9IHNraWxsYFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBBZGQgaXRlbSByZXF1aXJlbWVudCBjcm9zcy1yZWZlcmVuY2VzXHJcbiAgICAgIGlmIChhY3Rpb25EYXRhLml0ZW1zUmVxdWlyZWQpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW1JZCBvZiBPYmplY3Qua2V5cyhhY3Rpb25EYXRhLml0ZW1zUmVxdWlyZWQpKSB7XHJcbiAgICAgICAgICBlbnRyeS5jcm9zc1JlZmVyZW5jZXMucHVzaCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdpdGVtLXJlcXVpcmVtZW50JyxcclxuICAgICAgICAgICAgdGFyZ2V0OiBgaXRlbV8ke2l0ZW1JZH1gLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogYFJlcXVpcmVzICR7aXRlbUlkfWBcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5lbnRyaWVzLnNldChlbnRyeS5pZCwgZW50cnkpO1xyXG4gICAgICB0aGlzLmNhdGVnb3JpZXMuZ2V0KGNhdGVnb3J5KS5lbnRyaWVzLnB1c2goZW50cnkuaWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQnVpbGQgY3Jvc3MtcmVmZXJlbmNlcyBiZXR3ZWVuIGVudHJpZXNcclxuICAgKi9cclxuICBidWlsZENyb3NzUmVmZXJlbmNlcygpIHtcclxuICAgIGZvciAoY29uc3QgW2VudHJ5SWQsIGVudHJ5XSBvZiB0aGlzLmVudHJpZXMpIHtcclxuICAgICAgZm9yIChjb25zdCBjcm9zc1JlZiBvZiBlbnRyeS5jcm9zc1JlZmVyZW5jZXMpIHtcclxuICAgICAgICBjb25zdCB0YXJnZXRFbnRyeSA9IHRoaXMuZW50cmllcy5nZXQoY3Jvc3NSZWYudGFyZ2V0KTtcclxuICAgICAgICBpZiAodGFyZ2V0RW50cnkpIHtcclxuICAgICAgICAgIGlmICghdGFyZ2V0RW50cnkuY3Jvc3NSZWZlcmVuY2VzKSB7XHJcbiAgICAgICAgICAgIHRhcmdldEVudHJ5LmNyb3NzUmVmZXJlbmNlcyA9IFtdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGFyZ2V0RW50cnkuY3Jvc3NSZWZlcmVuY2VzLnB1c2goe1xyXG4gICAgICAgICAgICB0eXBlOiAncmV2ZXJzZScsXHJcbiAgICAgICAgICAgIHRhcmdldDogZW50cnlJZCxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGBSZWZlcmVuY2VkIGJ5ICR7ZW50cnkubmFtZX1gXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEJ1aWxkIHNlYXJjaCBpbmRleCBmb3IgcXVpY2sgbG9va3Vwc1xyXG4gICAqL1xyXG4gIGJ1aWxkU2VhcmNoSW5kZXgoKSB7XHJcbiAgICBmb3IgKGNvbnN0IFtlbnRyeUlkLCBlbnRyeV0gb2YgdGhpcy5lbnRyaWVzKSB7XHJcbiAgICAgIC8vIEluZGV4IGJ5IG5hbWVcclxuICAgICAgdGhpcy5hZGRUb1NlYXJjaEluZGV4KGVudHJ5Lm5hbWUudG9Mb3dlckNhc2UoKSwgZW50cnlJZCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBJbmRleCBieSBkZXNjcmlwdGlvblxyXG4gICAgICB0aGlzLmFkZFRvU2VhcmNoSW5kZXgoZW50cnkuZGVzY3JpcHRpb24udG9Mb3dlckNhc2UoKSwgZW50cnlJZCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBJbmRleCBieSB0YWdzXHJcbiAgICAgIGZvciAoY29uc3QgdGFnIG9mIGVudHJ5LnRhZ3MpIHtcclxuICAgICAgICB0aGlzLmFkZFRvU2VhcmNoSW5kZXgodGFnLnRvTG93ZXJDYXNlKCksIGVudHJ5SWQpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBJbmRleCBieSBzdWJjYXRlZ29yeVxyXG4gICAgICBpZiAoZW50cnkuc3ViY2F0ZWdvcnkpIHtcclxuICAgICAgICB0aGlzLmFkZFRvU2VhcmNoSW5kZXgoZW50cnkuc3ViY2F0ZWdvcnkudG9Mb3dlckNhc2UoKSwgZW50cnlJZCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCB0ZXJtIHRvIHNlYXJjaCBpbmRleFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXJtIC0gU2VhcmNoIHRlcm1cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZW50cnlJZCAtIEVudHJ5IElEIHRvIGluZGV4XHJcbiAgICovXHJcbiAgYWRkVG9TZWFyY2hJbmRleCh0ZXJtLCBlbnRyeUlkKSB7XHJcbiAgICBjb25zdCB3b3JkcyA9IHRlcm0uc3BsaXQoL1xccysvKTtcclxuICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xyXG4gICAgICBpZiAod29yZC5sZW5ndGggPj0gMikge1xyXG4gICAgICAgIGlmICghdGhpcy5zZWFyY2hJbmRleC5oYXMod29yZCkpIHtcclxuICAgICAgICAgIHRoaXMuc2VhcmNoSW5kZXguc2V0KHdvcmQsIG5ldyBTZXQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VhcmNoSW5kZXguZ2V0KHdvcmQpLmFkZChlbnRyeUlkKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2VhcmNoIGVuY3ljbG9wZWRpYSBlbnRyaWVzXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHF1ZXJ5IC0gU2VhcmNoIHF1ZXJ5XHJcbiAgICogQHJldHVybnMge0FycmF5fSBBcnJheSBvZiBtYXRjaGluZyBlbnRyaWVzXHJcbiAgICovXHJcbiAgc2VhcmNoKHF1ZXJ5KSB7XHJcbiAgICBpZiAoIXF1ZXJ5IHx8IHF1ZXJ5Lmxlbmd0aCA8IDIpIHJldHVybiBbXTtcclxuXHJcbiAgICBjb25zdCBxdWVyeUxvd2VyID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcclxuICAgIGNvbnN0IHF1ZXJ5V29yZHMgPSBxdWVyeUxvd2VyLnNwbGl0KC9cXHMrLyk7XHJcbiAgICBjb25zdCByZXN1bHRzID0gbmV3IE1hcCgpO1xyXG5cclxuICAgIGZvciAoY29uc3Qgd29yZCBvZiBxdWVyeVdvcmRzKSB7XHJcbiAgICAgIGlmICh3b3JkLmxlbmd0aCA+PSAyKSB7XHJcbiAgICAgICAgY29uc3QgbWF0Y2hlcyA9IHRoaXMuc2VhcmNoSW5kZXguZ2V0KHdvcmQpO1xyXG4gICAgICAgIGlmIChtYXRjaGVzKSB7XHJcbiAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5SWQgb2YgbWF0Y2hlcykge1xyXG4gICAgICAgICAgICBjb25zdCBlbnRyeSA9IHRoaXMuZW50cmllcy5nZXQoZW50cnlJZCk7XHJcbiAgICAgICAgICAgIGlmIChlbnRyeSkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHNjb3JlID0gcmVzdWx0cy5nZXQoZW50cnlJZCkgfHwgMDtcclxuICAgICAgICAgICAgICByZXN1bHRzLnNldChlbnRyeUlkLCBzY29yZSArIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU29ydCBieSByZWxldmFuY2Ugc2NvcmVcclxuICAgIHJldHVybiBBcnJheS5mcm9tKHJlc3VsdHMuZW50cmllcygpKVxyXG4gICAgICAuc29ydCgoYSwgYikgPT4gYlsxXSAtIGFbMV0pXHJcbiAgICAgIC5tYXAoKFtlbnRyeUlkXSkgPT4gdGhpcy5lbnRyaWVzLmdldChlbnRyeUlkKSlcclxuICAgICAgLmZpbHRlcihCb29sZWFuKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBlbnRyeSBieSBJRFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbnRyeUlkIC0gRW50cnkgSURcclxuICAgKiBAcmV0dXJucyB7T2JqZWN0fG51bGx9IEVudHJ5IGRhdGEgb3IgbnVsbCBpZiBub3QgZm91bmRcclxuICAgKi9cclxuICBnZXRFbnRyeShlbnRyeUlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5lbnRyaWVzLmdldChlbnRyeUlkKSB8fCBudWxsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGFsbCBjYXRlZ29yaWVzXHJcbiAgICogQHJldHVybnMge0FycmF5fSBBcnJheSBvZiBjYXRlZ29yeSBvYmplY3RzXHJcbiAgICovXHJcbiAgZ2V0Q2F0ZWdvcmllcygpIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuY2F0ZWdvcmllcy52YWx1ZXMoKSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgZW50cmllcyBieSBjYXRlZ29yeVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjYXRlZ29yeU5hbWUgLSBDYXRlZ29yeSBuYW1lXHJcbiAgICogQHJldHVybnMge0FycmF5fSBBcnJheSBvZiBlbnRyaWVzIGluIGNhdGVnb3J5XHJcbiAgICovXHJcbiAgZ2V0RW50cmllc0J5Q2F0ZWdvcnkoY2F0ZWdvcnlOYW1lKSB7XHJcbiAgICBjb25zdCBjYXRlZ29yeSA9IHRoaXMuY2F0ZWdvcmllcy5nZXQoY2F0ZWdvcnlOYW1lKTtcclxuICAgIGlmICghY2F0ZWdvcnkpIHJldHVybiBbXTtcclxuXHJcbiAgICByZXR1cm4gY2F0ZWdvcnkuZW50cmllc1xyXG4gICAgICAubWFwKGVudHJ5SWQgPT4gdGhpcy5lbnRyaWVzLmdldChlbnRyeUlkKSlcclxuICAgICAgLmZpbHRlcihCb29sZWFuKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBjcm9zcy1yZWZlcmVuY2VzIGZvciBhbiBlbnRyeVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbnRyeUlkIC0gRW50cnkgSURcclxuICAgKiBAcmV0dXJucyB7QXJyYXl9IEFycmF5IG9mIGNyb3NzLXJlZmVyZW5jZSBvYmplY3RzXHJcbiAgICovXHJcbiAgZ2V0Q3Jvc3NSZWZlcmVuY2VzKGVudHJ5SWQpIHtcclxuICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5lbnRyaWVzLmdldChlbnRyeUlkKTtcclxuICAgIGlmICghZW50cnkgfHwgIWVudHJ5LmNyb3NzUmVmZXJlbmNlcykgcmV0dXJuIFtdO1xyXG5cclxuICAgIHJldHVybiBlbnRyeS5jcm9zc1JlZmVyZW5jZXNcclxuICAgICAgLm1hcChjcm9zc1JlZiA9PiAoe1xyXG4gICAgICAgIC4uLmNyb3NzUmVmLFxyXG4gICAgICAgIHRhcmdldEVudHJ5OiB0aGlzLmVudHJpZXMuZ2V0KGNyb3NzUmVmLnRhcmdldClcclxuICAgICAgfSkpXHJcbiAgICAgIC5maWx0ZXIoY3Jvc3NSZWYgPT4gY3Jvc3NSZWYudGFyZ2V0RW50cnkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGVuY3ljbG9wZWRpYSBzdGF0aXN0aWNzXHJcbiAgICogQHJldHVybnMge09iamVjdH0gU3RhdGlzdGljcyBhYm91dCB0aGUgZW5jeWNsb3BlZGlhXHJcbiAgICovXHJcbiAgZ2V0U3RhdGlzdGljcygpIHtcclxuICAgIGNvbnN0IHN0YXRzID0ge1xyXG4gICAgICB0b3RhbEVudHJpZXM6IHRoaXMuZW50cmllcy5zaXplLFxyXG4gICAgICBjYXRlZ29yaWVzOiB0aGlzLmNhdGVnb3JpZXMuc2l6ZSxcclxuICAgICAgc2VhcmNoSW5kZXhTaXplOiB0aGlzLnNlYXJjaEluZGV4LnNpemVcclxuICAgIH07XHJcblxyXG4gICAgZm9yIChjb25zdCBbY2F0ZWdvcnlOYW1lLCBjYXRlZ29yeV0gb2YgdGhpcy5jYXRlZ29yaWVzKSB7XHJcbiAgICAgIHN0YXRzW2NhdGVnb3J5TmFtZV0gPSBjYXRlZ29yeS5lbnRyaWVzLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc3RhdHM7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBFeHBvcnQgZm9yIHVzZSBpbiBvdGhlciBtb2R1bGVzXHJcbmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xyXG4gIG1vZHVsZS5leHBvcnRzID0gRW5jeWNsb3BlZGlhU3lzdGVtO1xyXG59XHJcblxyXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHdpbmRvdy5FbmN5Y2xvcGVkaWFTeXN0ZW0gPSBFbmN5Y2xvcGVkaWFTeXN0ZW07XHJcblxyXG4vLyBFUyBNb2R1bGUgZXhwb3J0c1xyXG5leHBvcnQgeyBFbmN5Y2xvcGVkaWFTeXN0ZW0gfTsgIl0sIm5hbWVzIjpbIkVuY3ljbG9wZWRpYVN5c3RlbSIsImNvbnN0cnVjdG9yIiwiZW50cmllcyIsIk1hcCIsImNhdGVnb3JpZXMiLCJzZWFyY2hJbmRleCIsImNyb3NzUmVmZXJlbmNlcyIsImluaXRpYWxpemVkIiwiaW5pdGlhbGl6ZSIsImdhbWVEYXRhIiwibG9hZFNraWxsc0RhdGEiLCJza2lsbHMiLCJsb2FkSXRlbXNEYXRhIiwiaXRlbXMiLCJsb2FkU3BlY2llc0RhdGEiLCJzcGVjaWVzIiwibG9hZFRyYWl0c0RhdGEiLCJ0cmFpdHMiLCJsb2FkTG9jYXRpb25zRGF0YSIsImxvY2F0aW9ucyIsImxvYWRBY3Rpb25zRGF0YSIsImFjdGlvbnMiLCJidWlsZENyb3NzUmVmZXJlbmNlcyIsImJ1aWxkU2VhcmNoSW5kZXgiLCJjb25zb2xlIiwibG9nIiwic2l6ZSIsImVycm9yIiwic2tpbGxzRGF0YSIsImNhdGVnb3J5Iiwic2V0IiwibmFtZSIsImRlc2NyaXB0aW9uIiwiaWNvbiIsImNhdGVnb3J5TmFtZSIsImNhdGVnb3J5U2tpbGxzIiwiT2JqZWN0Iiwic2tpbGxOYW1lIiwic2tpbGxEYXRhIiwiZW50cnkiLCJpZCIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsInR5cGUiLCJzdWJjYXRlZ29yeSIsImRhdGEiLCJ0YWdzIiwicmVxdWlyZXMiLCJyZXF1aXJlbWVudHMiLCJwdXNoIiwidGFyZ2V0Iiwic2tpbGwiLCJsZXZlbCIsInN1Yl9za2lsbHMiLCJzdWJTa2lsbE5hbWUiLCJzdWJTa2lsbERhdGEiLCJnZXQiLCJpdGVtc0RhdGEiLCJpdGVtSWQiLCJpdGVtRGF0YSIsImRpc3BsYXlOYW1lIiwiZXhhbWluZVRleHQiLCJzdGFja2FibGUiLCJ1bmRlZmluZWQiLCJlcXVpcG1lbnRUeXBlIiwic3BlY2llc0RhdGEiLCJjYXRlZ29yeVNwZWNpZXMiLCJzcGVjaWVzSWQiLCJwcm9mZXNzaW9ucyIsInByb2Zlc3Npb24iLCJ0cmFpdHNEYXRhIiwidHJhaXRJZCIsInRyYWl0RGF0YSIsImxvY2F0aW9uc0RhdGEiLCJsb2NhdGlvbklkIiwibG9jYXRpb25EYXRhIiwiYWN0aW9uc0RhdGEiLCJhY3Rpb25JZCIsImFjdGlvbkRhdGEiLCJza2lsbFJlcXVpcmVkIiwiaXRlbXNSZXF1aXJlZCIsImtleXMiLCJlbnRyeUlkIiwiY3Jvc3NSZWYiLCJ0YXJnZXRFbnRyeSIsImFkZFRvU2VhcmNoSW5kZXgiLCJ0YWciLCJ0ZXJtIiwid29yZHMiLCJzcGxpdCIsIndvcmQiLCJsZW5ndGgiLCJoYXMiLCJTZXQiLCJhZGQiLCJzZWFyY2giLCJxdWVyeSIsInF1ZXJ5TG93ZXIiLCJxdWVyeVdvcmRzIiwicmVzdWx0cyIsIm1hdGNoZXMiLCJzY29yZSIsIkFycmF5IiwiZnJvbSIsInNvcnQiLCJhIiwiYiIsIm1hcCIsImZpbHRlciIsIkJvb2xlYW4iLCJnZXRFbnRyeSIsImdldENhdGVnb3JpZXMiLCJ2YWx1ZXMiLCJnZXRFbnRyaWVzQnlDYXRlZ29yeSIsImdldENyb3NzUmVmZXJlbmNlcyIsImdldFN0YXRpc3RpY3MiLCJzdGF0cyIsInRvdGFsRW50cmllcyIsInNlYXJjaEluZGV4U2l6ZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJ3aW5kb3ciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/game-engine/systems/EncyclopediaSystem.js\n");

/***/ })

};
;